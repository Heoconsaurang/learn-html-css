;/*FB_PKG_DELIM*/

__d("AppEventField",[],(function(a,b,c,d,e,f){e.exports={ANALYTICS_PARTNER_APP_ID:"_analyticsPartnerAppid",APP_USER_ID:"_app_user_id",APP_VERSION:"_appVersion",CUSTOM_AUDIENCE_PROPERTY_IDS:"_audiencePropertyIds",EVENT_NAME:"_eventName",EVENT_NAME_MD5:"_eventName_md5",FB_CURRENCY:"_currency",IMPLICITLY_LOGGED:"_implicitlyLogged",IN_BACKGROUND:"_inBackground",IS_TIMED_EVENT:"_isTimedEvent",LOG_TIME:"_logTime",ORDER_ID:"fb_order_id",SESSION_ID:"_session_id",UI:"_ui",VALUE_TO_SUM:"_valueToSum",VALUE_TO_UPDATE:"_valueToUpdate",EVENT_NAME_BEFORE_REMAPPED:"_event_name_before_remapped",IS_CODELESS:"_is_fb_codeless",IS_SUGGESTED_EVENT:"_is_suggested_event",IS_REFERRED_PIXEL_EVENT:"_fb_pixel_referral_id",MODEL:"_model",IS_PROTECTED_MODE_ENABLED:"pm",IS_CLIENT_SIDE_MACA_RULES_ENABLED:"cs_maca",FB_PIXEL_PARAMETER:"fb_pixel_id",TRACE_ID:"trace_id",USER_AGENT:"user_agent",SUBSCRIPTION_ID:"subscription_id",SUBSCRIPTION_SID:"subscription_sid",PREDICTED_LTV:"predicted_ltv",BACKEND_INFERRED:"_backendInferred",ANALYTICS_TRACE:"_analyticsTrace",IP_ADDRESS:"ip_address",CLIENT_IP_ADDRESS:"client_ip_address",EVENT_ID:"event_id",RESTRICTED_PARAMS:"_restrictedParams",ON_DEVICE_PARAMS:"_onDeviceParams",PURCHASE_VALID_RESULT_TYPE:"purchase_valid_result_type",CORE_LIB_INCLUDED:"core_lib_included",LOGIN_LIB_INCLUDED:"login_lib_included",SHARE_LIB_INCLUDED:"share_lib_included",PLACE_LIB_INCLUDED:"place_lib_included",MESSENGER_LIB_INCLUDED:"messenger_lib_included",APPLINKS_LIB_INCLUDED:"applinks_lib_included",MARKETING_LIB_INCLUDED:"marketing_lib_included",CODELESS_DEBUG_ACTION:"_codeless_action",MARKETING_LIB_INITIALIZED:"sdk_initialized",BILLING_CLIENT_LIB_INCLUDED:"billing_client_lib_included",BILLING_SERVICE_LIB_INCLUDED:"billing_service_lib_included",USER_DATA_KEYS:"user_data_keys",MATCHED_CUSTOM_AUDIENCE_PROPERTY_IDS:"matched_audience_property_ids",DEVICE_PUSH_TOKEN:"device_push_token",FB_MOBILE_PCKG_FP:"fb_mobile_pckg_fp",FB_MOBILE_APP_CERT_HASH:"fb_mobile_app_cert_hash",ORIGINAL_EVENT_NAME:"original_event_name",APP_EVENT_SEPARABLE_ID:"app_event_user_separable_id_DO_NOT_USE",ENCRYPTED_APP_EVENT_SEPARABLE_ID:"encrypted_app_event_user_separable_id_DO_NOT_USE",AGGREGATE_ID:"_aggregate_id",ANONYMOUS_ID:"_anonymous_id",CAMPAIGN_IDS:"_campaign_ids",VENDOR_ID:"_vendor_id",COUNT:"$aggr.count"}}),null);
__d("CloudGamingPlayerContainer_game$normalization.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Variable",name:"cloud_binary_id",variableName:"CloudGamingPlayerContainer_game$cloudBinaryID"}];return{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"CloudGamingPlayerContainer_game$automatedInputConfigName"},{defaultValue:null,kind:"LocalArgument",name:"CloudGamingPlayerContainer_game$cloudBinaryID"}],kind:"SplitOperation",metadata:{},name:"CloudGamingPlayerContainer_game$normalization",selections:[{alias:"instantGameInfo",args:null,concreteType:"GamesInstantPlayStyleInfo",kind:"LinkedField",name:"instant_game_info",plural:!1,selections:[{alias:"cloudGameActiveWarningTimeout",args:null,kind:"ScalarField",name:"cloud_game_active_warning_timeout",storageKey:null},{alias:"cloudGameConfigFlags",args:a,concreteType:"CloudGameConfigFlags",kind:"LinkedField",name:"cloud_game_config_flags",plural:!1,selections:[{alias:"enableFullyLockedMouse",args:null,kind:"ScalarField",name:"enable_fully_locked_mouse",storageKey:null},{alias:"enableLockedMouse",args:null,kind:"ScalarField",name:"enable_locked_mouse",storageKey:null},{alias:"enableMultiTouchOverlay",args:null,kind:"ScalarField",name:"enable_multi_touch_overlay",storageKey:null},{alias:"enableWarningAlerts",args:null,kind:"ScalarField",name:"enable_warning_alerts",storageKey:null},{alias:"useSDKDebugPrint",args:null,kind:"ScalarField",name:"use_sdk_debug_print",storageKey:null}],storageKey:null},{alias:"cloudGameFixedAspectRatioOnPC",args:null,kind:"ScalarField",name:"cloud_game_fixed_aspect_ratio_on_pc",storageKey:null},{alias:"cloudGameID",args:null,kind:"ScalarField",name:"cloud_game_id",storageKey:null},{alias:"gameName",args:null,kind:"ScalarField",name:"game_name",storageKey:null},{alias:"gameOrientation",args:a,kind:"ScalarField",name:"game_orientation",storageKey:null},{alias:"gamesProviderType",args:null,kind:"ScalarField",name:"games_provider_type",storageKey:null},{alias:"gameRotationAllowed",args:null,kind:"ScalarField",name:"game_rotation_allowed",storageKey:null},{alias:"automatedInputConfig",args:[{kind:"Variable",name:"config_name",variableName:"CloudGamingPlayerContainer_game$automatedInputConfigName"}],kind:"ScalarField",name:"cloud_game_automated_inputs",storageKey:null},{alias:"sendEscOnFocusLost",args:null,kind:"ScalarField",name:"send_esc_on_focus_lost",storageKey:null},{alias:"dynamicResolution",args:null,kind:"ScalarField",name:"dynamic_resolution",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]}}();e.exports=a}),null);
__d("CloudGamingPlayerContainer_game.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Variable",name:"cloud_binary_id",variableName:"cloudBinaryID"}];return{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"automatedInputConfigName"},{defaultValue:null,kind:"LocalArgument",name:"cloudBinaryID"}],kind:"Fragment",metadata:null,name:"CloudGamingPlayerContainer_game",selections:[{alias:"instantGameInfo",args:null,concreteType:"GamesInstantPlayStyleInfo",kind:"LinkedField",name:"instant_game_info",plural:!1,selections:[{alias:"cloudGameActiveWarningTimeout",args:null,kind:"ScalarField",name:"cloud_game_active_warning_timeout",storageKey:null},{alias:"cloudGameConfigFlags",args:a,concreteType:"CloudGameConfigFlags",kind:"LinkedField",name:"cloud_game_config_flags",plural:!1,selections:[{alias:"enableFullyLockedMouse",args:null,kind:"ScalarField",name:"enable_fully_locked_mouse",storageKey:null},{alias:"enableLockedMouse",args:null,kind:"ScalarField",name:"enable_locked_mouse",storageKey:null},{alias:"enableMultiTouchOverlay",args:null,kind:"ScalarField",name:"enable_multi_touch_overlay",storageKey:null},{alias:"enableWarningAlerts",args:null,kind:"ScalarField",name:"enable_warning_alerts",storageKey:null},{alias:"useSDKDebugPrint",args:null,kind:"ScalarField",name:"use_sdk_debug_print",storageKey:null}],storageKey:null},{alias:"cloudGameFixedAspectRatioOnPC",args:null,kind:"ScalarField",name:"cloud_game_fixed_aspect_ratio_on_pc",storageKey:null},{alias:"cloudGameID",args:null,kind:"ScalarField",name:"cloud_game_id",storageKey:null},{alias:"gameName",args:null,kind:"ScalarField",name:"game_name",storageKey:null},{alias:"gameOrientation",args:a,kind:"ScalarField",name:"game_orientation",storageKey:null},{alias:"gamesProviderType",args:null,kind:"ScalarField",name:"games_provider_type",storageKey:null},{args:[{kind:"Variable",name:"cloudBinaryID",variableName:"cloudBinaryID"}],kind:"FragmentSpread",name:"CloudGamingPlayerMobileContainer_game"},{args:[{kind:"Variable",name:"automatedInputConfigName",variableName:"automatedInputConfigName"}],kind:"FragmentSpread",name:"CloudGamingStandaloneStarter_game"}],storageKey:null}],type:"XFBCloudPlayerRoot",abstractKey:null}}();e.exports=a}),null);
__d("CloudGamingPlayerMobileContainer_game.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"cloudBinaryID"}],kind:"Fragment",metadata:null,name:"CloudGamingPlayerMobileContainer_game",selections:[{args:[{kind:"Variable",name:"cloudBinaryID",variableName:"cloudBinaryID"}],kind:"FragmentSpread",name:"useGamesMobileContainerStyle_game"}],type:"GamesInstantPlayStyleInfo",abstractKey:null};e.exports=a}),null);
__d("CloudGamingContainer_game.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"automatedInputConfigName"}],kind:"Fragment",metadata:null,name:"CloudGamingContainer_game",selections:[{alias:"automatedInputConfig",args:[{kind:"Variable",name:"config_name",variableName:"automatedInputConfigName"}],kind:"ScalarField",name:"cloud_game_automated_inputs",storageKey:null},{alias:"sendEscOnFocusLost",args:null,kind:"ScalarField",name:"send_esc_on_focus_lost",storageKey:null},{alias:"dynamicResolution",args:null,kind:"ScalarField",name:"dynamic_resolution",storageKey:null}],type:"GamesInstantPlayStyleInfo",abstractKey:null};e.exports=a}),null);
__d("CloudGamingStandaloneStarter_game.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"automatedInputConfigName"}],kind:"Fragment",metadata:null,name:"CloudGamingStandaloneStarter_game",selections:[{args:[{kind:"Variable",name:"automatedInputConfigName",variableName:"automatedInputConfigName"}],kind:"FragmentSpread",name:"CloudGamingContainer_game"}],type:"GamesInstantPlayStyleInfo",abstractKey:null};e.exports=a}),null);
__d("CloudHorizonMobileTopBarQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5359832804107821"}),null);
__d("CloudHorizonMobileTopBarQuery.graphql",["CloudHorizonMobileTopBarQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"appID"}],c=[{kind:"Variable",name:"id",variableName:"appID"}],d={alias:"allowMobileFullscreen",args:null,kind:"ScalarField",name:"allow_mobile_fullscreen",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CloudHorizonMobileTopBarQuery",selections:[{alias:"application",args:c,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:"gameInfo",args:null,concreteType:"GamesInstantPlayStyleInfo",kind:"LinkedField",name:"instant_game_info",plural:!1,selections:[d],storageKey:null}],type:"Application",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CloudHorizonMobileTopBarQuery",selections:[{alias:"application",args:c,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:"gameInfo",args:null,concreteType:"GamesInstantPlayStyleInfo",kind:"LinkedField",name:"instant_game_info",plural:!1,selections:[d,e],storageKey:null}],type:"Application",abstractKey:null},e],storageKey:null}]},params:{id:b("CloudHorizonMobileTopBarQuery_facebookRelayOperation"),metadata:{},name:"CloudHorizonMobileTopBarQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CloudGamingVirtualGamepadConfigQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5034761426607732"}),null);
__d("CloudGamingVirtualGamepadConfigQuery.graphql",["CloudGamingVirtualGamepadConfigQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"appID"}],c=[{kind:"Variable",name:"game",variableName:"appID"}],d={alias:null,args:null,kind:"ScalarField",name:"collision_shape",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"widget_color",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"enabled",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"game_state",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"widget_image_uri",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"is_toggle",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"keycode",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"widget_orientation",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"pos_x",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"pos_y",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"press_color",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"scale",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"toggle_color",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"toggle_time",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"widget_type",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"widget_gyro_turn_limit",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"widget_gyro_pitch_limit",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"widget_vibration",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"blocking_region_size_x",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"blocking_region_size_y",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CloudGamingVirtualGamepadConfigQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:c,concreteType:"InstantGameInfoWithSupportCheck",kind:"LinkedField",name:"instant_game_info_with_support_check",plural:!1,selections:[{alias:null,args:null,concreteType:"Application",kind:"LinkedField",name:"application",plural:!1,selections:[{alias:null,args:null,concreteType:"GamesInstantPlayStyleInfo",kind:"LinkedField",name:"instant_game_info",plural:!1,selections:[{alias:null,args:null,concreteType:"CloudGamingVirtualGamepad",kind:"LinkedField",name:"gredos_virtual_gamepad",plural:!0,selections:[d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CloudGamingVirtualGamepadConfigQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:c,concreteType:"InstantGameInfoWithSupportCheck",kind:"LinkedField",name:"instant_game_info_with_support_check",plural:!1,selections:[{alias:null,args:null,concreteType:"Application",kind:"LinkedField",name:"application",plural:!1,selections:[{alias:null,args:null,concreteType:"GamesInstantPlayStyleInfo",kind:"LinkedField",name:"instant_game_info",plural:!1,selections:[{alias:null,args:null,concreteType:"CloudGamingVirtualGamepad",kind:"LinkedField",name:"gredos_virtual_gamepad",plural:!0,selections:[d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y],storageKey:null},y],storageKey:null},y],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("CloudGamingVirtualGamepadConfigQuery_facebookRelayOperation"),metadata:{},name:"CloudGamingVirtualGamepadConfigQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("ExternalLinkAllowedDomainsQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4727036477393716"}),null);
__d("ExternalLinkAllowedDomainsQuery.graphql",["ExternalLinkAllowedDomainsQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"appID"}],c=[{kind:"Variable",name:"game",variableName:"appID"}],d={alias:null,args:null,kind:"ScalarField",name:"allowed_domains_for_external_links",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"ExternalLinkAllowedDomainsQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:c,concreteType:"InstantGameInfoWithSupportCheck",kind:"LinkedField",name:"instant_game_info_with_support_check",plural:!1,selections:[{alias:null,args:null,concreteType:"Application",kind:"LinkedField",name:"application",plural:!1,selections:[{alias:null,args:null,concreteType:"GamesInstantPlayStyleInfo",kind:"LinkedField",name:"instant_game_info",plural:!1,selections:[d],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"ExternalLinkAllowedDomainsQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:c,concreteType:"InstantGameInfoWithSupportCheck",kind:"LinkedField",name:"instant_game_info_with_support_check",plural:!1,selections:[{alias:null,args:null,concreteType:"Application",kind:"LinkedField",name:"application",plural:!1,selections:[{alias:null,args:null,concreteType:"GamesInstantPlayStyleInfo",kind:"LinkedField",name:"instant_game_info",plural:!1,selections:[d,e],storageKey:null},e],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("ExternalLinkAllowedDomainsQuery_facebookRelayOperation"),metadata:{},name:"ExternalLinkAllowedDomainsQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useCloudGamingNegotiateSDPMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6626697317344374"}),null);
__d("useCloudGamingNegotiateSDPMutation.graphql",["useCloudGamingNegotiateSDPMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"XFBCloudNegotiateSDPTResponsePayload",kind:"LinkedField",name:"xfb_cloud_gaming_negotiate_sdp",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"sdp_answer",storageKey:null},{alias:null,args:null,concreteType:"XFBCloudNegotiateSDPScreenSize",kind:"LinkedField",name:"screen_size",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"error_message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"input_channel_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lifecycle_channel_label",storageKey:null},{alias:null,args:null,concreteType:"XFBRTCPurposeToLabel",kind:"LinkedField",name:"purpose_to_label",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"input",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lifecycle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"input_unreliable",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_enqueued",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useCloudGamingNegotiateSDPMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useCloudGamingNegotiateSDPMutation",selections:c},params:{id:b("useCloudGamingNegotiateSDPMutation_facebookRelayOperation"),metadata:{},name:"useCloudGamingNegotiateSDPMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("FBEventsParamList",[],(function(a,b,c,d,e,f){"use strict";var g="deep",h="shallow";a=function(){function a(){this.list=[]}var b=a.prototype;b.append=function(a,b){this.$1(encodeURIComponent(a),b,g)};b.each=function(a){var b=this.list;for(var c=0,d=b.length;c<d;c++)a(b[c][0],b[c][1])};b.toQueryString=function(){var a=[];this.each(function(b,c){a.push(b+"="+encodeURIComponent(c))});return a.join("&")};b.$1=function(a,b,c){Object(b)!==b?this.$2(a,b):c===g?this.$3(a,b):this.$2(a,i(b))};b.$2=function(a,b){b!=null&&this.list.push([a,b])};b.$3=function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c)){var d=a+"["+encodeURIComponent(c)+"]";this.$1(d,b[c],h)}};return a}();function i(a){if(typeof JSON==="undefined"||JSON===null||!JSON.stringify)return Object.prototype.toString.call(a);else return JSON.stringify(a)}f["default"]=a}),66);
__d("EventTimeUtils",[],(function(a,b,c,d,e,f){var g;function h(){return window.performance!==void 0&&window.performance.timeOrigin!==void 0?Math.floor(1e3*(window.performance.timeOrigin+window.performance.now())):Date.now()*1e3}function a(){var a=h();g!==void 0&&g===a&&(a+=1);g=a;return a}f.tryGetTimestampInMicroSecond=a}),66);
__d("ApertureMapTouch",["EventTimeUtils"],(function(a,b,c,d,e,f,g){function h(a,b,c){if(a.target!=null&&a.target.getBoundingClientRect!=null){var d=a.target.getBoundingClientRect(),e=c?c.width:d.width;c=c?c.height:d.height;return{x:Math.round((a.clientX-d.left-(d.width-e)/2)*b.width/e),y:Math.round((a.clientY-d.top)*b.height/c)}}else return{x:a.clientX,y:a.clientY}}function i(a,b,c){if(a.changedTouches!=null){var d=[];for(var e=0;e<a.changedTouches.length;e++){var f=a.changedTouches[e];d.push({position:h(f,b,c),index:f.identifier})}return d}return[{position:h(a,b,c),index:0}]}function a(a,b,c){return i(a,b,c).map(function(a){return{type:"MOUSE_DOWN",position:a.position,index:a.index,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),originalIndex:a.index}})}function b(a,b,c){return i(a,b,c).map(function(a){return{type:"MOUSE_MOVE",position:a.position,index:a.index,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),originalIndex:a.index}})}function c(a,b,c){return i(a,b,c).map(function(a){return{type:"MOUSE_UP",position:a.position,index:a.index,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),originalIndex:a.index}})}function e(a,b,c){return i(a,b,c).map(function(b){return{type:"MOUSE_WHEEL",position:b.position,index:b.index,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),originalIndex:b.index,wheel:a.wheelDelta}})}g.mouseDown=a;g.mouseMove=b;g.mouseUp=c;g.mouseWheel=e}),98);
__d("ApertureConstants",[],(function(a,b,c,d,e,f){"use strict";a="ApertureVideoComponent";f.videoComponentID=a}),66);
__d("ChevronDownFilled24.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsxs("svg",babelHelpers["extends"]({fill:"currentColor",viewBox:"0 0 24 24",width:"1em",height:"1em"},a,{children:[a.title!=null&&h.jsx("title",{children:a.title}),a.children!=null&&h.jsx("defs",{children:a.children}),h.jsx("path",{d:"M18.793 9.209 12 16 5.207 9.209a1 1 0 1 0-1.414 1.415l7.5 7.5a1 1 0 0 0 1.414 0l7.5-7.5a1 1 0 1 0-1.414-1.415z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("ChevronUpFilled24.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsxs("svg",babelHelpers["extends"]({fill:"currentColor",viewBox:"0 0 24 24",width:"1em",height:"1em"},a,{children:[a.title!=null&&h.jsx("title",{children:a.title}),a.children!=null&&h.jsx("defs",{children:a.children}),h.jsx("path",{d:"M18.793 14.791 12 8l-6.793 6.791a1 1 0 1 1-1.414-1.415l7.5-7.5a1 1 0 0 1 1.414 0l7.5 7.5a1 1 0 1 1-1.414 1.415z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("CloudGamingPlayerMobileContainer.react",["CloudGamingPlayerMobileContainer_game.graphql","CometRelay","react","useGamesMobileContainerStyle"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react"),j=h!==void 0?h:h=b("CloudGamingPlayerMobileContainer_game.graphql");function a(a){var b=a.children,e=a.game;a=a.gameState;e=d("CometRelay").useFragment(j,e);e=c("useGamesMobileContainerStyle")(e,a);return i.jsx("div",{className:"x1i10hfl xpdipgo x1winvzj x6umtig x1b1mbwd xaqea5y xav7gou xt0psk2 xqtp20y xdj266r x11i5rnm xat24cr x1mh8g0r xmz0i5r x193iq5w x1us19tq xgqtt45 x1a2a7pz xexx8yu x4uap5 x18d9i69 xkhd6sd x87ps6o xnalus7",style:e,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CloudGamingActionTypes",[],(function(a,b,c,d,e,f){"use strict";a={AUDIO_MUTED:"AUDIO_MUTED",AUDIO_UNMUTED:"AUDIO_UNMUTED",CHANGE_RESOURCE_DIMENSIONS:"CHANGE_RESOURCE_DIMENSIONS",CLEAN_WARNING_METRIC:"CLEAN_WARNING_METRIC",CLIENT_RECEIVE_SDK_MESSAGE:"CLIENT_RECEIVE_SDK_MESSAGE",CLIENT_SEND_SDK_MESSAGE:"CLIENT_SEND_SDK_MESSAGE",CLOSE_NOTIFICATION:"CLOSE_NOTIFICATION",CONNECTION_CLOSED_DURING_NEGOTIATION:"CONNECTION_CLOSED_DURING_NEGOTIATION",CONNECTION_ENQUEUED:"CONNECTION_ENQUEUED",CONNECTION_ERROR:"CONNECTION_ERROR",CONTAINER_RESIZE:"CONTAINER_RESIZE",CREATE_SDP_OFFER:"CREATE_SDP_OFFER",CURSOR_BUTTON:"CURSOR_BUTTON",CURSOR_MOVEMENT:"CURSOR_MOVEMENT",CURSOR_WHEEL:"CURSOR_WHEEL",DISCONNECT:"DISCONNECT",FATAL_ERROR:"FATAL_ERROR",FINISH_GAME:"FINISH_GAME",GAME_READY:"GAME_READY",GAME_READY_RETRY:"GAME_READY_RETRY",GAMEPAD_GREDOS:"GAMEPAD_GREDOS",HIDE_MULTI_TOUCH_OVERLAY:"HIDE_MULTI_TOUCH_OVERLAY",HIDE_WARNING_DIALOG:"HIDE_WARNING_DIALOG",HORIZON_LOADING_COMPLETE:"HORIZON_LOADING_COMPLETE",ICE_CANDIDATE_ERROR:"ICE_CANDIDATE_ERROR",IN_GAME_STATE:"IN_GAME_STATE",INACTIVATE_GAME:"INACTIVATE_GAME",INPUT_FEEDBACK:"INPUT_FEEDBACK",KEYBOARD_LAYOUT:"KEYBOARD_LAYOUT",MICROPHONE_ACTIVITY:"MICROPHONE_ACTIVITY",MICROPHONE_DEVICE_AVAILABLE:"MICROPHONE_DEVICE_AVAILABLE",MICROPHONE_DISABLED:"MICROPHONE_DISABLED",MICROPHONE_ENABLE_FAILED:"MICROPHONE_ENABLE_FAILED",MICROPHONE_ENABLE_SUCCESS:"MICROPHONE_ENABLE_SUCCESS",MICROPHONE_NEGOTIATION_SUCCESS:"MICROPHONE_NEGOTIATION_SUCCESS",MICROPHONE_SUPPORTED_IN_GAME:"MICROPHONE_SUPPORTED_IN_GAME",MICROPHONE_TRANSCEIVER_CREATED:"MICROPHONE_TRANSCEIVER_CREATED",PAUSE_GAME:"PAUSE_GAME",PEER_CONNECTION_CONNECTED:"PEER_CONNECTION_CONNECTED",PEER_CONNECTION_CREATED:"PEER_CONNECTION_CREATED",PEER_CONNECTION_FAILED:"PEER_CONNECTION_FAILED",REACTIVATE_GAME:"REACTIVATE_GAME",REALLOCATE:"REALLOCATE",RECEIVED_SDP_ANSWER:"RECEIVED_SDP_ANSWER",RESOURCE_SELECTED:"RESOURCE_SELECTED",RESUME_GAME:"RESUME_GAME",SDK_INITIALIZED:"SDK_INITIALIZED",SEND_SDP_OFFER:"SEND_SDP_OFFER",SESSION_END_CLEANUP:"SESSION_END_CLEANUP",SESSION_INIT_SETUP:"SESSION_INIT_SETUP",SET_POINTERS_COORDINATES:"SET_POINTERS_COORDINATES",SHOW_MULTI_TOUCH_OVERLAY:"SHOW_MULTI_TOUCH_OVERLAY",SHOW_WARNING_DIALOG:"SHOW_WARNING_DIALOG",SILENT_RETRY:"SILENT_RETRY",START_DELAYED_CONNECTION_ERROR:"START_DELAYED_CONNECTION_ERROR",STOP_DELAYED_CONNECTION_ERROR:"STOP_DELAYED_CONNECTION_ERROR",TOUCH_DOWN:"TOUCH_DOWN",TOUCH_MOVE:"TOUCH_MOVE",TOUCH_UP:"TOUCH_UP",VIDEO_FRAME:"VIDEO_FRAME",VIRTUAL_GAMEPAD:"VIRTUAL_GAMEPAD",WARNING_METRIC:"WARNING_METRIC"};b=a;f["default"]=b}),66);
__d("CloudGamingClientFbts",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a={CAPACITY_ERROR_DESCRIPTION_TEXT:h._("__JHASH__akPpsjts8z8__JHASH__"),CAPACITY_ERROR_TEXT:h._("__JHASH__k0xOLmgMDSM__JHASH__"),CLOSE_TEXT:h._("__JHASH__kFjMdU6FQFu__JHASH__"),CONNECTION_ERROR_DESCRIPTION_TEXT:null,CONNECTION_ERROR_TEXT:h._("__JHASH__O4UverqosiG__JHASH__"),CONNECTION_TIMEOUT_DESCRIPTION_TEXT:null,CONNECTION_TIMEOUT_TEXT:h._("__JHASH__UqcY05yXRJD__JHASH__"),CONNECTION_TIMEOUT_WARNING_TEXT:h._("__JHASH__jambn6lsAXu__JHASH__"),COPY_GAME_LINK_TEXT:h._("__JHASH__NfzdXfHRUZd__JHASH__"),DONT_SHOW_AGAIN_TEXT:h._("__JHASH__S8MK3omZmfG__JHASH__"),GAME_COULD_NOT_BE_LOADED_TEXT:h._("__JHASH__gZ251cBnWos__JHASH__"),GAME_NODE_IN_USE_DESCRIPTION_TEXT:h._("__JHASH__-o18DYA_JR-__JHASH__"),GAME_NODE_IN_USE_TEXT:h._("__JHASH__pH_Ux-qj7H8__JHASH__"),GAME_NODE_TERMINATING_TEXT:h._("__JHASH__dqhC1qPbQfI__JHASH__"),H264_ERROR_DESCRIPTION_TEXT:h._("__JHASH__NoPU8-DQFYg__JHASH__"),H264_ERROR_TEXT:h._("__JHASH__zC1maqHwC1k__JHASH__"),LEARN_MORE_TEXT:h._("__JHASH__jnHH9CMW5Nr__JHASH__"),NETWORK_NOTIFICATION_TEXT:h._("__JHASH__j3knpQe59oG__JHASH__"),NETWORK_QUALITY_TIP_0_TEXT:h._("__JHASH__H-rSDh9lotE__JHASH__"),NETWORK_QUALITY_TIP_1_TEXT:h._("__JHASH__0Fu2ZT-eCZx__JHASH__"),NETWORK_QUALITY_TIP_2_TEXT:h._("__JHASH__B1p-YqdZDr3__JHASH__"),NETWORK_QUALITY_TIP_3_TEXT:h._("__JHASH__jz5VkNaCggp__JHASH__"),NETWORK_QUALITY_TIP_4_TEXT:h._("__JHASH__sSmq7s6pOyo__JHASH__"),NETWORK_QUALITY_TITLE_TEXT:h._("__JHASH__ZQ3bHYK004Z__JHASH__"),PLAY_AGAIN_TEXT:h._("__JHASH__5V2CrqBEy1S__JHASH__"),PLAY_IN_FULL_SCREEN:h._("__JHASH__jaLvtOytgXM__JHASH__"),PLAY_IN_FULL_SCREEN_EXIT:h._("__JHASH__mjUY1CSP4JF__JHASH__"),PLAY_IN_FULL_SCREEN_INSTRUCTIONS:h._("__JHASH__fmBvqgwfqiE__JHASH__"),PLEASE_UPGRADE_ANDROID_WEBVIEW_VS:h._("__JHASH__A0cw40Tux92__JHASH__"),PLEASE_UPGRADE_FACEBOOK_FOR_ANDROID:h._("__JHASH__sV-B9V7bXnO__JHASH__"),PLEASE_UPGRADE_MOBILE_OS_VS:h._("__JHASH__99odIFW9u3O__JHASH__"),REGION_UNAVAILABLE_TEXT:h._("__JHASH__lR0r3ndd4oA__JHASH__"),RETRY_TEXT:h._("__JHASH__LOv0HFIh8Ek__JHASH__"),RETURN_GAMING_TEXT:h._("__JHASH__LJmSrf6MshV__JHASH__"),SAVE_ERROR_TEXT:h._("__JHASH__x6BUVnvAdo3__JHASH__"),TOUCH_SCREEN_TO_OPEN_KEYBOARD_TEXT:h._("__JHASH__J-jIS6QICIi__JHASH__"),TRY_AGAIN_TEXT:h._("__JHASH__3DIUHpq7-AC__JHASH__"),UNABLE_CONNECT_SERVER_TEXT:h._("__JHASH__Yitef8vyF53__JHASH__"),UNSUPPORTED_BROWSER_HEADER:h._("__JHASH__0nnENLkRlRh__JHASH__"),UNSUPPORTED_DEVICE_HEADER:h._("__JHASH__Yw3II2DzCqP__JHASH__"),UNSUPPORTED_GAME_TEXT:h._("__JHASH__mUkdpJ6-US1__JHASH__"),UNSUPPORTED_OS_HEADER:h._("__JHASH__m5drXoHMkmM__JHASH__"),UPDATE_BROWSER_HEADER:h._("__JHASH__yGiz6F32zZc__JHASH__"),UPDATE_FB4A_TEXT:h._("__JHASH__gO4qx9fVg-S__JHASH__"),WARNING_EXIT_TEXT:h._("__JHASH__ZT7vDBoVNVd__JHASH__"),getClipboardDisabledMessage:function(a){return h._("__JHASH__sClZ8ocHNxp__JHASH__")},getClipboardEnabledMessage:function(a){return h._("__JHASH__5_92KKUP2uI__JHASH__")},getRefreshToRestartGameMessage:function(a){return h._("__JHASH__db_so03W__t__JHASH__",[h._param("gameName",a)])},getServerRestartMessage:function(a){if(a>60){var b=Math.round(a/60);return h._("__JHASH__DdP929ZaxWB__JHASH__",[h._plural(b,"number")])}else if(a>0)return h._("__JHASH__ZXTLKhk73vF__JHASH__",[h._plural(a,"number")]);else return h._("__JHASH__iRXft6DwZO2__JHASH__")},getUnsupportedBrowserMessage:function(a){return h._("__JHASH__INFe44gDx1m__JHASH__",[h._param("gameName",a)])},getUnsupportedDeviceMessage:function(a){return h._("__JHASH__f7lqzGWCxoN__JHASH__",[h._param("gameName",a)])},getUnsupportedOSMessage:function(a){return h._("__JHASH__zwBvwmrpKfl__JHASH__",[h._param("gameName",a)])},getUpdateBrowserMessage:function(a){return h._("__JHASH__rXDClzYFUE4__JHASH__",[h._param("gameName",a)])},getUseChromeDesktopMessage:function(a){return h._("__JHASH__EIWxYSCgSO8__JHASH__",[h._param("gameName",a)])},getUseFacebookOnAndroidMessage:function(a){return h._("__JHASH__rDcFRfi2jlF__JHASH__",[h._param("gameName",a)])},getUseMobileSafariMessage:function(a){return h._("__JHASH__RjlGPX0COSL__JHASH__",[h._param("gameName",a)])}};g.CloudGamingClientFbts=a}),98);
__d("CancelInvalidGameLifecycleActionMiddleware",["CloudGamingActionTypes"],(function(a,b,c,d,e,f,g){"use strict";var h=[c("CloudGamingActionTypes").GAME_READY,c("CloudGamingActionTypes").PAUSE_GAME,c("CloudGamingActionTypes").RESUME_GAME,c("CloudGamingActionTypes").INACTIVATE_GAME,c("CloudGamingActionTypes").REACTIVATE_GAME,c("CloudGamingActionTypes").FINISH_GAME],i=new Map([["NotReady",[c("CloudGamingActionTypes").GAME_READY]],["Playing",[c("CloudGamingActionTypes").PAUSE_GAME,c("CloudGamingActionTypes").INACTIVATE_GAME]],["Paused",[c("CloudGamingActionTypes").RESUME_GAME,c("CloudGamingActionTypes").INACTIVATE_GAME]],["Inactivated",[c("CloudGamingActionTypes").REACTIVATE_GAME,c("CloudGamingActionTypes").FINISH_GAME]],["Timeout",[]]]);function a(a,b,c){b=a.type;if(!h.includes(b))return a;c=c().gameLifecycle.gameLifecycleState;var d=i.get(c);return d!=null&&d.includes(b)?a:{actionType:b,gameLifecycle:c,type:"NOOP"}}g.runAction=a}),98);
__d("CloudGaming2DBridgeBlinkProcessor",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.NUM_DATA_LOOKBACK=10,this.START_BLINK_RATIO_THRESHOLD=.4,this.CONTINUE_BLINK_RATIO_THRESHOLD=.2,this.startBlinkAverage=-1,this.isBlinking=!1,this.dataBuffer=[]}var b=a.prototype;b.process=function(a){if(this.dataBuffer.length<this.NUM_DATA_LOOKBACK){this.updateBuffer(a);return!1}var b=this.dataBuffer.reduce(function(a,b){return a+b},0)/this.dataBuffer.length;this.isBlinking&&this.startBlinkAverage-a<this.startBlinkAverage*this.CONTINUE_BLINK_RATIO_THRESHOLD?(this.isBlinking=!1,this.startBlinkAverage=-1):!this.isBlinking&&b-a>b*this.START_BLINK_RATIO_THRESHOLD&&(this.isBlinking=!0,this.startBlinkAverage=b);this.updateBuffer(a);return this.isBlinking};b.updateBuffer=function(a){this.dataBuffer.push(a);this.dataBuffer.length>this.NUM_DATA_LOOKBACK&&this.dataBuffer.shift();return this.dataBuffer};return a}();f.BlinkProcessor=a}),66);
__d("CloudGaming2DBridgeFilters",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=0,this.$2=0,this.$3=0,this.$4=0,this.$5=0,this.$6=0,this.$7=0,this.$8=0,this.$9=0,this.$10=0,this.$11=!1,this.MS_PER_SECOND=1e3,this.$2=a,this.$3=b}var b=a.prototype;b.filter1D=function(b,c){this.$11||this.$12(b,b,b,c);if(this.$10===c)return this.$4;var d=(c-this.$10)/this.MS_PER_SECOND;d=1/d;this.$10=c;c=(b-this.$4)*d;var e=this.$13(d,this.$1);this.$7=a.lowPassFilter(c,this.$7,e);c=this.$2+this.$3*Math.abs(this.$7);e=this.$13(d,c);this.$4=a.lowPassFilter(b,this.$4,e);return this.$4};b.filter2D=function(b,c,d){this.$11||this.$12(b,c,c,d);if(this.$10===d)return[this.$4,this.$5];var e=(d-this.$10)/this.MS_PER_SECOND;e=1/e;this.$10=d;d=(b-this.$4)*e;var f=(c-this.$5)*e,g=this.$13(e,this.$1);this.$7=a.lowPassFilter(d,this.$7,g);this.$8=a.lowPassFilter(f,this.$8,g);d=this.$2+this.$3*Math.sqrt(this.$7*this.$7+this.$8*this.$8);g=this.$13(e,d);this.$4=a.lowPassFilter(b,this.$4,g);this.$5=a.lowPassFilter(c,this.$5,g);return[this.$4,this.$5]};b.filter3D=function(b,c,d,e){this.$11||this.$12(b,c,d,e);if(this.$10===e)return[this.$4,this.$5,this.$6];var f=(e-this.$10)/this.MS_PER_SECOND;f=1/f;this.$10=e;e=(b-this.$4)*f;var g=(c-this.$5)*f,h=(d-this.$6)*f,i=this.$13(f,this.$1);this.$7=a.lowPassFilter(e,this.$7,i);this.$8=a.lowPassFilter(g,this.$8,i);this.$9=a.lowPassFilter(h,this.$9,i);e=this.$2+this.$3*Math.sqrt(this.$7*this.$7+this.$8*this.$8+this.$9*this.$9);i=this.$13(f,e);this.$4=a.lowPassFilter(b,this.$4,i);this.$5=a.lowPassFilter(c,this.$5,i);this.$6=a.lowPassFilter(d,this.$6,i);return[this.$4,this.$5,this.$6]};b.reset=function(){this.$11=!1};b.$12=function(a,b,c,d){this.$11=!0,this.$4=a,this.$5=b,this.$6=c,this.$7=0,this.$8=0,this.$9=0,this.$10=d};b.$13=function(a,b){b=1/(2*Math.PI*b);a=1/a;return 1/(1+b/a)};a.lowPassFilter=function(a,b,c){return c*a+(1-c)*b};return a}();f.OneEuroFilter=a}),66);
__d("CloudGaming2DBridgeGrabProcessor",["$InternalEnum","gl-vec2"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({NONE:0,PALM:1,FIST:2,THUMB:3,POINT:4,ANGLE:5});a=function(){function a(){var a;this.lastGesture=h.NONE;this.aimingOrigin=[0,0];this.aimHelper=(a=Array.from(document.querySelectorAll("canvas")).find(function(a){return a.id==="2DBridgeAimHelper"}))==null?void 0:a.getContext("2d");this.$1=.1;this.$2=.05}var b=a.prototype;b.process=function(b,c,d){if(b.length<5)return[0,0,0,0,0,0,0];var e=null,f=null;d.rightHandLandmarks!=null&&(e=d.rightHandLandmarks[8].x,f=d.rightHandLandmarks[8].y);d=this.$3(c);b[0]=this.$4(d)?1:0;b[1]=this.$5(d)?1:0;b[2]=this.$6(d)?1:0;b[3]=this.$7(d)?1:0;b[4]=this.$8(d)?1:0;b[2]&&this.$9(e,f);c=this.aimHelper;if(e!=null&&f!=null&&c!=null){var g=e,i=f,j=c.canvas.height,k=c.canvas.width;g=this.$10(g,i,j,k);b[5]=-g[0];b[6]=-g[1]}this.lastGesture=d;c!=null&&(![h.POINT,h.ANGLE].includes(d)||!a.$11(e,f))&&c.clearRect(0,0,c==null?void 0:c.canvas.width,c==null?void 0:c.canvas.width);return b};b.$4=function(a){return this.lastGesture===h.PALM&&(a===h.FIST||a===h.THUMB)};b.$5=function(a){return(this.lastGesture===h.FIST||this.lastGesture===h.THUMB)&&a===h.POINT};b.$6=function(a){return[h.FIST,h.THUMB].includes(this.lastGesture)&&[h.POINT,h.ANGLE].includes(a)};b.$7=function(a){return[h.POINT,h.ANGLE].includes(this.lastGesture)&&a===h.PALM};b.$8=function(a){return[h.POINT,h.ANGLE].includes(this.lastGesture)&&[h.FIST,h.THUMB].includes(a)};b.$10=function(a,b,d,e){var f=[0,0];a=a*e;b=b*d;e=this.aimingOrigin[0]*e;var g=this.aimingOrigin[1]*d,h=c("gl-vec2").distance([a,b],[e,g]);h/d>this.$1&&(f[0]=this.$2*(a-e)/h,f[1]=this.$2*(b-g)/h);return f};b.$3=function(a){if(a[0]&&a[1]&&a[2])return h.FIST;else if(!a[0]&&!a[1]&&!a[2])return h.PALM;else if(!a[0]&&a[1]&&a[2])return h.THUMB;else if(a[0]&&!a[1]&&a[2])return h.POINT;else if(!a[0]&&!a[1]&&a[2])return h.ANGLE;return h.NONE};b.$9=function(b,c){if(!a.$11(b,c))return;b=(b=b)!=null?b:0;c=(c=c)!=null?c:0;this.aimingOrigin[0]=b;this.aimingOrigin[1]=c;if(this.aimHelper==null)return;var d=this.aimHelper;d!=null&&(d.clearRect(0,0,d.canvas.width,d.canvas.height),d.globalAlpha=.5,d.fillStyle="yellow",d.beginPath(),d.arc((1-b)*d.canvas.width,c*d.canvas.height,this.$1*d.canvas.height,0,2*Math.PI),d.fill())};a.$11=function(a,b){return a!=null&&b!=null&&a<1&&a>0&&b<1&&b>0};return a}();g.GrabProcessor=a}),98);
__d("TrustedTypesFacebookURIScriptURLPolicy",["TrustedTypes","URI","err","isCdnURI","isExternalFBURI","isFacebookDotNetURI","isFacebookURI"],(function(a,b,c,d,e,f,g){"use strict";a={createScriptURL:function(a){var b=c("URI").tryParseURI(a);if(b!=null&&(c("isFacebookURI")(b)||c("isCdnURI")(b)||c("isFacebookDotNetURI")(b)||c("isExternalFBURI")(b)))return a;throw c("err")("Violated policy TrustedTypesFacebookURIScriptURLPolicy: "+a+" is not a FB URI.")}};b=c("TrustedTypes").createPolicy("fb-uri-script-urls",a);d=b;g["default"]=d}),98);
__d("CloudGaming2DBridgeBodyTracking",["$InternalEnum","CloudGaming2DBridgeBlinkProcessor","CloudGaming2DBridgeFilters","CloudGaming2DBridgeGrabProcessor","gl-quat","gl-vec3","mediapipe-holistic"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({Disable:0,Enable:1,Move:2}),i=b("$InternalEnum")({Head:0,LeftHand:1,RightHand:2,Face:3}),j={INDEX_BASE:5,INDEX_LOWER:6,INDEX_TIP:8,INDEX_UPPER:7,LITTLE_BASE:17,LITTLE_LOWER:18,LITTLE_TIP:20,LITTLE_UPPER:19,MIDDLE_BASE:9,MIDDLE_LOWER:10,MIDDLE_TIP:12,MIDDLE_UPPER:11,RING_BASE:13,RING_LOWER:14,RING_TIP:16,RING_UPPER:15,THUMB_BASE:1,THUMB_LOWER:2,THUMB_TIP:4,THUMB_UPPER:3,WRIST:0},k={LEFT_EYE_BOTTOM:374,LEFT_EYE_LEFT:263,LEFT_EYE_RIGHT:362,LEFT_EYE_TOP:386,LIPS_BOTTOM:17,LIPS_TOP:0,MOUTH_BOTTOM:14,MOUTH_CORNER_L:61,MOUTH_CORNER_R:291,MOUTH_LEFT:29,MOUTH_RIGHT:62,MOUTH_TOP:13,RIGHT_EYE_BOTTOM:145,RIGHT_EYE_LEFT:133,RIGHT_EYE_RIGHT:33,RIGHT_EYE_TOP:159},l={BrowLowererL:0,BrowLowererR:1,CheekPuffL:2,CheekPuffR:3,CheekRaiserL:4,CheekRaiserR:5,CheekSuckL:6,CheekSuckR:7,ChinRaiserL:8,ChinRaiserR:9,Count:72,DimplerL:10,DimplerR:11,EyesClosedL:12,EyesClosedR:13,EyesLookDownL:14,EyesLookDownR:15,EyesLookLeftL:16,EyesLookLeftR:17,EyesLookRightL:18,EyesLookRightR:19,EyesLookUpL:20,EyesLookUpR:21,InnerBrowRaiserL:22,InnerBrowRaiserR:23,JawDrop:24,JawSidewaysLeft:25,JawSidewaysRight:26,JawThrust:27,LidTightenerL:28,LidTightenerR:29,LipCornerDepressorL:30,LipCornerDepressorR:31,LipCornerPullerL:32,LipCornerPullerR:33,LipFunnelerLB:34,LipFunnelerLT:35,LipFunnelerRB:36,LipFunnelerRT:37,LipPressorL:38,LipPressorR:39,LipPuckerL:40,LipPuckerR:41,LipsTowardLB:50,LipsTowardLT:51,LipsTowardRB:52,LipsTowardRT:53,LipStretcherL:42,LipStretcherR:43,LipSuckLB:44,LipSuckLT:45,LipSuckRB:46,LipSuckRT:47,LipTightenerL:48,LipTightenerR:49,LowerLipDepressorL:54,LowerLipDepressorR:55,MouthLeft:56,MouthRight:57,NasiolabialFurrowL:58,NasiolabialFurrowR:59,NoseWrinklerL:60,NoseWrinklerR:61,NostrilCompressorL:62,NostrilCompressorR:63,NostrilDilatorL:64,NostrilDilatorR:65,OuterBrowRaiserL:66,OuterBrowRaiserR:67,UpperLidRaiserL:68,UpperLidRaiserR:69,UpperLipRaiserL:70,UpperLipRaiserR:71};a=function(){a.getDistanceBetweenLandmarks=function(a,b){return Math.pow(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2)+Math.pow(a.z-b.z,2),.5)};a.getAbsoluteDeltaZ=function(a,b,c){b={xt:b.x,yt:b.y};var d=b.xt;b=b.yt;c={xb:c.x,yb:c.y};var e=c.xb;c=c.yb;a=Math.pow(Math.max(0,Math.pow(a,2)-Math.pow(d-e,2)-Math.pow(b-c,2)),.5);return Math.abs(a)};a.isFingerCurved=function(a,b,c){return Math.max(0,this.getDistanceBetweenLandmarks(a,c))<Math.max(0,this.getDistanceBetweenLandmarks(a,b))};a.estimateHandPose=function(a){var b=j,c=this.isFingerCurved(a[b.WRIST],a[b.THUMB_UPPER],a[b.THUMB_TIP]),d=this.isFingerCurved(a[b.WRIST],a[b.INDEX_BASE],a[b.INDEX_TIP]);a=this.isFingerCurved(a[b.WRIST],a[b.MIDDLE_BASE],a[b.MIDDLE_TIP]);return[c,d,a]};function a(a,b){this.$5=[],this.$6=32,this.$7=50,this.$8=-.2,this.$9=-.2,this.$10=0,this.$11=.2,this.$12=-.2,this.$13=.1,this.$14=-.72,this.$15=.26,this.$16=.26,this.$17=.064,this.$18=-1,this.$19=[0,0,0,1],this.$20=new Float32Array(l.Count),this.$21=new(d("CloudGaming2DBridgeBlinkProcessor").BlinkProcessor)(),this.$22=new(d("CloudGaming2DBridgeBlinkProcessor").BlinkProcessor)(),this.$23=new(d("CloudGaming2DBridgeGrabProcessor").GrabProcessor)(),this.$3=a,this.$4=b,this.clear()}var b=a.prototype;b.clear=function(){this.$5=[],this.$24(),this.$18=-1};b.$24=function(){for(var a=0;a<this.$6;a++)this.$5[a]=new(d("CloudGaming2DBridgeFilters").OneEuroFilter)(3,10)};b.onKeypointsResults=function(b){var c=b.poseLandmarks,e=Date.now();for(var f=0;f<this.$6;f++){var g=c[f];if(!g)continue;g=this.$5[f].filter3D(g.x,g.y,g.z,e);var k=g[0],l=g[1];g=g[2];c[f]={visibility:c[f].visibility,x:k,y:l,z:g}}k=this.$17/a.getDistanceBetweenLandmarks(c[d("mediapipe-holistic").POSE_LANDMARKS.LEFT_EYE],c[d("mediapipe-holistic").POSE_LANDMARKS.RIGHT_EYE]);if(this.$18===-1){this.$18=e;return}if(e-this.$18<this.$7)return;this.$18=e;b.faceLandmarks!=null&&this.$25(b.faceLandmarks);l=this.$26(c[d("mediapipe-holistic").POSE_LANDMARKS.LEFT_EYE],c[d("mediapipe-holistic").POSE_LANDMARKS.RIGHT_EYE],c[d("mediapipe-holistic").POSE_LANDMARKS.NOSE]);g=b.rightHandLandmarks!=null?a.estimateHandPose(b.rightHandLandmarks):[!1,!1,!1];f=[0,0,0,0,0,0,0];this.$23.process(f,g,b);this.sendRTCEvent({action:h.Move,moves:[{gesture:[],joint:i.Head,position:this.$27(l),rotation:l},{gesture:b.leftHandLandmarks!=null?a.estimateHandPose(b.leftHandLandmarks):[],joint:i.LeftHand,position:[this.$28(c[d("mediapipe-holistic").POSE_LANDMARKS.LEFT_SHOULDER],c[d("mediapipe-holistic").POSE_LANDMARKS.LEFT_WRIST],k,this.$8),this.$29(c[d("mediapipe-holistic").POSE_LANDMARKS.LEFT_SHOULDER],c[d("mediapipe-holistic").POSE_LANDMARKS.LEFT_WRIST],k,this.$9),this.$30(c[d("mediapipe-holistic").POSE_LANDMARKS.LEFT_SHOULDER],c[d("mediapipe-holistic").POSE_LANDMARKS.LEFT_ELBOW],c[d("mediapipe-holistic").POSE_LANDMARKS.LEFT_WRIST],k,this.$10)],rotation:b.leftHandLandmarks?this.$31(b.leftHandLandmarks[j.WRIST],b.leftHandLandmarks[j.INDEX_BASE],b.leftHandLandmarks[j.LITTLE_BASE]):this.$19},{details:f,gesture:g,joint:i.RightHand,position:[this.$28(c[d("mediapipe-holistic").POSE_LANDMARKS.RIGHT_SHOULDER],c[d("mediapipe-holistic").POSE_LANDMARKS.RIGHT_WRIST],k,this.$11),this.$29(c[d("mediapipe-holistic").POSE_LANDMARKS.RIGHT_SHOULDER],c[d("mediapipe-holistic").POSE_LANDMARKS.RIGHT_WRIST],k,this.$12),this.$30(c[d("mediapipe-holistic").POSE_LANDMARKS.RIGHT_SHOULDER],c[d("mediapipe-holistic").POSE_LANDMARKS.RIGHT_ELBOW],c[d("mediapipe-holistic").POSE_LANDMARKS.RIGHT_WRIST],k,this.$13)],rotation:b.rightHandLandmarks?this.$31(b.rightHandLandmarks[j.WRIST],b.rightHandLandmarks[j.INDEX_BASE],b.rightHandLandmarks[j.LITTLE_BASE]):this.$19},{details:Array.from(this.$20),joint:i.Face}]})};b.$28=function(a,b,c,d){return b.visibility!=null&&b.visibility<.2?d:(a.x-b.x)*c+d};b.$29=function(a,b,c,d){return b.visibility!=null&&b.visibility<.2?d-this.$16-this.$15:Math.max(this.$14,(a.y-b.y)*c+d)};b.$30=function(b,c,d,e,f){if(d.visibility!=null&&d.visibility<.2)return f;var g=this.$16/e,h=this.$15/e;g=a.getAbsoluteDeltaZ(g,d,c);g=d.z<=c.z?g:-c.z;d=a.getAbsoluteDeltaZ(h,c,b);d=c.z<=b.z?d:-c.z;return Math.max(0,g+d)*e+f};b.$27=function(a){var b=[0,.24,.15];return c("gl-vec3").subtract(b,c("gl-vec3").transformQuat([0,0,0],b,a),b)};b.$26=function(a,b,d){var e=c("gl-vec3").normalize([0,0,0],[a.x-b.x,a.y-b.y,a.z-b.z]);a={x:(a.x+b.x)/2,y:(a.y+b.y)/2,z:(a.z+b.z)/2};b=c("gl-vec3").normalize([0,0,0],[a.x-d.x,a.y-d.y,0]);a=[1,0,0];d=[0,-1,0];d=c("gl-quat").rotationTo([0,0,0,1],d,b);b=c("gl-quat").rotationTo([0,0,0,1],c("gl-vec3").transformQuat([0,0,0],a,d),e);return c("gl-quat").multiply([0,0,0,1],b,d)};b.$31=function(a,b,d){b=c("gl-vec3").normalize([0,0,0],[b.x-a.x,b.y-a.y,b.z-a.z]);d=c("gl-vec3").normalize([0,0,0],[d.x-a.x,d.y-a.y,d.z-a.z]);a=[0,0,-1];var e=c("gl-vec3").rotateX([0,0,0],a,[0,0,0],Math.PI/4);e=c("gl-quat").rotationTo([0,0,0,1],e,d);d=c("gl-quat").rotationTo([0,0,0,1],c("gl-vec3").transformQuat([0,0,0],a,e),b);return c("gl-quat").multiply([0,0,0,1],d,e)};b.$25=function(b){this.$21.process(a.getBlinkRatio(b,k.LEFT_EYE_TOP,k.LEFT_EYE_BOTTOM,k.LEFT_EYE_LEFT,k.LEFT_EYE_RIGHT))?this.$20[l.EyesClosedL]=1:this.$20[l.EyesClosedL]=0;this.$22.process(a.getBlinkRatio(b,k.RIGHT_EYE_TOP,k.RIGHT_EYE_BOTTOM,k.RIGHT_EYE_LEFT,k.RIGHT_EYE_RIGHT))?this.$20[l.EyesClosedR]=1:this.$20[l.EyesClosedR]=0;var c=a.getBlinkRatio(b,k.MOUTH_TOP,k.MOUTH_BOTTOM,k.MOUTH_LEFT,k.MOUTH_RIGHT);this.$20[l.JawDrop]=Math.min(1,c/.5);this.$20[l.LipCornerPullerL]=a.getSmileRatio(b,k.MOUTH_CORNER_L);this.$20[l.LipCornerPullerR]=a.getSmileRatio(b,k.MOUTH_CORNER_R)};a.getSmileRatio=function(a,b){var d=c("gl-vec3").distance(this.landmarkToVec3(a[b]),this.landmarkToVec3(a[k.LIPS_TOP]));b=c("gl-vec3").distance(this.landmarkToVec3(a[b]),this.landmarkToVec3(a[k.LIPS_BOTTOM]));return Math.max(b/d+this.$2,0)*this.$1};a.getBlinkRatio=function(a,b,d,e,f){b=c("gl-vec3").distance(this.landmarkToVec3(a[b]),this.landmarkToVec3(a[d]));d=c("gl-vec3").distance(this.landmarkToVec3(a[e]),this.landmarkToVec3(a[f]));return b/d};a.landmarkToVec3=function(a){return[a.x,a.y,a.z]};b.sendRTCEvent=function(a){a=babelHelpers["extends"]({},a,{requestType:"DataToGame",target:"player2DBridgeInput"});this.$3.sendRTCEvent("lifecycle",{sdkMessage:{data:JSON.stringify(a)}})};return a}();a.$1=2;a.$2=-.8;g.CloudGaming2DBridgeRTCEventAction=h;g.CloudGaming2DBridgeBodyTracking=a}),98);
__d("CloudGamingMessageReceiver",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){var b=this;this.$1=a;this.$2=function(a){var c;c=a==null?void 0:(c=a.data)==null?void 0:c.type;if(!c)return;a=a==null?void 0:(a=a.data)==null?void 0:a.content;b.$1(c,a?a:null)};window.addEventListener("message",this.$2,!1)}var b=a.prototype;b.clean=function(){window.removeEventListener("message",this.$2)};return a}();f["default"]=a}),66);
__d("XAIDemosMediaControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/aidemos/demo/media/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("CloudGaming2DBridgeController",["CloudGaming2DBridgeBodyTracking","CloudGamingConstants","CloudGamingMessageReceiver","XAIDemosMediaControllerRouteBuilder","asyncToGeneratorRuntime","mediapipe-camera_utils","mediapipe-drawing_utils","mediapipe-holistic","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(b,e,f){var g=this;this.$10=!1;this.onResults=function(b){g.$10||(g.$10=!0,window.postMessage({type:d("CloudGamingConstants").CloudGamingMessageTypes.READY_2D_BRIDGE},"/"));var c=g.$4,e=g.$5,f=b.poseLandmarks;if(!f||c==null||e==null)return;var h=c.getContext("2d");h.drawImage(b.image,0,0,c.width,c.height);d("mediapipe-drawing_utils").drawConnectors(h,f,d("mediapipe-holistic").POSE_CONNECTIONS,{color:"red",lineWidth:5});d("mediapipe-drawing_utils").drawLandmarks(h,b.poseLandmarks,{color:"red",radius:4});d("mediapipe-drawing_utils").drawLandmarks(h,b.leftHandLandmarks,{color:"pink",radius:4});d("mediapipe-drawing_utils").drawConnectors(h,b.leftHandLandmarks,d("mediapipe-holistic").HAND_CONNECTIONS,{color:"pink",lineWidth:5});a.fillTextCoordinates(e.getContext("2d"),b,[d("mediapipe-holistic").POSE_LANDMARKS.LEFT_SHOULDER,d("mediapipe-holistic").POSE_LANDMARKS.RIGHT_SHOULDER,d("mediapipe-holistic").POSE_LANDMARKS.LEFT_WRIST,d("mediapipe-holistic").POSE_LANDMARKS.RIGHT_WRIST,d("mediapipe-holistic").POSE_LANDMARKS.NOSE,d("mediapipe-holistic").POSE_LANDMARKS.LEFT_ELBOW,d("mediapipe-holistic").POSE_LANDMARKS.RIGHT_ELBOW],[].concat(Array.from(Array(21).keys())));g.$8.onKeypointsResults(b)};this.$1=b;this.$2=e;this.$3=f;this.$8=new(d("CloudGaming2DBridgeBodyTracking").CloudGaming2DBridgeBodyTracking)(this.$1,this.$2);this.$9=new(c("CloudGamingMessageReceiver"))(function(a){a===d("CloudGamingConstants").CloudGamingMessageTypes.ENABLE_2D_BRIDGE?g.init():a===d("CloudGamingConstants").CloudGamingMessageTypes.DISABLE_2D_BRIDGE&&g.clear()})}var e=a.prototype;e.init=function(){this.$10=!1,this.$6=this.$11(),this.$7=this.$12(this.$6),this.$4=Array.from(document.querySelectorAll("canvas")).find(function(a){return a.id==="2DBridgeCanvas"}),this.$5=Array.from(document.querySelectorAll("canvas")).find(function(a){return a.id==="2DBridgeCanvasData"})};e.$11=function(){var a=this,b=new(d("mediapipe-holistic").Holistic)({locateFile:function(b){if(b==="holistic_solution_packed_assets_loader.js")return a.$13("660990885733031");else if(b==="holistic_solution_packed_assets.data")return a.$13("1328268234576552");else if(b==="holistic_solution_simd_wasm_bin.js")return a.$13("692044515606037");else if(b==="holistic_solution_simd_wasm_bin.wasm")return a.$13("683650123073999");else if(b==="holistic.binarypb")return a.$13("1089395958423428");else if(b==="pose_landmark_full.tflite")return a.$13("1214216179128840");return""}});b.setOptions({enableSegmentation:!1,minDetectionConfidence:.5,minTrackingConfidence:.5,modelComplexity:1,refineFaceLandmarks:!0,smoothLandmarks:!0,smoothSegmentation:!0});b.onResults(this.onResults);return b};e.$13=function(a){var b;a=c("XAIDemosMediaControllerRouteBuilder").buildUri({id:a});b="www."+((b=(b=a.getQualifiedUri())==null?void 0:b.getDomain().replace("horizon.meta.com","facebook.com"))!=null?b:"facebook.com");return(a=(a=a.setDomain(b))==null?void 0:(b=a.setProtocol("https"))==null?void 0:b.toString())!=null?a:""};e.$12=function(a){var e=this.$3.current;if(e==null)return null;var f=new(d("mediapipe-camera_utils").Camera)(e,{height:720,onFrame:function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield a.send({image:e})});function d(){return c.apply(this,arguments)}return d}(),width:1280});c("promiseDone")(f.start());return f};e.clear=function(){var a;this.$7&&c("promiseDone")(this.$7.stop());(a=this.$6)==null?void 0:a.onResults(function(){});a=(a=this.$6)==null?void 0:a.close();a!=null&&c("promiseDone")(a);this.$8.clear()};return a}();a.fillTextCoordinates=function(a,b,c,d){a.clearRect(0,0,a.canvas.width,a.canvas.height);a.font="10px bold Calibri";c.forEach(function(c){c=b.poseLandmarks[c];var d=c.x,e=c.y;c=c.z;a.fillText("("+d.toFixed(2)+", "+e.toFixed(2)+", "+c.toFixed(2)+")",(1-d)*a.canvas.width,e*a.canvas.height)});if(b.leftHandLandmarks==null)return;d.forEach(function(c){c=b.leftHandLandmarks[c];var d=c.x,e=c.y;c=c.z;a.fillText("("+d.toFixed(2)+", "+e.toFixed(2)+", "+c.toFixed(2)+")",(1-d)*a.canvas.width,e*a.canvas.height)})};g["default"]=a}),98);
__d("CloudGaming2DBridgeMiddleware",["CloudGaming2DBridgeController","CloudGamingActionTypes","CloudGamingWindowsGamesSpecialConfigurationConfig"],(function(a,b,c,d,e,f,g){"use strict";var h=null;a=function(a,b){return function(d,e,f,g){switch(d.type){case c("CloudGamingActionTypes").GAME_READY:(f=h)==null?void 0:f.clear();c("CloudGamingWindowsGamesSpecialConfigurationConfig").twod_bridge_input.indexOf(a)!==-1&&(h=new(c("CloudGaming2DBridgeController"))(g,e,b));break;case"DISCONNECT":(f=h)==null?void 0:f.clear();h=null;break;default:break}return d}};g.runAction=a}),98);
__d("CloudGaming2DBridgeOverlay.react",["$InternalEnum","ChevronDownFilled24.svg.react","ChevronUpFilled24.svg.react","CloudGamingConstants","CloudGamingMessageReceiver","CloudGamingWindowsGamesSpecialConfigurationConfig","CometIcon.react","CometKeys","CometProgressRingIndeterminate.react","react","stylex","useLayerKeyCommands"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=d("react");var i=a.useEffect,j=a.useMemo,k=a.useState,l=b("$InternalEnum").Mirrored(["OFF","HIDDEN","VISIBLE","DEBUG"]),m={canvasData:{height:"x5yr21d",objectFit:"x19kjcj4",opacity:"x1us6l5c",position:"x10l6tqk",width:"xh8yej3",$$css:!0},iconContainer:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"xl56j7k",paddingTop:"x1iorvi4",position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",width:"xh8yej3",$$css:!0},iconOffContainer:{backgroundColor:"x18l40ae",borderTopStartRadius:"x168nmei",borderTopEndRadius:"x13lgxp2",borderBottomEndRadius:"x1i1ezom",borderBottomStartRadius:"x1o6z2jb",paddingBottom:"xjkvuk6",paddingTop:"xexx8yu",$$css:!0},overlayContainer:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"xdt5ytf",justifyContent:"x1nhvcw1",paddingTop:"x1rycs3w",position:"x10l6tqk",start:"x14b4ah6",top:"x13vifvy",width:"x17vnrad",zIndex:"x1vjfegm",$$css:!0},overlayContainerHidden:{display:"x1s85apg",$$css:!0},videoAndCanvasContainer:{alignItems:"x6s0dn4",display:"x78zum5",height:"x5yr21d",justifyContent:"xl56j7k",position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",$$css:!0},videoCanvasDisplay:{borderTopStartRadius:"xhk9q7s",borderTopEndRadius:"x1otrzb0",borderBottomEndRadius:"x1i1ezom",borderBottomStartRadius:"x1o6z2jb",height:"x5yr21d",objectFit:"xl1xv1r",opacity:"x1us6l5c",position:"x10l6tqk",transform:"x1c92isx",width:"xh8yej3",$$css:!0},videoCanvasHidden:{display:"x1s85apg",$$css:!0},videoLoadingOpacity:{opacity:"xz5rk10",$$css:!0}};e=h.forwardRef(function(a,b){var e=k(l.OFF),f=e[0],g=e[1];e=k(!1);var n=e[0],o=e[1];i(function(){new(c("CloudGamingMessageReceiver"))(function(a){a===d("CloudGamingConstants").CloudGamingMessageTypes.ENABLE_2D_BRIDGE?(o(!0),g(l.VISIBLE)):a===d("CloudGamingConstants").CloudGamingMessageTypes.DISABLE_2D_BRIDGE?(g(l.OFF),o(!1)):a===d("CloudGamingConstants").CloudGamingMessageTypes.READY_2D_BRIDGE&&(o(!1),window.setTimeout(function(){return g(l.HIDDEN)},5e3))})});e=j(function(){return[{command:{key:c("CometKeys").F10},description:"Toggle 2D Bridge view",handler:function(){if(f===l.OFF)return;f===l.HIDDEN?g(l.VISIBLE):g(l.HIDDEN)}},{command:{key:c("CometKeys").F10,shift:!0},description:"Toggle 2D Bridge debug view",handler:function(){if(f===l.OFF)return;f===l.HIDDEN?g(l.DEBUG):g(l.HIDDEN)}}]},[f]);c("useLayerKeyCommands")(e);return c("CloudGamingWindowsGamesSpecialConfigurationConfig").twod_bridge_input.indexOf(a.cloudGameID)===-1?h.jsx("div",{}):h.jsxs("div",{className:f===l.OFF?"x1s85apg":"x6s0dn4 x78zum5 xdt5ytf x1nhvcw1 x1rycs3w x10l6tqk x14b4ah6 x13vifvy x17vnrad x1vjfegm",children:[h.jsxs("div",{className:"x6s0dn4 x78zum5 x5yr21d xl56j7k x10l6tqk x13vifvy xh8yej3",children:[h.jsx("video",{className:f===l.VISIBLE?c("stylex")(m.videoCanvasDisplay,n&&m.videoLoadingOpacity):"x1s85apg",ref:b}),h.jsx("canvas",{className:f===l.DEBUG?"xhk9q7s x1otrzb0 x1i1ezom x1o6z2jb x5yr21d xl1xv1r x1us6l5c x10l6tqk x1c92isx xh8yej3":"x1s85apg",id:"2DBridgeCanvas"}),h.jsx("canvas",{className:f===l.DEBUG?"x5yr21d x19kjcj4 x1us6l5c x10l6tqk xh8yej3":"x1s85apg",id:"2DBridgeCanvasData"}),h.jsx("canvas",{className:f===l.VISIBLE?"x5yr21d x19kjcj4 x1us6l5c x10l6tqk xh8yej3":"x1s85apg",id:"2DBridgeAimHelper"}),n&&h.jsx(c("CometProgressRingIndeterminate.react"),{color:"light",size:72})]}),h.jsx("div",{className:c("stylex")(m.iconContainer,(f===l.OFF||f===l.HIDDEN)&&m.iconOffContainer),children:h.jsx(c("CometIcon.react"),{color:"white",icon:f===l.OFF||f===l.HIDDEN?c("ChevronDownFilled24.svg.react"):c("ChevronUpFilled24.svg.react"),onPress:function(){f===l.HIDDEN?g(l.VISIBLE):g(l.HIDDEN)},size:24})})]})});f=e;g["default"]=f}),98);
__d("CloudGamingAllowServerDebug",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return!1}g["default"]=a}),98);
__d("CloudGamingDevLogging",["CloudGamingActionTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a.type){case"CLEAR_KEYS_DOWN":case"KEY":case"MODIFIER_KEY":case"MOUSE_DOWN":case"MOUSE_MOVE":case"MOUSE_UP":case"MOUSE_WHEEL":case"SEND_RTC":case"UNPARSEABLE_RTC":case"UNSENDABLE_RTC":case c("CloudGamingActionTypes").SET_POINTERS_COORDINATES:case c("CloudGamingActionTypes").IN_GAME_STATE:case c("CloudGamingActionTypes").CURSOR_MOVEMENT:case c("CloudGamingActionTypes").CURSOR_BUTTON:case c("CloudGamingActionTypes").CURSOR_WHEEL:case c("CloudGamingActionTypes").WARNING_METRIC:case c("CloudGamingActionTypes").CLEAN_WARNING_METRIC:case c("CloudGamingActionTypes").CLOSE_NOTIFICATION:case c("CloudGamingActionTypes").TOUCH_MOVE:case c("CloudGamingActionTypes").TOUCH_DOWN:case c("CloudGamingActionTypes").TOUCH_UP:case c("CloudGamingActionTypes").VIRTUAL_GAMEPAD:case c("CloudGamingActionTypes").GAMEPAD_GREDOS:case c("CloudGamingActionTypes").MICROPHONE_ACTIVITY:return null;default:return a}}function b(a){}g["default"]=b}),98);
__d("CloudGamingLatencyLogging",["CloudGamingActionTypes","CloudGamingEventsFalcoEvent","CloudGamingLoadingEventRecorder"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e,f,g,h,i,j,k,l){l===void 0&&(l=null);var m=function(h,m,n,o){c("CloudGamingLoadingEventRecorder").recordEvent(h,m);var p={silent_retry_ingame_count:j.toString(),silent_retry_load_count:k.toString()};for(var q=c("CloudGamingLoadingEventRecorder").getEventLatency(h),r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var t;if(r){if(s>=q.length)break;t=q[s++]}else{s=q.next();if(s.done)break;t=s.value}t=t;var u=t[0];t=t[1];p[u]=t}n!=null&&(p.request_id=n);g!=null&&(p.cloud_binary_id=g);o!=null&&(p.is_android_container=o?"1":"0");return{app_id:b,client_app_id:d,client_app_version:e,cloud_game_id_override:f,entry_point:i,event:h,event_occur_time_ms:m.toString(),extra_data:p,run_id:l,session_id:a,source:"JS"}};switch(h.type){case"MOUSE_UP":case"MOUSE_DOWN":case"MOUSE_MOVE":case"KEY":case"CLEAR_KEYS_DOWN":case"MODIFIER_KEY":case c("CloudGamingActionTypes").CURSOR_MOVEMENT:case c("CloudGamingActionTypes").CURSOR_BUTTON:case c("CloudGamingActionTypes").CURSOR_WHEEL:var n=h.timestamp,o="";a!=null&&(o=a+"/"+n.toString());var p=m("CLIENT_INPUT_RECEIVED",n,o);c("CloudGamingEventsFalcoEvent").log(function(){return p});break;case"PEER_CONNECTION_CREATED":var q=m("PEER_CONNECTION_CREATED",h.timestamp);c("CloudGamingEventsFalcoEvent").log(function(){return q});break;case"SEND_SDP_OFFER":var r=m("CLIENT_SEND_SDP_OFFER",h.timestamp);c("CloudGamingEventsFalcoEvent").log(function(){return r});break;case"RECEIVED_SDP_ANSWER":var s=m("CLIENT_RECEIVE_SDP_ANSWER",h.timestamp);c("CloudGamingEventsFalcoEvent").log(function(){return s});break;case"PEER_CONNECTION_CONNECTED":var t=m("PEER_CONNECTION_CONNECTED",h.timestamp);c("CloudGamingEventsFalcoEvent").log(function(){return t});break;case"DATA_CHANNEL_OPENED":if(h.purpose.includes("lifecycle")){var u=m("DATA_CHANNEL_OPENED",h.timestamp);c("CloudGamingEventsFalcoEvent").log(function(){return u})}break;case c("CloudGamingActionTypes").GAME_READY:c("CloudGamingLoadingEventRecorder").setIsAndroidContainer(h.isAndroidContainer);var v=m(j>=1?c("CloudGamingActionTypes").GAME_READY_RETRY:c("CloudGamingActionTypes").GAME_READY,h.timestamp,null,h.isAndroidContainer);c("CloudGamingEventsFalcoEvent").logImmediately(function(){return v});break;default:break}}g["default"]=a}),98);
__d("CloudGamingSessionEventLogging",["CloudGamingActionTypes","CloudGamingEndSummary","CloudGamingLoadingEventRecorder","CloudGamingSessionEventFalcoEvent","EventTimeUtils","ODS"],(function(a,b,c,d,e,f,g){"use strict";var h=3145,i=60,j=100,k=1e3,l=new Map(),m=0;function a(a,b,e,f,g,n,o,p,q,r){r===void 0&&(r=null);var s=!0,t=!1,u=n.type,v=0;switch(n.type){case"SEND_RTC":s=m===0;m=(m+1)%k;break;case"CLIENT_TICK":case"SERVER_TICK":s=n.heartbeat.sequence%i===0;break;case"MOUSE_UP":case"MOUSE_DOWN":case"MOUSE_MOVE":case"KEY":case"CLEAR_KEYS_DOWN":case"MODIFIER_KEY":case c("CloudGamingActionTypes").CURSOR_MOVEMENT:case c("CloudGamingActionTypes").CURSOR_BUTTON:case c("CloudGamingActionTypes").CURSOR_WHEEL:case c("CloudGamingActionTypes").TOUCH_MOVE:case c("CloudGamingActionTypes").TOUCH_DOWN:case c("CloudGamingActionTypes").TOUCH_UP:case c("CloudGamingActionTypes").VIRTUAL_GAMEPAD:case c("CloudGamingActionTypes").GAMEPAD_GREDOS:var w;w=(w=l.get(n.type))!=null?w:0;l.set(n.type,w+1);s=w%j===0;t=!0;c("CloudGamingEndSummary").incrementClientSideInputEvents();break;case c("CloudGamingActionTypes").CLIENT_RECEIVE_SDK_MESSAGE:d("ODS").bumpEntityKey(h,"cg_sdk_channel","client_sdk_message_received");break;case c("CloudGamingActionTypes").CLIENT_SEND_SDK_MESSAGE:d("ODS").bumpEntityKey(h,"cg_sdk_channel","client_sdk_message_sent");break;case c("CloudGamingActionTypes").PAUSE_GAME:u="SEND_PAUSE_REQUEST";t=!0;v=n.timestamp;break;case c("CloudGamingActionTypes").RESUME_GAME:u="SEND_RESUME_REQUEST";t=!0;v=n.timestamp;break;case c("CloudGamingActionTypes").FINISH_GAME:u="FINISH_GAME";break;case c("CloudGamingActionTypes").INPUT_FEEDBACK:s=!1;break;case c("CloudGamingActionTypes").VIDEO_FRAME:s=!1;break;default:break}if(s){w={silent_retry_ingame_count:p.toString(),silent_retry_load_count:q.toString(),ts:d("EventTimeUtils").tryGetTimestampInMicroSecond().toString()};n.type==="GAME_READY"&&(w.is_android_container=n.isAndroidContainer?"1":"0");(n.type==="CLIENT_TICK"||n.type==="SERVER_TICK")&&(w.heartbeat_sequence=n.heartbeat.sequence.toString());var x,y,z;n.type==="CONNECTION_ERROR"||n.type==="FATAL_ERROR"?(x=n.code,y=n.detail,n.payloadResponse!=null&&(z="beginning of payload response: "+n.payloadResponse.substring(0,2e3)),w.stage=c("CloudGamingLoadingEventRecorder").alreadyRecorded("GAME_READY")?"streaming":"loading",n.type==="FATAL_ERROR"&&c("CloudGamingEndSummary").logSummary(b,g,e,f,a,o,"FATAL_ERROR",r)):n.type==="DATA_CHANNEL_ERROR"&&(x=n.detail,y=n.message);n.type===c("CloudGamingActionTypes").CLIENT_RECEIVE_SDK_MESSAGE&&(w.sdk_message=n.message.requestID,w.sdk_message_type=n.message.type);n.type===c("CloudGamingActionTypes").CLIENT_SEND_SDK_MESSAGE&&(w.sdk_message=n.data.requestID,n.data.error!=null?(w.sdk_message_response="error",w.sdk_message_error_description=n.data.error.message):n.data.success!=null&&(w.sdk_message_response="success"));n.type===c("CloudGamingActionTypes").CONTAINER_RESIZE&&(w.width=n.viewportWidth.toString(),w.height=n.viewportHeight.toString());n.type==="UNSENDABLE_RTC"&&(w.message=JSON.stringify(n.event));n.type==="DATA_CHANNEL_OPENED"&&(w.purpose=n.purpose,w.label=n.label);n.type==="NOOP"&&(w.game_lifecycle=n.gameLifecycle,w.action_type=n.actionType);t&&(w.untrusted_client_timestamp_ms=v>0?v.toString():Date.now().toString());n.type===c("CloudGamingActionTypes").MICROPHONE_ENABLE_FAILED&&(w.detail=n.detail);var A={app_id:b,client_app_id:e,client_app_version:f,cloud_game_id_override:g,entry_point:o,event:u,exception_message:y,exception_stack:z,exception_type:x,extra_data:w,run_id:r,session_id:a,source:"JS"};n.type===c("CloudGamingActionTypes").GAME_READY?(p>=1?A.event=c("CloudGamingActionTypes").GAME_READY_RETRY:c("CloudGamingEndSummary").markGameReady(),c("CloudGamingSessionEventFalcoEvent").logImmediately(function(){return A})):c("CloudGamingSessionEventFalcoEvent").log(function(){return A});n.type===c("CloudGamingActionTypes").FINISH_GAME&&c("CloudGamingEndSummary").logSummary(b,g,e,f,a,o,"SESSION_TIMEOUT",r);n.type===c("CloudGamingActionTypes").PAUSE_GAME&&c("CloudGamingEndSummary").markGamePaused();n.type===c("CloudGamingActionTypes").RESUME_GAME&&c("CloudGamingEndSummary").markGameResumed()}}g["default"]=a}),98);
__d("CloudGamingInputLatencyTracker",["CloudGamingEndSummary","CloudGamingEventsFalcoEvent","CloudGamingWebRTCStatsConfig","EventTimeUtils","QuickPerformanceLogger","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=1e3;a=function(){function a(){this.$1={},this.$2={},this.$8=0,this.$11=0,this.$12=1e4,this.$13=-1,this.$14=!1}var b=a.prototype;b.configure=function(a,b,d,e,f){this.$3=a,this.$4=b,this.$5=d,this.$6=e,this.$7=f,this.$12=c("CloudGamingWebRTCStatsConfig").wait_time_in_sec_before_stop_collection_timer*1e3};b.setConnection=function(a){this.$9=a};b.$15=function(a,b,d){var e=this,f=Date.now().toString();d.forEach(function(d){e.$8+=1;if(e.$8>=c("CloudGamingWebRTCStatsConfig").log_input_latency_rate){e.$8-=c("CloudGamingWebRTCStatsConfig").log_input_latency_rate;var g=Math.floor((b-d)/1e3);c("CloudGamingEndSummary").processInputLatency(g);var h=d.toString();e.$4!=null&&(h=e.$4+"/"+h);c("CloudGamingEventsFalcoEvent").log(function(){return{app_id:e.$3,client_app_id:e.$5,client_app_version:e.$6,cloud_game_id_override:e.$7,event:"CLIENT_FRAME_RENDERED",event_occur_time_ms:f,extra_data:{invoke_ts:b.toString(),latency:g.toString(),native_player:"false",render_ts:a.toString(),request_id:h},session_id:e.$4,source:"JS"}});c("QuickPerformanceLogger").markerPoint(c("qpl")._(378806909,"71"),"rendered",{data:{"int":{latency:g,render_ms:b/1e3}},instanceKey:d});c("QuickPerformanceLogger").markerEnd(c("qpl")._(378806909,"71"),2,d)}})};b.$16=function(a){var b=Object.keys(a);if(b.length>h){b=b[0];delete a[parseInt(b,10)]}};b.$17=function(){var a=this,b=this.$9;b=b==null?void 0:b.getReceivers();b==null?void 0:b.forEach(function(b){if(b.track.kind==="video"){var c=d("EventTimeUtils").tryGetTimestampInMicroSecond();b=b.getSynchronizationSources();if(b.length>0){b=b[0];if(b.rtpTimestamp==null){a.$14=!0;a.$18();return}b.rtpTimestamp!==a.$13&&(a.processFrameTimestamps(b.rtpTimestamp,b.timestamp*1e3,c),a.$13=b.rtpTimestamp)}}})};b.$19=function(){var a=this;if(this.$9===null||this.$14)return;this.$10==null&&(this.$17(),this.$10=window.setInterval(function(){a.$17()},c("CloudGamingWebRTCStatsConfig").collect_rtc_frame_timestamps_in_ms))};b.$18=function(){if(this.$10==null)return;var a=Date.now()-this.$11;(a>this.$12||this.$14)&&(window.clearTimeout(this.$10),this.$10=null)};b.$20=function(a){return a!=null?parseInt(a,10):d("EventTimeUtils").tryGetTimestampInMicroSecond()};b.processInput=function(a){if(a.input==null)return;a=a.input;var b;if(a.touch!=null)b=this.$20(a.touch.timestamp);else if(a.key!=null)b=this.$20(a.key.timestamp);else return;a=b.toString();this.$4!=null&&(a=this.$4+"/"+a);c("QuickPerformanceLogger").markerStart(c("qpl")._(378806909,"71"),b);c("QuickPerformanceLogger").markerAnnotate(c("qpl")._(378806909,"71"),{"int":{input_ms:b/1e3},string:{app_id:this.$3,client_app_id:this.$5,client_app_version:this.$6,cloud_game_id_override:this.$7,request_id:a,session_id:this.$4,source:"JS"}},{instanceKey:b})};b.processInputFeedback=function(a,b){this.$11=Date.now();var c=this.$1[a];c&&c.length>1?(this.$15(c[0],c[1],b),delete this.$1[a]):(this.$16(this.$2),this.$2[a]=b,this.$19())};b.processFrameTimestamps=function(a,b,c){var d=this.$2[a];d?(this.$15(b,c,d),delete this.$2[a]):(this.$16(this.$1),this.$1[a]=[b,c],this.$18())};return a}();b=new a();e=b;g["default"]=e}),98);
__d("CloudGamingWebRTCFramesTracker",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$3={frames:0,framesRendered:0,framesSkipped_1:0,framesSkipped_2:0,framesSkipped_3plus:0,freezeCount_100:0,freezeCount_1000:0,freezeCount_180:0,freezeCount_50:0,freezeCount_500:0,totalRenderDelay:0,totalSquaredRenderDelay:0}}var b=a.prototype;b.enabled=function(){return this.$1!=null};b.getStats=function(){return this.enabled()?this.$3:null};b.process=function(a,b,c){this.$3.frames+=1;this.$3.framesRendered=c;if(a!=null){a=(b-a)/1e3;this.$3.totalRenderDelay+=a;this.$3.totalSquaredRenderDelay+=a*a}if(this.$1!=null){a=b-this.$1;a>=50&&(this.$3.freezeCount_50+=1,a>=100&&(this.$3.freezeCount_100+=1,a>=180&&(this.$3.freezeCount_180+=1,a>=500&&(this.$3.freezeCount_500+=1,a>=1e3&&(this.$3.freezeCount_1000+=1)))))}if(this.$2!=null){a=c-this.$2-1;a>0&&(this.$3.framesSkipped_1+=1,a>1&&(this.$3.framesSkipped_2+=1,a>2&&(this.$3.framesSkipped_3plus+=1)))}this.$2=c;this.$1=b};return a}();f["default"]=a}),66);
__d("CloudGamingWebRTCParsingUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a==null||isNaN(a)?null:a.toString()}function b(a){if(a===void 0)return void 0;a=Number.parseFloat(a);return isNaN(a)?void 0:a}function c(a,b){a=a[b];return a===void 0?void 0:String(a)}function d(a,b){a=a[b];b=Number.parseFloat(a);return isNaN(b)?void 0:b}function e(a){if(a===void 0)return a;else return Math.round(a*1e3)}function g(a){if(a===void 0)return a;else return a/1e3}f.safeToString=a;f.stringToNumber=b;f.parseStatString=c;f.parseStatNumber=d;f.secondToMillis=e;f.milliToSeconds=g}),66);
__d("CloudGamingWebRTCStatsParser",["CloudGamingWebRTCParsingUtil"],(function(a,b,c,d,e,f,g){"use strict";var h={frameRateReceived:0,framesReceived:0,freezeCount:0,freezeCount_100:0,freezeCount_1000:0,freezeCount_500:0,jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterReceivedSec:0,lastWindowAvgDecodeTime:0,maxInterframeDelay:0,timestamp:0,totalAssemblyTime:0,totalDecodeTime:0,totalFreezeDuration:0,totalFreezeDuration_100:0,totalFreezeDuration_1000:0,totalFreezeDuration_500:0,totalInterFrameDelay:0,totalProcessingDelay:0,totalSquaredInterFrameDelay:0};function i(a,b){return a!==void 0&&b!==void 0?a-b:void 0}function j(a,b){return a!==void 0&&b!==void 0&&b>0?a/b:void 0}function k(a){return a!==void 0?Math.round(a):a}function l(a,b,c){var e;if(b.kind!=="audio")return void 0;var f=void 0;if(b.codecId!==void 0){var g=a.get(b.codecId);(g==null?void 0:g.type)==="codec"&&(f=g)}g=void 0;if(b.playoutId!==void 0){a=a.get(b.playoutId);(a==null?void 0:a.type)==="media-playout"&&(g=a)}f=(a=f)==null?void 0:a.mimeType;a=b.jitterBufferDelay;var h=b.jitterBufferTargetDelay,k=b.jitterBufferEmittedCount;e=(e=g)==null?void 0:e.totalPlayoutDelay;g=(g=g)==null?void 0:g.totalSamplesCount;var l=i(a,c==null?void 0:c.jitterBufferDelay),m=i(h,c==null?void 0:c.jitterBufferTargetDelay),n=i(k,c==null?void 0:c.jitterBufferEmittedCount),o=i(e,c==null?void 0:c.totalPlayoutDelay);c=i(g,c==null?void 0:c.totalSamplesCount);l=d("CloudGamingWebRTCParsingUtil").secondToMillis(j(l,n));o=d("CloudGamingWebRTCParsingUtil").secondToMillis(j(o,c));c=o!==void 0&&l!==void 0?o+l:void 0;o=b.audioLevel;o!==void 0&&(o=Math.round(o*32768));return{audioOutputLevel:o,bytesRecv:b.bytesReceived,concealedSamples:b.concealedSamples,currentJitterBufferDelayMs:l,googCodecName:f,googCurrentDelayMs:c,googJitterReceived:d("CloudGamingWebRTCParsingUtil").secondToMillis(b.jitter),googPreferredJitterBufferMs:d("CloudGamingWebRTCParsingUtil").secondToMillis(j(m,n)),id:b.id,insertedSamplesForDeceleration:b.insertedSamplesForDeceleration,jitterBufferDelay:a,jitterBufferEmittedCount:k,jitterBufferTargetDelay:h,mediaType:(o=b.mediaType)!=null?o:b.kind,packetsLost:b.packetsLost,packetsReceived:b.packetsReceived,removedSamplesForAcceleration:b.removedSamplesForAcceleration,silentConcealedSamples:b.silentConcealedSamples,timestamp:b.timestamp,totalAudioEnergy:b.totalAudioEnergy,totalPlayoutDelay:e,totalSamplesCount:g,totalSamplesDuration:b.totalSamplesDuration,totalSamplesReceived:b.totalSamplesReceived}}function m(a){return a.type!=="ssrc"?void 0:{audioOutputLevel:a.audioOutputLevel,bytesRecv:a.bytesReceived,currentJitterBufferDelayMs:a.googJitterBufferMs,googCodecName:a.googCodecName,googCurrentDelayMs:a.googCurrentDelayMs,googJitterReceived:a.googJitterReceived,googMaxDecodeMs:a.googMaxDecodeMs,googPreferredJitterBufferMs:a.googPreferredJitterBufferMs,id:a.id,mediaType:a.mediaType,packetsLost:a.packetsLost,packetsReceived:a.packetsReceived,timestamp:a.timestamp,totalAudioEnergy:a.totalAudioEnergy,totalSamplesDuration:a.totalSamplesDuration}}function n(a,b,c,d,e){if(c===0)return a.map(function(a){return{freezeDurationSec:0,likelyFreezeCount:0}});var f=(e-d*d/c)/c,g=f-b*b/3;function h(a){var e=b*b/3+a*a/(c-1);e=f>e?1:0;var h=0;e&&(c>1?h=Math.sqrt(g*(c-1)):d>a&&(h=d));return{freezeDurationSec:h,likelyFreezeCount:h>0?e:0}}return a.map(h)}function o(a,b,c){if(c===0)return 0;b=(b-a*a/c)/c;b=Math.sqrt(b);a=a/c;return a+3*b}function a(a,b,c){var d;d=(d=c==null?void 0:c.newApiStats)!=null?d:h;var e=d,f=void 0,g=void 0;for(var a=a.values(),i=Array.isArray(a),j=0,a=i?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(i){if(j>=a.length)break;k=a[j++]}else{j=a.next();if(j.done)break;k=j.value}k=k;switch(k.type){case"ssrc":if(k.mediaType!=="video")break;f===void 0&&(f=b.googFrameRateReceived);k.codecImplementationName!==void 0&&(e.codecImplementationName=k.codecImplementationName);var l=b.googFramesDecoded,m=c==null?void 0:c.googFramesDecoded;if(l!==void 0&&m!==void 0&&l-m>0){l=l-m;m=e.totalDecodeTime-d.totalDecodeTime;g=m/l}break;case"inbound-rtp":var p;if(k.kind!=="video")break;m=k.framesReceived;if(c!=null&&c.newApiStats!==void 0&&m!==void 0){l=m-c.newApiStats.framesReceived;m=(b.timestamp-c.timestamp)/1e3;f=l/m}l=k.totalInterFrameDelay;m=k.totalSquaredInterFrameDelay;l!==void 0&&m!==void 0&&(e=babelHelpers["extends"]({},e,{totalInterFrameDelay:l,totalSquaredInterFrameDelay:m}));e=babelHelpers["extends"]({},e,{framesReceived:(p=k.framesReceived)!=null?p:e.framesReceived,jitterBufferDelay:(p=k.jitterBufferDelay)!=null?p:e.jitterBufferDelay,jitterBufferEmittedCount:(p=k.jitterBufferEmittedCount)!=null?p:e.jitterBufferEmittedCount,jitterReceivedSec:(p=k.jitter)!=null?p:e.jitterReceivedSec,timestamp:(p=k.timestamp)!=null?p:e.timestamp,totalAssemblyTime:(p=k.totalAssemblyTime)!=null?p:e.totalAssemblyTime,totalDecodeTime:(p=k.totalDecodeTime)!=null?p:e.totalDecodeTime,totalProcessingDelay:(p=k.totalProcessingDelay)!=null?p:e.totalProcessingDelay});k=b.googFramesDecoded;p=c==null?void 0:c.googFramesDecoded;if(g===void 0&&(k!==void 0&&p!==void 0&&k-p>0)){var q=k-p,r=e.totalDecodeTime-d.totalDecodeTime;g=r/q}if(l!==void 0&&m!==void 0&&k!==void 0&&p!==void 0&&k-p>0&&(c==null?void 0:c.newApiStats)!=null){r=.1;q=l-c.newApiStats.totalInterFrameDelay;l=m-c.newApiStats.totalSquaredInterFrameDelay;m=k-p;p=(b.timestamp-c.firstTimestamp)/1e3;k=k/p;p=1/k;k=p*r;e.maxInterframeDelay=o(q,l,m);p=n([.1,.18,.5,1],k,m,q,l);e.freezeCount+=p[1].likelyFreezeCount;e.freezeCount_100+=p[0].likelyFreezeCount;e.freezeCount_500+=p[2].likelyFreezeCount;e.freezeCount_1000+=p[3].likelyFreezeCount;e.totalFreezeDuration+=p[1].freezeDurationSec;e.totalFreezeDuration_100+=p[0].freezeDurationSec;e.totalFreezeDuration_500+=p[2].freezeDurationSec;e.totalFreezeDuration_1000+=p[3].freezeDurationSec}break;default:break}}f!==void 0&&(e.frameRateReceived=f);g!==void 0&&(e.lastWindowAvgDecodeTime=g);return e}var p=function(){function a(){}var b=a.prototype;b.retrieveVideoReceiveStats=function(a,b){if(a.type!=="ssrc")return void 0;var c=a.googFrameRateOutput,d=a.framesDecoded,e=b!=null&&b.id===a.id&&b.googFramesDecoded!==void 0?b.googFramesDecoded:0;c=c!==void 0&&c>0&&d!==void 0&&d>e;d=[];e=[];var f=[180,100,500,1e3];b!=null&&b.id===a.id&&(d=[b.freezeCount_180,b.freezeCount_100,b.freezeCount_500,b.freezeCount_1000],e=[b.totalFreezeDuration_180,b.totalFreezeDuration_100,b.totalFreezeDuration_500,b.totalFreezeDuration_1000]);var g=a.googInterframeDelayMax;for(var h=0;h<f.length;h++)if(c&&g!==void 0){var i=g>f[h]?1:0,j=i>0?+g/1e3:0;d[h]=d[h]===void 0?i:d[h]+i;e[h]=e[h]===void 0?j:e[h]+j}var k,l;b!=null&&b.id===a.id&&(k=b.firstFrameTime,l=b.lastFrameTime);c&&(l=a.timestamp,k===void 0&&(k=a.timestamp-.5));return{bytesRecv:a.bytesReceived,firstFrameTime:k,firstTimestamp:(i=b==null?void 0:b.firstTimestamp)!=null?i:a.timestamp,freezeCount_100:d[1],freezeCount_1000:d[3],freezeCount_180:d[0],freezeCount_500:d[2],googCodecName:a.googCodecName,googCurrentDelayMs:a.googCurrentDelayMs,googDecodeMs:a.googDecodeMs,googFirstFrameReceivedToDecodedMs:a.googFirstFrameReceivedToDecodedMs,googFrameHeightReceived:a.googFrameHeightReceived,googFrameRateDecoded:a.googFrameRateDecoded,googFrameRateOutput:a.googFrameRateOutput,googFrameRateReceived:a.googFrameRateReceived,googFramesDecoded:a.framesDecoded,googFrameWidthReceived:a.googFrameWidthReceived,googInterframeDelayMax:a.googInterframeDelayMax,googJitterBufferMs:a.googJitterBufferMs,googMaxDecodeMs:a.googMaxDecodeMs,googMinPlayoutDelayMs:a.googMinPlayoutDelayMs,googRenderDelayMs:a.googRenderDelayMs,googTargetDelayMs:a.googTargetDelayMs,id:a.id,lastFrameTime:l,mediaType:a.mediaType,nackCount:a.nackCount,packetsLost:a.packetsLost,packetsReceived:a.packetsReceived,timestamp:a.timestamp,totalFreezeDuration_100:e[1],totalFreezeDuration_1000:e[3],totalFreezeDuration_180:e[0],totalFreezeDuration_500:e[2]}};b.retrieveAudioReceiveStats=function(a){return m(a)};b.retrieveCandidatePairStats=function(a){return a.type!=="googCandidatePair"?void 0:{bytesReceived:a.bytesReceived,bytesSent:a.bytesSent,googRttMs:a.googRtt,googTransportType:a.googTransportType,id:a.id,packetsSent:a.packetsSent,timestamp:a.timestamp}};return a}(),q=function(){function a(){}var b=a.prototype;b.retrieveVideoReceiveStats=function(a,b,c){if(b.kind!=="video")return void 0;var e=void 0;if(b.codecId!==void 0){a=a.get(b.codecId);(a==null?void 0:a.type)==="codec"&&(e=a)}a=b.totalDecodeTime;var f=b.framesDecoded,g=b.framesDropped,h=b.framesReceived,l=b.jitterBufferDelay,m=b.jitterBufferTargetDelay,n=b.jitterBufferEmittedCount,o=d("CloudGamingWebRTCParsingUtil").milliToSeconds(i(b.timestamp,c==null?void 0:c.timestamp)),p=i(a,c==null?void 0:c.totalDecodeTime),q=i(h,c==null?void 0:c.framesReceived);f=i(f,c==null?void 0:c.googFramesDecoded);g=i(g,c==null?void 0:c.googFramesDropped);var r=i(l,c==null?void 0:c.jitterBufferDelay),s=i(m,c==null?void 0:c.jitterBufferTargetDelay),t=i(n,c==null?void 0:c.jitterBufferEmittedCount),u,v;c!=null&&(u=c.firstFrameTime,v=c.lastFrameTime);var w=b.framesPerSecond;w!==void 0&&w>0&&(v=b.timestamp,u===void 0&&(u=b.timestamp-.5));return{bytesRecv:b.bytesReceived,fecPacketsReceived:b.fecPacketsReceived,firstFrameTime:u,firstTimestamp:(w=c==null?void 0:c.firstTimestamp)!=null?w:b.timestamp,framesReceived:h,googCodecName:(c=e)==null?void 0:c.mimeType,googDecodeMs:d("CloudGamingWebRTCParsingUtil").secondToMillis(j(p,f)),googFrameHeightReceived:b.frameHeight,googFrameRateDecoded:k(j(f,o)),googFrameRateOutput:k(j(i(f,g),o)),googFrameRateReceived:k(j(q,o)),googFramesDecoded:b.framesDecoded,googFramesDropped:b.framesDropped,googFrameWidthReceived:b.frameWidth,googJitterBufferMs:d("CloudGamingWebRTCParsingUtil").secondToMillis(j(r,t)),googTargetDelayMs:d("CloudGamingWebRTCParsingUtil").secondToMillis(j(s,t)),id:b.id,jitterBufferDelay:l,jitterBufferEmittedCount:n,jitterBufferTargetDelay:m,keyFramesDecoded:b.keyFramesDecoded,lastFrameTime:v,mediaType:(w=b.mediaType)!=null?w:b.kind,nackCount:b.nackCount,packetsLost:b.packetsLost,packetsReceived:b.packetsReceived,pliCount:b.pliCount,timestamp:b.timestamp,totalDecodeTime:a}};b.retrieveAudioReceiveStats=function(a,b,c){return b.kind!=="audio"?void 0:l(a,b,c)};b.retrieveAudioSendStats=function(a){return a.kind!=="audio"?void 0:{audioLevel:a.audioLevel,id:a.id,timestamp:a.timestamp,totalAudioEnergy:a.totalAudioEnergy,totalSamplesDuration:a.totalSamplesDuration}};b.retrieveCandidatePairStats=function(a,b){var c=void 0;if(b.localCandidateId!==void 0){a=a.get(b.localCandidateId);(a==null?void 0:a.type)==="local-candidate"&&(c=a)}return{bytesReceived:b.bytesReceived,bytesSent:b.bytesSent,googRttMs:d("CloudGamingWebRTCParsingUtil").secondToMillis(b.currentRoundTripTime),googTransportType:(a=c)==null?void 0:a.protocol,id:b.id,packetsSent:b.packetsSent,timestamp:b.timestamp}};return a}();b=function(){function a(a,b){this.$1=a?new p():null,this.$2=b?new q():null}var b=a.prototype;b.legacy=function(){return this.$1};b.standard=function(){return this.$2};return a}();g.computeNewApiStatsVideo=a;g.CloudGamingWebRTCStatsParser=b}),98);
__d("CloudGamingWebrtcStatsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743374");b=d("FalcoLoggerInternal").create("cloud_gaming_webrtc_stats",a);e=b;g["default"]=e}),98);
__d("CloudGamingWebRTCStatsUtil",["CloudGamingWebRTCParsingUtil","CloudGamingWebRTCStatsParser","CloudGamingWebrtcStatsFalcoEvent","performance"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){return Object.fromEntries(Object.entries(a).filter(function(a){a[0];a=a[1];return a!==void 0}))};function i(a,b){if(!a)return b;return!b?a:Object.assign(a,h(b))}function j(a,b){if(!a)return b;return!b?a:Object.assign(a,h(b))}function k(a,b){if(!a)return b;return!b?a:Object.assign(a,h(b))}function a(a,b,c){var e={activeCandidatePair:void 0,audioRecvSsrc:void 0,audioSend:void 0,calculated:void 0,videoRecvSsrc:void 0},f=c.legacy();c=c.standard();for(var g=a.values(),h=Array.isArray(g),l=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(h){if(l>=g.length)break;m=g[l++]}else{l=g.next();if(l.done)break;m=l.value}m=m;switch(m.type){case"ssrc":if(!f)break;if(m.mediaType==="audio"&&m.audioOutputLevel!==void 0){var n=f.retrieveAudioReceiveStats(m);e.audioRecvSsrc=i(e.audioRecvSsrc,n)}else if(m.mediaType==="video"){n=b&&b.videoRecvSsrc;n=f.retrieveVideoReceiveStats(m,n);e.videoRecvSsrc=j(e.videoRecvSsrc,n)}break;case"googCandidatePair":if(!f)break;if(m.googActiveConnection!=="true")break;n=f.retrieveCandidatePairStats(m);e.activeCandidatePair=k(e.activeCandidatePair,n);break;case"inbound-rtp":if(!c)break;if(m.kind==="audio"){n=b&&b.audioRecvSsrc;n=c.retrieveAudioReceiveStats(a,m,n);e.audioRecvSsrc=i(n,e.audioRecvSsrc)}else if(m.kind==="video"){n=b&&b.videoRecvSsrc;n=c.retrieveVideoReceiveStats(a,m,n);e.videoRecvSsrc=j(n,e.videoRecvSsrc)}break;case"media-source":if(!c)break;m.kind==="audio"&&(e.audioSend=c.retrieveAudioSendStats(m));break;case"candidate-pair":if(!c)break;n=c.retrieveCandidatePairStats(a,m);e.activeCandidatePair=k(n,e.activeCandidatePair);break;default:break}}e.videoRecvSsrc&&(e.videoRecvSsrc.newApiStats=d("CloudGamingWebRTCStatsParser").computeNewApiStatsVideo(a,e.videoRecvSsrc,b==null?void 0:b.videoRecvSsrc));return e}function b(a,b,d,e){if(a==null)return;c("CloudGamingWebrtcStatsFalcoEvent").log(function(){return{app_id:d,audio_level_sent:a.audioLevel,event_occur_time_ms:Date.now().toString(),media_type:"audio",passed_time_sec:Math.round(a.timestamp-b).toString(),session_id:e,total_audio_energy_sent:a.totalAudioEnergy,total_samples_duration_sent:a.totalSamplesDuration}})}function e(a,b,e,f,g){if(a!=null&&b!=null&&a.id===b.id){var h=n(a,b);c("CloudGamingWebrtcStatsFalcoEvent").log(function(){var a;return{app_id:f,audio_concealed_samples:(a=b.concealedSamples)==null?void 0:a.toString(),audio_inserted_samples:(a=b.insertedSamplesForDeceleration)==null?void 0:a.toString(),audio_out_put_level:(a=b.audioOutputLevel)==null?void 0:a.toString(),audio_removed_samples:(a=b.removedSamplesForAcceleration)==null?void 0:a.toString(),audio_silent_concealed_samples:(a=b.silentConcealedSamples)==null?void 0:a.toString(),audio_total_samples:(a=b.totalSamplesReceived)==null?void 0:a.toString(),bytes_received_per_sec:d("CloudGamingWebRTCParsingUtil").safeToString(h.bytesReceivedPerSecond),codec_name:b.googCodecName,current_delay_ms:(a=b.googCurrentDelayMs)==null?void 0:a.toString(),event_occur_time_ms:Date.now().toString(),jitter_buffer_ms:(a=b.currentJitterBufferDelayMs)==null?void 0:a.toString(),jitter_received:(a=b.googJitterReceived)==null?void 0:a.toString(),max_decode_ms:(a=b.googMaxDecodeMs)==null?void 0:a.toString(),media_type:b.mediaType,packets_lost:(a=b.packetsLost)==null?void 0:a.toString(),packets_received_per_sec:d("CloudGamingWebRTCParsingUtil").safeToString(h.packetsReceivedPerSecond),passed_time_sec:Math.round(b.timestamp-e).toString(),preferred_jitter_buffer_ms:(a=b.googPreferredJitterBufferMs)==null?void 0:a.toString(),session_id:g,total_audio_energy:b.totalAudioEnergy,total_samples_duration:b.totalSamplesDuration}});return h}return null}function f(a,b,e,f,g,h){if(a!=null&&b!=null&&a.id===b.id){var i=n(a,b),j=null;if(b.newApiStats!==void 0){j={};a=Object.keys(b.newApiStats);for(var k=0;k<a.length;k++){var m=a[k];j["std__"+m]=b.newApiStats[m]}}if(h!=null){j=(m=j)!=null?m:{};a=Object.keys(h);for(k=0;k<a.length;k++){m=a[k];var o=h[m];o!==void 0&&o!==0&&(j["exp__"+m]=o.toString())}}m=b.newApiStats;var p=(o=b.freezeCount_180)!=null?o:m==null?void 0:m.freezeCount,q=(a=b.freezeCount_100)!=null?a:m==null?void 0:m.freezeCount_100,r=(k=b.freezeCount_1000)!=null?k:m==null?void 0:m.freezeCount_1000,s=(h=b.freezeCount_500)!=null?h:m==null?void 0:m.freezeCount_500,t=(o=b.totalFreezeDuration_180)!=null?o:m==null?void 0:m.totalFreezeDuration,u=(a=b.totalFreezeDuration_100)!=null?a:m==null?void 0:m.totalFreezeDuration_100,v=(k=b.totalFreezeDuration_1000)!=null?k:m==null?void 0:m.totalFreezeDuration_1000,w=(h=b.totalFreezeDuration_500)!=null?h:m==null?void 0:m.totalFreezeDuration_500;c("CloudGamingWebrtcStatsFalcoEvent").log(function(){var a;return{app_id:f,bytes_received_per_sec:d("CloudGamingWebRTCParsingUtil").safeToString(i.bytesReceivedPerSecond),codec_name:b.googCodecName,current_delay_ms:(a=b.googCurrentDelayMs)==null?void 0:a.toString(),decode_ms:(a=b.googDecodeMs)==null?void 0:a.toString(),event_occur_time_ms:Date.now().toString(),extra_data:j,fec_packets_received:(a=b.fecPacketsReceived)==null?void 0:a.toString(),first_frame_received_to_decode_ms:(a=b.googFirstFrameReceivedToDecodedMs)==null?void 0:a.toString(),frame_height_received:(a=b.googFrameHeightReceived)==null?void 0:a.toString(),frame_rate_decoded:(a=b.googFrameRateDecoded)==null?void 0:a.toString(),frame_rate_output:(a=b.googFrameRateOutput)==null?void 0:a.toString(),frame_rate_received:(a=b.googFrameRateReceived)==null?void 0:a.toString(),frame_width_received:(a=b.googFrameWidthReceived)==null?void 0:a.toString(),frames_decoded:(a=b.googFramesDecoded)==null?void 0:a.toString(),frames_dropped:(a=b.googFramesDropped)==null?void 0:a.toString(),freeze_count:p==null?void 0:p.toString(),freeze_count_100:q==null?void 0:q.toString(),freeze_count_1000:r==null?void 0:r.toString(),freeze_count_500:s==null?void 0:s.toString(),interframe_delay_max:(a=b.googInterframeDelayMax)==null?void 0:a.toString(),jitter_buffer_ms:(a=b.googJitterBufferMs)==null?void 0:a.toString(),key_frames_decoded:(a=b.keyFramesDecoded)==null?void 0:a.toString(),max_decode_ms:(a=b.googMaxDecodeMs)==null?void 0:a.toString(),media_type:b.mediaType,min_playout_delay_ms:(a=b.googMinPlayoutDelayMs)==null?void 0:a.toString(),nack_count:(a=b.nackCount)==null?void 0:a.toString(),packets_lost:(a=b.packetsLost)==null?void 0:a.toString(),packets_received_per_sec:d("CloudGamingWebRTCParsingUtil").safeToString(i.packetsReceivedPerSecond),passed_time_sec:Math.round(b.timestamp-e).toString(),pli_count:(a=b.pliCount)==null?void 0:a.toString(),render_delay_ms:(a=b.googRenderDelayMs)==null?void 0:a.toString(),session_id:g,target_delay_ms:(a=b.googTargetDelayMs)==null?void 0:a.toString(),total_frames_duration:l(b),total_freeze_duration:t,total_freeze_duration_100:u,total_freeze_duration_1000:v,total_freeze_duration_500:w}});return i}return null}function l(a){return a&&a.firstFrameTime!==void 0&&a.lastFrameTime!==void 0?(a.lastFrameTime-a.firstFrameTime)/1e3:0}function m(a,b,c,d){if(a===void 0||b===void 0)return{floor:void 0,round:void 0};a=1e3*(a-b)/(c-d);return{floor:Math.floor(a),round:Math.round(a)}}function n(a,b){var c=m(b.bytesRecv,a.bytesRecv,b.timestamp,a.timestamp);b=m(b.packetsReceived,a.packetsReceived,b.timestamp,a.timestamp);return{bytesReceivedPerSecond:c.round,packetsReceivedPerSecond:b.round}}function o(a,b,e,f,g){if(a!=null&&b!=null&&a.id===b.id){var h=m(b.bytesReceived,a.bytesReceived,b.timestamp,a.timestamp),i=m(b.bytesSent,a.bytesSent,b.timestamp,a.timestamp),j=m(b.packetsSent,a.packetsSent,b.timestamp,a.timestamp);c("CloudGamingWebrtcStatsFalcoEvent").log(function(){var a;return{app_id:f,bytes_received_per_sec:d("CloudGamingWebRTCParsingUtil").safeToString(h.floor),bytes_sent_per_sec:d("CloudGamingWebRTCParsingUtil").safeToString(i.floor),event_occur_time_ms:Date.now().toString(),packets_sent_per_sec:d("CloudGamingWebRTCParsingUtil").safeToString(j.floor),passed_time_sec:Math.round(b.timestamp-e).toString(),rtt_ms:(a=b.googRttMs)==null?void 0:a.toString(),session_id:g,transport_type:b.googTransportType}});return{bytesReceivedPerSecond:h.round,bytesSentPerSecond:i.round,packetsSentPerSecond:j.round}}return null}function p(a,b){b=new Map(b);for(var d=0;d<a.length;d++){var e=a[d];e=q(e);if(!e)continue;b.set(e.id,e)}e=c("performance").now!==void 0?Math.trunc(c("performance").now()+c("performance").timeOrigin):Date.now();for(var d=b.values(),a=Array.isArray(d),f=0,d=a?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(a){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;g.timestamp!==void 0&&(g.timestamp=e)}return b}function q(a){if(a.type==="ssrc")return{audioOutputLevel:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("audioOutputLevel")),bytesReceived:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("bytesReceived")),bytesSent:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("bytesSent")),codecImplementationName:a.stat("codecImplementationName"),framesDecoded:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("framesDecoded")),googAccelerateRate:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googAccelerateRate")),googCodecName:a.stat("googCodecName"),googCurrentDelayMs:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googCurrentDelayMs")),googDecodeMs:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googDecodeMs")),googDecodingCNG:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googDecodingCNG")),googDecodingCTN:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googDecodingCTN")),googDecodingNormal:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googDecodingNormal")),googDecodingPLC:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googDecodingPLC")),googDecodingPLCCNG:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googDecodingPLCCNG")),googExpandRate:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googExpandRate")),googFirstFrameReceivedToDecodedMs:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googFirstFrameReceivedToDecodedMs")),googFrameHeightReceived:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googFrameHeightReceived")),googFrameRateDecoded:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googFrameRateDecoded")),googFrameRateOutput:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googFrameRateOutput")),googFrameRateReceived:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googFrameRateReceived")),googFrameWidthReceived:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googFrameWidthReceived")),googInterframeDelayMax:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googInterframeDelayMax")),googJitterBufferMs:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googJitterBufferMs")),googJitterReceived:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googJitterReceived")),googMaxDecodeMs:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googMaxDecodeMs")),googMinPlayoutDelayMs:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googMinPlayoutDelayMs")),googPreemptiveExpandRate:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googPreemptiveExpandRate")),googPreferredJitterBufferMs:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googPreferredJitterBufferMs")),googRenderDelayMs:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googRenderDelayMs")),googRtt:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googRtt")),googTargetDelayMs:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googTargetDelayMs")),googTrackId:a.stat("googTrackId"),id:a.id,mediaType:a.stat("mediaType"),nackCount:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("nackCount")),packetsLost:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("packetsLost")),packetsReceived:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("packetsReceived")),packetsSent:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("packetsSent")),ssrc:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("ssrc")),timestamp:a.timestamp,totalAudioEnergy:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("totalAudioEnergy")),totalSamplesDuration:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("totalSamplesDuration")),type:"ssrc"};else if(a.type==="googCandidatePair")return{bytesReceived:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("bytesReceived")),bytesSent:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("bytesSent")),googActiveConnection:a.stat("googActiveConnection"),googRtt:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("googRtt")),googTransportType:a.stat("googTransportType"),id:a.id,packetsSent:d("CloudGamingWebRTCParsingUtil").stringToNumber(a.stat("packetsSent")),timestamp:a.timestamp,type:"googCandidatePair"};return void 0}g.convertRTCStats=a;g.logAudioSendStats=b;g.logAudioSsrcStats=e;g.logVideoSsrcStats=f;g.estimateFramesDuration=l;g.logCandidatePairStats=o;g.mergeStandAndLegacyStats=p}),98);
__d("CloudGamingWebRTCStatsTracker",["CloudGamingWebRTCStatsUtil","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){this.$1=a,this.$2=b,this.$4=c}var b=a.prototype;b.process=function(a,b){var e=this.$4.audioRecvSsrc,f=this.$4.videoRecvSsrc,g=this.$4.activeCandidatePair;this.$4=a;if(this.$3===void 0){var h;this.$3=(h=(h=(h=a.activeCandidatePair)==null?void 0:h.timestamp)!=null?h:(h=a.audioRecvSsrc)==null?void 0:h.timestamp)!=null?h:(h=a.videoRecvSsrc)==null?void 0:h.timestamp}if(this.$3===void 0)throw c("unrecoverableViolation")("must have initial timestamp","cloud_gaming_infra");h=(h=this.$3)!=null?h:0;d("CloudGamingWebRTCStatsUtil").logAudioSendStats(a.audioSend,h,this.$1,this.$2);e=d("CloudGamingWebRTCStatsUtil").logAudioSsrcStats(e,a.audioRecvSsrc,h,this.$1,this.$2);f=d("CloudGamingWebRTCStatsUtil").logVideoSsrcStats(f,a.videoRecvSsrc,h,this.$1,this.$2,b);b=d("CloudGamingWebRTCStatsUtil").logCandidatePairStats(g,a.activeCandidatePair,h,this.$1,this.$2);return{baseMediaAudio:e,baseMediaVideo:f,candidatePair:b}};return a}();g["default"]=a}),98);
__d("InstantGamesDebugScreenConstants",["keyMirror"],(function(a,b,c,d,e,f,g){"use strict";a=c("keyMirror")({GAMING_DEBUG_APP_ID:null,GAMING_DEBUG_CLIENT_LAG:null,GAMING_DEBUG_DSP_OFFER:null,GAMING_DEBUG_OFFER_RESPONSE:null,GAMING_DEBUG_PLAY_TOKEN:null,GAMING_DEBUG_PROGRESS:null,GAMING_DEBUG_SESSION_ID:null,GAMING_DEBUG_TEXT:null,GAMING_DEBUG_USER_EVENT:null,GAMING_DEBUG_USER_INTERACT:null,GAMING_DEBUG_VISIBLE:null,GAMING_DEBUG_WEBRTCSTATS:null});g.InstantGamesDebugScreenMessageTypes=a}),98);
__d("CloudGamingWebRTCStatsCache",["CloudGamingEndSummary","CloudGamingInputLatencyTracker","CloudGamingWebRTCFramesTracker","CloudGamingWebRTCStatsConfig","CloudGamingWebRTCStatsParser","CloudGamingWebRTCStatsTracker","CloudGamingWebRTCStatsUtil","InstantGamesDebugScreenConstants","Promise","UserAgent","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.data=function(){return this.$1};b.parser=function(){return this.$2};return a}();function i(a){if(c("UserAgent").isBrowser("Chrome < 117")||c("UserAgent").isBrowser("Opera")||c("UserAgent").isBrowser("Edge (Chromium Based) < 117")){var e=new(b("Promise"))(function(b,c){a.getStats(b,c)});return b("Promise").all([e,a.getStats()]).then(function(a){var b=a[0];a=a[1];return new h(d("CloudGamingWebRTCStatsUtil").mergeStandAndLegacyStats(b.result(),a),new(d("CloudGamingWebRTCStatsParser").CloudGamingWebRTCStatsParser)(!0,!0))})}return a.getStats().then(function(a){return new h(new Map(a),new(d("CloudGamingWebRTCStatsParser").CloudGamingWebRTCStatsParser)(!1,!0))})}a=function(){function a(){this.$6=0}var b=a.prototype;b.logRTCConnection=function(a,b,e,f){var g=this;this.$2=a;this.$3=b;this.$1=e;this.$8=f;i(e).then(function(a){g.$7=d("CloudGamingWebRTCStatsUtil").convertRTCStats(a.data(),null,a.parser());g.$10=new(c("CloudGamingWebRTCStatsTracker"))(g.$2,g.$3,g.$7);g.$11=new(c("CloudGamingWebRTCFramesTracker"))();a=c("gkx")("3723")?1e3:c("CloudGamingWebRTCStatsConfig").collect_rtc_media_stats_interval_in_sec*1e3;g.$4=window.setInterval(function(){g.$12()},a)})["catch"]();c("CloudGamingInputLatencyTracker").setConnection(e)};b.$12=function(){var a=this,b=this.$1;if(!b||b.connectionState!=="connected")return;i(b).then(function(b){var e,f=a.$7;f=d("CloudGamingWebRTCStatsUtil").convertRTCStats(b.data(),f,b.parser());a.$7=f;a.$7.calculated=a.$9;a.$8&&a.$8(d("InstantGamesDebugScreenConstants").InstantGamesDebugScreenMessageTypes.GAMING_DEBUG_WEBRTCSTATS,a.$7);b=c("gkx")("3723")?1e3:c("CloudGamingWebRTCStatsConfig").log_rtc_media_stats_interval_in_sec*1e3;var g=Date.now();if(g-a.$6<b)return;a.$9=(b=a.$10)==null?void 0:b.process(f,(b=a.$11)==null?void 0:b.getStats());a.$6=g;b=(f=a.$7)==null?void 0:f.videoRecvSsrc;f=(g=a.$7)==null?void 0:g.audioRecvSsrc;g=(g=a.$9)==null?void 0:g.baseMediaAudio;e=(e=a.$9)==null?void 0:e.baseMediaVideo;g=new Map([["frame_rate_output",b==null?void 0:b.googFrameRateOutput],["frame_rate_received",b==null?void 0:b.googFrameRateReceived],["frame_rate_decoded",b==null?void 0:b.googFrameRateDecoded],["video_jitter_buffer",b==null?void 0:b.googJitterBufferMs],["video_current_delay",b==null?void 0:b.googCurrentDelayMs],["video_bytes_per_sec_recv",e==null?void 0:e.bytesReceivedPerSecond],["audio_jitter_buffer",f==null?void 0:f.currentJitterBufferDelayMs],["audio_current_delay",f==null?void 0:f.googCurrentDelayMs],["audio_bytes_per_sec_recv",g==null?void 0:g.bytesReceivedPerSecond],["rtt",(e=a.$7)==null?void 0:(f=e.activeCandidatePair)==null?void 0:f.googRttMs]]);e=d("CloudGamingWebRTCStatsUtil").estimateFramesDuration(b);c("CloudGamingEndSummary").processWebRtcStats(g,{freezeCount_100:b==null?void 0:b.freezeCount_100,freezeCount_1000:b==null?void 0:b.freezeCount_1000,freezeCount_180:b==null?void 0:b.freezeCount_180,freezeCount_500:b==null?void 0:b.freezeCount_500,totalFramesDuration:e})})["catch"]()};b.clear=function(){this.$1=null,this.$7=null,window.clearTimeout(this.$4)};b.getWebRTCStats=function(){return this.$7};b.logVideoFrame=function(a,b,c){var d;(d=this.$11)==null?void 0:d.process(a,b,c)};return a}();e=new a();f=e;g["default"]=f}),98);
__d("CloudGamingWebRTCStatsLogging",["CloudGamingWebRTCStatsCache"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){switch(d.type){case"PEER_CONNECTION_CREATED":c("CloudGamingWebRTCStatsCache").clear();c("CloudGamingWebRTCStatsCache").logRTCConnection(b,a,d.connection);break;case"DISCONNECT":case"RESOURCE_CLOSED":c("CloudGamingWebRTCStatsCache").clear();break;default:break}}g["default"]=a}),98);
__d("CloudGamingCentralLogging",["CloudGamingDevLogging","CloudGamingLatencyLogging","CloudGamingSessionEventLogging","CloudGamingWebRTCStatsLogging"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e,f,g,h,i,j,k,l){l===void 0&&(l=null),window.setTimeout(function(){c("CloudGamingDevLogging")(h),c("CloudGamingLatencyLogging")(a,b,d,e,f,g,h,i,j,k,l),c("CloudGamingSessionEventLogging")(a,b,d,e,f,h,i,j,k,l),c("CloudGamingWebRTCStatsLogging")(a,b,h)},0)}g["default"]=a}),98);
__d("CloudGamingErrorTypes",[],(function(a,b,c,d,e,f){"use strict";a={ACCESS_TOKEN_GEN_FAILED:"ACCESS_TOKEN_GEN_FAILED",APP_NOT_FOUND:"APP_NOT_FOUND",CANNOT_SEE_CLOUD_GAME:"CANNOT_SEE_CLOUD_GAME",CAPACITY_ERROR:"CAPACITY_ERROR",CONNECTION_TIMEOUT:"CONNECTION_TIMEOUT",CONNECTION_TIMEOUT_WARNING:"CONNECTION_TIMEOUT_WARNING",GAME_NODE_IN_USE:"GAME_NODE_IN_USE",GAME_NODE_TERMINATING:"GAME_NODE_TERMINATING",H264_ERROR:"H264_ERROR",HORIZON_TRAVEL_FAILED:"HORIZON_TRAVEL_FAILED",NO_HEARTBEATS_FROM_SERVER:"NO_HEARTBEATS_FROM_SERVER",PEER_CONNECTION_CLOSED:"PEER_CONNECTION_CLOSED",REGION_UNAVAILABLE:"REGION_UNAVAILABLE",UNKNOWN:"UNKNOWN",UNKNOWN_CREATE_OFFER_FAILURE:"UNKNOWN_CREATE_OFFER_FAILURE",UNSUPPORTED_BROWSER:"UNSUPPORTED_BROWSER",UNSUPPORTED_DEVICE:"UNSUPPORTED_DEVICE",UNSUPPORTED_OS:"UNSUPPORTED_OS",UPDATE_BROWSER:"UPDATE_BROWSER",UPGRADE_ANDROID_WEBVIEW_VS:"UPGRADE_ANDROID_WEBVIEW_VS",UPGRADE_FACEBOOK_FOR_ANDROID:"UPGRADE_FACEBOOK_FOR_ANDROID",UPGRADE_MOBILE_OS_VS:"UPGRADE_MOBILE_OS_VS",USE_CHROME_DESKTOP:"USE_CHROME_DESKTOP",USE_FACEBOOK_FOR_ANDROID:"USE_FACEBOOK_FOR_ANDROID",USE_MOBILE_SAFARI:"USE_MOBILE_SAFARI"};b={BROWSER_UNSUPPORTED:"BROWSER_UNSUPPORTED",CREATE_OFFER_FAILURE:"CREATE_OFFER_FAILURE",HORIZON_TRAVEL_FAILED:"HORIZON_TRAVEL_FAILED",NO_CONFIG_PROVIDED:"NO_CONFIG_PROVIDED",NO_HEARTBEATS_FROM_SERVER:"NO_HEARTBEATS_FROM_SERVER",NO_MATCHING_RESOURCES:"NO_MATCHING_RESOURCES",PEER_CONNECTION_CLOSED:"PEER_CONNECTION_CLOSED",UNKNOWN:"UNKNOWN"};f.CloudGamingErrorTypes=a;f.CloudGamingErrorCode=b}),66);
__d("CloudGamingApertureLoggingMiddleware",["CloudGamingCentralLogging","CloudGamingErrorTypes","CloudGamingSessionEventFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h=!1;a=function(a,b,e,f,g,i,j,k,l,m){m===void 0&&(m=null);h=!1;return function(n,o,p){c("CloudGamingCentralLogging")(b,a,e,f,g,i,n,j,k,l,m);switch(n.type){case"CLIENT_TICK":if(h)return n;p().connection.phase==="live"&&(h=!0,c("CloudGamingSessionEventFalcoEvent").log(function(){return{app_id:a,client_app_id:e,client_app_version:f,cloud_game_id_override:g,entry_point:j,event:"TRANSITIONED_TO_LIVE",session_id:b,source:"JS"}}));break;case"CONNECTION_ERROR":n.code===d("CloudGamingErrorTypes").CloudGamingErrorCode.PEER_CONNECTION_CLOSED&&c("CloudGamingSessionEventFalcoEvent").log(function(){return{app_id:a,client_app_id:e,client_app_version:f,cloud_game_id_override:g,entry_point:j,event:"PEER_CONNECTION_CLOSED",run_id:m,session_id:b,source:"JS"}});break;case"DISCONNECT":h=!1;break;default:break}return n}};g.runAction=a}),98);
__d("fbinstant/common/adType",[],(function(a,b,c,d,e,f){"use strict";a={INTERSTITIAL:"INTERSTITIAL",REWARDED_VIDEO:"REWARDED_VIDEO",REWARDED_INTERSTITIAL:"REWARDED_INTERSTITIAL"};f["default"]=a}),66);
__d("fbinstant/common/rateLimiter",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){var c=this;this.$4=function(){c.$1=0};this.$2=a;this.$1=0;b!=null&&(this.$3=window.setInterval(this.$4,b))}var b=a.prototype;b.check=function(){return this.$1<this.$2};b.bump=function(){if(this.check()){this.$1+=1;return!0}return!1};return a}();f["default"]=a}),66);
__d("fbinstant/common/adLimiter",["InstantGamesPassThroughRequestType","fbinstant/common/adType","fbinstant/common/rateLimiter"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(b){this.$2=b;this.$1=(b={},b[c("fbinstant/common/adType").INTERSTITIAL]=new(c("fbinstant/common/rateLimiter"))(a.RATE_LIMIT_AMOUNT,a.RATE_LIMIT_PERIOD),b[c("fbinstant/common/adType").REWARDED_VIDEO]=new(c("fbinstant/common/rateLimiter"))(a.RATE_LIMIT_AMOUNT,a.RATE_LIMIT_PERIOD),b[c("fbinstant/common/adType").REWARDED_INTERSTITIAL]=new(c("fbinstant/common/rateLimiter"))(a.RATE_LIMIT_AMOUNT,a.RATE_LIMIT_PERIOD),b)}var b=a.prototype;b.canShowAd=function(a){var b=this.$3(a);b&&this.$2.sendPassThroughAsync(c("InstantGamesPassThroughRequestType").HIGH_AD_RATE,{});return a===c("fbinstant/common/adType").REWARDED_VIDEO||a===c("fbinstant/common/adType").REWARDED_INTERSTITIAL?!0:!b};b.markAdShown=function(a){this.$1[a]&&this.$1[a].bump()};b.$3=function(a){return this.$1[a]?!this.$1[a].check():!1};return a}();a.RATE_LIMIT_AMOUNT=1;a.RATE_LIMIT_PERIOD=3e4;g["default"]=a}),98);
__d("fbinstant/common/errorCode",["InstantGamesErrorCode"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("InstantGamesErrorCode")}),98);
__d("fbinstant/common/getUrlParam",[],(function(a,b,c,d,e,f){"use strict";var g=window.location.href;a=function(a){try{var b=g.split("?");if(b.length<2)return null;b=b[1].split("&");for(var b=b,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e=e.split("=");if(e.length>1&&e[0]===a)return e[1]}return null}catch(a){return null}};b=a;f["default"]=b}),66);
__d("fbinstant/common/postEvent",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b){var c=new XMLHttpRequest();c.open("POST",a);c.setRequestHeader("Content-type","application/x-www-form-urlencoded");c.send(b.toQueryString())};b=a;f["default"]=b}),66);
__d("fbinstant/common/analytics",["AppEventField","FBEventsParamList","fbinstant/common/errorCode","fbinstant/common/getUrlParam","fbinstant/common/postEvent"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1="WAITING",this.$5=[],this.$2=null,this.$3=/^apps-(\d+)\..*\.fbsbx\.com$/i}var b=a.prototype;b.init=function(a,b){this.$2=a;this.$4=b;this.$6=this.$7();this.$2==null&&(this.$2=this.$8());if(this.$2==null){this.$1="FAILED";return}this.$9();this.$1="DONE"};b.logEvent=function(a,b,d){a={eventName:a,valueToSum:b,parameters:d};if(this.$1==="WAITING"){this.$5.push(a);return null}else if(this.$1==="DONE")return this.$10([a]);else return{code:c("fbinstant/common/errorCode").ANALYTICS_POST_EXCEPTION,message:"Failed to log analytics event"}};b.logAPICall=function(a){return null};b.logBeginAsyncAPICall=function(a){return this.logAPICall(a)};b.logResolveAsyncAPICall=function(a){return this.logAPICall(a)};b.logRejectAsyncAPICall=function(a,b){return this.logAPICall(a)};b.$11=function(){return this.$2==null?null:"https://graph.facebook.com/"+this.$2+"/activities"};b.$12=function(a){var b=babelHelpers["extends"]({},a.parameters,{app_id:this.$2});this.$6!=null&&(b[c("AppEventField").APP_VERSION]=this.$6);b[c("AppEventField").EVENT_NAME]=a.eventName;b[c("AppEventField").VALUE_TO_SUM]=a.valueToSum;return JSON.stringify(b)};b.$10=function(a){var b=this;if(this.$2==null)return{code:c("fbinstant/common/errorCode").ANALYTICS_POST_EXCEPTION,message:"Analytics failed to resolve the application ID."};try{a=a.map(function(a){return b.$12(a)});var d=new(c("FBEventsParamList"))();d.append("event","CUSTOM_APP_EVENTS");d.append("extinfo",["ig1"]);d.append("user_id",this.$4);d.append("user_id_type","INSTANT_GAMES_PLAYER_ID");d.append("advertiser_tracking_enabled",1);d.append("application_tracking_enabled",1);d.append("data_processing_options","[]");d.append("custom_events",a);a=this.$11();if(a==null)return{code:c("fbinstant/common/errorCode").ANALYTICS_POST_EXCEPTION,message:"Unable to use the analytics endpoint"};c("fbinstant/common/postEvent")(a,d)}catch(a){return{code:c("fbinstant/common/errorCode").ANALYTICS_POST_EXCEPTION,message:a.message}}return null};b.$9=function(){if(this.$5.length===0)return null;this.$10(this.$5);this.$5=[]};b.$8=function(){var a=window.location.hostname;if(a){a=this.$3.exec(a);if(a&&a.length&&a.length>1&&a[1])return a[1]}return null};b.$7=function(){var a=c("fbinstant/common/getUrlParam")("version");return a==null?null:parseInt(a,10)||null};return a}();g["default"]=a}),98);
__d("fbinstant/common/contextType",[],(function(a,b,c,d,e,f){"use strict";a={GENERIC:"GENERIC",GROUP:"GROUP",POST:"POST",SOLO:"SOLO",THREAD:"THREAD",LINK:"LINK"};f["default"]=a}),66);
__d("fbinstant/common/event",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){var a=this;this.triggerSubscribers=function(b){var c=a.$1.slice();for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f(b)}};this.$1=[]}var b=a.prototype;b.on=function(a){this.$1.push(a)};b.off=function(a){var b=this.$1.length;for(var c=0;c<b;c++)if(this.$1[c]===a){this.$1.splice(c,1);return}};b.unbind=function(){this.$1=[]};return a}();f["default"]=a}),66);
__d("fbinstant/common/gameContext",["fbinstant/common/contextType"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$4=null;var b=a.id,d=a.type;a=a.size;if(!b||!d){this.$1=null;this.$2=null;this.$3=c("fbinstant/common/contextType").SOLO;return}d===c("fbinstant/common/contextType").SOLO?this.$3=c("fbinstant/common/contextType").THREAD:d===c("fbinstant/common/contextType").LINK?this.$3=c("fbinstant/common/contextType").THREAD:d===c("fbinstant/common/contextType").GENERIC?this.$3=c("fbinstant/common/contextType").THREAD:this.$3=d;this.$1=b.toString();this.$2=a||null}var b=a.prototype;b.getID=function(){return this.$1};b.getType=function(){return this.$3};b.getSize=function(){return this.$2};b.getContextSizeResponse=function(){return this.$4};b.setContextSizeResponse=function(a){this.$4=a};return a}();g["default"]=a}),98);
__d("fbinstant/common/supportedFeaturesManager",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Set()}var b=a.prototype;b.setSupported=function(a){this.$1=new Set(a)};b.isSupported=function(a){return this.$1.has(a)?!0:!1};return a}();b=new a();f["default"]=b}),66);
__d("fbinstant/common/supportedMessagesManager",["InstantGamesSDKMessages"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set([c("InstantGamesSDKMessages").INITIALIZE_ASYNC,c("InstantGamesSDKMessages").ON_BEGIN_LOAD,c("InstantGamesSDKMessages").ON_CONSOLE,c("InstantGamesSDKMessages").ON_PROGRESS_LOAD,c("InstantGamesSDKMessages").ON_GAME_READY,c("InstantGamesSDKMessages").ON_SCORE,c("InstantGamesSDKMessages").ON_SCREENSHOT,c("InstantGamesSDKMessages").ON_PICTURE,c("InstantGamesSDKMessages").ON_END_GAME,c("InstantGamesSDKMessages").GET_PLAYER_DATA_ASYNC,c("InstantGamesSDKMessages").SET_PLAYER_DATA_ASYNC,c("InstantGamesSDKMessages").CG_RETRY,c("InstantGamesSDKMessages").SET_CLIPBOARD_TEXT_ASYNC,c("InstantGamesSDKMessages").GET_CLIPBOARD_TEXT_ASYNC]);a=function(){function a(){this.$1=new Set()}var b=a.prototype;b.setSupported=function(a){this.$1=new Set(a)};b.isSupported=function(a){return h.has(a)?!0:this.$1.has(a)};return a}();b=new a();g["default"]=b}),98);
__d("fbinstant/releases/samus/entryPoint.samus",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$2=a,this.$1=b}var b=a.prototype;b.getData=function(){return this.$1};b.getSource=function(){return this.$2};return a}();e.exports=a}),null);
__d("fbinstant/common/eventBatcher",[],(function(a,b,c,d,e,f){"use strict";var g=5e3;a=function(){function a(a){var b=this;this.$4=function(){b.$3(b.$2),b.$2=[]};this.$3=a;this.$2=[];this.$1=null}var b=a.prototype;b.startInterval=function(a){a===void 0&&(a=g),this.$1!==null&&this.stopInterval(),this.$1=window.setInterval(this.$4,a)};b.stopInterval=function(){if(!this.$1)return;window.clearInterval(this.$1);this.$1=null};b.logEvent=function(a){this.$2.push(a)};return a}();f["default"]=a}),66);
__d("fbinstant/releases/samus/internalEventLogger.samus",["fbinstant/common/eventBatcher"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){var a=this;this.$3=function(b){var c=a.$2;if(b.length<=0||!c)return;b=a.$4(b);c.sendPassThroughAsync("SDK_EVENT",{events:b})};this.$1=new(b("fbinstant/common/eventBatcher"))(this.$3)}var c=a.prototype;c.initialize=function(a){this.$2=a,this.$1.startInterval()};c.logEvent=function(a,b,c){this.$1.logEvent({type:a,data:babelHelpers["extends"]({},c,{contextID:b.getContext().getID()})})};c.$4=function(a){var b={};for(var c=0;c<a.length;c++){var d=a[c];Object.prototype.hasOwnProperty.call(b,d.data.key)||(b[d.data.key]=babelHelpers["extends"]({},d),b[d.data.key].data.count=0);b[d.data.key].data.count+=1}d=[];for(c in b)d.push(b[c]);return d};return a}();e.exports=a}),null);
__d("fbinstant/common/apiError",["fbinstant/common/errorCode"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){this.code=a.code||c("fbinstant/common/errorCode").UNKNOWN,this.message=a.message,this.code===c("fbinstant/common/errorCode").CLIENT_REQUIRES_UPDATE&&(this.code=c("fbinstant/common/errorCode").CLIENT_UNSUPPORTED_OPERATION)};g["default"]=a}),98);
__d("fbinstant/common/messageLocksMap",["InstantGamesSDKMessages"],(function(a,b,c,d,e,f,g){"use strict";a=[c("InstantGamesSDKMessages").CONTEXT_CHOOSE_ASYNC,c("InstantGamesSDKMessages").CONTEXT_CREATE_ASYNC,c("InstantGamesSDKMessages").CONTEXT_SWITCH_ASYNC,c("InstantGamesSDKMessages").CREATE_SHORTCUT_ASYNC,c("InstantGamesSDKMessages").SHARE_ASYNC,c("InstantGamesSDKMessages").SHOW_AD_ASYNC,c("InstantGamesSDKMessages").SHOW_GENERIC_DIALOG_ASYNC,c("InstantGamesSDKMessages").SHOW_GENERIC_DIALOG_ASYNC_IOS,c("InstantGamesSDKMessages").SHARE_ASYNC];b=[c("InstantGamesSDKMessages").FLUSH_PLAYER_DATA_ASYNC,c("InstantGamesSDKMessages").SET_PLAYER_DATA_ASYNC];d={};for(e of a)d[e]=a;d[c("InstantGamesSDKMessages").FLUSH_PLAYER_DATA_ASYNC]=b;d[c("InstantGamesSDKMessages").CONTEXT_MATCH_CREATE_ASYNC]=[c("InstantGamesSDKMessages").CONTEXT_MATCH_CREATE_ASYNC];f=d;g["default"]=f}),98);
__d("fbinstant/common/exclusiveMessageManager",["invariant","InstantGamesErrorCode","fbinstant/common/messageLocksMap"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(){function a(){this.$1=new Map()}var b=a.prototype;b.isLocked=function(a){return this.$1.has(a)};b.lockOrThrow=function(a){if(this.isLocked(a)){var b=this.$1.get(a);return this.$2(String(b))}b=c("fbinstant/common/messageLocksMap")[a];if(!b)return Promise.resolve();for(var d=b,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;if(this.$1.has(g)){g=this.$1.get(g);g!==void 0||h(0,1560);return this.$2(g)}}for(g=b,f=Array.isArray(g),e=0,g=f?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(e>=g.length)break;d=g[e++]}else{e=g.next();if(e.done)break;d=e.value}b=d;this.$1.set(b,a)}return Promise.resolve()};b.release=function(a){a=c("fbinstant/common/messageLocksMap")[a];if(!a)return;for(var a=a,b=Array.isArray(a),d=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(b){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;this.$1["delete"](e)}};b.reset_TESTINGONLY=function(){this.$1=new Map()};b.$2=function(a){return Promise.reject({code:c("InstantGamesErrorCode").PENDING_REQUEST,message:"There is currently a pending request for locking message: "+a})};return a}();b=new a();g["default"]=b}),98);
__d("fbinstant/common/platform",[],(function(a,b,c,d,e,f){"use strict";a={IOS:"IOS",ANDROID:"ANDROID",WEB:"WEB",MOBILE_WEB:"MOBILE_WEB"};f["default"]=a}),66);
__d("fbinstant/common/platformUtils",["fbinstant/common/getUrlParam","fbinstant/common/platform"],(function(a,b,c,d,e,f,g){"use strict";function a(){if(window.webkit||window.IsQuicksilverReactNativeIOS)return c("fbinstant/common/platform").IOS;else if(window.IsQuicksilverReactNativeAndroid||window.QuicksilverAndroid)return c("fbinstant/common/platform").ANDROID;else if(window.IsMobileWeb)return c("fbinstant/common/platform").MOBILE_WEB;else return c("fbinstant/common/platform").WEB}function b(){var a=c("fbinstant/common/getUrlParam")("environment_type");return a==="fbios_iab"||a==="messenger_discovery"}function d(){var a=c("fbinstant/common/getUrlParam")("environment_type");return a==="coplay"}e={getPlatform:a,getEnvironmentIsCoplay:d,getEnvironmentIsIAB:b};g["default"]=e}),98);
__d("fbinstant/releases/samus/messageSender.samus",["Alea","InstantGamesSDKMessages","Promise","fbinstant/common/apiError","fbinstant/common/errorCode","fbinstant/common/event","fbinstant/common/exclusiveMessageManager","fbinstant/common/platform","fbinstant/common/platformUtils","fbinstant/common/supportedMessagesManager"],(function(a,b,c,d,e,f){"use strict";var g=b("Alea")(),h=4294967296;a=function(){function a(a){this.$4=a,this.$1={},this.$2=new(b("fbinstant/common/event"))(),this.$3=new(b("fbinstant/common/event"))()}var c=a.prototype;c.initialize=function(a){var b=this;this.$6=a.source;this.$5=a.sender;this.$2.on(function(a){b.$7(a,!0)});this.$3.on(function(a){b.$7(a,!1)});a=new RegExp("[?&]IsMobileWeb(=([^&#]*)|&|#|$)","i");a=a.exec(window.location.href);if(!a||!a[2])return;window.IsMobileWeb=parseInt(a[2],10)===1};c.getResolvePromiseEvent=function(){return this.$2};c.getRejectPromiseEvent=function(){return this.$3};c.send=function(a,c){if(!this.$6||!this.$5||!b("fbinstant/common/supportedMessagesManager").isSupported(a))return;this.$5.postMessage(this.$8({type:a,content:c,destination:this.$6}),"*")};c.sendAsync=function(a,c){var d=this;return!b("fbinstant/common/supportedMessagesManager").isSupported(a)?b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").CLIENT_UNSUPPORTED_OPERATION,message:"Client does not support the message: "+a})):b("fbinstant/common/exclusiveMessageManager").lockOrThrow(a).then(function(){return d.$9(a,c).then(function(c){b("fbinstant/common/exclusiveMessageManager").release(a);return c})["catch"](function(c){b("fbinstant/common/exclusiveMessageManager").release(a);throw c})})["catch"](function(a){throw new(b("fbinstant/common/apiError"))(a)})};c.showGenericDialogAsync=function(a,c){c=JSON.stringify(c||{});c={data:c,request:a,sdkVersion:this.$4};a=b("fbinstant/common/platformUtils").getPlatform()===b("fbinstant/common/platform").IOS&&!b("fbinstant/common/platformUtils").getEnvironmentIsIAB()?b("InstantGamesSDKMessages").SHOW_GENERIC_DIALOG_ASYNC_IOS:b("InstantGamesSDKMessages").SHOW_GENERIC_DIALOG_ASYNC;return this.sendAsync(a,c).then(function(a){if(!a)return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").UNKNOWN,message:"No response data provided"}));return a.errorCode?b("Promise").reject(new(b("fbinstant/common/apiError"))({code:a.errorCode,message:a.errorMessage||""})):a})};c.sendPassThroughAsync=function(a,c){c=JSON.stringify(c||{});c={data:c,request:a,sdkVersion:this.$4};return this.sendAsync(b("InstantGamesSDKMessages").SEND_PASS_THROUGH_ASYNC,c).then(function(a){if(!a)return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").UNKNOWN,message:"No response data provided"}));a=JSON.parse(a);var c=a.data,d=a.errorCode;a=a.errorMessage;return d?b("Promise").reject(new(b("fbinstant/common/apiError"))({code:d,message:a||""})):c})};c.$8=function(a){switch(this.$6){case"Android":case"quicksilver-rn":return JSON.stringify(a)}return a};c.$10=function(a){return a+"_"+Math.floor(g()*h)};c.$11=function(a,b,c){this.$1[a]={resolve:b,reject:c}};c.$7=function(a,c){var d=a.promiseID;if(!d||!this.$1[d])return;var e=this.$1[d];if(c&&e.resolve)e.resolve(a.data);else if(!c&&e.reject){c=a.data;!c?c=new(b("fbinstant/common/apiError"))({message:""}):c=new(b("fbinstant/common/apiError"))({code:c.code||b("fbinstant/common/errorCode").UNKNOWN,message:c.message||""});e.reject(c)}delete this.$1[d]};c.$9=function(a,c){var d=this;return new(b("Promise"))(function(b,e){var f=d.$10(a);d.$11(f,b,e);b=c||{};b.promiseID=f;d.send(a,b)})};return a}();e.exports=a}),null);
__d("fbinstant/releases/samus/paymentsState.samus",["Promise","fbinstant/common/event"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){var a=this;this.$3=!1;this.$1=new(b("fbinstant/common/event"))();this.$2=new(b("Promise"))(function(b,c){a.$1.on(function(){a.$3=!0,b(),a.$1.unbind()})})}var c=a.prototype;c.getPaymentsInitializedEvent=function(){return this.$1};c.isClientReady=function(){return this.$3};c.onInitialized=function(a){this.$2.then(a)};return a}();e.exports=a}),null);
__d("fbinstant/releases/samus/internalStates.samus",["InstantGamesGameState","fbinstant/common/adLimiter","fbinstant/common/analytics","fbinstant/common/contextType","fbinstant/common/event","fbinstant/common/gameContext","fbinstant/common/supportedFeaturesManager","fbinstant/common/supportedMessagesManager","fbinstant/releases/samus/entryPoint.samus","fbinstant/releases/samus/internalEventLogger.samus","fbinstant/releases/samus/messageSender.samus","fbinstant/releases/samus/paymentsState.samus"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$27="fbinstant.samus".substring("fbinstant.".length),this.$16=new(c("fbinstant/releases/samus/messageSender.samus"))(this.$27),this.$1=new(c("fbinstant/common/adLimiter"))(this.$16),this.$2=new(c("fbinstant/common/analytics"))(),this.$3=new(c("fbinstant/common/event"))(),this.$4=null,this.$5=null,this.$6=new(c("fbinstant/common/gameContext"))({type:c("fbinstant/common/contextType").SOLO}),this.$7=0,this.$8=new(c("fbinstant/releases/samus/entryPoint.samus"))(null,null),this.$9=d("InstantGamesGameState").LOADING,this.$10=new(c("fbinstant/common/event"))(),this.$11=new(c("fbinstant/common/event"))(),this.$12=!1,this.$13=new(c("fbinstant/releases/samus/internalEventLogger.samus"))(),this.$14=null,this.$15=null,this.$17=new(c("fbinstant/common/event"))(),this.$20=new(c("fbinstant/releases/samus/paymentsState.samus"))(),this.$21=null,this.$22=null,this.$23=null,this.$24=null,this.$18=new(c("fbinstant/common/event"))(),this.$19=new(c("fbinstant/common/event"))(),this.$25=new(c("fbinstant/common/event"))(),this.$26=new(c("fbinstant/common/event"))(),this.$28=!1}var b=a.prototype;b.initialize=function(a){var b=this;a.appID&&this.setAppID(a.appID);a.supportedMessages&&Array.isArray(a.supportedMessages)&&c("fbinstant/common/supportedMessagesManager").setSupported(a.supportedMessages);a.supportedFeatures&&Array.isArray(a.supportedFeatures)&&c("fbinstant/common/supportedFeaturesManager").setSupported(a.supportedFeatures);var d=null;if(a.entryPointData)try{var e=JSON.parse(a.entryPointData);e.sender&&e.data?d=e.data:d=e}catch(a){}e=a.entryPoint||null;this.updateEntryPoint(new(c("fbinstant/releases/samus/entryPoint.samus"))(e,d));this.updateContext(a);this.setInitialized();this.getAnalytics().init(this.getAppID(),a.playerID);this.getAnalyticsLogEvent().on(function(a){var c=a.eventName,d=a.valueToSum;a=a.parameters;if(!c)return;b.getAnalytics().logEvent(c,d!=null?d:null,a||null)});this.getInternalEventLogger().initialize(this.getMessageSender())};b.updateContext=function(a){if(!a.contextType)return;var b=this.getContext().getID();this.$6=new(c("fbinstant/common/gameContext"))({id:a.contextID,size:a.contextSize,type:a.contextType.toUpperCase()});this.getMessageSender().sendPassThroughAsync("CONTEXT_UPDATE_TRACKING",{context_token_id:this.getContext().getID(),pre_context_id:b})};b.updateEntryPoint=function(a){this.$8=a};b.setAppID=function(a){this.$4=a};b.setPlayerID=function(a){this.$21=a};b.setPlayerName=function(a){this.$22=a};b.setPlayerPhoto=function(a){this.$23=a};b.setInitialized=function(){this.$12=!0};b.setLoadingProgress=function(a){this.$7=a};b.setGameState=function(a){this.$9=a};b.setConnectedPlayersPromise=function(a){this.$5=a};b.setMatchPlayerPromise=function(a){this.$15=a};b.setQEParams=function(a){this.$24=a};b.setShouldCallGraphApiDuringInitialization=function(a){this.$28=a};b.getAnalytics=function(){return this.$2};b.getAppID=function(){return this.$4};b.getConnectedPlayersPromise=function(){return this.$5};b.getContext=function(){return this.$6};b.getLoadingProgress=function(){return this.$7};b.getEntryPoint=function(){return this.$8};b.getGameState=function(){return this.$9};b.getGameStartEvent=function(){return this.$10};b.isInitialized=function(){return this.$12};b.getInternalEventLogger=function(){return this.$13};b.getMatchPlayerPromise=function(){return this.$15};b.getMessageSender=function(){return this.$16};b.getPaymentsState=function(){return this.$20};b.getPlayerID=function(){return this.$21};b.getPlayerName=function(){return this.$22};b.getPlayerPhoto=function(){return this.$23};b.getRestartEvent=function(){return this.$25};b.getPauseEvent=function(){return this.$17};b.getReceiveMessageEvent=function(){return this.$18};b.getReceiveStateUpdateEvent=function(){return this.$19};b.getResumeEvent=function(){return this.$26};b.getAnalyticsLogEvent=function(){return this.$3};b.getSdkVersion=function(){return this.$27};b.getQEParams=function(){return this.$24};b.getAdLimiter=function(){return this.$1};b.getGestureCommandEvent=function(){return this.$11};b.getShouldCallGraphApiDuringInitialization=function(){return this.$28};return a}();f.exports=new a()}),34);
__d("CloudGamingApertureTimeoutMiddleware",["CloudGamingActionTypes","CloudGamingSessionConfigConfig","fbinstant/releases/samus/internalStates.samus"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n;a=function(a,b){return function(d,e,f,g){if(b)return d;switch(d.type){case"MOUSE_DOWN":case"MOUSE_MOVE":case"MOUSE_UP":case"KEY":case"GAMEPAD":case c("CloudGamingActionTypes").CURSOR_MOVEMENT:case c("CloudGamingActionTypes").CURSOR_BUTTON:case c("CloudGamingActionTypes").CURSOR_WHEEL:case c("CloudGamingActionTypes").TOUCH_MOVE:case c("CloudGamingActionTypes").TOUCH_DOWN:case c("CloudGamingActionTypes").TOUCH_UP:case c("CloudGamingActionTypes").VIRTUAL_GAMEPAD:case c("CloudGamingActionTypes").GAMEPAD_GREDOS:q(e);break;case c("CloudGamingActionTypes").MICROPHONE_ACTIVITY:n=Date.now();q(e);break;case c("CloudGamingActionTypes").GAME_READY:window.clearTimeout(i);window.clearTimeout(h);j=(a>0?a:c("CloudGamingSessionConfigConfig").warning_timeout_in_seconds)*1e3;k=c("CloudGamingSessionConfigConfig").final_timeout_in_seconds*1e3;l=0;m=0;n=0;p(e);break;case c("CloudGamingActionTypes").PAUSE_GAME:l=c("CloudGamingSessionConfigConfig").pause_timeout_in_seconds*1e3;q(e);break;case c("CloudGamingActionTypes").RESUME_GAME:l=0;q(e);break;case c("CloudGamingActionTypes").REACTIVATE_GAME:r(e,g);break;case c("CloudGamingActionTypes").INACTIVATE_GAME:o();break;case"CONNECTION_ERROR":case"DISCONNECT":window.clearTimeout(i);window.clearTimeout(h);o();break;default:break}return d}};function o(){c("fbinstant/releases/samus/internalStates.samus").getMessageSender().send("cloudgamingconnectionerror",null)}function p(a){if(n!==0){var b=Date.now()-n;b=c("CloudGamingSessionConfigConfig").mic_activity_timeout_in_seconds*1e3-b;m=b>0?b:0}j>0&&(i=window.setTimeout(function(){a({type:c("CloudGamingActionTypes").INACTIVATE_GAME})},j+l+m));k>0&&(h=window.setTimeout(function(){a({type:c("CloudGamingActionTypes").FINISH_GAME}),a({code:6,type:"DISCONNECT"})},k+j+l+m))}function q(a){window.clearTimeout(i),window.clearTimeout(h),p(a)}function r(a,b){q(a),b.sendRTCEvent("lifecycle",{gameResumed:{timestamp:Math.round(Date.now())}})}g.runAction=a}),98);
__d("CloudGamingApertureUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a===String(350685531728)||a===String(6628568379)||a===String(256002347743983)}f.isMobileApp=a}),66);
__d("CloudGamingMultiTouchDebug",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d,e,f){var g=document.getElementsByTagName("video")[0],h=document.getElementById("debugTouchCanvas");h==null&&(h=document.createElement("canvas"),h.id="debugTouchCanvas",h.width=g.videoWidth-6,h.height=g.videoHeight-6,h.style.position="absolute",h.style.top=0+"px",h.style.left=0+"px",h.style.pointerEvents="none",h.style.border="3px solid orange",g.parentNode!=null&&g.parentNode.insertBefore(h,g));if(h instanceof HTMLCanvasElement){var i;i=(i=h)==null?void 0:i.getContext("2d");d&&i.clearRect(0,0,h.width,h.height);i.lineWidth=3;i.strokeStyle="red";i.setLineDash([]);i.strokeRect(g.clientTop,g.clientLeft,g.clientWidth-6,g.clientHeight-6);i.lineWidth=4;i.strokeStyle="lightgreen";i.setLineDash([16,4]);i.strokeRect(f.viewportTop,f.viewportLeft,f.viewportWidth-7,f.viewportHeight-7);i.setLineDash([]);i.beginPath();i.arc(a,b,c,0,2*Math.PI);d=Math.floor(Math.random()*256);f=Math.floor(Math.random()*256);var j=Math.floor(Math.random()*256);d="rgb("+d+", "+f+", "+j+")";i.lineWidth=2;i.strokeStyle=d;i.stroke();i.closePath();i.shadowOffsetX=1;i.shadowOffsetY=1;i.shadowBlur=2;i.shadowColor="black";i.font="20px Arial";i.fillStyle="white";i.fillText(g.clientWidth+"x"+g.clientHeight,h.width/2,30);e!=null&&i.fillText(e,a,b-1.5*c);i.restore()}}f["default"]=a}),66);
__d("CloudGamingGredosTouchAction",["CloudGamingActionTypes","CloudGamingMultiTouchDebug","CloudGamingSessionConfigConfig","EventTimeUtils","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=384e3,i=216e3,j=[],k=Array(10).fill(null),l=!1,m=function(){l=!0};a=function(){window.addEventListener("blur",m,!1),window.addEventListener("touchcancel",m,!1)};b=function(){window.removeEventListener("blur",m),window.removeEventListener("touchcancel",m)};var n=function(a){if(a!=null){j.length=0;var b=c("CloudGamingActionTypes").TOUCH_UP;for(var e=0;e<k.length;e++)if(k[e]!=null){k[e]=null;var f={direction:0,index:e+1,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),type:b,x:0,y:0};a({events:[{input:{touch:f}}],purpose:"input",type:"SEND_RTC"})}}},o=function(a,b){if(b===c("CloudGamingActionTypes").TOUCH_UP){for(var d=0;d<k.length;d++)if(k[d]===a){k[d]=null;return d}}else if(b===c("CloudGamingActionTypes").TOUCH_MOVE){for(d=0;d<k.length;d++)if(k[d]===a)return d}else if(b===c("CloudGamingActionTypes").TOUCH_DOWN){d=null;for(b=0;b<k.length;b++){if(k[b]===a)return b;d==null&&k[b]==null&&(d=b)}if(d!=null){k[d]=a;return d}}return null},p=function(a){return function(b,e){l===!0&&(l=!1,n(b));e=e();var f=c("CloudGamingActionTypes").TOUCH_MOVE;a.type==="touchstart"?f=c("CloudGamingActionTypes").TOUCH_DOWN:a.type==="touchend"&&(f=c("CloudGamingActionTypes").TOUCH_UP);var g=a.nativeEvent.changedTouches;for(var k=0;k<g.length;k++){var m=g[k],p=o(m.identifier,f);if(p==null)continue;var q=m.clientX;m=m.clientY;if(e.container.streamingRotation===90){var r=q;q=m;m=e.container.viewportHeight+2*e.container.viewportTop-r}else if(e.container.streamingRotation===-90){r=q;q=e.container.viewportWidth+2*e.container.viewportLeft-m;m=r}c("gkx")("7351")&&c("CloudGamingMultiTouchDebug")(q,m,60,!0,"ID: "+p,e.container);r=Date.now();if(f===c("CloudGamingActionTypes").TOUCH_MOVE&&j[p]!=null&&j[p]>r){c("gkx")("7351")&&c("CloudGamingMultiTouchDebug")(q,m,80,!1,"NOT SEND: "+r+", "+j[p],e.container);continue}j[p]=r+c("CloudGamingSessionConfigConfig").time_between_move_events_in_ms;r=Math.round(Math.max(Math.min((q-e.container.viewportLeft)*h/e.container.viewportWidth,h),0));q=Math.round(Math.max(Math.min((m-e.container.viewportTop)*i/e.container.viewportHeight,i),0));m={direction:f===c("CloudGamingActionTypes").TOUCH_UP?0:1,index:p+1,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),type:f,x:r,y:q};b({events:[{input:{touch:m}}],purpose:"input",type:"SEND_RTC"});b(m)}}};e=function(a){return p(a)};g.VIRTUAL_DESKTOP_WIDTH=h;g.VIRTUAL_DESKTOP_HEIGHT=i;g.addTouchEventListeners=a;g.removeTouchEventListeners=b;g.clearTouches=n;g.sendGredosTouchEvent=e}),98);
__d("CloudGamingLocalCursorAction",["CloudGamingActionTypes","EventTimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,e,f){return{moveX:e,moveY:f,screenPosX:a,screenPosY:b,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),type:c("CloudGamingActionTypes").CURSOR_MOVEMENT}};b=function(a,b,e,f){f=f==="down"?1:0;return{buttons:{center:e==="center"||e==="all"?f:void 0,left:e==="left"||e==="all"?f:void 0,right:e==="right"||e==="all"?f:void 0},screenPosX:a,screenPosY:b,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),type:c("CloudGamingActionTypes").CURSOR_BUTTON}};e=function(a,b,e,f,g){return{screenPosX:a,screenPosY:b,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),type:c("CloudGamingActionTypes").CURSOR_WHEEL,wheel:{deltaX:e,deltaY:f,deltaZ:g}}};f=function(a){return function(b){b({events:[{input:{mouse:a}}],purpose:"input",type:"SEND_RTC"}),b(a)}};g.createCursorMovementAction=a;g.createCursorButtonAction=b;g.createCursorWheelAction=e;g.sendCursor=f}),98);
__d("CloudGamingAutomatedInputMiddleware",["CloudGamingActionTypes","CloudGamingGredosTouchAction","CloudGamingLocalCursorAction","EventTimeUtils","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h="game_ready",i=null,j=null,k=[],l="",m=!1,n="";a=0;var o=null;b=function(b){return function(e,f){if(!c("gkx")("5760"))return e;switch(e.type){case"CREATE_SDP_OFFER":p(f,b);break;case c("CloudGamingActionTypes").GAME_READY:i!=null&&i[h]!=null&&l===""&&(l=h,r(i[h]));break;case c("CloudGamingActionTypes").IN_GAME_STATE:f=l+">>"+e.state;if(i!=null&&(i[f]!=null||i[e.state]!=null)&&l!==e.state){l=e.state;r((f=i[f])!=null?f:i[e.state])}m&&e.state!=="none"&&n!==e.state&&(n=e.state,a=d("EventTimeUtils").tryGetTimestampInMicroSecond());break;case"CONNECTION_ERROR":case"DISCONNECT":q();break;case c("CloudGamingActionTypes").CURSOR_BUTTON:case c("CloudGamingActionTypes").CURSOR_MOVEMENT:case c("CloudGamingActionTypes").CURSOR_WHEEL:case"KEY":case c("CloudGamingActionTypes").TOUCH_MOVE:case c("CloudGamingActionTypes").TOUCH_DOWN:case c("CloudGamingActionTypes").TOUCH_UP:case c("CloudGamingActionTypes").GAMEPAD_GREDOS:m&&D(e);break;default:break}return e}};function p(a,b){l="",j=a,i=b!=null?JSON.parse(b).inputs:null,m=!1,n="",o=null,q()}function q(){while(k.length>0){var a=k.pop();window.clearTimeout(a)}}function r(a){q();if(!Array.isArray(a))return;for(var b=0;b<a.length;b++){var c=a[b];switch(c.inputType){case"MOUSE_BUTTON":w(c);break;case"MOUSE_MOVE":x(c);break;case"MOUSE_WHEEL":y(c);break;case"KEYBOARD":z(c);break;case"TOUCH":A(c);break;case"GAMEPAD":C(c);break;default:break}}}function s(a,b,c){c=window.setTimeout(function(){var c={};c[a]=babelHelpers["extends"]({},b,{timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond()});j!=null&&j({events:[{input:c}],purpose:"input",type:"SEND_RTC"})},c);k.push(c)}function t(a){return a!=null}function u(a,b,c){b===void 0&&(b=0);c===void 0&&(c=1);return a!=null&&a>=b&&a<=c}function v(a){return a!=null&&a>=0}function w(a){if(t(a.mouseButton)&&t(a.direction)&&u(a.screenX)&&u(a.screenY)&&v(a.timestamp)){var b=d("CloudGamingLocalCursorAction").createCursorButtonAction(a.screenX,a.screenY,a.mouseButton,a.direction);s("mouse",b,a.timestamp)}}function x(a){if(u(a.screenX)&&u(a.screenY)&&u(a.moveX)&&u(a.moveY)&&v(a.timestamp)){var b=d("CloudGamingLocalCursorAction").createCursorMovementAction(a.screenX,a.screenY,a.moveX,a.moveY);s("mouse",b,a.timestamp)}}function y(a){if(u(a.screenX)&&u(a.screenY)&&t(a.deltaY)&&v(a.timestamp)){var b=d("CloudGamingLocalCursorAction").createCursorWheelAction(a.screenX,a.screenY,0,a.deltaY,0);s("mouse",b,a.timestamp)}}function z(a){if(t(a.direction)&&v(a.jsCode)&&v(a.timestamp)){var b;b={code:(b=a.stringKeyCode)!=null?b:a.jsCode.toString(10),direction:a.direction==="down"?1:0,jsCode:a.jsCode,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond()};s("key",b,a.timestamp)}}function A(a){if(t(a.touchAction)&&v(a.index)&&u(a.screenX)&&u(a.screenY)&&v(a.timestamp)){var b={direction:a.touchAction==="up"?0:1,index:a.index+1,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),type:a.touchAction==="move"?c("CloudGamingActionTypes").TOUCH_MOVE:a.touchAction==="down"?c("CloudGamingActionTypes").TOUCH_DOWN:c("CloudGamingActionTypes").TOUCH_UP,x:a.screenX*d("CloudGamingGredosTouchAction").VIRTUAL_DESKTOP_WIDTH,y:a.screenY*d("CloudGamingGredosTouchAction").VIRTUAL_DESKTOP_HEIGHT};s("touch",b,a.timestamp)}}function B(a,b){b===void 0&&(b=0);return a!=null&&u(a,b,1)?a:0}function C(a){if(v(a.index)&&v(a.timestamp)){var b={A:B(a.a),B:B(a.a),Down:B(a.down),L1:B(a.l1),L2:B(a.l2),L3:B(a.l3),Left:B(a.left),R1:B(a.r1),R2:B(a.r2),R3:B(a.r3),Right:B(a.right),Select:B(a.select),Start:B(a.start),ThumbLX:B(a.thumbLX,-1),ThumbLY:B(a.thumbLY,-1),ThumbRX:B(a.thumbRX,-1),ThumbRY:B(a.thumbRY,-1),Up:B(a.up),X:B(a.x),Y:B(a.y)};b={id:a.index,keys:b,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond()};s("gamepad",b,a.timestamp)}}function D(a){switch(a.type){case c("CloudGamingActionTypes").CURSOR_BUTTON:E(a);break;case c("CloudGamingActionTypes").CURSOR_MOVEMENT:F(a);break;case c("CloudGamingActionTypes").CURSOR_WHEEL:G(a);break;case"KEY":H(a);break;case c("CloudGamingActionTypes").TOUCH_MOVE:case c("CloudGamingActionTypes").TOUCH_DOWN:case c("CloudGamingActionTypes").TOUCH_UP:I(a);break;case c("CloudGamingActionTypes").GAMEPAD_GREDOS:J(a);break}}function E(a){for(var b in a.buttons)a.buttons[b]!=null}function F(a){document.pointerLockElement}function G(a){}function H(a){}function I(a){}function J(a){var b="";for(var c in a.keys)a.keys[c]!=null&&(o==null||a.keys[c]!==o[c])&&(b+='"'+c+'": '+a.keys[c]+", ");o=a.keys;b!==""}g.runAction=b}),98);
__d("CloudGamingWarningAlertAction",["CloudGamingActionTypes"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,d,e){return{buttonCallback:e,buttonText:d,name:a,type:c("CloudGamingActionTypes").WARNING_METRIC,value:b}};b=function(a){return{name:a,type:c("CloudGamingActionTypes").CLEAN_WARNING_METRIC}};d=function(a,b){return{closeCallback:b,dialogType:a,type:c("CloudGamingActionTypes").SHOW_WARNING_DIALOG}};e=function(a){return{dialogType:a,type:c("CloudGamingActionTypes").HIDE_WARNING_DIALOG}};g.createWarningMetricAction=a;g.createCleanWarningMetricAction=b;g.createShowWarningDialogAction=d;g.createHideWarningDialogAction=e}),98);
__d("CloudGamingCloseNotificationMiddleware",["CloudGamingActionTypes","CloudGamingLogUtils","CloudGamingWarningAlertAction","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=6e4,i,j=-1;a=function(a,b,d,e){return function(f,g){switch(f.type){case c("CloudGamingActionTypes").CLOSE_NOTIFICATION:i!=null&&window.clearInterval(i);f.reason==="RECYCLE"&&j===-1&&(j=f.time*1e3,l(g,a,b,d,e));break;case"DISCONNECT":i!=null&&window.clearInterval(i);break;default:break}return f}};function k(a,b,e,f,g,h){d("CloudGamingLogUtils").logEvent("CLOSE_NOTIFICATION",b,g,f,e,new Map([["reason",h],["timeRemaining",j.toString()]])),a(d("CloudGamingWarningAlertAction").createWarningMetricAction("SERVER_RESTART",j/1e3)),c("setTimeout")(function(){a(d("CloudGamingWarningAlertAction").createCleanWarningMetricAction("SERVER_RESTART"))},100)}function l(a,b,c,d,e){j>0&&(k(a,b,c,d,e,"RECYCLE"),i=window.setInterval(function(){j-=h,k(a,b,c,d,e,"RECYCLE"),j<=h&&(window.clearInterval(i),i=window.setInterval(function(){j-=1e3,k(a,b,c,d,e,"RECYCLE"),j<=0&&window.clearInterval(i)},1e3))},h))}g.runAction=a}),98);
__d("CloudGamingAllowServerDebugEngWarning.react",["ix","CloudGamingAllowServerDebug","CometIcon.react","CometLink.react","CometToast.react","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";b=d("react");var i=d("react").useState;c="cloud_gaming_allow_server_debug";e="https://www.internalfb.com/intern/gatekeeper/projects/cloud_gaming_allow_server_debug/";h="Allowing debugging on the server";b="https://www.internalfb.com/intern/wiki/Cloud_Gaming/Infra/Common/Tooling_&_Testing/Allowing_debugging_on_the_server/";function a(){var a=i(!0),b=a[0];b=a[1];return null;if(!c("CloudGamingAllowServerDebug")())return null;if(!b)return null;var e=React.jsxs(React.Fragment,{children:["You are in the server debugging mode. In this mode, client disconnections and timeouts have been disabled. You can deactivate it by removing yourself from the gk ",React.jsx(c("CometLink.react"),{href:GK_URI,children:GK_NAME})," allowlist.",React.jsx("br",{}),"You can read more about this in the ",React.jsx(c("CometLink.react"),{href:WIKI_PAGE,children:WIKI_PAGE_NAME})," "," wiki page."]});return React.jsx("div",{className:"x1lq5wgf xgqcy7u x30kzoy x9jhf4c x191j7n5 x92rtbv xixxii4 x16q8cke x1vjfegm",children:React.jsx(c("CometToast.react"),{icon:React.jsx(c("CometIcon.react"),{color:"negative",icon:d("fbicon")._(h("502066"),24)}),message:e,onDismiss:function(){setIsShown(!1)},truncateText:!1})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CloudGamingPlayerUtils",["CloudGamingApertureUtils","CloudGamingConstants","InstantGamesPlayerUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=null;switch(a){case"prod":b="PROD";break;case"staging":b="STAGING";break;case"rc":b="RC";break;case"dev":b="DEV";break;case"dev.stress":b="DEV_STRESS";break;case"prod.shadow.stress":b="PROD_SHADOW_STRESS";break;case"rc.vanilla":b="RC_VANILLA";break}return b}function b(){var a=0,b=window.navigator.getGamepads();for(var c=0;c<b.length;c++){var d=b[c];d&&d.connected&&++a}return a}function c(a,b){var c=navigator.userAgent.match(/iPad/)!==null;return c||a||d("CloudGamingApertureUtils").isMobileApp(b)||b===String(412378670482)||"ontouchstart"in window}var h=function(){var a=document.getElementById(d("InstantGamesPlayerUtils").containerWrapperId);return a!=null?[a.offsetWidth,a.offsetHeight]:[window.innerWidth,window.innerHeight]};e=function(a,b,c,d,e){if(a!==void 0&&a!==null&&!b&&(c===String(256281040558)||c===String(2220391788200892)))a=a;else if(b||c===String(412378670482)){b=h();var f=b[0];b=b[1];a=b>f?b/f:f/b}else if(c===String(256281040558)||c===String(2220391788200892))(d==null?void 0:d.toLowerCase())==="landscape"?a=e==="GREDOS"?j:1/j:a=e==="GREDOS"?k:1/k;else{f=h();b=f[0];c=f[1];a=e==="GREDOS"?b/c:c/b}return a};f=[d("CloudGamingConstants").CloudGamingMessageTypes.LOADING_PROGRESS];var i=.5625,j=1.7778,k=.5625,l=100,m="cg_player_container",n={LANDSCAPE:"landscape",PORTRAIT:"portrait"};g.translateSiteTarget=a;g.getNumGamepadsConnected=b;g.isTouchDevice=c;g.playerSize=h;g.calculateAspectRatio=e;g.EVENTBUS_LOGGING_BLOCKLIST=f;g.ASPECT_RATIO=i;g.LANDSCAPE_16_9_ASPECT_RATIO=j;g.PORTRAIT_9_16_ASPECT_RATIO=k;g.DEBOUNCE_DURATION_MS=l;g.CG_PLAYER_CONTAINER_ID=m;g.ORIENTATION=n}),98);
__d("XFBDynamicResolution.facebook",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["CHANGE_ON_RESIZE","INITIAL_SIZE","NONE"]);c=a;f["default"]=c}),66);
__d("notch",["CloudGamingPlayerUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=null,b=document.getElementById(d("CloudGamingPlayerUtils").CG_PLAYER_CONTAINER_ID);if(b!==null){b.style.setProperty("--safe-area-top","env(safe-area-inset-top)");b.style.setProperty("--safe-area-right","env(safe-area-inset-right)");b.style.setProperty("--safe-area-bottom","env(safe-area-inset-bottom)");b.style.setProperty("--safe-area-left","env(safe-area-inset-left)");var c=window.getComputedStyle(b),e=parseInt(c.getPropertyValue("--safe-area-right"),10),f=parseInt(c.getPropertyValue("--safe-area-top"),10),g=parseInt(c.getPropertyValue("--safe-area-left"),10);c=parseInt(c.getPropertyValue("--safe-area-bottom"),10);if(e>0||f>0||g>0||c>0)switch(window.orientation){case 90:a={bottom:c,left:g,right:e,top:f};break;case-90:a={bottom:f,left:e,right:g,top:c};break}b.style.removeProperty("--safe-area-top");b.style.removeProperty("--safe-area-right");b.style.removeProperty("--safe-area-bottom");b.style.removeProperty("--safe-area-left")}return a}function b(a){var b={height:0,width:0,x:0,y:0};if(a!=null){switch(window.orientation){case 90:b.x=0;b.width=a.left;break;case-90:b.width=a.left;b.x=window.screen.width-b.width;break}b.y=0;b.height=window.screen.height}return b}g.computeSafeArea=a;g.getNotch=b}),98);
__d("CloudGamingApertureContainer.react",["CloudGamingActionTypes","CloudGamingConstants","CloudGamingPlayerUtils","CometMediaViewerFullscreenContext","HorizonWorldsUtils","err","notch","react","stylex","useMergeRefs","useResizeObserver"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useContext,k=b.useEffect,l=b.useLayoutEffect,m=b.useRef,n=b.useState;function a(a,b){var c=a.appID,d=a.children,e=a.connectionState,f=a.dynamicResolution,g=a.gameLifecycleState,i=a.gameOrientation,j=a.gameRotationDegree,k=a.isInsideIframe,l=a.isMobileApp,m=a.isMobileBrowser,n=a.onContainerResize,o=a.provider,p=a.useResourceSize,q=a.videoHeight;a=a.videoWidth;var r=q>a;return!m&&(r||p||l)&&o!=="GREDOS"?h.jsx("div",{className:"x1i10hfl xpdipgo x1winvzj x9f619 x5yr21d x1a2a7pz x87ps6o xh8yej3",ref:b,style:{height:p?q+"px":"100%",touchAction:"none",width:p?a+"px":"100%"},children:d}):h.jsx(t,{appID:c,connectionState:e,dynamicResolution:f,gameLifecycleState:g,gameOrientation:i,gameRotationDegree:j,isInsideIframe:k,isMobileApp:l,isMobileBrowser:m,onContainerResize:n,provider:o,ref:b,children:d})}a.displayName=a.name+" [from "+f.id+"]";e=h.forwardRef(a);function o(a,b,c){b>c?a.current=b/c:a.current=c/b}function p(a,b,e,f,g,h,i,j,k,l,m,n,p,q,s,t,u,v,w){a=a;b=b;var x=Boolean(navigator.userAgent.match(/Android/i));q=q;k||(q="NONE");switch(q){case"INITIAL_SIZE":x&&(a=window.screen.width,b=window.screen.height);s.current===0&&o(s,a,b);break;case"CHANGE_ON_RESIZE":o(s,a,b);break;default:s.current=d("CloudGamingPlayerUtils").LANDSCAPE_16_9_ASPECT_RATIO;break}if(i!==-90&&i!==0)throw c("err")("Game rotation degree should be set to 0 or -90");q={height:0,left:Math.round(e),streamingRotation:0,top:Math.round(f),width:0};if(g==="GREDOS"){x=r(a,b,j||k,h,s.current);q.width=Math.round(x.width);q.height=Math.round(x.height)}else k?i===-90?(q.width=Math.round(b),q.height=Math.round(a)):(q.width=Math.round(a),q.height=Math.round(b)):(q.width=Math.round(a),q.height=Math.round(b),b<a*d("CloudGamingPlayerUtils").ASPECT_RATIO?q.width=Math.round(b/d("CloudGamingPlayerUtils").ASPECT_RATIO):q.height=Math.round(a*d("CloudGamingPlayerUtils").ASPECT_RATIO));p(q.width);m(q.height);s=h==null?void 0:h.toLowerCase();q.left===0&&q.top===0&&(q.left=(a-q.width)/2,q.top=(b-q.height)/2);(j||k)&&(s===d("CloudGamingPlayerUtils").ORIENTATION.LANDSCAPE&&b>a||s===d("CloudGamingPlayerUtils").ORIENTATION.PORTRAIT&&a>b?(q.left=Math.round((b-q.width)/2+f),q.top=Math.round((a-q.height)/2+e)):(q.left=Math.round((a-q.width)/2+e),q.top=Math.round((b-q.height)/2+f)));g==="APERTURE"?q.streamingRotation=i:k&&g==="GREDOS"&&(s===d("CloudGamingPlayerUtils").ORIENTATION.LANDSCAPE?i===0&&(q.streamingRotation=90):i!==0&&(q.streamingRotation=-90));n("rotate("+q.streamingRotation+"deg)");l({browserOrientation:i===-90?1:0,devicePixelRatio:devicePixelRatio,notchHeight:w,notchWidth:v,notchX:t,notchY:u,provider:g,streamingRotation:q.streamingRotation,type:c("CloudGamingActionTypes").CONTAINER_RESIZE,viewportHeight:q.height,viewportLeft:q.left,viewportTop:q.top,viewportWidth:q.width})}function q(a,b,d,e,f,g,h,i){f==="APERTURE"&&b.phase==="live"&&a?(g({browserOrientation:e===-90?1:0,devicePixelRatio:devicePixelRatio,notchHeight:0,notchWidth:0,notchX:0,notchY:0,provider:f,streamingRotation:0,type:c("CloudGamingActionTypes").CONTAINER_RESIZE,viewportHeight:0,viewportLeft:0,viewportTop:0,viewportWidth:0}),i("rotate("+e+"deg)")):f==="GREDOS"&&(d==="Playing"||b.phase==="live")&&h()}function r(a,b,c,e,f){var g={height:b,width:a},h=1/f,i=f;if(c)if(e==null)i=a>b?f:h;else switch(e.toLowerCase()){case d("CloudGamingPlayerUtils").ORIENTATION.LANDSCAPE:b>a&&(g.width=b,g.height=a);break;case d("CloudGamingPlayerUtils").ORIENTATION.PORTRAIT:i=h;a>b&&(g.width=b,g.height=a);break}c=g.width/g.height;if(c>i){f=i/c;g.width*=f}else if(c<i){e=c/i;g.height*=e}return g}function s(a){var b;b=(b=window)==null?void 0:(b=b.screen)==null?void 0:(b=b.orientation)==null?void 0:b.lock;if(b)return b.call(window.screen.orientation,a);b=((b=window)==null?void 0:(b=b.screen)==null?void 0:b.lockOrientation)||((b=window)==null?void 0:(b=b.screen)==null?void 0:b.mozLockOrientation)||((b=window)==null?void 0:(b=b.screen)==null?void 0:b.msLockOrientation);if(b){a=a;a==="natural"&&(a="default");b.call(window.screen,a)}}var t=h.forwardRef(function(a,b){var e=a.appID,f=a.children,g=a.connectionState,o=a.dynamicResolution,r=a.gameLifecycleState,t=a.gameOrientation,v=a.gameRotationDegree,w=a.isInsideIframe,x=a.isMobileApp,y=a.isMobileBrowser,z=a.onContainerResize,A=a.provider;a=n(0);var B=a[0],C=a[1];a=n(0);var D=a[0],E=a[1],F=m(0);a=n(null);var G=a[0],H=a[1];a=j(c("CometMediaViewerFullscreenContext"));var I=n(window.innerWidth>window.innerHeight?1:0),J=I[0],K=I[1];I=n(null);var L=I[0],M=I[1];I=Object.values(d("CloudGamingConstants").HorizonAppIDs).includes(e);I&&o!=="NONE"&&s("landscape");var N=i(function(){L===null&&M(d("notch").computeSafeArea());var a=d("notch").getNotch(L),c=0,e=0,f=0,g=0;if(typeof b!=="function"){var h=b.current;h!==null&&(c=h.offsetWidth,e=h.offsetHeight,f=h.getBoundingClientRect().left,g=h.getBoundingClientRect().top)}p(c,e,f,g,A,t,v,x,y,z,E,H,C,o,F,a.x,a.y,a.width,a.height);d("HorizonWorldsUtils").updateBrowserOrientation(J,K)},[J,o,t,v,x,y,z,b,A,L]);e=c("useResizeObserver")(N);l(function(){N();window.addEventListener("resize",N);window.addEventListener("scroll",N);window.addEventListener("orientationchange",N);return function(){window.removeEventListener("resize",N),window.removeEventListener("scroll",N),window.removeEventListener("orientationchange",N)}},[N,a]);k(function(){if(!y)return;var a=window.navigator.virtualKeyboard;a!=null&&(a.overlaysContent=!0)},[y]);k(function(){q(y,g,r,v,A,z,N,H)},[g,r]);return h.jsx("div",{className:c("stylex")(w?u.container:u.playerContainer),id:d("CloudGamingPlayerUtils").CG_PLAYER_CONTAINER_ID,ref:c("useMergeRefs")(b,e),children:h.jsx("div",{style:{height:D===0?"100%":D,position:"fixed",touchAction:"none",transform:G,width:B===0?"100%":B},children:f})})}),u={container:{"-webkit-tap-highlight-color":"x1i10hfl","-webkit-touch-callout":"xpdipgo","-webkit-user-select":"x1winvzj",alignItems:"x6s0dn4",boxSizing:"x9f619",display:"x78zum5",height:"x1dr59a3",justifyContent:"xl56j7k",outline:"x1a2a7pz",overflowX:"x6ikm8r",overflowY:"x10wlt62",touchAction:"x5ve5x3","user-select":"x87ps6o",width:"xn9wirt",$$css:!0},playerContainer:{"-webkit-tap-highlight-color":"x1i10hfl","-webkit-touch-callout":"xpdipgo","-webkit-user-select":"x1winvzj",alignItems:"x6s0dn4",boxSizing:"x9f619",display:"x78zum5",height:"x5yr21d",justifyContent:"xl56j7k",outline:"x1a2a7pz",overflowX:"x6ikm8r",overflowY:"x10wlt62",touchAction:"x5ve5x3","user-select":"x87ps6o",width:"xh8yej3",$$css:!0},root:{"-webkit-tap-highlight-color":"x1i10hfl","-webkit-touch-callout":"xpdipgo","-webkit-user-select":"x1winvzj",boxSizing:"x9f619",height:"x5yr21d",outline:"x1a2a7pz","user-select":"x87ps6o",width:"xh8yej3",$$css:!0}};g["default"]=e}),98);
__d("fbinstant/common/dataAccessRecorder",[],(function(a,b,c,d,e,f){"use strict";var g={};function a(a,b,c,d){d===void 0&&(d={});c=a+"_"+c;if(Object.prototype.hasOwnProperty.call(g,c))return null;g[c]=!0;return b.sendPassThroughAsync(a,d)}f["default"]=a}),66);
__d("fbinstant/common/featureAvailabilityFetcher",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var b=a.prototype;b.fetchAsync=function(a,b){if(this.$1[b]!=null)return this.$1[b];this.$1[b]=a.sendPassThroughAsync("FEATURE_AVAILABILITY",{feature:b});return this.$1[b]};return a}();b=new a();f["default"]=b}),66);
__d("fbinstant/common/genericDialogs",["InstantGamesNTViewType"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("InstantGamesNTViewType")}),98);
__d("fbinstant/common/validator",["fbinstant/common/errorCode"],(function(a,b,c,d,e,f,g){"use strict";var h=Number.isInteger||function(a){return typeof a==="number"&&isFinite(a)&&Math.floor(a)===a};a=function(){function a(){}var b=a.prototype;b.validate=function(a,b){return b.validate(a)["catch"](function(a){a={code:c("fbinstant/common/errorCode").INVALID_PARAM,message:a.message};throw a})};b.object=function(){return new j()};b.array=function(){return new k()};b.string=function(){return new l()};b.number=function(){return new m()};b.integer=function(){return new n()};b["boolean"]=function(){return new o()};b.union=function(a){return new p(a)};return a}();var i=function(){function a(){this.validator=function(a){return},this.errors=[],this.isOptional=!1,this.type="Any"}var b=a.prototype;b.validate=function(a){var b=this;this.validator(a);return new Promise(function(c,d){return b.errors.length>0?d(new Error(b.errors.map(function(a){return a.message}).join("\n"))):c(a)})};b.optional=function(){this.isOptional=!0;return this};b.addError=function(a,b){if(b){this.errors.push(new Error(b));return}this.errors.push(new Error("Expected a value of type "+this.type+", received: "+String(a)))};b.getErrors=function(){return this.errors};b.getType=function(){return this.type};return a}(),j=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a;a=b.call(this)||this;a.validator=function(b){if(b==null&&a.isOptional)return;(typeof b!=="object"||Array.isArray(b))&&a.addError(b);a.$ObjectSchema4(b);for(var c in a.$ObjectSchema1){var d=b[c],e=a.$ObjectSchema1[c];if(!e.validator){a.addError(d,"Bad/missing validator for key: "+c);return}e.validator(d);e=e.getErrors();if(e.length>0){var f="For key "+c+": ";for(var e=e,g=Array.isArray(e),h=0,e=g?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;f+="["+i.message+"],"}a.addError(d,f)}}};a.$ObjectSchema1={};a.$ObjectSchema2=null;a.$ObjectSchema3=null;a.type="Object";return a}var c=a.prototype;c.keys=function(a){this.$ObjectSchema1=a;return this};c.maxSize=function(a){this.$ObjectSchema2=a;return this};c.minSize=function(a){this.$ObjectSchema3=a;return this};c.$ObjectSchema4=function(a){if(this.$ObjectSchema2||this.$ObjectSchema3){a=JSON.stringify(a).length;this.$ObjectSchema2&&a>this.$ObjectSchema2&&this.errors.push(new Error("Object must be at most "+String(this.$ObjectSchema2)+" characters when stringified, was "+String(a)));this.$ObjectSchema3&&a<this.$ObjectSchema3&&this.errors.push(new Error("Object must be at least "+String(this.$ObjectSchema3)+" characters when stringified, was "+String(a)))}};return a}(i),k=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a;a=b.call(this)||this;a.validator=function(b){if(b==null&&a.isOptional)return;if(!Array.isArray(b)){a.addError(b);return}if(a.$ArraySchema2&&b.length!==a.$ArraySchema2){a.addError(b,"Received an array of length "+String(b.length)+", expected an array of length "+String(a.$ArraySchema2));return}for(var b=b,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;if(!a.$ArraySchema1.validator){a.addError(e,"Bad/missing validator for Array");return}a.$ArraySchema1.validator(e);var f=a.$ArraySchema1.getErrors();if(f.length>0){f=a.$ArraySchema1.getType();f="Array of type "+f+" contained a value of another type: "+String(e);a.addError(e,f);return}}};a.$ArraySchema1=new i();a.$ArraySchema2=null;a.type="Array";return a}var c=a.prototype;c.schemaType=function(a){this.$ArraySchema1=a;return this};c.length=function(a){this.$ArraySchema2=a;return this};return a}(i),l=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a;a=b.call(this)||this;a.validator=function(b){if(b==null&&a.isOptional)return;typeof b!=="string"&&a.addError(b)};a.type="String";return a}return a}(i),m=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a;a=b.call(this)||this;a.validator=function(b){if(b==null&&a.isOptional)return;var c=typeof b==="number"&&!isNaN(b);c||a.addError(b)};a.type="Number";return a}return a}(i),n=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a;a=b.call(this)||this;a.validator=function(b){if(b==null&&a.isOptional)return;h(b)||a.addError(b)};a.type="Integer";return a}return a}(m),o=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a;a=b.call(this)||this;a.validator=function(b){if(b==null&&a.isOptional)return;typeof b!=="boolean"&&a.addError(b)};a.type="Boolean";return a}return a}(i),p=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this)||this;c.validator=function(a){if(a==null&&c.isOptional)return;var b=[];for(var d=c.$UnionSchema1,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;g.validator(a);g=g.getErrors();if(g.length===0)return;b.concat(g)}c.addError(a);for(g=0;g<b.length;g++){f=b[g];c.errors.push(f)}};c.$UnionSchema1=a;var d=" or ",e="";for(var f=0;f<a.length;f++){var g=a[f];e+=g.type+d}c.type=e.substring(0,e.length-d.length);return c}return a}(i);b=new a();g["default"]=b}),98);
__d("fbinstant/releases/samus/logger.samus",["fbinstant/releases/samus/internalStates.samus"],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.then(function(a){h(b);return a})["catch"](function(a){var c=a&&a.code||null;g(b,c);throw a})}function c(a){var c=b("fbinstant/releases/samus/internalStates.samus").getAnalytics();c.logAPICall(a);i(j(a,"api_call"),"API",{type:"api_call",name:a})}function d(a){var c=b("fbinstant/releases/samus/internalStates.samus").getAnalytics();c.logBeginAsyncAPICall(a);i(j(a,"api_begin_async"),"API",{type:"api_begin_async",name:a})}function g(a,c){var d=b("fbinstant/releases/samus/internalStates.samus").getAnalytics();d.logRejectAsyncAPICall(a,c);i(j(a,"api_reject_async",String(c)),"API",{type:"api_reject_async",name:a,code:c})}function h(a){var c=b("fbinstant/releases/samus/internalStates.samus").getAnalytics();c.logResolveAsyncAPICall(a);i(j(a,"api_resolve_async"),"API",{type:"api_resolve_async",name:a})}function i(a,c,d){d=babelHelpers["extends"]({},d,{key:a,gameState:b("fbinstant/releases/samus/internalStates.samus").getGameState()});b("fbinstant/releases/samus/internalStates.samus").getInternalEventLogger().logEvent(c,b("fbinstant/releases/samus/internalStates.samus"),d)}function j(a,b,c){c===void 0&&(c=null);return c!=null?a+"."+b+"."+c:a+"."+b}e.exports={logAPICall:c,logBeginAsync:d,logAsyncResult:a,logReject:g,logResolve:h}}),null);
__d("fbinstant/releases/samus/ads.samus",["InstantGamesGameState","InstantGamesSDKMessages","Promise","fbinstant/common/adType","fbinstant/common/apiError","fbinstant/common/errorCode","fbinstant/common/validator","fbinstant/releases/samus/internalStates.samus","fbinstant/releases/samus/logger.samus"],(function(a,b,c,d,e,f){"use strict";var g=function(){function a(a,b){this.$1=a,this.$2=b}var c=a.prototype;c.getPlacementID=function(){return this.$1.placementID};c.loadAsync=function(){var a="AdInstance_loadAsync";b("fbinstant/releases/samus/logger.samus").logBeginAsync(a);var c=b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(b("InstantGamesSDKMessages").LOAD_AD_ASYNC,{adInstanceID:this.$1.adInstanceID});return b("fbinstant/releases/samus/logger.samus").logAsyncResult(c,a).then(function(){})};c.showAsync=function(){var a=this,c="AdInstance_showAsync";b("fbinstant/releases/samus/logger.samus").logBeginAsync(c);if(b("fbinstant/releases/samus/internalStates.samus").getGameState()!==b("InstantGamesGameState").PLAYING){b("fbinstant/releases/samus/logger.samus").logReject(c,b("fbinstant/common/errorCode").INVALID_OPERATION);return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_OPERATION,message:"Can not perform this operation before game start."}))}this.$2===b("fbinstant/common/adType").INTERSTITIAL&&b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("QE_LOG_EXPOSURE",{qe_name:"IGSAC"});if(!b("fbinstant/releases/samus/internalStates.samus").getAdLimiter().canShowAd(this.$2)){b("fbinstant/releases/samus/logger.samus").logReject(c,b("fbinstant/common/errorCode").RATE_LIMITED);return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").RATE_LIMITED,message:"Too many ads shown recently. Wait a bit before attempting to show more."}))}var d=b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(b("InstantGamesSDKMessages").SHOW_AD_ASYNC,{adInstanceID:this.$1.adInstanceID});return b("fbinstant/releases/samus/logger.samus").logAsyncResult(d,c).then(function(){b("fbinstant/releases/samus/internalStates.samus").getAdLimiter().markAdShown(a.$2)})};return a}();e.exports={AdInstance:g,getInterstitialAdAsync:function(a){return b("fbinstant/common/validator").validate(a,b("fbinstant/common/validator").string()).then(function(){return b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(b("InstantGamesSDKMessages").GET_INTERSTITIAL_AD_ASYNC,{placementID:a})}).then(function(a){return new g(a,b("fbinstant/common/adType").INTERSTITIAL)})},getRewardedVideoAsync:function(a){return b("fbinstant/common/validator").validate(a,b("fbinstant/common/validator").string()).then(function(){return b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(b("InstantGamesSDKMessages").GET_REWARDED_VIDEO_ASYNC,{placementID:a})}).then(function(a){return new g(a,b("fbinstant/common/adType").REWARDED_VIDEO)})}}}),null);
__d("fbinstant/releases/samus/community.samus",["InstantGamesGameState","fbinstant/common/apiError","fbinstant/common/errorCode","fbinstant/common/genericDialogs","fbinstant/releases/samus/internalStates.samus","fbinstant/releases/samus/logger.samus"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a){var b=a.id,c=a.name,d=a.cvc,e=a.thumbnailURL,f=a.authorName,g=a.authorPictureURL;a=a.customPayload;this.$1=b;this.$2=c;this.$3=d;this.$4=e;this.$5=f;this.$6=g;this.$7=a}var b=a.prototype;b.getName=function(){return this.$2};b.getCVC=function(){return this.$3};b.getThumbnailURL=function(){return this.$4};b.getAuthorName=function(){return this.$5};b.getAuthorPictureURL=function(){return this.$6};b.getCustomPayload=function(){return this.$7};b.watchAsync=function(){var a="LiveStream_watchAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);if(c("fbinstant/releases/samus/internalStates.samus").getGameState()!==d("InstantGamesGameState").PLAYING){c("fbinstant/releases/samus/logger.samus").logReject(a,c("fbinstant/common/errorCode").INVALID_OPERATION);return Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_OPERATION,message:"Can not perform this operation before game start."}))}var b=c("fbinstant/releases/samus/internalStates.samus").getMessageSender().showGenericDialogAsync(c("fbinstant/common/genericDialogs").VIDEO_PLAYER,{videoID:this.$1});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(b,a).then(function(){})};return a}();function a(){var a="Community_canGetLiveStreamsAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);var b=c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("CAN_GET_LIVE_STREAMS",{});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(b,a).then(function(a){return a})["catch"](function(a){return!1})}function b(){var a="Community_canFollowOfficialPageAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);var b=c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("CAN_FOLLOW_PAGE",{});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(b,a).then(function(a){return a})["catch"](function(a){return!1})}function e(){var a="Community_canJoinOfficialGroupAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);var b=c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("CAN_JOIN_GROUP",{});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(b,a).then(function(a){return a})["catch"](function(a){return!1})}function f(a){var b="Community_getLiveStreamsAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(b);a=c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("GET_LIVE_STREAMS",a).then(function(a){if(!a||!a.list)return Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").LIVE_STREAMS_NOT_FOUND,message:"Live streams not found for the current game"}));a=a.list;return a.map(function(a){return new h(a)})});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(a,b)}function i(){var a="Community_liveStreamsOverlayAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);if(c("fbinstant/releases/samus/internalStates.samus").getGameState()!==d("InstantGamesGameState").PLAYING){c("fbinstant/releases/samus/logger.samus").logReject(a,c("fbinstant/common/errorCode").INVALID_OPERATION);return Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_OPERATION,message:"Can not perform this operation before game start."}))}var b=c("fbinstant/releases/samus/internalStates.samus").getMessageSender().showGenericDialogAsync(c("fbinstant/common/genericDialogs").LIVE_STREAMS,{});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(b,a).then(function(){})}function j(){var a="followOfficialPageAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);if(c("fbinstant/releases/samus/internalStates.samus").getGameState()!==d("InstantGamesGameState").PLAYING){c("fbinstant/releases/samus/logger.samus").logReject(a,c("fbinstant/common/errorCode").INVALID_OPERATION);return Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_OPERATION,message:"Can not perform this operation before game start."}))}var b=c("fbinstant/releases/samus/internalStates.samus").getMessageSender().showGenericDialogAsync(c("fbinstant/common/genericDialogs").FOLLOW_PAGE,{});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(b,a).then(function(){})}function k(){var a="joinOfficialGroupAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);if(c("fbinstant/releases/samus/internalStates.samus").getGameState()!==d("InstantGamesGameState").PLAYING){c("fbinstant/releases/samus/logger.samus").logReject(a,c("fbinstant/common/errorCode").INVALID_OPERATION);return Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_OPERATION,message:"Can not perform this operation before game start."}))}var b=c("fbinstant/releases/samus/internalStates.samus").getMessageSender().showGenericDialogAsync(c("fbinstant/common/genericDialogs").JOIN_GROUP,{});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(b,a).then(function(){})}a={LiveStream:h,canGetLiveStreamsAsync:a,canFollowOfficialPageAsync:b,canJoinOfficialGroupAsync:e,getLiveStreamsAsync:f,liveStreamsOverlayAsync:i,followOfficialPageAsync:j,joinOfficialGroupAsync:k};g["default"]=a}),98);
__d("InstantGamesChallengePickerFilter",[],(function(a,b,c,d,e,f){a=Object.freeze({NEW_CONTEXT_ONLY:"NEW_CONTEXT_ONLY",INCLUDE_EXISTING_CHALLENGES:"INCLUDE_EXISTING_CHALLENGES",NEW_PLAYERS_ONLY:"NEW_PLAYERS_ONLY",DUMMY_FILTER:"DUMMY_FILTER"});f["default"]=a}),66);
__d("InstantGamesGenericActionType",[],(function(a,b,c,d,e,f){a=Object.freeze({MESSENGER_GAME_UPDATES_AUTO_OPT_IN:"messenger_game_updates_auto_opt_in",MESSENGER_GAME_UPDATES_WINBACK:"messenger_game_updates_winback"});f["default"]=a}),66);
__d("fbinstant/common/asid",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.getASID=function(){return this.$1.asid};b.getSignature=function(){return this.$1.signed_request};return a}();f["default"]=a}),66);
__d("fbinstant/common/config",["JSSDKFBInstantConfig","JSSDKFBInstantGraphAPIMigrationConfig"],(function(a,b,c,d,e,f,g){"use strict";var h="default";function a(a,b){a=i(a,b);return a!=null?a:i(h,b)}function i(a,b){var c=j();c=a in c?c[a]:null;return c==null?null:b in c?c[b]:null}function j(){return c("JSSDKFBInstantConfig")}function b(a){var b=k();return b==null?!1:a in b?b[a]:!1}function k(){return c("JSSDKFBInstantGraphAPIMigrationConfig")}d={get:a,shouldUseGraphAPI:b};g["default"]=d}),98);
__d("fbinstant/common/graphAPIResponseHandler",["fbinstant/common/apiError","fbinstant/common/errorCode"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){if(!a)return d(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").UNKNOWN,message:"No response data provided"}));return a.error?d(h(a.error)):b(a)}function h(a){try{var b=a.error_user_msg,d=null;if(b==null||b.length===0)d=c("fbinstant/common/errorCode").UNKNOWN;else switch(b){case"Player cannot see the game.":case"Invalid app.":case"No page associated to the Instant Game.":case"Can not perform this operation before game start.":case"User already subscribed to this game bot.":d=c("fbinstant/common/errorCode").INVALID_OPERATION;break;case"Exceed API policy limit.":d=c("fbinstant/common/errorCode").RATE_LIMITED;break;case"Client version does not support this API.":d=c("fbinstant/common/errorCode").CLIENT_UNSUPPORTED_OPERATION;break;case"Invalid entry point":d=c("fbinstant/common/errorCode").INVALID_PARAM;break;case"A subscription cannot be cancelled if it is already in a non-active state.":case"An unknown error occurred when cancelling the subscription.":d=c("fbinstant/common/errorCode").PAYMENTS_OPERATION_FAILURE;break;case"There was an unknown error when consuming the purchase.":case"The purchase was not found.":case"An app cannot consume purchases from another app.":case"Cannot consume a non-consumable product.":d=c("fbinstant/common/errorCode").NETWORK_FAILURE;break;case"The purchase for the product is already consumed.":d=c("fbinstant/common/errorCode").PURCHASE_ALREADY_CONSUMED;break;default:d=i(a.error_subcode)}return new(c("fbinstant/common/apiError"))({code:d,message:b})}catch(a){return new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").UNKNOWN,message:""})}}function i(a){switch(a){case 2791018:case 2791024:case 2791020:case 2791019:case 2791022:return c("fbinstant/common/errorCode").INVALID_OPERATION;case 2791023:return c("fbinstant/common/errorCode").RATE_LIMITED;case 2791021:return c("fbinstant/common/errorCode").CLIENT_UNSUPPORTED_OPERATION;case 2791028:return c("fbinstant/common/errorCode").INVALID_PARAM;default:return c("fbinstant/common/errorCode").UNKNOWN}}function b(a){var b,c=a.filter(function(a){return a.value.toLowerCase()==="available"}).map(function(a){return a.key});a=a.filter(function(a){return a.value.toLowerCase()==="defer_to_client"}).map(function(a){return a.key});return b={},b.available=c,b.defer_to_client=a,b}function d(a){var b;a=a.filter(function(a){return a.value.toLowerCase()==="available"}).map(function(a){return a.key});return b={},b.available=a,b}g.handleGraphAPIResponse=a;g.compileSupportedFeaturesList=b;g.compileSupportedAPIsList=d}),98);
__d("fbinstant/common/bannerAdLimiter",["InstantGamesPassThroughRequestType","fbinstant/common/rateLimiter"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(b){this.$2=b,this.$1=new(c("fbinstant/common/rateLimiter"))(a.RATE_LIMIT_AMOUNT,a.RATE_LIMIT_PERIOD)}var b=a.prototype;b.updateRateLimiter=function(b){this.$1=new(c("fbinstant/common/rateLimiter"))(a.RATE_LIMIT_AMOUNT,b)};b.canShowAd=function(){var a=this.$1.check();if(a)return!0;this.$2.sendPassThroughAsync(c("InstantGamesPassThroughRequestType").HIGH_AD_RATE,{});return!1};b.markAdShown=function(){this.$1.bump()};return a}();a.RATE_LIMIT_AMOUNT=1;a.RATE_LIMIT_PERIOD=45e3;g["default"]=a}),98);
__d("fbinstant/common/entryPoint",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$2=a,this.$1=b||null}var b=a.prototype;b.getData=function(){return this.$1};b.getSource=function(){return this.$2};return a}();f["default"]=a}),66);
__d("fbinstant/common/getJSONEntrypointData",[],(function(a,b,c,d,e,f){"use strict";function a(a){try{return JSON.parse(a)}catch(b){try{a=decodeURIComponent(a);return JSON.parse(a)}catch(a){return null}}}f["default"]=a}),66);
__d("fbinstant/common/internalEventLogger",["fbinstant/common/eventBatcher"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){var a=this;this.$3=function(b){var c=a.$2;if(b.length<=0||!c)return;b=a.$4(b);c.sendPassThroughAsync("SDK_EVENT",{events:b})};this.$1=new(c("fbinstant/common/eventBatcher"))(this.$3)}var b=a.prototype;b.initialize=function(a){this.$2=a,this.$1.startInterval()};b.logEvent=function(a,b,c){b=b!=null?b.getContext().getID():null;this.$1.logEvent({type:a,data:babelHelpers["extends"]({},c,{contextID:b})})};b.$4=function(a){var b={};for(var c=0;c<a.length;c++){var d=a[c];Object.prototype.hasOwnProperty.call(b,d.data.key)||(b[d.data.key]=babelHelpers["extends"]({},d),b[d.data.key].data.count=0);b[d.data.key].data.count+=1}d=[];for(c in b)d.push(b[c]);return d};return a}();g["default"]=a}),98);
__d("fbinstant/common/paymentsState",["fbinstant/common/event"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){var a=this;this.$3=!1;this.$1=new(c("fbinstant/common/event"))();this.$2=new Promise(function(b,c){a.$1.on(function(){a.$3=!0,b(),a.$1.unbind()})})}var b=a.prototype;b.getPaymentsInitializedEvent=function(){return this.$1};b.isClientReady=function(){return this.$3};b.onInitialized=function(a){this.$2.then(a)};return a}();g["default"]=a}),98);
__d("fbinstant/common/internalStates",["InstantGamesGameState","InstantGamesSDKMessages","fbinstant/common/adLimiter","fbinstant/common/analytics","fbinstant/common/bannerAdLimiter","fbinstant/common/contextType","fbinstant/common/entryPoint","fbinstant/common/event","fbinstant/common/gameContext","fbinstant/common/getJSONEntrypointData","fbinstant/common/internalEventLogger","fbinstant/common/messageSender","fbinstant/common/paymentsState","fbinstant/common/supportedFeaturesManager","fbinstant/common/supportedMessagesManager"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$18=new(c("fbinstant/common/messageSender"))(),this.$1=new(c("fbinstant/common/adLimiter"))(this.$18),this.$2=new(c("fbinstant/common/analytics"))(),this.$3=new(c("fbinstant/common/event"))(),this.$4=null,this.$5=new(c("fbinstant/common/bannerAdLimiter"))(this.$18),this.$6=null,this.$7=new(c("fbinstant/common/gameContext"))({type:c("fbinstant/common/contextType").SOLO}),this.$8=0,this.$10=new(c("fbinstant/common/entryPoint"))(null,null),this.$11=d("InstantGamesGameState").LOADING,this.$12=new(c("fbinstant/common/event"))(),this.$13=new(c("fbinstant/common/event"))(),this.$14=!1,this.$15=new(c("fbinstant/common/internalEventLogger"))(),this.$16=null,this.$17=null,this.$19=new(c("fbinstant/common/event"))(),this.$22=new(c("fbinstant/common/paymentsState"))(),this.$23=null,this.$24=null,this.$25=null,this.$26=null,this.$20=new(c("fbinstant/common/event"))(),this.$21=new(c("fbinstant/common/event"))(),this.$27=new(c("fbinstant/common/event"))(),this.$28=new(c("fbinstant/common/event"))(),this.$29=new(c("fbinstant/common/event"))(),this.$30=new(c("fbinstant/common/event"))(),this.$9=null,this.$31=null,this.$32=null}var b=a.prototype;b.initialize=function(a){var b=this;a.appID&&this.setAppID(a.appID);a.locale&&this.setLocale(a.locale);a.customUpdateID&&this.setCustomUpdateID(a.customUpdateID);c("fbinstant/common/supportedMessagesManager").setSupported([c("InstantGamesSDKMessages").SEND_PASS_THROUGH_ASYNC]);a.supportedFeatures&&Array.isArray(a.supportedFeatures)&&c("fbinstant/common/supportedFeaturesManager").setSupported(a.supportedFeatures);var d=null;if(a.entryPointData){var e=c("fbinstant/common/getJSONEntrypointData")(a.entryPointData);e!=null&&(e.sender&&e.data?d=e.data:d=e)}e=a.entryPoint||null;this.updateEntryPoint(new(c("fbinstant/common/entryPoint"))(e,d));this.updateContext(a);this.setInitialized();this.getAnalyticsLogEvent().on(function(a){var c=a.eventName,d=a.valueToSum;a=a.parameters;if(!c)return;b.getAnalytics().logEvent(c,d!=null?d:null,a||null)});this.getInternalEventLogger().initialize(this.getMessageSender())};b.updateContext=function(a){if(!a.contextType)return;var b=this.getContext().getID();this.$7=new(c("fbinstant/common/gameContext"))({id:a.contextID,size:a.contextSize,type:a.contextType.toUpperCase()});this.getMessageSender().sendPassThroughAsync("CONTEXT_UPDATE_TRACKING",{context_token_id:this.getContext().getID(),pre_context_id:b})};b.updateEntryPoint=function(a){this.$10=a};b.setAppID=function(a){this.$4=a};b.setCustomUpdateID=function(a){this.$9=a};b.setLocale=function(a){this.$16=a};b.setPlayerID=function(a){this.$23=a};b.setPlayerName=function(a){this.$24=a};b.setPlayerPhoto=function(a){this.$25=a};b.setInitialized=function(){this.$14=!0};b.setLoadingProgress=function(a){this.$8=a};b.setGameState=function(a){this.$11=a};b.setConnectedPlayersPromise=function(a){this.$6=a};b.setMatchPlayerPromise=function(a){this.$17=a};b.setQEParams=function(a){this.$26=a};b.setGetEntryPointAsyncPromise=function(a){this.$31=a};b.setFeatureAvailabilityInformation=function(a){this.$32=a};b.getAnalytics=function(){return this.$2};b.getAppID=function(){return this.$4};b.getConnectedPlayersPromise=function(){return this.$6};b.getContext=function(){return this.$7};b.getCustomUpdateID=function(){return this.$9};b.getLoadingProgress=function(){return this.$8};b.getEntryPoint=function(){return this.$10};b.getGameState=function(){return this.$11};b.getGameStartEvent=function(){return this.$12};b.isInitialized=function(){return this.$14};b.getInternalEventLogger=function(){return this.$15};b.getLocale=function(){return this.$16};b.getMatchPlayerPromise=function(){return this.$17};b.getMessageSender=function(){return this.$18};b.getPaymentsState=function(){return this.$22};b.getPlayerID=function(){return this.$23};b.getPlayerName=function(){return this.$24};b.getPlayerPhoto=function(){return this.$25};b.getRequestScreenshotEvent=function(){return this.$27};b.getRestartEvent=function(){return this.$28};b.getPauseEvent=function(){return this.$19};b.getReceiveMessageEvent=function(){return this.$20};b.getReceiveStateUpdateEvent=function(){return this.$21};b.getResumeEvent=function(){return this.$29};b.getAnalyticsLogEvent=function(){return this.$3};b.getQEParams=function(){return this.$26};b.getAdLimiter=function(){return this.$1};b.getBannerAdLimiter=function(){return this.$5};b.updateBannerAdLimiter=function(a){this.$5.updateRateLimiter(a)};b.getGestureCommandEvent=function(){return this.$13};b.getEntryPointAsyncPromise=function(){return this.$31};b.getFeatureAvailabilityInformation=function(){return this.$32};return a}();b=new a();g["default"]=b}),98);
__d("fbinstant/common/environmentValues",["fbinstant/common/getUrlParam"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("fbinstant/common/getUrlParam")("environment_type")}function b(){return c("fbinstant/common/getUrlParam")("session_id")}function d(){return Boolean(Number(c("fbinstant/common/getUrlParam")("instant_games_cast_fbids_as_strings")))}function e(){return Boolean(Number(c("fbinstant/common/getUrlParam")("use_pass_through_for_coplay_custom_update")))}f={getEnvironmentType:a,getSessionID:b,getShouldCastFbidsAsStrings:d,getShouldUsePassThroughForCoplayCustomUpdate:e};g["default"]=f}),98);
__d("fbinstant/common/unsafeNumberLogger",["fbinstant/common/getUrlParam"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$2=Boolean(Number(c("fbinstant/common/getUrlParam")("should_log_unsafe_numbers")))}var b=a.prototype;b.initialize=function(a){this.$1=a};b.checkPayloadForUnsafeNumbers=function(a,b){if(!this.$2||this.$1==null)return;this.$3(a,b,null,0)};b.$3=function(a,b,c,d){if(a==null||d>50)return;if(typeof a==="object"){var e=Array.isArray(a),f=Object.entries(a);for(var g=0;g<f.length;g++){var h=f[g],i=h[0];h=h[1];this.$3(h,b,e?c:i,d+1)}}else this.$4(a,b,c)};b.$4=function(a,b,c){Number.isInteger(a)&&!Number.isSafeInteger(a)&&this.$5(b,c)};b.$5=function(a,b){var d=this.$1;if(!d)return;var e=a+".unsafe_number_error";b!=null&&(e=e+"."+b);a={type:"unsafe_number_error",name:a,idFieldName:b,key:e,clientTime:new Date().getTime(),environmentType:c("fbinstant/common/getUrlParam")("environment_type")};d.logEvent("API",null,a)};return a}();g["default"]=a}),98);
__d("fbinstant/common/messageSender",["Alea","InstantGamesSDKMessages","fbinstant/common/apiError","fbinstant/common/environmentValues","fbinstant/common/errorCode","fbinstant/common/event","fbinstant/common/exclusiveMessageManager","fbinstant/common/internalStates","fbinstant/common/platform","fbinstant/common/platformUtils","fbinstant/common/supportedMessagesManager","fbinstant/common/unsafeNumberLogger"],(function(a,b,c,d,e,f,g){"use strict";var h=c("Alea")(),i=4294967296;a=function(){function a(){this.$4="version_info_not_initialized",this.$1={},this.$2=new(c("fbinstant/common/event"))(),this.$3=new(c("fbinstant/common/event"))(),this.$7=new(c("fbinstant/common/unsafeNumberLogger"))()}var b=a.prototype;b.initialize=function(a,b,c){var d=this;this.$4=b;this.$6=a.source;this.$5=a.sender;this.$2.on(function(a){d.$8(a,!0)});this.$3.on(function(a){d.$8(a,!1)});this.$7.initialize(c);b=new RegExp("[?&]IsMobileWeb(=([^&#]*)|&|#|$)","i");a=b.exec(window.location.href);if(!a||!a[2])return;window.IsMobileWeb=parseInt(a[2],10)===1};b.getResolvePromiseEvent=function(){return this.$2};b.getRejectPromiseEvent=function(){return this.$3};b.send=function(a,b){if(!this.$6||!this.$5||!c("fbinstant/common/supportedMessagesManager").isSupported(a))return;this.$5.postMessage(this.$9({type:a,content:b,destination:this.$6}),"*")};b.sendAsync=function(a,b){var d=this;return!c("fbinstant/common/supportedMessagesManager").isSupported(a)?Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").CLIENT_UNSUPPORTED_OPERATION,message:"Client does not support the message: "+a})):c("fbinstant/common/exclusiveMessageManager").lockOrThrow(a).then(function(){return d.$10(a,b).then(function(b){c("fbinstant/common/exclusiveMessageManager").release(a);a!==c("InstantGamesSDKMessages").SEND_PASS_THROUGH_ASYNC&&d.$7.checkPayloadForUnsafeNumbers(b,a);return b})["catch"](function(b){c("fbinstant/common/exclusiveMessageManager").release(a);throw b})})["catch"](function(a){throw new(c("fbinstant/common/apiError"))(a)})};b.showGenericDialogAsync=function(a,b){b=JSON.stringify(b||{});b={data:b,request:a,sdkVersion:this.$4};a=c("fbinstant/common/platformUtils").getPlatform()===c("fbinstant/common/platform").IOS&&!(c("fbinstant/common/platformUtils").getEnvironmentIsIAB()||c("fbinstant/common/platformUtils").getEnvironmentIsCoplay())?c("InstantGamesSDKMessages").SHOW_GENERIC_DIALOG_ASYNC_IOS:c("InstantGamesSDKMessages").SHOW_GENERIC_DIALOG_ASYNC;return this.sendAsync(a,b).then(function(a){if(!a)return Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").UNKNOWN,message:"No response data provided"}));return a.errorCode?Promise.reject(new(c("fbinstant/common/apiError"))({code:a.errorCode,message:a.errorMessage||""})):a})["catch"](function(a){throw new(c("fbinstant/common/apiError"))(a)})};b.triggerGenericAction=function(a,b){b=JSON.stringify(b||{});b={data:b,request:a,sdkVersion:this.$4};a=c("InstantGamesSDKMessages").GENERIC_ACTION;this.sendAsync(a,b).then(function(a){})["catch"](function(a){});return};b.sendPassThroughAsync=function(a,b){var d=this;b=b||{};b=JSON.stringify(babelHelpers["extends"]({},b,{environment_type:c("fbinstant/common/environmentValues").getEnvironmentType(),context_token_id:c("fbinstant/common/internalStates").getContext().getID()}));b={data:b,request:a,sdkVersion:this.$4};return this.sendAsync(c("InstantGamesSDKMessages").SEND_PASS_THROUGH_ASYNC,b).then(function(b){if(!b)return Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").UNKNOWN,message:"No response data provided"}));b=JSON.parse(b);var e=b.data,f=b.errorCode;b=b.errorMessage;if(f)return Promise.reject(new(c("fbinstant/common/apiError"))({code:f,message:b||""}));d.$7.checkPayloadForUnsafeNumbers(e,a);return e})};b.$9=function(a){switch(this.$6){case"Android":case"quicksilver-rn":return JSON.stringify(a)}return a};b.$11=function(a){return a+"_"+Math.floor(h()*i)};b.$12=function(a,b,c){this.$1[a]={resolve:b,reject:c}};b.$8=function(a,b){var d=a.promiseID;if(!d||!this.$1[d])return;var e=this.$1[d];if(b&&e.resolve)e.resolve(a.data);else if(!b&&e.reject){b=a.data;!b?b=new(c("fbinstant/common/apiError"))({message:""}):b=new(c("fbinstant/common/apiError"))({code:b.code||c("fbinstant/common/errorCode").UNKNOWN,message:b.message||""});e.reject(b)}delete this.$1[d]};b.$10=function(a,b){var c=this;return new Promise(function(d,e){var f=c.$11(a);c.$12(f,d,e);d=b||{};d.promiseID=f;c.send(a,d)})};return a}();g["default"]=a}),98);
__d("fbinstant/common/logger",["fbinstant/common/getUrlParam","fbinstant/common/internalStates"],(function(a,b,c,d,e,f,g){"use strict";var h=15e3;function a(a,b,c){i([a,b].filter(Boolean).join("_"));for(var d=arguments.length,e=new Array(d>3?d-3:0),g=3;g<d;g++)e[g-3]=arguments[g];return c.apply(null,e)}function b(a,b){var c=window.setTimeout(function(){return l(b)},h);return a.then(function(a){window.clearTimeout(c);k(b);return a})["catch"](function(a){window.clearTimeout(c);var d=a&&a.code||null,e=a&&a.message||null;j(b,d,e);throw a})}function i(a){var b=c("fbinstant/common/internalStates").getAnalytics();b.logAPICall(a);m(n(a,"api_call"),"API",{type:"api_call",name:a})}function d(a){var b=c("fbinstant/common/internalStates").getAnalytics();b.logBeginAsyncAPICall(a);m(n(a,"api_begin_async"),"API",{type:"api_begin_async",name:a})}function j(a,b,d){var e=c("fbinstant/common/internalStates").getAnalytics();e.logRejectAsyncAPICall(a,b);m(n(a,"api_reject_async",String(b)),"API",{type:"api_reject_async",name:a,code:b,errorMessage:d})}function k(a){var b=c("fbinstant/common/internalStates").getAnalytics();b.logResolveAsyncAPICall(a);m(n(a,"api_resolve_async"),"API",{type:"api_resolve_async",name:a})}function l(a){m(n(a,"api_exceed_duration"),"API",{type:"api_exceed_duration",name:a})}function m(a,b,d){d=babelHelpers["extends"]({},d,{key:a,gameState:c("fbinstant/common/internalStates").getGameState(),clientTime:new Date().getTime(),environmentType:c("fbinstant/common/getUrlParam")("environment_type")});c("fbinstant/common/internalStates").getInternalEventLogger().logEvent(b,c("fbinstant/common/internalStates"),d)}function n(a,b,c){c===void 0&&(c=null);return c!=null?a+"."+b+"."+c:a+"."+b}e={logAPICall:a,logBeginAsync:d,logAsyncResult:b,logReject:j,logResolve:k};g["default"]=e}),98);
__d("fbinstant/common/graphApi",["ApiClient","InstantGamesGenericActionType","fbinstant/common/apiError","fbinstant/common/asid","fbinstant/common/config","fbinstant/common/errorCode","fbinstant/common/genericDialogs","fbinstant/common/getUrlParam","fbinstant/common/graphAPIResponseHandler","fbinstant/common/internalStates","fbinstant/common/logger","fbinstant/common/supportedMessagesManager"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=null,j=null,k=2e3,l="https://graph.fb.gg",m=c("fbinstant/common/getUrlParam")("environment_type");function n(a,b,e){var f="graph_api_async";c("fbinstant/common/logger").logBeginAsync(f);var g=u()+a;a=p().then(function(){return new Promise(function(a,f){return c("ApiClient").graph(g,b,e,function(b){return d("fbinstant/common/graphAPIResponseHandler").handleGraphAPIResponse(b,a,f)})})});return c("fbinstant/common/logger").logAsyncResult(a,f)}function a(){i==null&&(i=n("/me","get",{fields:["id"]}).then(function(a){return a.id}));return i}function b(){j==null&&(j=n("/me","get",{fields:["signed_asid"]}).then(function(a){if(a&&a.signed_asid)return new(c("fbinstant/common/asid"))(a.signed_asid)}));return j}function e(){h===null&&(h=c("fbinstant/common/internalStates").getMessageSender().sendPassThroughAsync("PLATFORM_INIT",{payload:c("fbinstant/common/internalStates").getEntryPoint().getData(),context_token_id:c("fbinstant/common/internalStates").getContext().getID(),retry_count:0,environment_type:m}).then(function(a){return o(a)},function(){h=null})["catch"](function(a){var b=[1,2,3].reduce(function(a,b){return a.then(function(a){return q(b,a).then()})},new Promise(function(b){return b(a)}));return b.then(function(a){return o(a)})}));return h}function o(a){if((a==null||a.access_token==null)&&!a.is_zero_permission_game)throw new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").NOT_AUTHORIZED,message:"The player is not currently authorized."});var b=a.access_token,d=a.should_call_graph_api_during_initialization,e=a.is_canvas_to_instant_games_silent_reauth,f=a.session_apis_availability,g=a.default_opt_in,h=a.default_opt_in_session_length,i=a.default_opt_in_winback;a=a.default_opt_in_winback_session_length;c("ApiClient").setAccessToken(b);e&&window.setTimeout(function(){c("fbinstant/common/internalStates").getMessageSender().showGenericDialogAsync(c("fbinstant/common/genericDialogs").CANVAS_TO_INSTANT_GAMES_SILENT_REAUTH_NOTICE)},5e3);g&&h&&window.setTimeout(function(){c("fbinstant/common/internalStates").getMessageSender().sendPassThroughAsync("MESSENGER_GAME_UPDATE_OPT_IN_OPERATION").then(function(a){a.should_show_user_notice&&c("fbinstant/common/internalStates").getMessageSender().triggerGenericAction(c("InstantGamesGenericActionType").MESSENGER_GAME_UPDATES_AUTO_OPT_IN);return Promise.resolve()})["catch"](function(a){})},h);i&&a&&window.setTimeout(function(){c("fbinstant/common/internalStates").getMessageSender().triggerGenericAction(c("InstantGamesGenericActionType").MESSENGER_GAME_UPDATES_WINBACK)},h);return d===!1?Promise.resolve():n("/me","get",{fields:["instant_game_player_id","name","picture","locale","instant_games_sdk_information{instant_game_apis_availability.payload("+f+")}"]}).then(function(a){s(a)})["catch"](function(a){var b="platform_init_graph_api";c("fbinstant/common/logger").logReject(b,c("fbinstant/common/errorCode").NETWORK_FAILURE,a.errorMessage)})}function p(){var a=c("ApiClient").getAccessToken();return a?Promise.resolve():c("fbinstant/common/internalStates").getMessageSender().sendPassThroughAsync("GET_ACCESS_TOKEN").then(function(a){if(a&&a.access_token){c("ApiClient").setAccessToken(a.access_token);return Promise.resolve()}})}function q(a,b){if(b==null||b.access_token==null)return r(a);else return new Promise(function(a){return a(b)})}function r(a){return new Promise(function(b){return window.setTimeout(function(){return c("fbinstant/common/internalStates").getMessageSender().sendPassThroughAsync("PLATFORM_INIT",{payload:c("fbinstant/common/internalStates").getEntryPoint().getData(),context_token_id:c("fbinstant/common/internalStates").getContext().getID(),retry_count:a,environment_type:m}).then(function(a){return b(a)})},k*a)})}function s(a){var b=a.instant_game_player_id,e=a.name,f=a.picture,g=a.locale;c("fbinstant/common/internalStates").setPlayerID(b);c("fbinstant/common/internalStates").setPlayerName(e);c("fbinstant/common/internalStates").setPlayerPhoto(f.data.url);g==null&&c("fbinstant/common/internalStates").setLocale("");b=a.instant_games_sdk_information.instant_game_apis_availability;e=b.feature_availability;f=b.api_availability;c("fbinstant/common/internalStates").setFeatureAvailabilityInformation(d("fbinstant/common/graphAPIResponseHandler").compileSupportedFeaturesList(e));c("fbinstant/common/supportedMessagesManager").setSupported(d("fbinstant/common/graphAPIResponseHandler").compileSupportedAPIsList(f).available)}function t(){var a=document.referrer.split(".facebook.com")[0];a=a.split(".").slice(1);var b="";a.length>1&&a.forEach(function(a){b=b+"."+a});return b}function u(){var a=c("fbinstant/common/config").shouldUseGraphAPI("shouldUseSandboxDomain");if(a){a=t();return a===void 0||a.length===0?l:"https://graph"+a+".facebook.com"}else return l}f={initPlatformAsync:e,getPlayerASIDAsync:a,getPlayerSignedASIDAsync:b,requestAsync:n};g["default"]=f}),98);
__d("fbinstant/common/connectedPlayers",["InstantGamesSDKMessages","fbinstant/common/graphApi"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a){this.$1=a}var b=a.prototype;b.getID=function(){return this.$1.id};b.getName=function(){return this.$1.name};b.getPhoto=function(){return this.$1.photo};return a}();a={fetchAsync:function(a){a.sendAsync(c("InstantGamesSDKMessages").GET_CONNECTED_PLAYERS_ASYNC,{});return c("fbinstant/common/graphApi").requestAsync("/me/friends?limit=1000","get",{fields:["instant_game_player_id","name","picture"]}).then(function(a){return a.data.filter(function(a){return a.instant_game_player_id!=null}).map(function(a){return new h({id:a.instant_game_player_id,name:a.name,photo:a.picture.data.url})})})},ConnectedPlayer:h};b=a;g["default"]=b}),98);
__d("fbinstant/releases/samus/contextCreator.samus",["InstantGamesGameState","InstantGamesSDKMessages","Promise","fbinstant/common/apiError","fbinstant/common/connectedPlayers","fbinstant/common/errorCode","fbinstant/common/validator","fbinstant/releases/samus/internalStates.samus"],(function(a,b,c,d,e,f){"use strict";var g={createAsync:function(a){if(b("fbinstant/releases/samus/internalStates.samus").getGameState()!==b("InstantGamesGameState").PLAYING)return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_OPERATION,message:"Can not perform this operation before game start."}));var c=a==null||Array.isArray(a);if(a!=null&&!Array.isArray(a)){var d=[a];d=g._createAsync(d,c)}else{var e=a;d=g._canCreateAsync(e).then(function(a){if(!a)return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").CLIENT_UNSUPPORTED_OPERATION,message:"Client does not support no player IDS or multiple player IDs yet"}));if(e==null)return g._createAsyncNullState(c);else return g._createAsync(e,c)})}return d},_createAsync:function(a,c){return b("fbinstant/common/validator").validate(a,b("fbinstant/common/validator").array().schemaType(b("fbinstant/common/validator").string())).then(function(){var c=a.indexOf(b("fbinstant/releases/samus/internalStates.samus").getPlayerID()||"");c>-1&&a.splice(c,1);if(a.length===0)return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_PARAM,message:"At least one player id besides the current player must be provided."}));c=b("fbinstant/releases/samus/internalStates.samus").getConnectedPlayersPromise();if(c)return c;c=b("fbinstant/common/connectedPlayers").fetchAsync(b("fbinstant/releases/samus/internalStates.samus").getMessageSender());b("fbinstant/releases/samus/internalStates.samus").setConnectedPlayersPromise(c);return c}).then(function(d){d=new Set(d.map(function(a){return a.getID()}));for(var e=0;e<a.length;e++){var f=a[e];if(!d.has(f))return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_PARAM,message:"Provided ID "+String(f)+" is not a connected player of the current player."}))}return b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(b("InstantGamesSDKMessages").CONTEXT_CREATE_ASYNC,{playerIDs:a,shouldCreateGroup:c})}).then(function(a){b("fbinstant/releases/samus/internalStates.samus").updateContext(a);return})},_canCreateAsync:function(a){return b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("CAN_CREATE_CONTEXT",{suggestedPlayerIDs:a})["catch"](function(a){return!1})},_createAsyncNullState:function(a){return b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(b("InstantGamesSDKMessages").CONTEXT_CREATE_ASYNC,{shouldCreateGroup:a}).then(function(a){b("fbinstant/releases/samus/internalStates.samus").updateContext(a);return})}};e.exports=g}),null);
__d("fbinstant/releases/samus/contextPlayers.samus",["InstantGamesSDKMessages","fbinstant/releases/samus/internalStates.samus"],(function(a,b,c,d,e,f){"use strict";var g=function(){function a(a){this.$1=a}var b=a.prototype;b.getID=function(){return this.$1.id};b.getName=function(){return this.$1.name||null};b.getPhoto=function(){return this.$1.photo||null};return a}();a={fetchAsync:function(){return b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(b("InstantGamesSDKMessages").CONTEXT_PLAYERS_FETCH_ASYNC,{}).then(function(a){return a.map(function(a){return new g(a)})})},ContextPlayer:g};e.exports=a}),null);
__d("fbinstant/releases/samus/contextSwitcher.samus",["InstantGamesGameState","InstantGamesSDKMessages","fbinstant/common/apiError","fbinstant/common/errorCode","fbinstant/common/genericDialogs","fbinstant/common/getUrlParam","fbinstant/common/platform","fbinstant/common/platformUtils","fbinstant/common/validator","fbinstant/releases/samus/internalStates.samus"],(function(a,b,c,d,e,f,g){"use strict";var h={switchAsync:function(a){if(c("fbinstant/releases/samus/internalStates.samus").getGameState()!==d("InstantGamesGameState").PLAYING)return Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_OPERATION,message:"Can not perform this operation before game start."}));if(a===c("fbinstant/releases/samus/internalStates.samus").getContext().getID())return Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").SAME_CONTEXT,message:"Must specify a context other than the current one."}));var b=Number(c("fbinstant/common/getUrlParam")("use_generic_dialog_for_switch_async"))||0;if(b===1&&c("fbinstant/common/platformUtils").getPlatform()!==c("fbinstant/common/platform").WEB&&c("fbinstant/common/platformUtils").getPlatform()!==c("fbinstant/common/platform").MOBILE_WEB)return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("CAN_SWITCH_CONTEXT",{id:a}).then(function(){return h._switchAsync(a,!0)});b=Number(c("fbinstant/common/getUrlParam")("gcgs"))||0;b=b===1;if(!b)return h._canSwitchAsync(a).then(function(b){return!b?Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").CLIENT_REQUIRES_UPDATE,message:"Client requires update to support this operation"})):h._switchAsync(a,!1)});else return h._switchAsync(a,!1)},_switchAsync:function(a,b){return c("fbinstant/common/validator").validate(a,c("fbinstant/common/validator").string()).then(function(){if(b)return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().showGenericDialogAsync(c("fbinstant/common/genericDialogs").CONTEXT_SWITCH,{newContextTokenID:a,switchContext:!0});else return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(c("InstantGamesSDKMessages").CONTEXT_SWITCH_ASYNC,{id:a})}).then(function(a){c("fbinstant/releases/samus/internalStates.samus").updateContext(a);return})},_canSwitchAsync:function(a){return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("CAN_SWITCH_CONTEXT",{id:a})["catch"](function(a){return!1})}};a=h;g["default"]=a}),98);
__d("fbinstant/releases/samus/context.samus",["InstantGamesChallengePickerFilter","InstantGamesGameState","InstantGamesSDKMessages","Promise","fbinstant/common/apiError","fbinstant/common/dataAccessRecorder","fbinstant/common/errorCode","fbinstant/common/getUrlParam","fbinstant/common/validator","fbinstant/releases/samus/contextCreator.samus","fbinstant/releases/samus/contextPlayers.samus","fbinstant/releases/samus/contextSwitcher.samus","fbinstant/releases/samus/internalStates.samus","fbinstant/releases/samus/logger.samus"],(function(a,b,c,d,e,f){"use strict";a={getID:function(){b("fbinstant/releases/samus/logger.samus").logAPICall("context_getID");var a=b("fbinstant/releases/samus/internalStates.samus").getContext().getID();a!=null&&b("fbinstant/common/dataAccessRecorder")("RECORD_GET_CONTEXT_INFO",b("fbinstant/releases/samus/internalStates.samus").getMessageSender(),a,{contextID:a});return a},getType:function(){b("fbinstant/releases/samus/logger.samus").logAPICall("context_getType");var a=b("fbinstant/releases/samus/internalStates.samus").getContext().getType(),c=b("fbinstant/releases/samus/internalStates.samus").getContext().getID();a==="POST"&&b("fbinstant/common/getUrlParam")("oct")&&(a="THREAD");c!=null&&b("fbinstant/common/dataAccessRecorder")("RECORD_GET_CONTEXT_INFO",b("fbinstant/releases/samus/internalStates.samus").getMessageSender(),c,{contextID:c});return a},isSizeBetween:function(a,c){b("fbinstant/releases/samus/logger.samus").logAPICall("context_isSizeBetween");var d=b("fbinstant/releases/samus/internalStates.samus").getContext().getContextSizeResponse();if(d)return d;d=b("fbinstant/releases/samus/internalStates.samus").getContext().getSize();if(a!==null&&!Number.isInteger(a)||c!==null&&!Number.isInteger(c)||d==null)return null;var e=!1;(!a||d>=a)&&(!c||d<=c)&&(a||c)&&(e=!0);d={answer:e,minSize:a,maxSize:c};b("fbinstant/releases/samus/internalStates.samus").getContext().setContextSizeResponse(d);return d},switchAsync:function(a){var c="context_switchAsync";b("fbinstant/releases/samus/logger.samus").logBeginAsync(c);a=b("fbinstant/releases/samus/contextSwitcher.samus").switchAsync(a);return b("fbinstant/releases/samus/logger.samus").logAsyncResult(a,c)},chooseAsync:function(a){var c="context_chooseAsync";b("fbinstant/releases/samus/logger.samus").logBeginAsync(c);if(b("fbinstant/releases/samus/internalStates.samus").getGameState()!==b("InstantGamesGameState").PLAYING){b("fbinstant/releases/samus/logger.samus").logReject(c,b("fbinstant/common/errorCode").INVALID_OPERATION);return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_OPERATION,message:"Can not perform this operation before game start."}))}var d=a||{};d.filters=d.filters||[];d.maxSize=d.maxSize||null;d.minSize=d.minSize||null;if(d.maxSize&&d.maxSize<2){b("fbinstant/releases/samus/logger.samus").logReject(c,b("fbinstant/common/errorCode").INVALID_PARAM);return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_PARAM,message:"The maximum context size must be at least 2"}))}else if(d.minSize&&d.minSize<2){b("fbinstant/releases/samus/logger.samus").logReject(c,b("fbinstant/common/errorCode").INVALID_PARAM);return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_PARAM,message:"The minimum context size must be at least 2"}))}else if(d.maxSize&&d.minSize&&d.minSize>d.maxSize){b("fbinstant/releases/samus/logger.samus").logReject(c,b("fbinstant/common/errorCode").INVALID_PARAM);return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_PARAM,message:"The min size cannot be greater than the max size"}))}for(var a=d.filters,e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;if(!Object.prototype.hasOwnProperty.call(b("InstantGamesChallengePickerFilter"),g)){b("fbinstant/releases/samus/logger.samus").logReject(c,b("fbinstant/common/errorCode").INVALID_PARAM);return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_PARAM,message:'Filter "'+g+'" is not supported'}))}}g=b("fbinstant/common/validator").object().keys({filters:b("fbinstant/common/validator").array().schemaType(b("fbinstant/common/validator").string()),maxSize:b("fbinstant/common/validator").number().optional(),minSize:b("fbinstant/common/validator").number().optional()});f=b("fbinstant/common/validator").validate(d,g).then(function(){return b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(b("InstantGamesSDKMessages").CONTEXT_CHOOSE_ASYNC,d)}).then(function(a){b("fbinstant/releases/samus/internalStates.samus").updateContext(a);return});return b("fbinstant/releases/samus/logger.samus").logAsyncResult(f,c)},addPlayerAsync:function(a){var c="context_addPlayerAsync";b("fbinstant/releases/samus/logger.samus").logBeginAsync(c);if(b("fbinstant/releases/samus/internalStates.samus").getGameState()!==b("InstantGamesGameState").PLAYING){b("fbinstant/releases/samus/logger.samus").logReject(c,b("fbinstant/common/errorCode").INVALID_OPERATION);return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_OPERATION,message:"Can not perform this operation before game start."}))}var d={playerID:a?a:null};a=b("fbinstant/common/validator").object().keys({playerID:b("fbinstant/common/validator").string().optional()});a=b("fbinstant/common/validator").validate(d,a).then(function(){return b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(b("InstantGamesSDKMessages").CONTEXT_ADD_PLAYER_ASYNC,d)}).then(function(a){b("fbinstant/releases/samus/internalStates.samus").updateContext(a);return});return b("fbinstant/releases/samus/logger.samus").logAsyncResult(a,c)},createAsync:function(a){var c="context_createAsync";b("fbinstant/releases/samus/logger.samus").logBeginAsync(c);a=b("fbinstant/releases/samus/contextCreator.samus").createAsync(a);return b("fbinstant/releases/samus/logger.samus").logAsyncResult(a,c)},getPlayersAsync:function(){var a="context_fetchPlayers";b("fbinstant/releases/samus/logger.samus").logBeginAsync(a);if(b("fbinstant/releases/samus/internalStates.samus").getContext().getID()===null){b("fbinstant/releases/samus/logger.samus").logReject(a,b("fbinstant/common/errorCode").INVALID_OPERATION);return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_OPERATION,message:"Cannot get context players in a solo context"}))}var c=b("fbinstant/releases/samus/contextPlayers.samus").fetchAsync().then(function(c){b("fbinstant/releases/samus/logger.samus").logResolve(a);return c})["catch"](function(c){b("fbinstant/releases/samus/logger.samus").logReject(a);throw c});return b("fbinstant/releases/samus/logger.samus").logAsyncResult(c,a)},isPublicAsync:function(a){var c="context_isPublicAsync";b("fbinstant/releases/samus/logger.samus").logBeginAsync(c);if(b("fbinstant/releases/samus/internalStates.samus").getGameState()!==b("InstantGamesGameState").PLAYING){b("fbinstant/releases/samus/logger.samus").logReject(c,b("fbinstant/common/errorCode").INVALID_OPERATION);return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_OPERATION,message:"Can not perform this operation before game start."}))}var d=b("fbinstant/common/validator").validate(a,b("fbinstant/common/validator").string()).then(function(){return b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("GET_IS_CONTEXT_PUBLIC",{contextID:a})});return b("fbinstant/releases/samus/logger.samus").logAsyncResult(d,c)}};e.exports=a}),null);
__d("fbinstant/common/contextChange",["InstantGamesSDKMessages","fbinstant/common/internalStates","fbinstant/common/validator"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=c("fbinstant/common/validator").object().keys({contextSize:c("fbinstant/common/validator").number().optional(),contextTokenID:c("fbinstant/common/validator").string().optional(),contextType:c("fbinstant/common/validator").string(),id:c("fbinstant/common/validator").string().optional()});a.id=a.contextTokenID;return c("fbinstant/common/validator").validate(a,b).then(function(){return c("fbinstant/common/internalStates").getMessageSender().sendAsync(c("InstantGamesSDKMessages").CHANGE_CONTEXT_ASYNC,a).then(function(b){var d=b;if(b==null&&a.contextType==="SOLO")d={contextSize:1,contextID:null,contextType:"SOLO"};else{var e;d={contextSize:(e=a.contextSize)!=null?e:1,contextID:a.contextTokenID,contextType:a.contextType}}c("fbinstant/common/internalStates").updateContext(d);return b})})}g.changeContextAsync=a}),98);
__d("fbinstant/common/socialPlayGraphApi",["fbinstant/common/apiError","fbinstant/common/environmentValues","fbinstant/common/errorCode","fbinstant/common/graphApi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("fbinstant/common/graphApi").requestAsync("/"+a+"/squads","get",{fields:["squad_name","squad_image","context_token","id"]}).then(function(a){a=a.data.map(function(a){return{gamingSquadID:a.id,gamingSquadName:a.squad_name,gamingSquadImageURI:a.squad_image,contextID:a.context_token.id}});return a[0]})["catch"](function(){return c("fbinstant/common/graphApi").requestAsync("/"+a,"get",{fields:["squad_name","squad_image","context_token","id"]}).then(function(a){return{gamingSquadID:a.id,gamingSquadName:a.squad_name,gamingSquadImageURI:a.squad_image,contextID:a.context_token.id}})["catch"](function(){return Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").GAMING_SQUAD_NOT_FOUND,message:"The gaming squad with the provided ID could not be found"}))})})}function b(){return c("fbinstant/common/graphApi").requestAsync("/me/squads","get",{fields:["squad_name","squad_image","context_token","id"]}).then(function(a){return a.data.map(function(a){return{gamingSquadID:a.id,gamingSquadName:a.squad_name,gamingSquadImageURI:a.squad_image,contextID:a.context_token.id}})})}function d(){return c("fbinstant/common/graphApi").requestAsync("/me/tournaments","get",{fields:["tournament_title","tournament_payload","tournament_end_time","context_token","id"]}).then(function(a){return a.data.map(function(a){var b=a.id,d=Number(b),e=c("fbinstant/common/environmentValues").getShouldCastFbidsAsStrings();d=d;e&&(d=b);b=a.context_token.id;var f=Number(b);f=f;e&&(f=b);return{tournamentID:d,contextID:f,endTime:Date.parse(a.tournament_end_time)/1e3,title:a.tournament_title,payload:a.tournament_payload}})})}function e(a){return a!=null?c("fbinstant/common/graphApi").requestAsync("/"+a+"/tournaments","get",{fields:["tournament_title","tournament_payload","tournament_end_time","context_token","id"]}).then(function(a){a=a.data.map(function(a){var b=a.id,d=Number(b),e=c("fbinstant/common/environmentValues").getShouldCastFbidsAsStrings();d=d;e&&(d=b);b=a.context_token.id;var f=Number(b);f=f;e&&(f=b);return{tournamentID:d,contextID:f,endTime:Date.parse(a.tournament_end_time)/1e3,title:a.tournament_title,payload:a.tournament_payload}});return a.length===0?Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").TOURNAMENT_NOT_FOUND,message:"A Tournament with current context was not found"})):a[0]}):Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").TOURNAMENT_NOT_FOUND,message:"A Tournament with current context was not found"}))}function f(a,b){a={score:a,context_token_id:b,type:"post_score_no_pop",session_id:c("fbinstant/common/environmentValues").getSessionID()};return c("fbinstant/common/graphApi").requestAsync("/me/post_score","POST",a)}function h(a,b){a={score:a,context_token_id:b,type:"post_score_pop_dialog",session_id:c("fbinstant/common/environmentValues").getSessionID()};return c("fbinstant/common/graphApi").requestAsync("/me/post_score","POST",a)}function i(a,b){return b!=null?c("fbinstant/common/graphApi").requestAsync("/"+b+"/leaderboards?name="+a,"get",{fields:["context_id","name","id"]}).then(function(a){a=a.data.map(function(a){var b=a.id,d=Number(b),e=c("fbinstant/common/environmentValues").getShouldCastFbidsAsStrings();d=d;e&&(d=b);b=a.context_id;var f=Number(b);f=f;e&&(f=b);return{id:d,name:a.name,contextID:f}});return a[0]})["catch"](function(){return Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").LEADERBOARD_NOT_FOUND,message:"The leaderboard with the name "+a+" was not found"}))}):Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").LEADERBOARD_NOT_FOUND,message:"A leaderboard with current context was not found"}))}function j(a){return c("fbinstant/common/graphApi").requestAsync("/"+a,"get",{fields:["entry_count"]}).then(function(a){return a.entry_count})}function k(a){return c("fbinstant/common/graphApi").requestAsync("/"+a,"get",{fields:["current_player_entry"]}).then(function(a){return a.current_player_entry})}function l(a,b,d){a="/"+a+"/entries?is_connected_player=false";b!=null&&(a=a+"&count="+b);d!=null&&(a=a+"&offset="+d);return c("fbinstant/common/graphApi").requestAsync(a,"get").then(function(a){return a.data.map(function(a){return{rank:a.rank,score:a.score,ts:a.ts,format_score:a.format_score,extra_data:a.extra_data,player_id:a.player_id,player_name:a.player_name,player_photo:a.player_photo}})})}function m(a,b,d){a="/"+a+"/entries?is_connected_player=true";b!=null&&(a=a+"&count="+b);d!=null&&(a=a+"&offset="+d);return c("fbinstant/common/graphApi").requestAsync(a,"get").then(function(a){return a.data.map(function(a){return{rank:a.rank,score:a.score,ts:a.ts,format_score:a.format_score,extra_data:a.extra_data,player_id:a.player_id,player_name:a.player_name,player_photo:a.player_photo}})})}function n(a,b,d){d===void 0&&(d=null);b={score:b,extra_data:d,session_id:c("fbinstant/common/environmentValues").getSessionID()};return c("fbinstant/common/graphApi").requestAsync("/"+a+"/set_score","POST",b).then(function(a){return a.data})}a={fetchSquadViaGraphAPI:a,fetchSquadsViaGraphAPI:b,fetchTournamentsViaGraphAPI:d,fetchTournamentViaGraphAPI:e,postScoreViaGraphAPI:f,postSessionScoreViaGraphAPI:h,fetchLeaderboardViaGraphAPI:i,fetchLeaderboardEntryCountViaGraphAPI:j,fetchLeaderboardPlayerEntryViaGraphAPI:k,fetchLeaderboardEntriesViaGraphAPI:l,fetchLeaderboardConnectedPlayerEntriesViaGraphAPI:m,setLeaderboardScoreViaGraphAPI:n};g["default"]=a}),98);
__d("fbinstant/common/score",["fbinstant/common/apiError","fbinstant/common/contextChange","fbinstant/common/errorCode","fbinstant/common/genericDialogs","fbinstant/common/getUrlParam","fbinstant/common/socialPlayGraphApi","fbinstant/common/validator"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return c("fbinstant/common/validator").validate(a,c("fbinstant/common/validator").integer())}function a(a,b,e){var f=Boolean(Number(c("fbinstant/common/getUrlParam")("pass_context_switch_param")));return h(b).then(function(){return c("fbinstant/common/socialPlayGraphApi").postSessionScoreViaGraphAPI(b,e).then(function(b){var e;if(((e=b.errorMessage)==null?void 0:e.length)&&((e=b.errorMessage)==null?void 0:e.length)>0){return Promise.reject(new(c("fbinstant/common/apiError"))({code:(e=b.errorCode)!=null?e:c("fbinstant/common/errorCode").INVALID_OPERATION,message:b.errorMessage}))}if(b.data===!1)return Promise.resolve();if(b.shouldPromptTournamentShare===!0&&a.showGenericDialogAsync){e={tournament_id:b.tournamentID,type:b.promptType,app_id:b.appID,passed_friend_name:b.passedFriendName};b.switchContext===!0&&(e=f?babelHelpers["extends"]({},e,{switchContext:1}):babelHelpers["extends"]({},e,{switch_context_ios_hack:1}));return a.showGenericDialogAsync(c("fbinstant/common/genericDialogs").SHARE_TOURNAMENT,e).then(function(a){!f&&b.switchContext===!0&&d("fbinstant/common/contextChange").changeContextAsync({contextSize:a.contextSize,contextTokenID:a.contextID,contextType:a.contextType});return a})["catch"](function(){return Promise.resolve()})}return Promise.resolve()})})}b={PostSessionScore:a,ValidateScore:h};g["default"]=b}),98);
__d("fbinstant/releases/samus/tournaments.samus",["fbinstant/common/score","fbinstant/common/socialPlayGraphApi","fbinstant/releases/samus/internalStates.samus"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a){var b=a.tournamentID,c=a.contextID,d=a.endTime,e=a.title;a=a.payload;this.$1=b;this.$2=c;this.$3=d;this.$4=e;this.$5=a}var b=a.prototype;b.getID=function(){return this.$1};b.getContextID=function(){return this.$2};b.getEndTime=function(){return this.$3};b.getTitle=function(){return this.$4};b.getPayload=function(){return this.$5};return a}();function a(a){return c("fbinstant/common/score").PostSessionScore(c("fbinstant/releases/samus/internalStates.samus").getMessageSender(),a,c("fbinstant/releases/samus/internalStates.samus").getContext().getID()).then(function(a){a&&a.contextType&&c("fbinstant/releases/samus/internalStates.samus").updateContext(a)})}function b(){return c("fbinstant/common/socialPlayGraphApi").fetchTournamentViaGraphAPI(c("fbinstant/releases/samus/internalStates.samus").getContext().getID()).then(function(a){return new h({tournamentID:a.tournamentID,contextID:a.contextID,endTime:a.endTime,title:a.title,payload:a.payload})})}d={getTournamentAsync:b,postSessionScoreAsync:a,Tournament:h};g["default"]=d}),98);
__d("fbinstant/releases/samus/deepTournaments.samus",["fbinstant/common/apiError","fbinstant/common/errorCode","fbinstant/common/genericDialogs","fbinstant/common/score","fbinstant/common/socialPlayGraphApi","fbinstant/common/validator","fbinstant/releases/samus/contextSwitcher.samus","fbinstant/releases/samus/internalStates.samus","fbinstant/releases/samus/logger.samus","fbinstant/releases/samus/tournaments.samus"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b="tournament_postScoreAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(b);var d=c("fbinstant/common/score").ValidateScore(a).then(function(){return c("fbinstant/common/socialPlayGraphApi").postScoreViaGraphAPI(a,c("fbinstant/releases/samus/internalStates.samus").getContext().getID()).then(function(a){var b;if(((b=a.errorMessage)==null?void 0:b.length)&&((b=a.errorMessage)==null?void 0:b.length)>0){return Promise.reject(new(c("fbinstant/common/apiError"))({code:(b=a.errorCode)!=null?b:c("fbinstant/common/errorCode").INVALID_OPERATION,message:a.errorMessage}))}if(a.switchContext===!0){c("fbinstant/releases/samus/internalStates.samus").updateContext(a);return Promise.resolve(!0)}return Promise.resolve(!0)})});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(d,b)}function b(a){var b="tournament_createAsync",d=c("fbinstant/common/validator").object().keys({initialScore:c("fbinstant/common/validator").integer(),config:c("fbinstant/common/validator").object().keys({title:c("fbinstant/common/validator").string().optional(),image:c("fbinstant/common/validator").string().optional(),sortOrder:c("fbinstant/common/validator").string().optional(),scoreFormat:c("fbinstant/common/validator").string().optional(),endTime:c("fbinstant/common/validator").number().optional()}),data:c("fbinstant/common/validator").object().optional().maxSize(1e3)});c("fbinstant/releases/samus/logger.samus").logBeginAsync(b);d=c("fbinstant/common/validator").validate(a,d).then(function(){var b=["HIGHER_IS_BETTER","LOWER_IS_BETTER"];if(a.config.sortOrder!=null&&!b.includes(a.config.sortOrder))return Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_PARAM,message:"Incorrect leaderboard sort order value provided."}));b=["NUMERIC","TIME"];return a.config.scoreFormat!=null&&!b.includes(a.config.scoreFormat)?Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_PARAM,message:"Incorrect leaderboard score format value provided."})):c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("CAN_CREATE_TOURNAMENT",{contextID:c("fbinstant/releases/samus/internalStates.samus").getContext().getID(),endTime:(b=a.config.endTime)!=null?b:null,image:(b=a.config.image)!=null?b:null,score:a.initialScore,scoreFormat:(b=a.config.scoreFormat)!=null?b:null}).then(function(b){var d;if(b==null||b.result==null||b.result===!1)return Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_OPERATION,message:"Tournaments are unavailable."}));var e=JSON.stringify(a.data);return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().showGenericDialogAsync(c("fbinstant/common/genericDialogs").TOURNAMENT_CREATE,{endTime:(d=a.config.endTime)!=null?d:null,formattedScore:(d=b.formattedScore)!=null?d:null,image:(b=a.config.image)!=null?b:null,initialScore:a.initialScore,payload:(d=e)!=null?d:null,title:(b=a.config.title)!=null?b:null,sortOrder:(e=a.config.sortOrder)!=null?e:null,scoreFormat:(d=a.config.scoreFormat)!=null?d:null}).then(function(a){if(a==null||a.tournament_id==null||a.context_id==null||a.context_type==null||a.context_size==null||a.end_time==null)return Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").NETWORK_FAILURE,message:"The tournament creation returned an invalid response"}));var b=a.tournament_id,d=a.context_id,e=a.end_time,f=a.title,g=a.payload,h=a.context_type;a=a.context_size;c("fbinstant/releases/samus/internalStates.samus").updateContext({contextID:d,contextType:h,contextSize:a});return new(c("fbinstant/releases/samus/tournaments.samus").Tournament)({tournamentID:b,contextID:d,endTime:e,title:f,payload:g})})})});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(d,b)}function d(a){var b="tournament_shareAsync",d=c("fbinstant/releases/samus/internalStates.samus").getMessageSender(),e=c("fbinstant/common/validator").object().keys({score:c("fbinstant/common/validator").integer(),data:c("fbinstant/common/validator").object().optional().maxSize(1e3)});c("fbinstant/releases/samus/logger.samus").logBeginAsync(b);e=c("fbinstant/common/validator").validate(a,e).then(function(){return d.sendPassThroughAsync("CAN_SHARE_TOURNAMENT",{contextID:c("fbinstant/releases/samus/internalStates.samus").getContext().getID(),score:a.score}).then(function(b){if(!b)return Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").UNKNOWN,message:"Tournaments are unavailable."}));b.entryPointData=JSON.stringify(a.data);return d.showGenericDialogAsync(c("fbinstant/common/genericDialogs").SHARE_TOURNAMENT,b).then(function(){return Promise.resolve()})})});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(e,b)}function e(a){var b="tournament_joinAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(b);var d=c("fbinstant/common/validator").validate(a,c("fbinstant/common/validator").string()).then(function(){return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("CAN_JOIN_TOURNAMENT",{tournamentID:a}).then(function(a){a=a==null?void 0:a.context_id;return a==null?Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").NETWORK_FAILURE,message:"Tournaments are unavailable."})):c("fbinstant/releases/samus/contextSwitcher.samus").switchAsync(a)})});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(d,b)}function f(){var a="tournament_getTournamentsAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);var b=c("fbinstant/common/socialPlayGraphApi").fetchTournamentsViaGraphAPI().then(function(a){return a==null?Promise.reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_OPERATION,message:"Tournaments are unavailable."})):a.map(function(a){return new(c("fbinstant/releases/samus/tournaments.samus").Tournament)({tournamentID:a.tournamentID,contextID:a.contextID,endTime:a.endTime,title:a.title,payload:a.payload})})});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(b,a)}b={createAsync:b,getTournamentsAsync:f,joinAsync:e,postScoreAsync:a,shareAsync:d};f=b;g["default"]=f}),98);
__d("InstantGameSDKCustomUpdateNotificationType",[],(function(a,b,c,d,e,f){a=Object.freeze({PUSH:"PUSH",NO_PUSH:"NO_PUSH"});f["default"]=a}),66);
__d("InstantGameSDKEndAction",[],(function(a,b,c,d,e,f){a=Object.freeze({SCORE:"SCORE",CUSTOM:"CUSTOM",NONE:"NONE"});f["default"]=a}),66);
__d("fbinstant/releases/samus/endGamePayload.samus",["InstantGameSDKCustomUpdateNotificationType","InstantGameSDKEndAction","InstantGamesCustomUpdateDeliveryPolicy","Promise","fbinstant/common/apiError","fbinstant/common/errorCode","fbinstant/common/validator","fbinstant/releases/samus/internalStates.samus"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var c=a.prototype;c.format=function(a){if(!a||!(a instanceof Object)||!a.action||a.action!==b("InstantGameSDKEndAction").CUSTOM)return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_PARAM,message:'Update action property must be "CUSTOM"'}));if(!a.image&&!a.media)return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_PARAM,message:"Custom update requires image or media input"}));return a.media&&!a.media.gif&&!a.media.video?b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_PARAM,message:"Media content requires at least video or gif."})):this.$1(a)};c.$1=function(a){var c=a.strategy&&a.strategy in b("InstantGamesCustomUpdateDeliveryPolicy")?a.strategy:b("InstantGamesCustomUpdateDeliveryPolicy").IMMEDIATE,d=a.notification&&a.notification in b("InstantGameSDKCustomUpdateNotificationType")?a.notification:b("InstantGameSDKCustomUpdateNotificationType").NO_PUSH;a=babelHelpers["extends"]({},a,{strategy:c,notification:d});c=b("fbinstant/common/validator").object().keys({action:b("fbinstant/common/validator").string(),template:b("fbinstant/common/validator").string(),cta:b("fbinstant/common/validator").union([b("fbinstant/common/validator").string(),b("fbinstant/common/validator").object()]).optional(),image:b("fbinstant/common/validator").string().optional(),media:b("fbinstant/common/validator").object().keys({gif:b("fbinstant/common/validator").object().keys({url:b("fbinstant/common/validator").string()}).optional(),video:b("fbinstant/common/validator").object().keys({url:b("fbinstant/common/validator").string()}).optional()}).optional(),text:b("fbinstant/common/validator").union([b("fbinstant/common/validator").string(),b("fbinstant/common/validator").object()]),data:b("fbinstant/common/validator").object().optional().maxSize(1e3),strategy:b("fbinstant/common/validator").string(),notification:b("fbinstant/common/validator").string()});return this.$2(a,c,["action","cta","image","media","text","data","strategy"],["data"])};c.$2=function(a,c,d,e){var f=this;e===void 0&&(e=[]);return b("fbinstant/common/validator").validate(a,c).then(function(a){return b("Promise").resolve(f.$3(a,d,e))})};c.$3=function(a,c,d){d===void 0&&(d=[]);var e=this.$4(a);a.data={sender:b("fbinstant/releases/samus/internalStates.samus").getPlayerID(),data:a.data};a=babelHelpers["extends"]({},a,e);e={};for(var f in a)if(d.indexOf(f)!==-1)try{a[f]=JSON.stringify(a[f])}catch(a){}for(f in a)c.indexOf(f)===-1&&(e[f]=a[f],delete a[f]);a.extra=JSON.stringify(e);return a};c.$4=function(a){var b={},c=a.text,d=a.cta;typeof c==="object"&&(b.text_localizations=c.localizations,a.text=c["default"]);d!=null&&typeof d!=="string"&&(b.cta_localizations=d.localizations,a.cta=d["default"]);return b};return a}();e.exports=new a()}),null);
__d("fbinstant/releases/samus/inventory.samus",["InstantGamesGameState","InstantGamesSDKMessages","Promise","fbinstant/common/apiError","fbinstant/common/errorCode","fbinstant/common/platform","fbinstant/common/platformUtils","fbinstant/common/validator","fbinstant/releases/samus/internalStates.samus","fbinstant/releases/samus/logger.samus"],(function(a,b,c,d,e,f){"use strict";function a(a){var c="inventory_unlockItem";if(b("fbinstant/releases/samus/internalStates.samus").getGameState()!==b("InstantGamesGameState").PLAYING)return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_OPERATION,message:"Cannot unlock item until startGameAsync() resolves."}));if(b("fbinstant/common/platformUtils").getPlatform()===b("fbinstant/common/platform").IOS)return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_OPERATION,message:"Client not supported."}));b("fbinstant/releases/samus/logger.samus").logBeginAsync(c);var d=b("fbinstant/common/validator").object().keys({name:b("fbinstant/common/validator").string()});d=b("fbinstant/common/validator").validate(a,d).then(function(){return b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(b("InstantGamesSDKMessages").INVENTORY_UNLOCK_ITEM_ASYNC,{unlockableItemConfig:a})});return b("fbinstant/releases/samus/logger.samus").logAsyncResult(d,c)}c={unlockItemAsync:a};e.exports=c}),null);
__d("fbinstant/releases/samus/leaderboards.samus",["Promise","fbinstant/common/apiError","fbinstant/common/config","fbinstant/common/errorCode","fbinstant/common/rateLimiter","fbinstant/common/socialPlayGraphApi","fbinstant/common/validator","fbinstant/releases/samus/internalStates.samus","fbinstant/releases/samus/logger.samus"],(function(a,b,c,d,e,f){"use strict";d=20;f=2e3;var g=new(b("fbinstant/common/rateLimiter"))(d,f);function h(){var a=g.bump();return a?b("Promise").resolve():b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").RATE_LIMITED,message:"Game called too many leaderboard APIs too quickly. Reduce the rate of requests in order to avoid being rate-limited."}))}var i=function(){function a(a){var b=a.id,c=a.name;a=a.contextID;this.$1=b;this.$2=c;this.$3=a}var c=a.prototype;c.getName=function(){return this.$2};c.getContextID=function(){return this.$3};c.getEntryCountAsync=function(){var a=this,c="Leaderboard_getEntryCountAsync";b("fbinstant/releases/samus/logger.samus").logBeginAsync(c);var d=h().then(function(){return b("fbinstant/common/socialPlayGraphApi").fetchLeaderboardEntryCountViaGraphAPI(a.$1).then(function(a){return a})["catch"](function(a){return b("Promise").reject(a)})});return b("fbinstant/releases/samus/logger.samus").logAsyncResult(d,c)};c.setScoreAsync=function(a,c){var d=this;c===void 0&&(c=null);var e="Leaderboard_setScoreAsync";b("fbinstant/releases/samus/logger.samus").logBeginAsync(e);var f=b("fbinstant/common/validator").integer(),g=b("fbinstant/common/validator").string().optional();f=b("fbinstant/common/validator").validate(a,f).then(function(){return b("fbinstant/common/validator").validate(c,g)}).then(h).then(function(){if(b("fbinstant/common/config").shouldUseGraphAPI("leaderboard_setScoreAsync"))return b("fbinstant/common/socialPlayGraphApi").setLeaderboardScoreViaGraphAPI(d.$1,a,c).then(function(a){var b=new k(a.player_name,a.player_photo,a.player_id);return new j({rank:a.rank,score:a.score,format_score:a.format_score,ts:a.ts,extra_data:a.extra_data,player:{name:b.getName(),photo:b.getPhoto(),player_id:b.getID()}})})["catch"](function(a){return b("Promise").reject(a)});else return b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("LEADERBOARD_OPERATION",{context_id:b("fbinstant/releases/samus/internalStates.samus").getContext().getID(),leaderboard_id:d.$1,operation:"SET_SCORE",score:a,extra_data:c}).then(function(a){return new j(a)})});return b("fbinstant/releases/samus/logger.samus").logAsyncResult(f,e)};c.getPlayerEntryAsync=function(){var a=this,c="Leaderboard_getPlayerEntryAsync";b("fbinstant/releases/samus/logger.samus").logBeginAsync(c);var d=h().then(function(){if(b("fbinstant/common/config").shouldUseGraphAPI("leaderboard_getPlayerEntryAsync"))return b("fbinstant/common/socialPlayGraphApi").fetchLeaderboardPlayerEntryViaGraphAPI(a.$1).then(function(a){if(a){var b=new k(a.player_name,a.player_photo,a.player_id);return new j({rank:a.rank,score:a.score,format_score:a.format_score,ts:a.ts,extra_data:a.extra_data,player:{name:b.getName(),photo:b.getPhoto(),player_id:b.getID()}})}else return null})["catch"](function(a){return b("Promise").reject(a)});else return b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("LEADERBOARD_OPERATION",{leaderboard_id:a.$1,operation:"GET_ENTRY"}).then(function(a){return!a?null:new j(a)})});return b("fbinstant/releases/samus/logger.samus").logAsyncResult(d,c)};c.getEntriesAsync=function(a,c){var d=this,e="Leaderboard_getEntriesAsync";b("fbinstant/releases/samus/logger.samus").logBeginAsync(e);var f=b("fbinstant/common/validator").integer().optional(),g=b("fbinstant/common/validator").integer().optional();f=b("fbinstant/common/validator").validate(a,f).then(function(){return b("fbinstant/common/validator").validate(c,g)}).then(h).then(function(){if(b("fbinstant/common/config").shouldUseGraphAPI("leaderboard_getEntriesAsync"))return b("fbinstant/common/socialPlayGraphApi").fetchLeaderboardEntriesViaGraphAPI(d.$1,a,c).then(function(a){return a.map(function(a){return new j({rank:a.rank,score:a.score,format_score:a.format_score,ts:a.ts,extra_data:a.extra_data,player:{name:a.player_name,photo:a.player_photo,player_id:a.player_id}})})})["catch"](function(a){return b("Promise").reject(a)});else return b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("LEADERBOARD_OPERATION",{leaderboard_id:d.$1,operation:"GET_ENTRIES",limit:a,offset:c}).then(function(a){return a.map(function(a){return new j(a)})})});return b("fbinstant/releases/samus/logger.samus").logAsyncResult(f,e)};c.getConnectedPlayerEntriesAsync=function(a,c){var d=this,e="Leaderboard_getConnectedPlayerEntriesAsync";b("fbinstant/releases/samus/logger.samus").logBeginAsync(e);var f=b("fbinstant/common/validator").integer().optional(),g=b("fbinstant/common/validator").integer().optional();f=b("fbinstant/common/validator").validate(a,f).then(function(){return b("fbinstant/common/validator").validate(c,g)}).then(h).then(function(){if(b("fbinstant/common/config").shouldUseGraphAPI("leaderboard_getConnectedPlayerEntriesAsync"))return b("fbinstant/common/socialPlayGraphApi").fetchLeaderboardConnectedPlayerEntriesViaGraphAPI(d.$1,a,c).then(function(a){return a.map(function(a){return new j({rank:a.rank,score:a.score,format_score:a.format_score,ts:a.ts,extra_data:a.extra_data,player:{name:a.player_name,photo:a.player_photo,player_id:a.player_id}})})})["catch"](function(a){return b("Promise").reject(a)});else return b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("LEADERBOARD_OPERATION",{leaderboard_id:d.$1,operation:"GET_FRIENDS_ENTRIES",limit:a,offset:c}).then(function(a){return a.map(function(a){return new j(a)})})});return b("fbinstant/releases/samus/logger.samus").logAsyncResult(f,e)};return a}(),j=function(){function a(a){this.$1=a.score,this.$2=a.format_score,this.$5=a.rank,this.$3=a.extra_data,this.$4=a.ts,this.$6=new k(a.player.name,a.player.photo,a.player.player_id)}var b=a.prototype;b.getScore=function(){return this.$1};b.getFormattedScore=function(){return this.$2};b.getTimestamp=function(){return this.$4};b.getRank=function(){return this.$5};b.getExtraData=function(){return this.$3};b.getPlayer=function(){return this.$6};return a}(),k=function(){function a(a,b,c){this.$1=a,this.$2=c,this.$3=b}var b=a.prototype;b.getName=function(){return this.$1};b.getPhoto=function(){return this.$3};b.getID=function(){return this.$2};return a}();function a(a){if(b("fbinstant/common/config").shouldUseGraphAPI("leaderboard_getLeaderboardAsync"))return b("fbinstant/common/socialPlayGraphApi").fetchLeaderboardViaGraphAPI(a,b("fbinstant/releases/samus/internalStates.samus").getContext().getID()).then(function(a){var b=a.id,c=a.name;a=a.contextID;return new i({id:b,name:c,contextID:(b=a)!=null?b:""})})["catch"](function(a){return b("Promise").reject(a)});else return b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("LEADERBOARD_FETCH",{name:a}).then(function(a){var b=a.id,c=a.name;a=a.context_id;return new i({id:b,name:c,contextID:a})})}function c(a){var c,d=(c=b("fbinstant/common/validator")).object().keys({name:c.string(),text:c.string().optional()});return c.validate(a,d).then(function(a){return b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("LEADERBOARD_UPDATE",{context_token_id:b("fbinstant/releases/samus/internalStates.samus").getContext().getID(),leaderboard_name:a.name,text:a.text})}).then(function(){})}e.exports={getLeaderboardAsync:a,sendUpdateAsync:c,Leaderboard:i}}),null);
__d("fbinstant/common/consoleLogger",[],(function(a,b,c,d,e,f){"use strict";a={init:function(a){if(!a)return;window.addEventListener("error",function(b){b={type:"error",message:b&&b.message||"",filename:b&&b.filename||null,lineno:b&&b.lineno||null,colno:b&&b.colno||null,stack:b&&b.error&&b.error.stack||null};try{b.print=JSON.stringify(b)}catch(a){b.print=b.message}a(b)})}};b=a;f["default"]=b}),66);
__d("fbinstant/common/gestureCommandManager",["getActiveElement"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.handleCommand=function(a){a=a.gesture;if(!a.length)return;var b=a[0];switch(b){case"swipe":b=this.$1(a);b!=null&&this.$2(b);break}};b.$1=function(a){if(a.length!==6)return null;var b=parseFloat(a[1]),c=parseFloat(a[2]),d=parseFloat(a[3]),e=parseFloat(a[4]);a=parseFloat(a[5]);return isNaN(b)||b<0||b>1||isNaN(c)||c<0||c>1||isNaN(d)||d<0||d>1||isNaN(e)||e<0||e>1||isNaN(a)||a<0?null:{x1:b,y1:c,x2:d,y2:e,speed:a}};b.$2=function(a){var b=c("getActiveElement")();if(b==null)return;var d=a.x1*b.clientWidth,e=a.y1*b.clientHeight,f=a.x2*b.clientWidth,g=a.y2*b.clientHeight,h=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0,clientX:d,clientY:e}),i=new MouseEvent("mousemove",{view:window,bubbles:!0,cancelable:!0,clientX:f,clientY:g}),j=new MouseEvent("mouseup",{view:window,bubbles:!0,cancelable:!0,clientX:f,clientY:g});b=(f=document.elementFromPoint(d,e))!=null?f:b;b.dispatchEvent(h);(function(b){window.setTimeout(function(){b.dispatchEvent(i),b.dispatchEvent(j)},a.speed*1e3)})(b)};return a}();b=new a();g["default"]=b}),98);
__d("fbinstant/common/performanceTracker",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var b=a.prototype;b.init=function(a){return};return a}();b=new a();f["default"]=b}),66);
__d("fbinstant/releases/samus/heartbeat.samus",["fbinstant/releases/samus/internalStates.samus"],(function(a,b,c,d,e,f){"use strict";var g=6e4,h={_heartbeatInterval:null,startHeartbeat:function(){h._heartbeatInterval&&h.stopHeartbeat(),h.sendHeartbeat("start"),h._heartbeatInterval=window.setInterval(function(){h.sendHeartbeat("update")},g)},stopHeartbeat:function(){window.clearInterval(h._heartbeatInterval),h._heartbeatInterval=null,h.sendHeartbeat("end")},sendHeartbeat:function(a){b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("HEARTBEAT",{action:a,contextID:b("fbinstant/releases/samus/internalStates.samus").getContext().getID()})}};e.exports=h}),null);
__d("fbinstant/releases/samus/messageConfig.samus",[],(function(a,b,c,d,e,f){"use strict";a={getConfig:function(){if(window.QuicksilverAndroid)return{sender:window.QuicksilverAndroid,source:"Android"};else if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.quicksilver)return{sender:window.webkit.messageHandlers.quicksilver||parent,source:"iOS"};else if(window.fbInstantSameOriginOnWeb)return{sender:window.self,source:window.fbInstantSource};var a=new RegExp("[?&]source(=([^&#]*)|&|#|$)","i");a=a.exec(window.location.href);return{sender:parent,source:a&&a[2]&&decodeURIComponent(a[2].replace(/\+/g," "))}}};e.exports=a}),null);
__d("fbinstant/releases/samus/messageReceiver.samus",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=null}var b=a.prototype;b.$2=function(a){if(!a.data||!a.data.source)return;var b=a.data.type;if(!b)return;b=this.$1&&this.$1[b];if(!b)return;b(a.data.content)};b.init=function(){this.$1={},window.addEventListener("message",this.$2.bind(this))};b.registerMessageHandler=function(a,b,c){var d=this.$1;if(!d)return;c?d[a]=b.triggerSubscribers.bind(b,c):d[a]=b.triggerSubscribers.bind(b)};return a}();e.exports=new a()}),null);
__d("fbinstant/releases/samus/lifecycle.samus",["InstantGamesGameState","InstantGamesSDKFeatures","InstantGamesSDKMessages","Promise","fbinstant/common/apiError","fbinstant/common/consoleLogger","fbinstant/common/errorCode","fbinstant/common/genericDialogs","fbinstant/common/gestureCommandManager","fbinstant/common/performanceTracker","fbinstant/common/supportedFeaturesManager","fbinstant/releases/samus/entryPoint.samus","fbinstant/releases/samus/heartbeat.samus","fbinstant/releases/samus/internalStates.samus","fbinstant/releases/samus/messageConfig.samus","fbinstant/releases/samus/messageReceiver.samus"],(function(a,b,c,d,e,f){"use strict";function g(a){var c=null;return new(b("Promise"))(function(d){b("fbinstant/releases/samus/internalStates.samus").getGameStartEvent().on(d),a.send(b("InstantGamesSDKMessages").ON_GAME_READY),c=function(a){b("fbinstant/releases/samus/internalStates.samus").getGameStartEvent().off(d);return a}}).then(c)}function h(a){b("fbinstant/releases/samus/internalStates.samus").updateContext(a);var c=null;if(a.entryPointData)try{var d=JSON.parse(a.entryPointData);d.sender&&d.data?c=d.data:c=d}catch(a){}d=null;a.entryPoint&&(d=a.entryPoint);b("fbinstant/releases/samus/internalStates.samus").updateEntryPoint(new(b("fbinstant/releases/samus/entryPoint.samus"))(d,c))}a={initializeAsync:function(a){var c,d,e;a.initialize(b("fbinstant/releases/samus/messageConfig.samus").getConfig());a.send((c=b("InstantGamesSDKMessages")).ON_BEGIN_LOAD,100);b("fbinstant/common/consoleLogger").init(function(c){a.send(b("InstantGamesSDKMessages").ON_CONSOLE,c)});(d=b("fbinstant/releases/samus/messageReceiver.samus")).init();d.registerMessageHandler(c.RESTART,(e=b("fbinstant/releases/samus/internalStates.samus")).getRestartEvent(),null);d.registerMessageHandler(c.RESOLVE_PROMISE,a.getResolvePromiseEvent(),null);d.registerMessageHandler(c.REJECT_PROMISE,a.getRejectPromiseEvent(),null);d.registerMessageHandler(c.PAUSE,e.getPauseEvent(),null);d.registerMessageHandler(c.RESUME,e.getResumeEvent(),null);d.registerMessageHandler(c.ANALYTICS_LOG_EVENT,e.getAnalyticsLogEvent(),null);d.registerMessageHandler(c.REALTIME_RECEIVE_MESSAGE,e.getReceiveMessageEvent(),null);d.registerMessageHandler(c.REALTIME_RECEIVE_STATE_UPDATE,e.getReceiveStateUpdateEvent(),null);e.getGameStartEvent().on(function(){b("fbinstant/releases/samus/internalStates.samus").setGameState(b("InstantGamesGameState").PLAYING)});d.registerMessageHandler(c.GAME_START,e.getGameStartEvent(),null);d.registerMessageHandler(c.PAYMENTS_INITIALIZED,e.getPaymentsState().getPaymentsInitializedEvent(),null);e.getGestureCommandEvent().on(function(a){b("fbinstant/common/gestureCommandManager").handleCommand(a)});d.registerMessageHandler(c.GESTURE_COMMAND,e.getGestureCommandEvent(),null);return a.sendAsync(c.INITIALIZE_ASYNC,{sdkVersion:e.getSdkVersion()}).then(function(a){b("fbinstant/releases/samus/internalStates.samus").isInitialized()||b("fbinstant/releases/samus/internalStates.samus").initialize(a)})},startGameAsync:function(a){if(b("fbinstant/releases/samus/internalStates.samus").getGameState()===b("InstantGamesGameState").PLAYING)return b("Promise").resolve();if(!b("fbinstant/releases/samus/internalStates.samus").isInitialized())return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_OPERATION,message:"The SDK has not been initialized yet. Please wait for FBInstant.initializeAsync to resolve before calling this API."}));if(!b("fbinstant/common/supportedFeaturesManager").isSupported(b("InstantGamesSDKFeatures").FLEXIBLE))return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").CLIENT_UNSUPPORTED_OPERATION,message:"The client does not support Instant Games."}));b("fbinstant/common/performanceTracker").init(a);b("fbinstant/releases/samus/internalStates.samus").setLoadingProgress(100);return g(a).then(function(c){b("fbinstant/releases/samus/internalStates.samus").setGameState(b("InstantGamesGameState").PLAYING);c&&h(c);return a.sendPassThroughAsync("APP_CUSTOM_EVENT",{contextID:b("fbinstant/releases/samus/internalStates.samus").getContext().getID(),entryPointRawSource:b("fbinstant/releases/samus/internalStates.samus").getEntryPoint().getSource()})}).then(function(c){c&&c.shouldPromptTournamentStatus&&a.showGenericDialogAsync(b("fbinstant/common/genericDialogs").TOURNAMENT_STATUS,c.args),b("fbinstant/releases/samus/heartbeat.samus").startHeartbeat()})},setLoadingProgress:function(a,c){if(c>=0&&c<=100&&c>b("fbinstant/releases/samus/internalStates.samus").getLoadingProgress())a.send(b("InstantGamesSDKMessages").ON_PROGRESS_LOAD,c),b("fbinstant/releases/samus/internalStates.samus").setLoadingProgress(c);else{a="FbInstant::setLoadingProgress(";a=") is invalid. The progress must be";c<0||c>100||c<=b("fbinstant/releases/samus/internalStates.samus").getLoadingProgress()}},quit:function(a){a.send(b("InstantGamesSDKMessages").QUIT,{}),b("fbinstant/releases/samus/heartbeat.samus").stopHeartbeat()}};e.exports=a}),null);
__d("fbinstant/common/apiResultComparator",["fbinstant/common/internalStates"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e,f,g){a.sendPassThroughAsync("API_RESULT_COMPARATOR",{control_result:b,experiment_result:d,compare_method:e,endpoint:f,context_id:(a=g)!=null?a:c("fbinstant/common/internalStates").getContext().getID()})}g["default"]=a}),98);
__d("fbinstant/common/iapGraphApi",["ApiClient","fbinstant/common/apiError","fbinstant/common/apiResultComparator","fbinstant/common/errorCode","fbinstant/common/graphAPIResponseHandler","fbinstant/common/graphApi","fbinstant/common/internalStates","fbinstant/common/logger","fbinstant/common/platform","fbinstant/common/platformUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return c("fbinstant/common/graphApi").requestAsync(a,"get",b)}function i(a){function b(a){var b=[a];function e(a){var f;function g(a){var b="graph_api_async";c("fbinstant/common/logger").logBeginAsync(b);var e=new Promise(function(b,e){return c("ApiClient").graph(a,"GET",null,function(a){return d("fbinstant/common/graphAPIResponseHandler").handleGraphAPIResponse(a,b,e)})});return c("fbinstant/common/logger").logAsyncResult(e,b)}return(a==null?void 0:(f=a.paging)==null?void 0:f.next)!=null?g(a.paging.next).then(function(a){b.push(a);return a}).then(e):new Promise(function(a,c){return a(b)})}return e(a)}function e(a){var b=[];for(var c=0;c<a.length;c++){var d=a[c];if(d.data!=null)for(var d=d.data,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b.push(g)}}return new Promise(function(a,c){return a(b)})}return b(a).then(e)}function a(a){return c("fbinstant/common/graphApi").requestAsync("/"+a+"/consume","post").then(function(a){if(!a.success)throw new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").PAYMENTS_OPERATION_FAILURE,message:"Failed to consume purchase"});return})["catch"](function(a){if(a instanceof c("fbinstant/common/apiError")&&a.code===c("fbinstant/common/errorCode").PURCHASE_ALREADY_CONSUMED)return;else if(!(a instanceof c("fbinstant/common/apiError"))||a.message==null||a.message===""||a.code===c("fbinstant/common/errorCode").NETWORK_FAILURE)throw new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").NETWORK_FAILURE,message:"Request failed to be processed"});throw a})}function b(){return h("/app/products?limit=1500","get").then(i).then(function(a){return a.map(function(a){var b=a.description,d=a.image_uri,e=a.local_price_formatted,f=a.product_id,g=a.title,h=a.local_price_currency_code;a=a.local_price_amount_cents;if(e==null||h==null||g==null||f==null)throw new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").UNKNOWN,message:"Cannot have these catalog fields as null"});return{description:(b=b)!=null?b:"",imageURI:(b=d)!=null?b:null,price:e,priceAmount:Number(a)/100,priceCurrencyCode:h,productID:f,title:g}}).filter(Boolean)})}function e(){return h("/app/game_subscribable_products?limit=1500","get").then(i).then(function(a){return a.map(function(a){var b=a.description,d=a.image_uri,e=a.local_price_formatted,f=a.product_id,g=a.subscription_term,h=a.title,i=a.local_price_currency_code;a=a.local_price_amount_cents;if(e==null||i==null||h==null||f==null||g==null)throw new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").UNKNOWN,message:"Products in the catalog are missing required fields."});return{description:(b=b)!=null?b:"",imageURI:(b=d)!=null?b:null,price:e,priceAmount:Number(a)/100,priceCurrencyCode:i,productID:f,subscriptionTerm:g,title:h}}).filter(Boolean)})}function f(a){return c("fbinstant/common/graphApi").requestAsync("/"+a+"/cancel","post").then(function(a){return})}function j(){var a="deactivation_time,is_entitlement_active,period_start_time,\n  period_end_time,product_id,purchase_platform,purchase_price,purchase_time,\n  purchase_token,signed_request,status,subscription_term";return h("/me/subscriptions?fields="+a+"&limit=500","get").then(i).then(function(a){return a.map(function(a){var b=a.deactivation_time,c=a.is_entitlement_active,d=a.period_start_time,e=a.period_end_time,f=a.product_id,g=a.purchase_platform,h=a.purchase_price,i=a.purchase_time,j=a.purchase_token,k=a.signed_request,l=a.status;a=a.subscription_term;b=b!=null?((b=new Date(b))==null?void 0:b.getTime())/1e3:null;d=new Date(d).getTime()/1e3;e=new Date(e).getTime()/1e3;i=new Date(i).getTime()/1e3;return{deactivationTime:b,isEntitlementActive:c,periodEndTime:e,periodStartTime:d,productID:f,purchasePlatform:g,purchasePrice:{amount:parseFloat(h.amount),currency:h.currency},purchaseTime:i,purchaseToken:j,status:l,subscriptionTerm:a,signedRequest:k}})})}function k(a){return j().then(function(b){return b.filter(function(b){return b.productID===a})})}function l(){return h("/me/purchases?limit=1500").then(i).then(function(a){return a.map(function(a){var b=a.developer_payload,c=a.consumed,d=a.payment_action_type,e=a.payment_id,f=a.product_id,g=a.purchase_platform,h=a.purchase_price,i=a.purchase_time,j=a.purchase_token;a=a.signed_request;return{developerPayload:(b=b)!=null?b:null,isConsumed:c,paymentActionType:(b=d)!=null?b:"",paymentID:e,productID:f,purchasePlatform:g,purchasePrice:h,purchaseTime:i,purchaseToken:j,signedRequest:a}})})}function m(a,b,d){c("fbinstant/common/apiResultComparator")(c("fbinstant/common/internalStates").getMessageSender(),a.map(function(a){a=babelHelpers["extends"]({},a,{imageURI:a.imageURI!=null?"true":""});return JSON.stringify(a)}),b.map(function(a){a=babelHelpers["extends"]({},a,{imageURI:a.imageURI!=null?"true":""});return JSON.stringify(a)}),"one_to_one_match","payments.getCatalogAsync",d)}function n(a,b,d){c("fbinstant/common/apiResultComparator")(c("fbinstant/common/internalStates").getMessageSender(),a.map(function(a){a=babelHelpers["extends"]({},a,{imageURI:a.imageURI!=null?"true":""});return JSON.stringify(a)}),b.map(function(a){a=babelHelpers["extends"]({},a,{imageURI:a.imageURI!=null?"true":""});return JSON.stringify(a)}),"one_to_one_match","payments.getSubscribableCatalogAsync",d)}function o(a,b){if(c("fbinstant/common/platformUtils").getPlatform()===c("fbinstant/common/platform").ANDROID){var d=a.map(function(c,d){var e=b.filter(function(a){return a.productID===c.productID})[0];d=a[d];d.price=e.price;d.priceCurrencyCode=e.priceCurrencyCode;d.priceAmount=e.priceAmount;return d});return d}return a}function p(a,b){if(c("fbinstant/common/platformUtils").getPlatform()===c("fbinstant/common/platform").ANDROID){var d=a.map(function(c,d){var e=b.filter(function(a){return a.productID===c.productID})[0];d=a[d];d.price=e.price;d.priceCurrencyCode=e.priceCurrencyCode;d.priceAmount=e.priceAmount;return d});return d}return a}b={getCatalogAsync:b,getSubscribableCatalogAsync:e,cancelSubscription:f,getSubscriptionsAsync:j,consumePurchase:a,getPurchasesAsync:l,compareCatalog:m,compareSubscriptionCatalog:n,getSubscriptionAsync:k,processResults:o,processSubscriptionResults:p};g["default"]=b}),98);
__d("fbinstant/releases/samus/payments.samus",["InstantGamesGameState","InstantGamesSDKMessages","Promise","fbinstant/common/apiError","fbinstant/common/config","fbinstant/common/errorCode","fbinstant/common/iapGraphApi","fbinstant/common/supportedMessagesManager","fbinstant/common/validator","fbinstant/releases/samus/internalStates.samus","fbinstant/releases/samus/logger.samus"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a="payments_getCatalogAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);var b=n(c("InstantGamesSDKMessages").PAYMENTS_FETCH_CATALOG_ASYNC).then(function(){return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(c("InstantGamesSDKMessages").PAYMENTS_FETCH_CATALOG_ASYNC,{})});c("fbinstant/common/config").shouldUseGraphAPI("getCatalogAsync")&&b.then(function(a){return c("fbinstant/common/iapGraphApi").getCatalogAsync().then(function(b){b=c("fbinstant/common/iapGraphApi").processResults(b,a);c("fbinstant/common/iapGraphApi").compareCatalog(a,b);return b})});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(b,a)}function e(a){var e="payments_purchaseAsync";if(c("fbinstant/releases/samus/internalStates.samus").getGameState()!==d("InstantGamesGameState").PLAYING)return b("Promise").reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_OPERATION,message:"Cannot purchase until startGameAsync() resolves."}));c("fbinstant/releases/samus/logger.samus").logBeginAsync(e);var f=c("fbinstant/common/validator").object().keys({productID:c("fbinstant/common/validator").string(),developerPayload:c("fbinstant/common/validator").string().optional()});f=c("fbinstant/common/validator").validate(a,f).then(function(){return n(c("InstantGamesSDKMessages").PAYMENTS_PURCHASE_ASYNC)}).then(function(){return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(c("InstantGamesSDKMessages").PAYMENTS_PURCHASE_ASYNC,{config:a})});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(f,e)}function f(){var a="payments_getPurchasesAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);var b=n(c("InstantGamesSDKMessages").PAYMENTS_FETCH_PURCHASES_ASYNC).then(function(){return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(c("InstantGamesSDKMessages").PAYMENTS_FETCH_PURCHASES_ASYNC,{})});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(b,a)}function h(a){var b="payments_consumePurchaseAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(b);var d=c("fbinstant/common/validator").string();d=c("fbinstant/common/validator").validate(a,d).then(function(){return n(c("InstantGamesSDKMessages").PAYMENTS_CONSUME_PURCHASE_ASYNC)}).then(function(){return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(c("InstantGamesSDKMessages").PAYMENTS_CONSUME_PURCHASE_ASYNC,{token:a})});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(d,b).then(function(){})}function i(a){c("fbinstant/releases/samus/internalStates.samus").getPaymentsState().onInitialized(a)}function j(){var a="payments_restorePurchasesAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);var b=n(c("InstantGamesSDKMessages").PAYMENTS_RESTORE_PURCHASES_ASYNC).then(function(){return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(c("InstantGamesSDKMessages").PAYMENTS_RESTORE_PURCHASES_ASYNC,{})});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(b,a).then(function(){})}function k(){var a="payments_getSubscribableCatalogAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);var b=n(c("InstantGamesSDKMessages").PAYMENTS_FETCH_SUBSCRIBABLE_CATALOG_ASYNC).then(function(){return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(c("InstantGamesSDKMessages").PAYMENTS_FETCH_SUBSCRIBABLE_CATALOG_ASYNC,{})});c("fbinstant/common/config").shouldUseGraphAPI("getSubscribableCatalogAsync")&&b.then(function(a){return c("fbinstant/common/iapGraphApi").getSubscribableCatalogAsync().then(function(b){b=c("fbinstant/common/iapGraphApi").processSubscriptionResults(b,a);c("fbinstant/common/iapGraphApi").compareSubscriptionCatalog(a,b);return b})});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(b,a)}function l(a){var e="payments_purchaseSubscriptionAsync";if(c("fbinstant/releases/samus/internalStates.samus").getGameState()!==d("InstantGamesGameState").PLAYING)return b("Promise").reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_OPERATION,message:"Cannot purchase until startGameAsync() resolves."}));c("fbinstant/releases/samus/logger.samus").logBeginAsync(e);var f=n(c("InstantGamesSDKMessages").PAYMENTS_PURCHASE_SUBSCRIPTION_ASYNC).then(function(){return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(c("InstantGamesSDKMessages").PAYMENTS_PURCHASE_SUBSCRIPTION_ASYNC,{productID:a})}).then(function(a){return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("PAYMENTS_FETCH_SUBSCRIPTIONS",{productID:a})}).then(function(a){return a[0]});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(f,e)}function m(){var a="payments_getSubscriptionsAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);var b=n(c("InstantGamesSDKMessages").PAYMENTS_FETCH_SUBSCRIPTIONS_ASYNC).then(function(){return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("PAYMENTS_FETCH_SUBSCRIPTIONS",{})});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(b,a)}function n(a){return!c("fbinstant/common/supportedMessagesManager").isSupported(a)?b("Promise").reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").CLIENT_UNSUPPORTED_OPERATION,message:"Client does not support this API"})):b("Promise").resolve()}function o(a){var b="payments_cancelSubscriptionAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(b);var d=n(c("InstantGamesSDKMessages").PAYMENTS_CANCEL_SUBSCRIPTION_ASYNC).then(function(){return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("PAYMENTS_CANCEL_SUBSCRIPTION",{token:a})});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(d,b)}o={cancelSubscriptionAsync:o,consumePurchaseAsync:h,getCatalogAsync:a,getPurchasesAsync:f,getSubscribableCatalogAsync:k,getSubscriptionsAsync:m,purchaseAsync:e,purchaseSubscriptionAsync:l,onReady:i,restorePurchasesAsync:j};h=o;g["default"]=h}),98);
__d("fbinstant/common/signedPlayerInfo",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.getPlayerID=function(){return this.$1.playerID};b.getSignature=function(){return this.$1.signature};return a}();f["default"]=a}),66);
__d("fbinstant/releases/samus/graphApi.samus",["ApiClient","fbinstant/common/graphAPIResponseHandler","fbinstant/releases/samus/internalStates.samus","fbinstant/releases/samus/logger.samus"],(function(a,b,c,d,e,f){"use strict";var g=b("fbinstant/common/graphAPIResponseHandler").handleGraphAPIResponse;function a(a,c,d){var e="graph_api_async";b("fbinstant/releases/samus/logger.samus").logBeginAsync(e);var f="https://graph.fb.gg"+a;a=h().then(function(){return new Promise(function(a,e){return b("ApiClient").graph(f,c,d,function(b){return g(b,a,e)})})});return b("fbinstant/releases/samus/logger.samus").logAsyncResult(a,e)}function h(){var a=b("ApiClient").getAccessToken();return a?Promise.resolve():b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("GET_ACCESS_TOKEN").then(function(a){if(a&&a.access_token){b("ApiClient").setAccessToken(a.access_token);return Promise.resolve()}})}c={requestAsync:a};f["default"]=c}),66);
__d("fbinstant/releases/samus/botSubscription.samus",["InstantGamesGameState","InstantGamesSDKMessages","Promise","fbinstant/common/apiError","fbinstant/common/dataAccessRecorder","fbinstant/common/errorCode","fbinstant/releases/samus/graphApi.samus","fbinstant/releases/samus/internalStates.samus"],(function(a,b,c,d,e,f){"use strict";var g=1,h=0,i=null;function j(){var a=b("fbinstant/releases/samus/internalStates.samus").getContext().getID();a=a!=null?"can_subscribe_to_game_bot.context_id("+a+")":"can_subscribe_to_game_bot";return b("fbinstant/releases/samus/graphApi.samus").requestAsync("/me","get",{fields:[a]}).then(function(a){return a.can_subscribe_to_game_bot})}function a(){if(h>=g){i=!1;return b("Promise").resolve(!1)}return i!=null?b("Promise").resolve(i):j().then(function(a){i=a;return a})}function c(){if(b("fbinstant/releases/samus/internalStates.samus").getGameState()!==b("InstantGamesGameState").PLAYING)return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_OPERATION,message:"Cannot perform this operation before the game has started."}));if(h>=g)return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_OPERATION,message:"Player can only see the subscription dialog once per session."}));if(i!=null){if(!i)return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_OPERATION,message:"Cannot use subscribeBotAsync() to the player. Please check canSubscribeBotAsync() before calling this API."}))}else return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_OPERATION,message:"Cannot directly use subscribeBotAsync(). Please check canSubscribeBotAsync() before calling this API."}));i=null;h+=1;b("fbinstant/common/dataAccessRecorder")("RECORD_SUBSCRIBE_BOT_ASYNC_DIALOG",b("fbinstant/releases/samus/internalStates.samus").getMessageSender(),b("InstantGamesSDKMessages").SUBSCRIBE_BOT_ASYNC);return b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(b("InstantGamesSDKMessages").SUBSCRIBE_BOT_ASYNC)}e.exports={canSubscribeBotAsync:a,subscribeBotAsync:c}}),null);
__d("fbinstant/releases/samus/player.samus",["InstantGamesSDKMessages","Promise","fbinstant/common/apiError","fbinstant/common/connectedPlayers","fbinstant/common/errorCode","fbinstant/common/signedPlayerInfo","fbinstant/common/validator","fbinstant/releases/samus/botSubscription.samus","fbinstant/releases/samus/graphApi.samus","fbinstant/releases/samus/internalStates.samus","fbinstant/releases/samus/logger.samus"],(function(a,b,c,d,e,f){"use strict";a={getID:function(){b("fbinstant/releases/samus/logger.samus").logAPICall("player_getID");return""},getSignedPlayerInfoAsync:function(a){var c="player_getSignedPlayerInfoAsync";b("fbinstant/releases/samus/logger.samus").logBeginAsync(c);var d=b("fbinstant/common/validator").string().optional();d=b("fbinstant/common/validator").validate(a,d).then(function(){var c=a!=null?"signed_player_info.request_payload("+a+")":"signed_player_info";return b("fbinstant/releases/samus/graphApi.samus").requestAsync("/me","get",{fields:[c]}).then(function(a){a=a.signed_player_info;var c=a.player_id;a=a.signature;return new(b("fbinstant/common/signedPlayerInfo"))({playerID:c,signature:a})})});return b("fbinstant/releases/samus/logger.samus").logAsyncResult(d,c)},canSubscribeBotAsync:function(){var a="getPlayerCanSubscribeBotAsync";b("fbinstant/releases/samus/logger.samus").logBeginAsync(a);var c=b("fbinstant/releases/samus/botSubscription.samus").canSubscribeBotAsync();return b("fbinstant/releases/samus/logger.samus").logAsyncResult(c,a)},subscribeBotAsync:function(){var a="subscribeBotAsync";b("fbinstant/releases/samus/logger.samus").logBeginAsync(a);var c=b("fbinstant/releases/samus/botSubscription.samus").subscribeBotAsync();return b("fbinstant/releases/samus/logger.samus").logAsyncResult(c,a)},getName:function(){b("fbinstant/releases/samus/logger.samus").logAPICall("player_getName");return""},getPhoto:function(){b("fbinstant/releases/samus/logger.samus").logAPICall("player_getPhoto");return""},getDataAsync:function(a){var c="player_getDataAsync";b("fbinstant/releases/samus/logger.samus").logBeginAsync(c);var d=b("fbinstant/common/validator").array().schemaType(b("fbinstant/common/validator").string());d=b("fbinstant/common/validator").validate(a,d).then(function(){return b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(b("InstantGamesSDKMessages").GET_PLAYER_DATA_ASYNC,{keys:a})});return b("fbinstant/releases/samus/logger.samus").logAsyncResult(d,c)},setDataAsync:function(a){var c="player_setDataAsync";b("fbinstant/releases/samus/logger.samus").logBeginAsync(c);var d=function(a){var b=Object.keys(a);for(var c=0;c<b.length;c++){var d=b[c];d=a[d];if(typeof d==="function")return!0}return!1},e=function(a){try{JSON.stringify(a);return!1}catch(a){return!0}},f=b("fbinstant/common/validator").validate(a,b("fbinstant/common/validator").object()).then(function(a){if(d(a)||e(a)){b("fbinstant/releases/samus/logger.samus").logReject(c,b("fbinstant/common/errorCode").INVALID_PARAM);return b("Promise").reject(new(b("fbinstant/common/apiError"))({code:b("fbinstant/common/errorCode").INVALID_PARAM,message:"Object is not serializable"}))}return a}).then(function(c){return b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(b("InstantGamesSDKMessages").SET_PLAYER_DATA_ASYNC,{data:a})});return b("fbinstant/releases/samus/logger.samus").logAsyncResult(f,c).then(function(){})},flushDataAsync:function(){var a="player_flushDataAsync";b("fbinstant/releases/samus/logger.samus").logBeginAsync(a);var c=b("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(b("InstantGamesSDKMessages").FLUSH_PLAYER_DATA_ASYNC,null);return b("fbinstant/releases/samus/logger.samus").logAsyncResult(c,a).then(function(){})},getConnectedPlayersAsync:function(){var a="player_getConnectedPlayers",c=b("fbinstant/releases/samus/internalStates.samus").getConnectedPlayersPromise();if(c)return c;b("fbinstant/releases/samus/logger.samus").logBeginAsync(a);c=b("fbinstant/releases/samus/logger.samus").logAsyncResult(b("fbinstant/common/connectedPlayers").fetchAsync(b("fbinstant/releases/samus/internalStates.samus").getMessageSender()),a)["catch"](function(a){b("fbinstant/releases/samus/internalStates.samus").setConnectedPlayersPromise(null);throw a});b("fbinstant/releases/samus/internalStates.samus").setConnectedPlayersPromise(c);return c}};e.exports=a}),null);
__d("fbinstant/releases/samus/supportedFunctions.samus",["InstantGamesSDKFeatures","InstantGamesSDKMessages","fbinstant/common/supportedFeaturesManager","fbinstant/common/supportedMessagesManager"],(function(a,b,c,d,e,f){"use strict";var g=new Set(["getLocale","getPlatform","getSDKVersion","getSupportedAPIs","getEntryPointData","player.getID","player.getName","player.getPhoto","context.getID","context.getType","context.isSizeBetween","logEvent","onPause"]),h={"inventory.unlockItemAsync":(c=b("InstantGamesSDKMessages")).INVENTORY_UNLOCK_ITEM_ASYNC,matchPlayerAsync:c.MATCH_PLAYER_ASYNC,initializeAsync:c.INITIALIZE_ASYNC,setLoadingProgress:c.ON_PROGRESS_LOAD,setSessionData:c.SET_SESSION_DATA,startGameAsync:c.ON_GAME_READY,"player.flushDataAsync":c.FLUSH_PLAYER_DATA_ASYNC,"player.getDataAsync":c.GET_PLAYER_DATA_ASYNC,"player.setDataAsync":c.SET_PLAYER_DATA_ASYNC,"player.subscribeBotAsync":c.SUBSCRIBE_BOT_ASYNC,"player.getConnectedPlayersAsync":c.GET_CONNECTED_PLAYERS_ASYNC,"player.getSignedPlayerInfoAsync":c.GET_SIGNED_PLAYER_INFO_ASYNC,"context.switchAsync":c.CONTEXT_SWITCH_ASYNC,"context.chooseAsync":c.CONTEXT_CHOOSE_ASYNC,"context.createAsync":c.CONTEXT_CREATE_ASYNC,"context.getPlayersAsync":c.CONTEXT_PLAYERS_FETCH_ASYNC,getInterstitialAdAsync:c.GET_INTERSTITIAL_AD_ASYNC,getRewardedVideoAsync:c.GET_REWARDED_VIDEO_ASYNC,"payments.consumePurchaseAsync":c.PAYMENTS_CONSUME_PURCHASE_ASYNC,"payments.getCatalogAsync":c.PAYMENTS_FETCH_CATALOG_ASYNC,"payments.getPurchasesAsync":c.PAYMENTS_FETCH_PURCHASES_ASYNC,"payments.purchaseAsync":c.PAYMENTS_PURCHASE_ASYNC,shareAsync:c.SHARE_ASYNC,switchGameAsync:c.GAME_SWITCH,quit:c.QUIT,canCreateShortcutAsync:c.CAN_CREATE_SHORTCUT_ASYNC,createShortcutAsync:c.CREATE_SHORTCUT_ASYNC,performHapticFeedbackAsync:c.PERFORM_HAPTIC_FEEDBACK_ASYNC},i=new Set(["getEntryPointAsync","getLeaderboardAsync","checkCanPlayerMatchAsync","context.isPublicAsync","player.canSubscribeBotAsync","postSessionScore"]),j=new Set(["shareLinkAsync"]),k={updateAsync:function(){return b("fbinstant/common/supportedFeaturesManager").isSupported(b("InstantGamesSDKFeatures").FLEXIBLE)}};function a(){var a=l(),b=m(),c=o(),d=p(),e=n(),f=q(g);return f.concat(a).concat(b).concat(e).concat(c).concat(d)}function l(){var a=new Set();for(var c in h){var d=h[c];b("fbinstant/common/supportedMessagesManager").isSupported(d)&&a.add(c)}return q(a)}function m(){return b("fbinstant/common/supportedMessagesManager").isSupported(b("InstantGamesSDKMessages").SEND_PASS_THROUGH_ASYNC)?q(i):[]}function n(){return b("fbinstant/common/supportedMessagesManager").isSupported(b("InstantGamesSDKMessages").SHOW_GENERIC_DIALOG_ASYNC)?q(j):[]}function o(){var a=new Set();for(var b in k){var c=k[b]();c&&a.add(b)}return q(a)}function p(){var a=l(),b=new Set();a.indexOf("payments.purchaseAsync")!==-1&&b.add("payments.onReady");return q(b)}function q(a){var b=[];a.forEach(function(a){b.push(a)});return b}d={getSupported:a};e.exports=d}),null);
__d("fbinstant/releases/samus/index.samus",["InstantGamesGameState","InstantGamesSDKMessages","Promise","fbinstant/common/apiError","fbinstant/common/dataAccessRecorder","fbinstant/common/errorCode","fbinstant/common/featureAvailabilityFetcher","fbinstant/common/genericDialogs","fbinstant/common/platform","fbinstant/common/platformUtils","fbinstant/common/validator","fbinstant/releases/samus/ads.samus","fbinstant/releases/samus/community.samus","fbinstant/releases/samus/context.samus","fbinstant/releases/samus/deepTournaments.samus","fbinstant/releases/samus/endGamePayload.samus","fbinstant/releases/samus/internalStates.samus","fbinstant/releases/samus/inventory.samus","fbinstant/releases/samus/leaderboards.samus","fbinstant/releases/samus/lifecycle.samus","fbinstant/releases/samus/logger.samus","fbinstant/releases/samus/payments.samus","fbinstant/releases/samus/player.samus","fbinstant/releases/samus/supportedFunctions.samus","fbinstant/releases/samus/tournaments.samus"],(function(a,b,c,d,e,f,g){"use strict";var h={CUSTOM:"CUSTOM",LEADERBOARD:"LEADERBOARD"};a={getLocale:function(){c("fbinstant/releases/samus/logger.samus").logAPICall("getLocale");return""},getPlatform:function(){c("fbinstant/releases/samus/logger.samus").logAPICall("getPlatform");return!c("fbinstant/releases/samus/internalStates.samus").isInitialized()?null:c("fbinstant/common/platformUtils").getPlatform()},getSDKVersion:function(){c("fbinstant/releases/samus/logger.samus").logAPICall("getSDKVersion");var a=c("fbinstant/releases/samus/internalStates.samus").getSdkVersion();c("fbinstant/common/dataAccessRecorder")("RECORD_GET_SDK_VERSION",c("fbinstant/releases/samus/internalStates.samus").getMessageSender(),a,{SDKVersion:a});return a},initializeAsync:function(){var a="initializeAsync";c("fbinstant/releases/samus/internalStates.samus").isInitialized()&&c("fbinstant/releases/samus/internalStates.samus").constructor();if(c("fbinstant/releases/samus/internalStates.samus").isInitialized())return b("Promise").reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_OPERATION,message:"Game has already been initialized."}));c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);var d=c("fbinstant/releases/samus/internalStates.samus").getMessageSender(),e=c("fbinstant/releases/samus/lifecycle.samus").initializeAsync(d);return c("fbinstant/releases/samus/logger.samus").logAsyncResult(e,a).then(function(){c("fbinstant/common/featureAvailabilityFetcher").fetchAsync(d,"IGIP"),c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("QE_PARAM_NO_EXPOSURE_FETCH",{}).then(function(a){c("fbinstant/releases/samus/internalStates.samus").setQEParams(a)})["catch"]()})},setLoadingProgress:function(a){c("fbinstant/releases/samus/logger.samus").logAPICall("setLoadingProgress"),c("fbinstant/releases/samus/lifecycle.samus").setLoadingProgress(c("fbinstant/releases/samus/internalStates.samus").getMessageSender(),a)},getSupportedAPIs:function(){c("fbinstant/releases/samus/logger.samus").logAPICall("getSupportedAPIs");return c("fbinstant/releases/samus/supportedFunctions.samus").getSupported()},getEntryPointData:function(){c("fbinstant/releases/samus/logger.samus").logAPICall("getEntryPointData");return c("fbinstant/releases/samus/internalStates.samus").getEntryPoint().getData()},getEntryPointAsync:function(){var a="getEntryPointAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);return c("fbinstant/releases/samus/logger.samus").logAsyncResult(b("Promise").resolve(""),a)},setSessionData:function(a){c("fbinstant/releases/samus/logger.samus").logAPICall("setSessionData");var b=a;c("fbinstant/common/validator").validate(b,c("fbinstant/common/validator").object().maxSize(1e3)).then(function(){var a=JSON.stringify(b);c("fbinstant/common/dataAccessRecorder")("RECORD_SET_SESSION_DATA",c("fbinstant/releases/samus/internalStates.samus").getMessageSender(),a,{sessionData:a});c("fbinstant/releases/samus/internalStates.samus").getMessageSender().send(c("InstantGamesSDKMessages").SET_SESSION_DATA,a)})},startGameAsync:function(){var a="startGameAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);var b=c("fbinstant/releases/samus/lifecycle.samus").startGameAsync(c("fbinstant/releases/samus/internalStates.samus").getMessageSender());return c("fbinstant/releases/samus/logger.samus").logAsyncResult(b,a).then(function(){})},player:c("fbinstant/releases/samus/player.samus"),context:c("fbinstant/releases/samus/context.samus"),payments:c("fbinstant/releases/samus/payments.samus"),inventory:c("fbinstant/releases/samus/inventory.samus"),community:c("fbinstant/releases/samus/community.samus"),tournament:c("fbinstant/releases/samus/deepTournaments.samus"),shareAsync:function(a){var e="shareAsync",f=c("fbinstant/common/validator").object().keys({intent:c("fbinstant/common/validator").string(),image:c("fbinstant/common/validator").string(),media:c("fbinstant/common/validator").object().keys({gif:c("fbinstant/common/validator").object().keys({url:c("fbinstant/common/validator").string()}).optional(),video:c("fbinstant/common/validator").object().keys({url:c("fbinstant/common/validator").string()}).optional()}).optional(),text:c("fbinstant/common/validator").string(),data:c("fbinstant/common/validator").object().optional().maxSize(1e3),surface:c("fbinstant/common/validator").string().optional(),switchContext:c("fbinstant/common/validator")["boolean"]().optional()});c("fbinstant/releases/samus/logger.samus").logBeginAsync(e);if(c("fbinstant/releases/samus/internalStates.samus").getGameState()!==d("InstantGamesGameState").PLAYING){c("fbinstant/releases/samus/logger.samus").logReject(e,c("fbinstant/common/errorCode").INVALID_OPERATION);return b("Promise").reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_OPERATION,message:"Can not perform this operation before game start."}))}f=c("fbinstant/common/validator").validate(a,f).then(function(){if(a.media!=null)return c("fbinstant/common/featureAvailabilityFetcher").fetchAsync(c("fbinstant/releases/samus/internalStates.samus").getMessageSender(),"IGVS").then(function(a){return a?b("Promise").resolve():b("Promise").reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_PARAM,message:"The share content provided is not supported"}))});else return b("Promise").resolve()}).then(function(){var b=babelHelpers["extends"]({},a);b.data=JSON.stringify({sender:c("fbinstant/releases/samus/internalStates.samus").getPlayerID(),data:a.data});return c("fbinstant/common/platformUtils").getPlatform()===c("fbinstant/common/platform").IOS&&a.switchContext?c("fbinstant/releases/samus/internalStates.samus").getMessageSender().showGenericDialogAsync(c("fbinstant/common/genericDialogs").CUSTOM_SHARE,b):c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(c("InstantGamesSDKMessages").SHARE_ASYNC,b)}).then(function(a){a&&a.contextID&&a.contextType&&c("fbinstant/releases/samus/internalStates.samus").updateContext(a);return});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(f,e).then(function(){})},shareLinkAsync:function(a){var e="shareLinkAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(e);if(c("fbinstant/releases/samus/internalStates.samus").getGameState()!==d("InstantGamesGameState").PLAYING){c("fbinstant/releases/samus/logger.samus").logReject(e,c("fbinstant/common/errorCode").INVALID_OPERATION);return b("Promise").reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_OPERATION,message:"Can not perform this operation before game start."}))}var f=c("fbinstant/common/validator").object().keys({image:c("fbinstant/common/validator").string().optional(),text:c("fbinstant/common/validator").string().optional(),data:c("fbinstant/common/validator").object().maxSize(1e3)});f=c("fbinstant/common/validator").validate(a,f).then(function(){var b=babelHelpers["extends"]({},a);b.data=JSON.stringify(a.data);return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().showGenericDialogAsync(c("fbinstant/common/genericDialogs").CUSTOM_LINK_SHARE,b)});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(f,e).then(function(){})},updateAsync:function(a){var d="updateAsync";function e(a){return new(b("Promise"))(function(b,d){c("fbinstant/releases/samus/internalStates.samus").getMessageSender().send(c("InstantGamesSDKMessages").ON_END_GAME,a),c("fbinstant/releases/samus/internalStates.samus").getRestartEvent().on(function(a){if(a&&a.error){d(new(c("fbinstant/common/apiError"))({code:a.error.code,message:a.error.message}));return}a&&a.contextType&&c("fbinstant/releases/samus/internalStates.samus").updateContext(a);b();c("fbinstant/releases/samus/internalStates.samus").getRestartEvent().unbind()})})}if(a.action===h.LEADERBOARD){var f=a;c("fbinstant/releases/samus/logger.samus").logBeginAsync(d);f=c("fbinstant/releases/samus/leaderboards.samus").sendUpdateAsync(f);return c("fbinstant/releases/samus/logger.samus").logAsyncResult(f,d)}else if(a.action===h.CUSTOM){f=a;a=f.media!=null;c("fbinstant/releases/samus/logger.samus").logBeginAsync(d);if(a){a=c("fbinstant/releases/samus/endGamePayload.samus").format(f).then(function(a){return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("UPDATE",{formatted_payload:a,context_token_id:c("fbinstant/releases/samus/internalStates.samus").getContext().getID()}).then(function(){})});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(a,d)}a=c("fbinstant/releases/samus/endGamePayload.samus").format(f).then(function(a){return e(a)});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(a,d)}return b("Promise").reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_PARAM,message:'Invalid update action. Must be "CUSTOM" or "LEADERBOARD".'}))},switchGameAsync:function(a,e){var f="switchGameAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(f);if(c("fbinstant/releases/samus/internalStates.samus").getGameState()!==d("InstantGamesGameState").PLAYING){c("fbinstant/releases/samus/logger.samus").logReject(f,c("fbinstant/common/errorCode").INVALID_OPERATION);return b("Promise").reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_OPERATION,message:"Can not perform this operation before game start."}))}var g=c("fbinstant/common/validator").validate(a,c("fbinstant/common/validator").string()).then(function(){return c("fbinstant/common/validator").validate(e,c("fbinstant/common/validator").object().optional().maxSize(1e3))}).then(function(){return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("SWITCH_GAME",{app_id:a})}).then(function(){var b={app_id:a,payload:e!=null?JSON.stringify(e):null};return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(c("InstantGamesSDKMessages").GAME_SWITCH,b)});c("fbinstant/common/dataAccessRecorder")("RECORD_SWITCH_GAME_ASYNC_DIALOG",c("fbinstant/releases/samus/internalStates.samus").getMessageSender(),c("InstantGamesSDKMessages").GAME_SWITCH);return c("fbinstant/releases/samus/logger.samus").logAsyncResult(g,f)},canCreateShortcutAsync:function(){var a="canCreateShortcutAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);var b=c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(c("InstantGamesSDKMessages").CAN_CREATE_SHORTCUT_ASYNC,null);return c("fbinstant/releases/samus/logger.samus").logAsyncResult(b,a).then(function(a){return a.canCreateShortcut})["catch"](function(a){return!1})},createShortcutAsync:function(){var a="createShortcutAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);if(c("fbinstant/releases/samus/internalStates.samus").getGameState()!==d("InstantGamesGameState").PLAYING){c("fbinstant/releases/samus/logger.samus").logReject(a,c("fbinstant/common/errorCode").INVALID_OPERATION);return b("Promise").reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_OPERATION,message:"Can not perform this operation before game start."}))}var e=c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(c("InstantGamesSDKMessages").CREATE_SHORTCUT_ASYNC,null);return c("fbinstant/releases/samus/logger.samus").logAsyncResult(e,a)},quit:function(){c("fbinstant/releases/samus/logger.samus").logAPICall("quit"),c("fbinstant/releases/samus/lifecycle.samus").quit(c("fbinstant/releases/samus/internalStates.samus").getMessageSender())},logEvent:function(a,b,d){var e=a+(b!=null?"_"+b:"")+(d!=null?"_"+JSON.stringify(d):"");c("fbinstant/common/dataAccessRecorder")("RECORD_LOG_EVENT",c("fbinstant/releases/samus/internalStates.samus").getMessageSender(),e,{eventName:a,valueToSum:b,parameters:d});e=c("fbinstant/releases/samus/internalStates.samus").getAnalytics().logEvent(a,b,d);return!e?null:new(c("fbinstant/common/apiError"))({code:e.code,message:e.message})},onPause:function(a){c("fbinstant/releases/samus/logger.samus").logAPICall("onPause"),c("fbinstant/releases/samus/internalStates.samus").getPauseEvent().on(a)},onResume:function(a){c("fbinstant/releases/samus/logger.samus").logAPICall("onResume"),c("fbinstant/releases/samus/internalStates.samus").getResumeEvent().on(a)},getInterstitialAdAsync:function(a){var b="getInterstitialAdAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(b);var d=c("fbinstant/common/validator").string();d=c("fbinstant/common/validator").validate(a,d).then(function(){return c("fbinstant/releases/samus/ads.samus").getInterstitialAdAsync(a)});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(d,b)},getRewardedVideoAsync:function(a){var b="getRewardedVideoAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(b);var d=c("fbinstant/common/validator").string();d=c("fbinstant/common/validator").validate(a,d).then(function(){return c("fbinstant/releases/samus/ads.samus").getRewardedVideoAsync(a)});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(d,b)},matchPlayerAsync:function(a,e,f){var g="matchPlayerAsync",h=c("fbinstant/releases/samus/internalStates.samus").getMatchPlayerPromise();if(h)return h;c("fbinstant/releases/samus/logger.samus").logBeginAsync(g);if(c("fbinstant/releases/samus/internalStates.samus").getGameState()!==d("InstantGamesGameState").PLAYING){c("fbinstant/releases/samus/logger.samus").logReject(g,c("fbinstant/common/errorCode").INVALID_OPERATION);return b("Promise").reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_OPERATION,message:"Can not perform this operation before game start."}))}var i={matchTag:a||null,switchContextWhenMatched:c("fbinstant/common/platformUtils").getPlatform()===c("fbinstant/common/platform").IOS?!0:e||!1,offlineMatch:f||!1};h=/^[a-zA-Z0-9_]+$/;if(i.matchTag&&i.matchTag.search(h)===-1){c("fbinstant/releases/samus/logger.samus").logReject(g);return b("Promise").reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_PARAM,message:"Match Tag must only include letters, numbers and underscores."}))}if(i.matchTag&&i.matchTag.length>100){c("fbinstant/releases/samus/logger.samus").logReject(g);return b("Promise").reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_PARAM,message:"Match Tag must be 100 characters or less."}))}a=c("fbinstant/common/validator").object().keys({matchTag:c("fbinstant/common/validator").string().optional(),switchContextWhenMatched:c("fbinstant/common/validator")["boolean"](),offlineMatch:c("fbinstant/common/validator")["boolean"]()});e=c("fbinstant/common/validator").validate(i,a).then(function(a){return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("CAN_PLAYER_MATCH",{contextID:c("fbinstant/releases/samus/internalStates.samus").getContext().getID(),offlineMatch:f})}).then(function(a){if(!a.can_match)throw new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_OPERATION,message:"The player is not currently eligible to match."});i.dialogTitle=a.dialog_title;i.dialogTextLineOne=a.dialog_text_line_one;i.dialogTextLineTwo=a.dialog_text_line_two;i.dialogButtonText=a.dialog_button_text;i.bannerSearchText=a.banner_search_text;i.bannerRetryText=a.banner_retry_text;i.bannerOfflineRetryText=a.banner_offline_retry_text;i.bannerMatchFoundText=a.banner_match_found_text;i.bannerUserAlreadyInThreadText=a.banner_user_already_in_thread_text;i.useV2=a.use_v2||!1;return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(c("InstantGamesSDKMessages").MATCH_PLAYER_ASYNC,i)}).then(function(a){c("fbinstant/releases/samus/internalStates.samus").updateContext(a);c("fbinstant/releases/samus/internalStates.samus").setMatchPlayerPromise(null);return})["catch"](function(a){c("fbinstant/releases/samus/internalStates.samus").setMatchPlayerPromise(null);throw a});e=c("fbinstant/releases/samus/logger.samus").logAsyncResult(e,g);c("fbinstant/releases/samus/internalStates.samus").setMatchPlayerPromise(e);return e},checkCanPlayerMatchAsync:function(){var a="checkCanPlayerMatchAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);var b=c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendPassThroughAsync("CAN_PLAYER_MATCH",{contextID:c("fbinstant/releases/samus/internalStates.samus").getContext().getID()}).then(function(a){return a.can_match});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(b,a)},getLeaderboardAsync:function(a){var b="getLeaderboardAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(b);var d=c("fbinstant/common/validator").string();d=c("fbinstant/common/validator").validate(a,d).then(function(){return c("fbinstant/releases/samus/leaderboards.samus").getLeaderboardAsync(a)});return c("fbinstant/releases/samus/logger.samus").logAsyncResult(d,b)},postSessionScore:function(a){c("fbinstant/releases/samus/logger.samus").logAPICall("postSessionScore"),c("fbinstant/releases/samus/tournaments.samus").postSessionScoreAsync(a)},postSessionScoreAsync:function(a){var b="postSessionScoreAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(b);a=c("fbinstant/releases/samus/tournaments.samus").postSessionScoreAsync(a);return c("fbinstant/releases/samus/logger.samus").logAsyncResult(a,b)},getTournamentAsync:function(){var a="getTournamentAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);var b=c("fbinstant/releases/samus/tournaments.samus").getTournamentAsync();return c("fbinstant/releases/samus/logger.samus").logAsyncResult(b,a)},performHapticFeedbackAsync:function(){var a="performHapticFeedbackAsync";c("fbinstant/releases/samus/logger.samus").logBeginAsync(a);if(c("fbinstant/releases/samus/internalStates.samus").getGameState()!==d("InstantGamesGameState").PLAYING){c("fbinstant/releases/samus/logger.samus").logReject(a,c("fbinstant/common/errorCode").INVALID_OPERATION);return b("Promise").reject(new(c("fbinstant/common/apiError"))({code:c("fbinstant/common/errorCode").INVALID_OPERATION,message:"Cannot perform performHapticFeedbackAsync() before game start."}))}var e=c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync(c("InstantGamesSDKMessages").PERFORM_HAPTIC_FEEDBACK_ASYNC,null);return c("fbinstant/releases/samus/logger.samus").logAsyncResult(e,a)}};f.exports=a}),34);
__d("CloudGamingErrorManagement",["Clipboard","CloudGamingApertureUtils","CloudGamingConstants","CloudGamingErrorTypes","CometDebounce","ConstUriUtils","InstantGamesPWAUtils","InstantGamesPlayerUtils","fbinstant/releases/samus/index.samus","fbinstant/releases/samus/internalStates.samus"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a,b){return d("CloudGamingApertureUtils").isMobileApp(a)?null:c("CometDebounce")(function(){b==null?void 0:b.send(d("CloudGamingConstants").CloudGamingMessageTypes.RETRY),c("fbinstant/releases/samus/internalStates.samus").getMessageSender().send("cgretry",null)},{leading:!0,wait:5e3})},i=function(a,b,c){return d("CloudGamingApertureUtils").isMobileApp(a)?null:function(){c==null?void 0:c.send(d("CloudGamingConstants").CloudGamingMessageTypes.QUIT),b&&d("fbinstant/releases/samus/index.samus").quit()}};function a(a,b,c,e,f,g,n,o,p,q){if(Object.values(d("CloudGamingConstants").HorizonAppIDs).includes(q)&&j())return{errorType:d("CloudGamingErrorTypes").CloudGamingErrorTypes.UNSUPPORTED_DEVICE,isGameOver:!0,primaryButtonLabel:p.LEARN_MORE_TEXT,primaryButtonOnClick:null,primaryText:p.UNSUPPORTED_DEVICE_HEADER,secondaryButtonLabel:p.RETURN_GAMING_TEXT,secondaryButtonOnClick:i(e,f,g),secondaryText:p.getUnsupportedDeviceMessage(c)};q=null;if(a.phase==="error")if(a.payloadResponse!=null){var r=a.payloadResponse;if(a.code===d("CloudGamingErrorTypes").CloudGamingErrorCode.CREATE_OFFER_FAILURE){var s;q=(s=(s=k(r,e,f,g,p))!=null?s:l(r,e,f,!1,g,p))!=null?s:m(r,e,f,c,o,g,p)}}else a.message!=null&&(q=k(a.message,e,f,g,p));else if(b==="Inactivated"||b==="Timeout"){s=b==="Timeout";r=d("InstantGamesPlayerUtils").isCometOnMobile()||e===String(412378670482);q={errorType:s?d("CloudGamingErrorTypes").CloudGamingErrorTypes.CONNECTION_TIMEOUT:d("CloudGamingErrorTypes").CloudGamingErrorTypes.CONNECTION_TIMEOUT_WARNING,internalOnlyErrorDetail:void 0,isGameOver:s,primaryButtonLabel:s?p.PLAY_AGAIN_TEXT:p.WARNING_EXIT_TEXT,primaryButtonOnClick:s?h(e,g):function(){n()},primaryText:s?p.CONNECTION_TIMEOUT_TEXT:p.CONNECTION_TIMEOUT_WARNING_TEXT,secondaryButtonLabel:p.RETURN_GAMING_TEXT,secondaryButtonOnClick:i(e,f,g),secondaryText:s&&r&&!d("InstantGamesPWAUtils").isInPWA()?p.getRefreshToRestartGameMessage((o=c)!=null?o:""):s?p.CONNECTION_TIMEOUT_DESCRIPTION_TEXT:null}}r=(b=q)!=null?b:{errorType:d("CloudGamingErrorTypes").CloudGamingErrorTypes.UNKNOWN,internalOnlyErrorDetail:void 0,isGameOver:!0,primaryButtonLabel:p.RETRY_TEXT,primaryButtonOnClick:h(e,g),primaryText:p.CONNECTION_ERROR_TEXT,secondaryButtonLabel:p.RETURN_GAMING_TEXT,secondaryButtonOnClick:i(e,f,g),secondaryText:p.CONNECTION_ERROR_DESCRIPTION_TEXT};a.payloadResponse!=null&&(r.internalOnlyErrorDetail=a.payloadResponse);return r}function b(a){if(!Object.values(d("CloudGamingConstants").HorizonAppIDs).includes(a))return!0;a=!j();return a}function j(){var a=navigator.userAgent.toLowerCase();a=/(kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(a);return a}function k(a,b,c,e,f){var g=f.RETRY_TEXT,j=f.CONNECTION_ERROR_TEXT,k=null,l=d("CloudGamingErrorTypes").CloudGamingErrorTypes.UNKNOWN;a.includes("GAME_NODE_IN_USE")?(j=f.GAME_NODE_IN_USE_TEXT,k=f.GAME_NODE_IN_USE_DESCRIPTION_TEXT,l=d("CloudGamingErrorTypes").CloudGamingErrorTypes.GAME_NODE_IN_USE):a.includes("GAME_NODE_TERMINATING")?(j=f.SAVE_ERROR_TEXT,k=f.GAME_NODE_TERMINATING_TEXT,l=d("CloudGamingErrorTypes").CloudGamingErrorTypes.GAME_NODE_TERMINATING):a.includes("NO_AVAILABLE_REGIONS")?(k=f.REGION_UNAVAILABLE_TEXT,l=d("CloudGamingErrorTypes").CloudGamingErrorTypes.REGION_UNAVAILABLE):a.includes("ACCESS_TOKEN_GEN_FAILED")?(k=f.UNABLE_CONNECT_SERVER_TEXT,l=d("CloudGamingErrorTypes").CloudGamingErrorTypes.ACCESS_TOKEN_GEN_FAILED):a.includes("h264 required but not supported")&&(j=f.H264_ERROR_TEXT,k=f.H264_ERROR_DESCRIPTION_TEXT,l=d("CloudGamingErrorTypes").CloudGamingErrorTypes.H264_ERROR,g=null);if(k!==null)return{errorType:l,isGameOver:!0,primaryButtonLabel:g,primaryButtonOnClick:h(b,e),primaryText:j,secondaryButtonLabel:f.RETURN_GAMING_TEXT,secondaryButtonOnClick:i(b,c,e),secondaryText:k}}function l(a,b,c,e,f,g){a=a.includes("APP_NOT_FOUND")?d("CloudGamingErrorTypes").CloudGamingErrorTypes.APP_NOT_FOUND:a.includes("CANNOT_SEE_CLOUD_GAME")?d("CloudGamingErrorTypes").CloudGamingErrorTypes.CANNOT_SEE_CLOUD_GAME:a.includes("CAPACITY_ERROR")?d("CloudGamingErrorTypes").CloudGamingErrorTypes.CAPACITY_ERROR:null;if(a!=null)return{errorType:a,isGameOver:!0,primaryButtonLabel:g.RETRY_TEXT,primaryButtonOnClick:e?h(b,f):null,primaryText:a===d("CloudGamingErrorTypes").CloudGamingErrorTypes.CAPACITY_ERROR?g.CAPACITY_ERROR_TEXT:g.GAME_COULD_NOT_BE_LOADED_TEXT,secondaryButtonLabel:g.RETURN_GAMING_TEXT,secondaryButtonOnClick:i(b,c,f),secondaryText:a===d("CloudGamingErrorTypes").CloudGamingErrorTypes.CAPACITY_ERROR?g.CAPACITY_ERROR_DESCRIPTION_TEXT:g.TRY_AGAIN_TEXT}}function m(a,b,c,e,f,g,h){var j=h.UNSUPPORTED_GAME_TEXT,k=null,l=d("CloudGamingErrorTypes").CloudGamingErrorTypes.UNKNOWN;a.includes("CHROME_DESKTOP")?(k=h.getUseChromeDesktopMessage(e),l=d("CloudGamingErrorTypes").CloudGamingErrorTypes.USE_CHROME_DESKTOP):a.includes("FACEBOOK_FOR_ANDROID")?(k=h.getUseFacebookOnAndroidMessage(e),l=d("CloudGamingErrorTypes").CloudGamingErrorTypes.USE_FACEBOOK_FOR_ANDROID):a.includes("MOBILE_SAFARI")?(k=h.getUseMobileSafariMessage(e),l=d("CloudGamingErrorTypes").CloudGamingErrorTypes.USE_MOBILE_SAFARI):a.includes("UPGRADE_MOBILE_OS_VS")?(k=h.PLEASE_UPGRADE_MOBILE_OS_VS,l=d("CloudGamingErrorTypes").CloudGamingErrorTypes.UPGRADE_MOBILE_OS_VS):a.includes("UPGRADE_ANDROID_WEBVIEW_VS")?(k=h.PLEASE_UPGRADE_ANDROID_WEBVIEW_VS,l=d("CloudGamingErrorTypes").CloudGamingErrorTypes.UPGRADE_ANDROID_WEBVIEW_VS):a.includes("UPGRADE_FACEBOOK_FOR_ANDROID")?(k=h.PLEASE_UPGRADE_FACEBOOK_FOR_ANDROID,l=d("CloudGamingErrorTypes").CloudGamingErrorTypes.UPGRADE_FACEBOOK_FOR_ANDROID):a.includes("UPDATE_BROWSER")?(j=h.UPDATE_BROWSER_HEADER,k=h.getUpdateBrowserMessage(e),l=d("CloudGamingErrorTypes").CloudGamingErrorTypes.UPDATE_BROWSER):a.includes("UNSUPPORTED_DEVICE")?(j=h.UNSUPPORTED_DEVICE_HEADER,k=h.getUnsupportedDeviceMessage(e),l=d("CloudGamingErrorTypes").CloudGamingErrorTypes.UNSUPPORTED_DEVICE):a.includes("UNSUPPORTED_OS")?(j=h.UNSUPPORTED_OS_HEADER,k=h.getUnsupportedOSMessage(e),l=d("CloudGamingErrorTypes").CloudGamingErrorTypes.UNSUPPORTED_OS):a.includes("UNSUPPORTED_BROWSER")&&(j=h.UNSUPPORTED_BROWSER_HEADER,k=h.getUnsupportedBrowserMessage(e),l=d("CloudGamingErrorTypes").CloudGamingErrorTypes.UNSUPPORTED_BROWSER);if(k!==null){var m=(a=d("ConstUriUtils").getUri(f))==null?void 0:(e=a.getQualifiedUri())==null?void 0:e.toString();return{errorType:l,isGameOver:!0,primaryButtonLabel:h.COPY_GAME_LINK_TEXT,primaryButtonOnClick:!d("CloudGamingApertureUtils").isMobileApp(b)&&m!=null?function(){d("Clipboard").copy(m)}:null,primaryText:j,secondaryButtonLabel:h.RETURN_GAMING_TEXT,secondaryButtonOnClick:i(b,c,g),secondaryText:k}}}g.getErrorInfo=a;g.passClientCheckForHorizon=b;g.connectionCheckErrorInfo=k;g.capacityCheckErrorInfo=l;g.platformCheckErrorInfo=m}),98);
__d("useFullscreen",["react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useEffect,j=b.useState;function a(){var a=j(document.fullscreenElement!=null),b=a[0],c=a[1],d=h(function(){return c(document.fullscreenElement!=null)},[c]);i(function(){document.addEventListener("fullscreenchange",d);return function(){document.removeEventListener("fullscreenchange",d)}},[d]);a=h(function(a){if(b)return;var d=null;a.requestFullscreen?d=a.requestFullscreen():a.msRequestFullscreen!=null?d=a.msRequestFullscreen():a.mozRequestFullScreen!=null?d=a.mozRequestFullScreen():a.webkitRequestFullscreen!=null&&(d=a.webkitRequestFullscreen());(a=d)==null?void 0:a.then(function(){return c(!0)})},[b,c]);var e=h(function(){if(!b)return;var a=null;document.exitFullscreen?a=document.exitFullscreen():document.msExitFullscreen?a=document.msExitFullscreen():document.mozCancelFullScreen?a=document.mozCancelFullScreen():document.webkitExitFullscreen&&(a=document.webkitExitFullscreen());(a=a)==null?void 0:a.then(function(){return c(!1)})},[b,c]);return{isFullscreen:b,requestFullscreen:a,exitFullscreen:e}}g["default"]=a}),98);
__d("CloudGamingFullScreenMode.react",["CloudGamingClientFbts","CloudGamingWindowsGamesSpecialConfigurationConfig","CometPressable.react","TetraText.react","gkx","react","useFullscreen"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useEffect,k=b.useMemo,l=b.useRef,m=b.useState,n={body:{paddingBottom:"xwxc41k",width:"x65xoit",$$css:!0},header:{paddingBottom:"x1m7pmia",paddingEnd:"x1o0k56v",paddingStart:"x4ge4z1",$$css:!0},root:{alignItems:"x6s0dn4",backgroundColor:"xatbrnm",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexWrap:"xozqiw3",height:"x5yr21d",justifyContent:"xl56j7k",overflowX:"x6ikm8r",overflowY:"x10wlt62",pointerEvents:"x71s49j",position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",touchAction:"x5ve5x3",userSelect:"x87ps6o",width:"xh8yej3",zIndex:"x1vjfegm",$$css:!0}};function a(a){var b=a.clientAppID,e=a.cloudGameID,f=a.isGameNotReady,g=a.isMobileApp,o=a.isMobileBrowser,p=a.provider;a=m(!1);var q=a[0],r=a[1];a=c("useFullscreen")();var s=a.isFullscreen,t=a.requestFullscreen,u=l(document.documentElement),v=k(function(){var a=navigator.userAgent;return o&&b===String(351299233827255)&&a.toLowerCase().indexOf("android")>-1},[b,o]);j(function(){var a=window.navigator.keyboard!=null&&!(g||o);if(p==="GREDOS")if(a){window.navigator.keyboard.lock(["Escape"]);a=c("CloudGamingWindowsGamesSpecialConfigurationConfig").force_full_screen;a=a.indexOf(e)!==-1;b!==String(351299233827255)&&c("gkx")("4388")&&!f&&a&&(!s&&!q?r(!0):s&&q&&r(!1))}else v&&c("gkx")("4388")&&!f&&(!s&&!q?r(!0):s&&q&&r(!1))},[b,e,q,v,s,f,g,o,p]);a=v?h.jsx("div",{}):h.jsx("div",{className:"xwxc41k x65xoit",children:h.jsx(c("TetraText.react"),{align:"center",color:"primaryOnMedia",type:"body2",children:d("CloudGamingClientFbts").CloudGamingClientFbts.PLAY_IN_FULL_SCREEN_EXIT})});var w=i(function(){var a=v?u.current:document.getElementById("iframe_canvas");if(a==null)return;if(!document.pointerLockElement){var b=document.getElementById("ApertureVideoComponent");b==null?void 0:b.requestPointerLock();b==null?void 0:b.focus()}if(!s)try{t(a)}catch(a){}},[v,s,t]);return q?h.jsx("div",{className:"x6s0dn4 xatbrnm x9f619 x78zum5 xdt5ytf xozqiw3 x5yr21d xl56j7k x6ikm8r x10wlt62 x71s49j x10l6tqk x17qophe x13vifvy x5ve5x3 x87ps6o xh8yej3 x1vjfegm",children:h.jsxs(c("CometPressable.react"),{onPressOut:w,overlayDisabled:!0,preventContextMenu:!0,xstyle:n.root,children:[h.jsx("div",{className:"x1m7pmia x1o0k56v x4ge4z1",children:h.jsx(c("TetraText.react"),{align:"center",color:"primaryOnMedia",type:"entityHeaderHeadline1",children:d("CloudGamingClientFbts").CloudGamingClientFbts.PLAY_IN_FULL_SCREEN})}),h.jsx("div",{className:"xwxc41k x65xoit",children:h.jsx(c("TetraText.react"),{align:"center",color:"primaryOnMedia",type:"body2",children:d("CloudGamingClientFbts").CloudGamingClientFbts.PLAY_IN_FULL_SCREEN_INSTRUCTIONS})}),a]})}):null}a.displayName=a.name+" [from "+f.id+"]";g.CloudGamingFullScreenMode=a}),98);
__d("CloudGamingLockedMouseProcessor",["EventTimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o,p=0,q=0,r=0,s=20;function t(){return{index:0,originalIndex:0,position:{x:0,y:0},timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),type:"MOUSE_DOWN"}}function u(){return{index:0,originalIndex:0,position:{x:0,y:0},timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),type:"MOUSE_MOVE"}}function v(){return{index:0,originalIndex:0,position:{x:0,y:0},timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),type:"MOUSE_UP"}}var w=function(a,b,c){var d=a,e=b;a<=c.getBoundingClientRect().left?d=c.getBoundingClientRect().left:a>=c.getBoundingClientRect().width+c.getBoundingClientRect().left&&(d=c.getBoundingClientRect().width+c.getBoundingClientRect().left);b<=c.getBoundingClientRect().top?e=c.getBoundingClientRect().top:b>=c.getBoundingClientRect().height+c.getBoundingClientRect().top&&(e=c.getBoundingClientRect().height+c.getBoundingClientRect().top);return[d,e]},x=function(a,b,c){if(a<=c.getBoundingClientRect().left||a>=c.getBoundingClientRect().width+c.getBoundingClientRect().left||b<=c.getBoundingClientRect().top||b>=c.getBoundingClientRect().height+c.getBoundingClientRect().top)return!0;else return!1},y=function(a){if(h){var b;[0,0];if(!document.pointerLockElement)h.requestPointerLock(),b=C(a.clientX,a.clientY,h),i=a.clientX,j=a.clientY;else if(m)b=C(i,j,h);else return;n(b[0],b[1],1,t);a.stopPropagation()}},z=function(a){!m&&document.pointerLockElement&&document.exitPointerLock(),n(a.clientX,a.clientY,0,v),a.stopPropagation()},A=function(a){if(!document.pointerLockElement)return;if(h){if(m&&x(i+a.movementX,j+a.movementY,h)){var b=new Date().getTime();b-p>=s?(o(q,r,u),p=b,q=0,r=0):(q+=a.movementX,r+=a.movementY)}else{i+=a.movementX;j+=a.movementY;b=w(i,j,h);i=b[0];j=b[1];b=C(i,j,h);n(b[0],b[1],a.buttons,u)}a.stopPropagation()}},B=function(a){a.stopPropagation()},C=function(a,b,c){a=Math.round((a-c.getBoundingClientRect().left)*k/c.getBoundingClientRect().width);b=Math.round((b-c.getBoundingClientRect().top)*l/(c.getBoundingClientRect().width*l/k));return[a,b]},D=function(){h!=null&&(h.removeEventListener("mousedown",y,!0),h.removeEventListener("mouseup",z,!0),h.removeEventListener("mousemove",A,!0),h.removeEventListener("mouseout",B,!0))};a=function(a,b,c,d,e,f){k=a,l=b,h=c,m=d,n=e,o=f,h!=null&&(D(),h.addEventListener("mousedown",y,!0),h.addEventListener("mouseup",z,!0),h.addEventListener("mousemove",A,!0),h.addEventListener("mouseout",B,!0))};g.removeLockedMouseListeners=D;g.setupLockedMouseProcessor=a}),98);
__d("CloudGamingContainerReducer",["CloudGamingActionTypes"],(function(a,b,c,d,e,f,g){"use strict";var h={browserOrientation:0,streamingRotation:0,viewportHeight:0,viewportLeft:0,viewportTop:0,viewportWidth:0};function a(a,b){a===void 0&&(a=h);switch(b.type){case c("CloudGamingActionTypes").CONTAINER_RESIZE:return babelHelpers["extends"]({},a,{browserOrientation:b.browserOrientation,streamingRotation:b.streamingRotation,viewportHeight:b.viewportHeight,viewportLeft:b.viewportLeft,viewportTop:b.viewportTop,viewportWidth:b.viewportWidth});default:break}return a}g.DefaultState=h;g.container=a}),98);
__d("CloudGamingConnectionReducer",[],(function(a,b,c,d,e,f){"use strict";var g={phase:"initial",timestamp:0};function a(a){return a.phase==="error"||a.phase==="done"}function b(a){return a.phase==="connecting"}function h(a){return"Waiting for "+a.join(", ")}function i(a,b){if(a.phase!=="connecting")return a;var c=a.pending.filter(function(a){return a!==b});if(c.length===0)return{phase:"live",timestamp:Date.now()};return c.length===a.pending.length?a:babelHelpers["extends"]({},a,{message:h(c),pending:c,timestamp:Date.now()})}function c(a,b){a===void 0&&(a=g);switch(b.type){case"DISCONNECT":return babelHelpers["extends"]({},g,{timestamp:Date.now()});case"CREATE_SDP_OFFER":var c=["Server Connection","Video Stream","Data Channel","First Heartbeat"];return{message:h(c),pending:c,phase:"connecting",timestamp:Date.now()};case"RECEIVED_SDP_ANSWER":return i(a,"Server Connection");case"ADD_MEDIA_STREAM":case"ADD_VIDEO_TRACK":return i(a,"Video Stream");case"DATA_CHANNEL_OPENED":return i(a,"Data Channel");case"SERVER_TICK":return i(a,"First Heartbeat");case"FATAL_ERROR":return{code:b.code,message:b.detail,payloadResponse:b.payloadResponse,phase:"error",timestamp:Date.now()};case"RESOURCE_CLOSED":return{code:b.code,message:b.detail,phase:"done",timestamp:Date.now()};default:return a}}f.DefaultState=g;f.isTerminated=a;f.isLoading=b;f.pendingMessage=h;f.pendingFulfillment=i;f.connection=c}),66);
__d("CloudGamingHeartbeatReducer",[],(function(a,b,c,d,e,f){"use strict";var g={received:null,sent:null};function a(a,b){a===void 0&&(a=g);switch(b.type){case"SERVER_TICK":return babelHelpers["extends"]({},a,{received:b.heartbeat});case"CLIENT_TICK":return babelHelpers["extends"]({},a,{sent:b.heartbeat});case"PEER_CONNECTION_CREATED":return g}return a}f.DefaultState=g;f.heartbeat=a}),66);
__d("CloudGamingKeyboardReducer",[],(function(a,b,c,d,e,f){"use strict";var g={keysDown:new Set([])};function a(a,b){a===void 0&&(a=g);switch(b.type){case"KEY":var c=new Set(a.keysDown);b.direction==="down"?c.add(b.code):c["delete"](b.code);return babelHelpers["extends"]({},a,{keysDown:c});case"CLEAR_KEYS_DOWN":return babelHelpers["extends"]({},a,{keysDown:new Set([])});default:return a}}f.DefaultState=g;f.keyboard=a}),66);
__d("CloudGamingMediaReducer",[],(function(a,b,c,d,e,f){"use strict";var g={audioTrack:null,mediaStream:null,videoTrack:null};function h(a){var b=a.audioTrack;b=b===void 0?null:b;var c=a.videoTrack;c=c===void 0?null:c;if(b===null||c===null)return a;var d=new MediaStream();d.addTrack(c);d.addTrack(b);return babelHelpers["extends"]({},a,{mediaStream:d})}function a(a,b){a===void 0&&(a=g);switch(b.type){case"ADD_AUDIO_TRACK":return h(babelHelpers["extends"]({},a,{audioTrack:b.track,mediaStream:null}));case"ADD_VIDEO_TRACK":return h(babelHelpers["extends"]({},a,{mediaStream:null,videoTrack:b.track}));case"ADD_MEDIA_STREAM":return babelHelpers["extends"]({},a,{mediaStream:b.stream});case"REMOVE_MEDIA_STREAM":return babelHelpers["extends"]({},a,{audioTrack:null,mediaStream:null,videoTrack:null})}return a}f.DefaultState=g;f.media=a}),66);
__d("CloudGamingMouseReducer",[],(function(a,b,c,d,e,f){"use strict";var g={index:0,lastPosition:{x:0,y:0},pressingDown:!1},h={0:g,indexPool:{}};function i(a,b,c,d){var e=babelHelpers["extends"]({},a);b=b.toString();e[b]=d((d=a[b])!=null?d:g);e.indexPool[b]=c;return e}function a(a,b){a===void 0&&(a=h);switch(b.type){case"MOUSE_UP":return i(a,b.index,null,function(a){return babelHelpers["extends"]({},a,{lastPosition:babelHelpers["extends"]({},b.position),pressingDown:!1})});case"MOUSE_DOWN":return i(a,b.index,b.originalIndex,function(a){return babelHelpers["extends"]({},a,{lastPosition:babelHelpers["extends"]({},b.position),pressingDown:!0})});case"MOUSE_MOVE":return i(a,b.index,b.originalIndex,function(a){return babelHelpers["extends"]({},a,{lastPosition:babelHelpers["extends"]({},b.position)})});case"MOUSE_WHEEL":return i(a,b.index,b.originalIndex,function(a){return babelHelpers["extends"]({},a,{lastPosition:babelHelpers["extends"]({},b.position)})})}return a}f.DefaultTouchState=g;f.DefaultState=h;f.mouse=a}),66);
__d("CloudGamingRTCReducer",[],(function(a,b,c,d,e,f){"use strict";var g={connection:null,enableInputCompactFormat:!1,labelToChannel:new Map(),purposeToLabel:new Map([["input","oneworldcontrol"],["lifecycle","oneworldcontrol"]])};function a(a,b){a===void 0&&(a=g);switch(b.type){case"DATA_CHANNEL_OPENED":var c=new Map(a.labelToChannel);c.set(b.label,b.channel);return babelHelpers["extends"]({},a,{labelToChannel:c});case"DATA_CHANNEL_CLOSED":c=new Map(a.labelToChannel);c["delete"](b.label);return babelHelpers["extends"]({},a,{labelToChannel:c});case"PEER_CONNECTION_CREATED":return babelHelpers["extends"]({},a,{connection:b.connection});case"CONNECTION_ERROR":case"RESOURCE_CLOSED":case"DISCONNECT":return babelHelpers["extends"]({},a,{connection:null});case"RECEIVED_SDP_ANSWER":return babelHelpers["extends"]({},a,{purposeToLabel:b.purposeToLabel})}return a}f.DefaultState=g;f.rtc=a}),66);
__d("CloudGamingResourceReducer",[],(function(a,b,c,d,e,f){"use strict";b=480;c=800;var g=50;d={height:c,width:b};e={height:c+g,width:b};var h={modifierMap:{},size:{contentSize:null,display:d,resource:e}};function a(a,b){a===void 0&&(a=h);switch(b.type){case"CHANGE_RESOURCE_DIMENSIONS":return babelHelpers["extends"]({},a,{size:{contentSize:b.contentSize,display:b.displaySize,resource:babelHelpers["extends"]({},b.displaySize,{height:b.displaySize.height+g})}});case"RECEIVED_SDP_ANSWER":return babelHelpers["extends"]({},a,{modifierMap:b.modifierMap,size:{display:b.displaySize,resource:babelHelpers["extends"]({},b.displaySize,{height:b.displaySize.height+g})}})}return a}f.DefaultState=h;f.resource=a}),66);
__d("CloudGamingCoreTypes",["CloudGamingConnectionReducer","CloudGamingHeartbeatReducer","CloudGamingKeyboardReducer","CloudGamingMediaReducer","CloudGamingMouseReducer","CloudGamingRTCReducer","CloudGamingResourceReducer"],(function(a,b,c,d,e,f,g){"use strict";a={connection:d("CloudGamingConnectionReducer").DefaultState,heartbeat:d("CloudGamingHeartbeatReducer").DefaultState,keyboard:d("CloudGamingKeyboardReducer").DefaultState,media:d("CloudGamingMediaReducer").DefaultState,mouse:d("CloudGamingMouseReducer").DefaultState,resource:d("CloudGamingResourceReducer").DefaultState,rtc:d("CloudGamingRTCReducer").DefaultState};g.DefaultState=a}),98);
__d("CloudGamingGamepadReducer",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h={keysDown:new Map()};function a(a,b){a===void 0&&(a=h);switch(b.type){case"GAMEPAD":var c=new Map(a.keysDown);if(b.direction==="down")if(c.has(b.index)){var d=i(c,b.index);d.add(b.code)}else c.set(b.index,new Set([b.code]));else if(c.has(b.index)){d=i(c,b.index);d["delete"](b.code)}return{keysDown:c};case"GAMEPAD_DISCONNECTED":d=new Map(a.keysDown);d.has(b.index)&&d["delete"](b.index);return{keysDown:d};case"CLEAR_GAMEPAD_KEYS_DOWN":return{keysDown:new Map()};default:return a}}function i(a,b){a=a.get(b);if(a==null)throw c("FBLogger")("cloud_gaming").mustfixThrow("keysDown is undefined");return a}g.DefaultState=h;g.gamepad=a}),98);
__d("CloudGamingInGameStateReducer",["CloudGamingActionTypes","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h={gameState:"none"};function a(a,b){a===void 0&&(a=h);switch(b.type){case c("CloudGamingActionTypes").IN_GAME_STATE:if(c("gkx")("333")){var d=document.getElementById("gameState");if(!d){var e;d=document.createElement("div");d.id="gameState";d.hidden=!0;(e=document.body)==null?void 0:e.appendChild(d)}d&&(d.innerText=b.state)}return babelHelpers["extends"]({},a,{gameState:b.state})}return a}g.DefaultState=h;g.inGameState=a}),98);
__d("CloudGamingLocalCursorReducer",["CloudGamingActionTypes"],(function(a,b,c,d,e,f,g){"use strict";var h={screenPosX:.5,screenPosY:.5};function a(a,b){a===void 0&&(a=h);switch(b.type){case c("CloudGamingActionTypes").CURSOR_MOVEMENT:return babelHelpers["extends"]({},a,{screenPosX:b.screenPosX,screenPosY:b.screenPosY});default:break}return a}g.DefaultState=h;g.localCursor=a}),98);
__d("CloudGamingMultiTouchOverlayReducer",["CloudGamingActionTypes"],(function(a,b,c,d,e,f,g){"use strict";var h={primaryX:0,primaryY:0,secondaryX:0,secondaryY:0,showMultiTouchOverlay:!1};function a(a,b){a===void 0&&(a=h);switch(b.type){case c("CloudGamingActionTypes").SHOW_MULTI_TOUCH_OVERLAY:return babelHelpers["extends"]({},a,{showMultiTouchOverlay:!0});case c("CloudGamingActionTypes").HIDE_MULTI_TOUCH_OVERLAY:return babelHelpers["extends"]({},a,{showMultiTouchOverlay:!1});case c("CloudGamingActionTypes").SET_POINTERS_COORDINATES:return babelHelpers["extends"]({},a,{primaryX:b.primaryX,primaryY:b.primaryY,secondaryX:b.secondaryX,secondaryY:b.secondaryY});default:break}return a}g.DefaultState=h;g.multiTouchOverlay=a}),98);
__d("CloudGamingResolutionReducer",[],(function(a,b,c,d,e,f){"use strict";var g={height:1920,width:720};function a(a,b){a===void 0&&(a=g);switch(b.type){case"RECEIVED_SDP_ANSWER":return babelHelpers["extends"]({},a,{height:b.displaySize.height,width:b.displaySize.width});default:break}return a}f.DefaultState=g;f.resolution=a}),66);
__d("CloudGamingWarningAlertReducer",["CloudGamingActionTypes"],(function(a,b,c,d,e,f,g){"use strict";var h={warningDialogs:new Map(),warnings:new Map()};function a(a,b){a===void 0&&(a=h);switch(b.type){case c("CloudGamingActionTypes").WARNING_METRIC:var d=new Map(a.warnings);if(!d.has(b.name)){d.set(b.name,{buttonCallback:b.buttonCallback,buttonText:b.buttonText,value:b.value});return babelHelpers["extends"]({},a,{warnings:d})}break;case c("CloudGamingActionTypes").CLEAN_WARNING_METRIC:d=new Map(a.warnings);if(d.has(b.name)){d["delete"](b.name);return babelHelpers["extends"]({},a,{warnings:d})}break;case c("CloudGamingActionTypes").SHOW_WARNING_DIALOG:d=new Map(a.warningDialogs);if(!d.has(b.dialogType)){d.set(b.dialogType,{closeCallback:b.closeCallback});return babelHelpers["extends"]({},a,{warningDialogs:d})}break;case c("CloudGamingActionTypes").HIDE_WARNING_DIALOG:d=new Map(a.warningDialogs);if(d.has(b.dialogType)){d["delete"](b.dialogType);return babelHelpers["extends"]({},a,{warningDialogs:d})}break;default:return a}return a}g.DefaultState=h;g.warningAlert=a}),98);
__d("GameLifecycleReducer",["CloudGamingActionTypes"],(function(a,b,c,d,e,f,g){"use strict";var h={gameLifecycleState:"NotReady"};function a(a,b){a===void 0&&(a=h);switch(b.type){case c("CloudGamingActionTypes").GAME_READY:return babelHelpers["extends"]({},a,{gameLifecycleState:"Playing"});case c("CloudGamingActionTypes").PAUSE_GAME:return babelHelpers["extends"]({},a,{gameLifecycleState:"Paused"});case c("CloudGamingActionTypes").RESUME_GAME:return babelHelpers["extends"]({},a,{gameLifecycleState:"Playing"});case c("CloudGamingActionTypes").INACTIVATE_GAME:return babelHelpers["extends"]({},a,{gameLifecycleState:"Inactivated"});case c("CloudGamingActionTypes").REACTIVATE_GAME:return babelHelpers["extends"]({},a,{gameLifecycleState:"Playing"});case c("CloudGamingActionTypes").FINISH_GAME:return babelHelpers["extends"]({},a,{gameLifecycleState:"Timeout"});default:break}return a}g.DefaultState=h;g.gameLifecycle=a}),98);
__d("CloudGamingTypes",["CloudGamingContainerReducer","CloudGamingCoreTypes","CloudGamingGamepadReducer","CloudGamingInGameStateReducer","CloudGamingLocalCursorReducer","CloudGamingMultiTouchOverlayReducer","CloudGamingResolutionReducer","CloudGamingWarningAlertReducer","GameLifecycleReducer"],(function(a,b,c,d,e,f,g){"use strict";a=babelHelpers["extends"]({},d("CloudGamingCoreTypes").DefaultState,{container:d("CloudGamingContainerReducer").DefaultState,gameLifecycle:d("GameLifecycleReducer").DefaultState,gamepad:d("CloudGamingGamepadReducer").DefaultState,inGameState:d("CloudGamingInGameStateReducer").DefaultState,localCursor:d("CloudGamingLocalCursorReducer").DefaultState,multiTouchOverlay:d("CloudGamingMultiTouchOverlayReducer").DefaultState,resolution:d("CloudGamingResolutionReducer").DefaultState,warningAlert:d("CloudGamingWarningAlertReducer").DefaultState});g.DefaultState=a}),98);
__d("CloudGamingContext.react",["CloudGamingTypes","react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b={phase:"waiting_for_user_config",timestamp:0};c={connection:b,gameLifecycle:d("CloudGamingTypes").DefaultState.gameLifecycle.gameLifecycleState,initialResolutionHeight:d("CloudGamingTypes").DefaultState.resolution.height,initialResolutionWidth:d("CloudGamingTypes").DefaultState.resolution.width,resourceHeight:d("CloudGamingTypes").DefaultState.resource.size.resource.height,resourceWidth:d("CloudGamingTypes").DefaultState.resource.size.resource.width,showMultiTouchOverlay:d("CloudGamingTypes").DefaultState.multiTouchOverlay.showMultiTouchOverlay,viewportHeight:d("CloudGamingTypes").DefaultState.container.viewportHeight,viewportWidth:d("CloudGamingTypes").DefaultState.container.viewportWidth};e={connectionPhase:b.phase,mediaStream:d("CloudGamingTypes").DefaultState.media.mediaStream};f=babelHelpers["extends"]({},d("CloudGamingTypes").DefaultState.warningAlert,{browserOrientation:d("CloudGamingTypes").DefaultState.container.browserOrientation});var h=a.createContext(function(a){});c=a.createContext(c);e=a.createContext(e);d=a.createContext(d("CloudGamingTypes").DefaultState.multiTouchOverlay);a=a.createContext(f);g.DefaultConnectionState=b;g.CloudGamingDispatchContext=h;g.CloudGamingContentStateContext=c;g.CloudGamingVideoStreamStateContext=e;g.CloudGamingMultiTouchOverlayStateContext=d;g.CloudGamingWarningAlertStateContext=a}),98);
__d("CloudGamingMultiTouchOverlay.react",["CloudGamingContext.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useContext;function a(){var a=i(d("CloudGamingContext.react").CloudGamingContentStateContext),b=i(d("CloudGamingContext.react").CloudGamingMultiTouchOverlayStateContext),c=a.viewportWidth/2;a=a.viewportHeight/2;var e=b.primaryX,f=b.primaryY,g=b.secondaryX;b=b.secondaryY;return h.jsxs("svg",{className:"x5yr21d x47corl x10l6tqk xh8yej3 x1n327nk",children:[h.jsx("line",{className:"x1cy1n3u xnpr05h",x1:e,x2:c,y1:f,y2:a}),h.jsx("line",{className:"x1cy1n3u xnpr05h",x1:g,x2:c,y1:b,y2:a}),h.jsx("circle",{className:"x144hvv3 x1cy1n3u xat63qw xvlca1e",cx:e,cy:f,r:"20"}),h.jsx("circle",{className:"x170xcvm x1cy1n3u xkcscd8 x17ub4bw xnpr05h",cx:c,cy:a,r:"30"}),h.jsx("circle",{className:"x18t5km x1cy1n3u x17ub4bw xnpr05h",cx:c,cy:a,r:"7"}),h.jsx("circle",{className:"x144hvv3 x1cy1n3u xat63qw xvlca1e",cx:g,cy:b,r:"20"})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CloudGamingStreamLoading.react",["ix","CometIcon.react","CometLoadingAnimation.react","IconSource","TetraText.react","intlList","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useMemo,k={"Data Channel":h("497907"),"First Heartbeat":h("722869"),"Game Ready":h("608320"),"Resource Ready":h("514776"),"Server Connection":h("1072516"),"Video Stream":h("507229")};function a(a){var b=a.inPossibleLoadingState,d=a.isGameNotReady,e=a.isInsideIframe,f=a.message,g=a.pending;a=j(function(){var a=[];for(var b=g,d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;var h=f in k?k[f]:null;if(h==null)continue;h=new(c("IconSource"))("FB",h,24);a.push(i.jsx("div",{className:"x1xmf6yo x1emribx x1e56ztr x1i64zmx",children:i.jsx(c("CometIcon.react"),{icon:h})},f))}return a},[g]);var h=j(function(){return b?d?g.concat(["Game Ready"]):g:[]},[b,d,g]),l=j(function(){if(!b)return null;if(h.length>0){var a=c("intlList")(h);return"Waiting for "+a.toString()}return f},[b,h,f]);if(h.length===0&&l===null)return null;var m="Game Loading";return i.jsx("div",{className:"x6s0dn4 x14nfmen x78zum5 xdt5ytf x5yr21d xl56j7k x1ks1olk x10l6tqk xh8yej3 xhtitgo",style:{display:e?"block":"none"},children:i.jsxs("div",{className:"x1n2onr6 x2b8uid xwa60dl x1cb1t30",children:[i.jsx("div",{className:"x6s0dn4 x78zum5 x1q0g3np xc9qbxq xl56j7k x1n2onr6 xtzzx4i xuuh30 x14qfxbe",children:i.jsx(c("CometLoadingAnimation.react"),{size:36})}),i.jsx("div",{className:"x1xmf6yo x1emribx x1e56ztr x1i64zmx",children:i.jsx(c("TetraText.react"),{align:"center",color:"primary",type:"body1",children:m})}),i.jsx("div",{className:"x1xmf6yo x1emribx x1e56ztr x1i64zmx",children:i.jsx(c("TetraText.react"),{align:"center",color:"primary",type:"body2",children:l})}),i.jsx("div",{className:"x6s0dn4 x78zum5 x1q0g3np xl56j7k x1n2onr6 xh8yej3",children:a})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CloudGamingRTCAction",["CloudGamingActionTypes","CloudGamingWebRTCStatsCache","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=a.gameReady;if(b)return{isAndroidContainer:b.isAndroidContainer||!1,timestamp:Date.now(),type:c("CloudGamingActionTypes").GAME_READY};if(a.sdkMessage)return{message:JSON.parse(a.sdkMessage.data),type:c("CloudGamingActionTypes").CLIENT_RECEIVE_SDK_MESSAGE};if(a.inputFeedback)return{inputTimestamps:a.inputFeedback.inputTimestamps,rtpTimestamp:a.inputFeedback.rtpTimestamp,type:c("CloudGamingActionTypes").INPUT_FEEDBACK};if(a.serverState){b=a.serverState.data;if(b){b=b.game;if(b){var d=b.state;b=b.cursorState!=null?{icon:b.cursorState.icon,iconPool:b.cursorState.iconPool!=null?{hotspotX:b.cursorState.iconPool.hotspotX,hotspotY:b.cursorState.iconPool.hotspotY,image64:b.cursorState.iconPool.image64}:null,visible:b.cursorState.visible}:null;return{cursorState:b,state:d,type:c("CloudGamingActionTypes").IN_GAME_STATE}}}}return a.closeNotification?{reason:a.closeNotification.reason,time:a.closeNotification.time,type:c("CloudGamingActionTypes").CLOSE_NOTIFICATION}:null}function a(a){try{var b=i(a);if(b.type!=="UNPARSEABLE_RTC")return b;b=JSON.parse(a);b=h(b);return b?b:{data:a,type:"UNPARSEABLE_RTC"}}catch(b){return{data:a,type:"UNPARSEABLE_RTC"}}}function i(a){try{var b=JSON.parse(a);if(b.tick)return{heartbeat:{sequence:b.tick.sequenceNumber,timestamp:Date.now()},type:"SERVER_TICK"};else if(b.resourceClosed){b=b.resourceClosed;var d=c("nullthrows")(b.code);return{code:d,detail:(b=b.reason)!=null?b:j(d),type:"RESOURCE_CLOSED"}}return{data:a,type:"UNPARSEABLE_RTC"}}catch(b){return{data:a,type:"UNPARSEABLE_RTC"}}}function b(a){if(a instanceof Array)return{events:a.map(function(a){return{input:a}}),purpose:"input",type:"SEND_RTC"};else return{events:[{input:a}],purpose:"input",type:"SEND_RTC"}}function j(a){switch(a){case 1:return"You closed the window";case 2:return"You manually closed the session";case 3:return"There was an exception in the backend";case 4:return"The session was marked as done";case 5:return"The backend is shutting down";case 6:return"The session was destroyed with a Thrift call";case 7:return"The video streaming service detected that the viewer went away";case 8:return"The video streaming service detected that the resource went away";case 9:return"There was an error inside One World, which manages the resource";case 10:return"The backend detected a timeout. This can mean that you have been disconnected from the internet for a period of time";default:return"The resource closed for an unknown reason"}}function d(a){switch(a){case 1:return"Window Closed";case 2:return"User Requested";case 3:return"Exception in Server";case 4:return"Marked as done";case 5:return"Server shutting down";case 6:return"Destroy called";case 7:return"Browser peer lost";case 8:return"Resource peer lost";case 9:return"One World client died";case 10:return"Client heartbeat timeout";default:return"Unknown"}}function e(a,b){c("CloudGamingWebRTCStatsCache").logVideoFrame(b.receiveTime,b.presentationTime,b.presentedFrames),a.useDetailedFrameFeedback?a.sendRTCEvent("lifecycle",{frame:{pf:b.presentedFrames,pt:Math.trunc(b.presentationTime*1e3),rt:b.receiveTime==null?0:Math.trunc(b.receiveTime*1e3),ts:b.rtpTimestamp}}):a.useFrameFeedback&&a.sendRTCEvent("lifecycle",{frame:{ts:b.rtpTimestamp}})}g.getActionFromChannelMessage=a;g.getBaseActionFromChannelMessage=i;g.sendInputEvent=b;g.resourceClosedCodeToMessage=j;g.resourceClosedReasonFromCode=d;g.handleVideoFrameEvent=e}),98);
__d("CloudGamingKeyboardAction",["CloudGamingRTCAction","EventTimeUtils","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=new Set();a.metaKey&&b.add(1);a.ctrlKey&&b.add(0);return b}var i=86,j=91,k=93,l=162,m=163;function n(a,b,c){switch(a){case j:case k:return{direction:b,modifier:1,timestamp:c,type:"MODIFIER_KEY"};case l:case m:return{direction:b,modifier:0,timestamp:c,type:"MODIFIER_KEY"};default:return{code:a,direction:b,timestamp:c,type:"KEY"}}}function o(a,b,c){b=Array.from(b)[0];if(b==null)return null;c=c[""+b];if(c==null)return null;b=c[""+a];return b==null?null:b}function p(a,b,c,d,e){var f=n(a,b,e);if(f.type==="MODIFIER_KEY")return[[f],!1];if(c.size>0){a=o(a,c,d);if(a==null)return[[],!1];return b==="up"?[[],!0]:[[{code:a,direction:"down",timestamp:e,type:"KEY"},{code:a,direction:"up",timestamp:e,type:"KEY"}],!0]}switch(f.type){case"KEY":return[[f],!0]}return[[],!1]}function q(a){var b=a.keyCode,c=a.code;switch(a.keyCode){case j:b=l;c="ControlLeft";break;case k:b=m;c="ControlRight";break}return[b,c]}a=function(a,b){return[{key:{code:"",direction:1,jsCode:a,timestamp:b}},{key:{code:"",direction:0,jsCode:a,timestamp:b}}]};b=function(a,b,c){return r("down",a,b,c)};e=function(a,b,c){return r("up",a,b,c)};var r=function(a,b,e,f){return function(g,j){var k=d("EventTimeUtils").tryGetTimestampInMicroSecond();if(f&&b.keyCode===i&&a==="down"&&(b.metaKey||b.ctrlKey)){b.preventDefault();c("promiseDone")(navigator.clipboard.readText().then(function(a){g(d("CloudGamingRTCAction").sendInputEvent({text:{content:a,source:"Paste",timestamp:k}}))}));return}if(e){j=p(b.keyCode,a,h(b),j().resource.modifierMap,k);var l=j[0];j=j[1];j&&b.preventDefault();for(var j=l,l=Array.isArray(j),m=0,j=l?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n;if(l){if(m>=j.length)break;n=j[m++]}else{m=j.next();if(m.done)break;n=m.value}n=n;switch(n.type){case"KEY":g(d("CloudGamingRTCAction").sendInputEvent({key:{code:b.code,direction:n.direction==="down"?1:0,jsCode:n.code,timestamp:k}}));g(n);continue;default:g(n);continue}}}else{b.preventDefault();n=q(b);m=n[0];l=n[1];g(d("CloudGamingRTCAction").sendInputEvent({key:{code:l,direction:a==="down"?1:0,jsCode:m,timestamp:k}}));j={code:m,direction:a,timestamp:k,type:"KEY"};g(j)}}};g.mapToAction=n;g.mapModifier=o;g.keyboardEventAction=p;g.buttonEvent=a;g.sendKeyDown=b;g.sendKeyUp=e}),98);
__d("CloudGamingMouseAction",["ApertureMapTouch","CloudGamingMouseReducer","CloudGamingRTCAction","EventTimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=10,i=function(a){return{touch:a}};a=function(a){return{relativeMove:a}};var j=function(a){return{wheel:a}};function k(){var a;a=(a=navigator.userAgent)!=null?a:"";return!!a.match(/iPad/i)||!!a.match(/iPhone/i)}function l(a,b){var c=!1,d=null,e=a;for(var f=0;f<h;f++){var g=b[f.toString()];if(g===a){e=f;c=!0;break}else d==null&&g==null&&(d=f)}if(!c){e=(g=d)!=null?g:100}return e}var m=function(a,b){return function(c,e){b.preventDefault();var f=e();a(b,f.resource.size.display,f.resource.size.contentSize).map(function(a){var b,e=a.index;k()&&(e=l(e,f.mouse.indexPool));b=(b=f.mouse[e.toString()])!=null?b:d("CloudGamingMouseReducer").DefaultTouchState;if((a.type==="MOUSE_MOVE"||a.type==="MOUSE_UP")&&!b.pressingDown)return;b={};a.type==="MOUSE_MOVE"?b=babelHelpers["extends"]({},a,{index:e,type:"MOUSE_MOVE"}):a.type==="MOUSE_UP"?b=babelHelpers["extends"]({},a,{index:e,type:"MOUSE_UP"}):b=babelHelpers["extends"]({},a,{index:e,type:"MOUSE_DOWN"});c(d("CloudGamingRTCAction").sendInputEvent(i({direction:b.type==="MOUSE_UP"?0:1,index:e,timestamp:a.timestamp,x:b.position.x,y:b.position.y})));c(b)})}},n=function(a,b){return function(c,e){e=e();a(b,e.resource.size.display,e.resource.size.contentSize).map(function(a){var e=a.index,f=babelHelpers["extends"]({},a,{index:e,type:"MOUSE_WHEEL"});c(d("CloudGamingRTCAction").sendInputEvent(j({index:e,timestamp:a.timestamp,wheel:b.deltaY,x:f.position.x,y:f.position.y})))})}};b=function(a){return m(d("ApertureMapTouch").mouseUp,a)};c=function(a){return m(d("ApertureMapTouch").mouseDown,a)};e=function(a){return m(d("ApertureMapTouch").mouseMove,a)};f=function(a){return m(d("ApertureMapTouch").mouseUp,a)};var o=function(a){return a.buttons!==0?m(d("ApertureMapTouch").mouseDown,a):function(){}},p=function(a){return n(d("ApertureMapTouch").mouseWheel,a)},q=function(a){return m(d("ApertureMapTouch").mouseUp,a)},r=function(a){return m(d("ApertureMapTouch").mouseDown,a)},s=function(a){return m(d("ApertureMapTouch").mouseMove,a)},t=function(a,b){if(k()){var c=b(),e=c.mouse.indexPool;for(var f=0;f<h;f++){var g=e[f.toString()];if(g!=null){var j=c.mouse[f.toString()],l=d("EventTimeUtils").tryGetTimestampInMicroSecond();a({index:f,originalIndex:g,position:j.lastPosition,timestamp:l,type:"MOUSE_UP"});a(d("CloudGamingRTCAction").sendInputEvent(i({direction:0,index:f,timestamp:l,x:j.lastPosition.x,y:j.lastPosition.y})))}}}a(d("CloudGamingRTCAction").sendInputEvent(Array.from(b().keyboard.keysDown).map(function(a){return{key:{code:"",direction:0,jsCode:a,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond()}}})));a({timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),type:"CLEAR_KEYS_DOWN"})};g.mouseEvent=i;g.relativeMoveEvent=a;g.wheelEvent=j;g.sendMouseUp=b;g.sendMouseDown=c;g.sendMouseMove=e;g.sendMouseUpWhenOut=f;g.sendMouseDownWhenEnter=o;g.sendMouseWheel=p;g.sendTouchEnd=q;g.sendTouchStart=r;g.sendTouchMove=s;g.onBlur=t}),98);
__d("CloudGamingVideoComponent.react",["CloudGamingActionTypes","CloudGamingConstants","CloudGamingContext.react","CloudGamingMessageReceiver","FBLogger","UserAgent","Visibility","assignMediaStream","fbinstant/releases/samus/internalStates.samus","react","useFullscreen"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useContext,k=b.useEffect,l=b.useRef,m=b.useState;function a(a){var b=a.eventBus,e=a.mediaStream,f=a.onError,g=a.onEventBlur,n=a.onEventKeyDown,o=a.onEventKeyUp,p=a.onEventMouseDown,q=a.onEventMouseEnter,r=a.onEventMouseMove,s=a.onEventMouseOut,t=a.onEventMouseUp,u=a.onEventTouchEnd,v=a.onEventTouchMove,w=a.onEventTouchStart,x=a.onEventWheel,y=a.onPlay;a=a.onReady;var z=l(),A=l(),B=m(!1),C=B[0],D=B[1];B=m(!0);var E=B[0],F=B[1],G=l();B=m(!0);var H=B[0],I=B[1],J=j(d("CloudGamingContext.react").CloudGamingDispatchContext),K=l(!1);B=c("useFullscreen")();B=B.isFullscreen;k(function(){var a=z.current;if(a){a.addEventListener("keyup",o);return function(){a.removeEventListener("keyup",o)}}},[o]);k(function(){var a=z.current;if(a){a.addEventListener("keydown",n);return function(){a.removeEventListener("keydown",n)}}},[n]);k(function(){var a=z.current;if(a){var b=function(a){return s(a)};a.addEventListener("mouseout",b);return function(){a.removeEventListener("mouseout",b)}}},[s]);k(function(){var a=z.current;if(a){var b=function(a){return q(a)};a.addEventListener("mouseenter",b);return function(){a.removeEventListener("mouseenter",b)}}},[q]);k(function(){var a=z.current;if(a){a.addEventListener("blur",g);return function(){a.removeEventListener("blur",g)}}},[g]);k(function(){z.current&&(H&&z.current.focus({preventScroll:!0}))},[H]);k(function(){var a=function(){D(function(a){return!a})},e=function(a){D(a)};b==null?void 0:b.on(d("CloudGamingConstants").CloudGamingMessageTypes.TOGGLE_AUDIO,a);b==null?void 0:b.on(d("CloudGamingConstants").CloudGamingMessageTypes.MUTE_AUDIO,function(){return e(!0)});b==null?void 0:b.on(d("CloudGamingConstants").CloudGamingMessageTypes.UNMUTE_AUDIO,function(){return e(!1)});b==null?void 0:b.on(d("CloudGamingConstants").CloudGamingMessageTypes.DISABLE_FOCUS,function(){I(!1)});b==null?void 0:b.on(d("CloudGamingConstants").CloudGamingMessageTypes.ENABLE_FOCUS,function(){I(!0)});if(!G.current){G.current=new(c("CloudGamingMessageReceiver"))(function(b){b===d("CloudGamingConstants").CloudGamingMessageTypes.TOGGLE_AUDIO?a():b===d("CloudGamingConstants").CloudGamingMessageTypes.DISABLE_FOCUS?I(!1):b===d("CloudGamingConstants").CloudGamingMessageTypes.ENABLE_FOCUS&&I(!0)});return function(){G.current!=null&&(G.current.clean(),G.current=null)}}},[b]);k(function(){var a=A.current;if(!(a instanceof HTMLVideoElement))return;"requestVideoFrameCallback"in HTMLVideoElement.prototype&&(a.hasAttribute("cgVideoFrameCallbackAttached")||(a.setAttribute("cgVideoFrameCallbackAttached","true"),a.requestVideoFrameCallback(function b(d,e){if(e.rtpTimestamp!=null){d=e.rtpTimestamp;J({presentationTime:e.presentationTime,presentedFrames:e.presentedFrames,receiveTime:e.receiveTime,rtpTimestamp:d,type:c("CloudGamingActionTypes").VIDEO_FRAME})}a.requestVideoFrameCallback(b)})));try{a.readyState<2&&c("assignMediaStream")(a,e),a.play().then(function(){K.current=!0;J({type:C||!E?c("CloudGamingActionTypes").AUDIO_MUTED:c("CloudGamingActionTypes").AUDIO_UNMUTED});var a=C||!E?d("CloudGamingConstants").CloudGamingMessageTypes.START_MUTED:d("CloudGamingConstants").CloudGamingMessageTypes.START_UNMUTED;c("fbinstant/releases/samus/internalStates.samus").getMessageSender().send(a);b==null?void 0:b.send(a);!C&&E&&(b==null?void 0:b.send(d("CloudGamingConstants").CloudGamingMessageTypes.VIDEO_PLAY))})["catch"](function(a){D(!0),J({type:c("CloudGamingActionTypes").AUDIO_MUTED})})}catch(a){c("FBLogger")("cloud_gaming").catching(a).warn("Encountered error while calling assignMediaStream")}},[C,E,b,J,e,B]);k(function(){var a=c("Visibility").addListener(c("Visibility").VISIBLE,function(){F(!0)}),b=c("Visibility").addListener(c("Visibility").HIDDEN,function(){F(!1)});return function(){c("Visibility").removeListener(a),c("Visibility").removeListener(b)}},[]);var L=i(function(){if(z&&H){var a=z.current;a&&a.focus({preventScroll:!0})}},[H]);B=i(function(){if(A.current instanceof HTMLVideoElement){var a,b;a=(a=A.current)==null?void 0:(a=a.error)==null?void 0:a.code;b=(b=A.current)==null?void 0:(b=b.error)==null?void 0:b.message;c("FBLogger")("cloud_gaming").warn("Encountered error while rendering video, %s, %s",a,b);f!=null&&f()}},[f]);return h.jsx("div",{className:"x18o3ruo x1rg5ohu x5yr21d xohozt6 xh8yej3 x1uvtmcs","data-playing":K.current,"data-testid":void 0,id:"ApertureVideoComponent",ref:z,tabIndex:-1,children:E?h.jsx("video",{autoPlay:!0,className:"x5yr21d x1w3sd2b xh8yej3",disablePictureInPicture:!0,muted:C||!E,onContextMenu:function(a){a.preventDefault()},onError:B,onLoadedMetadata:a,onMouseDown:function(a){L(),p(a)},onMouseMove:r,onMouseUp:function(a){L(),t(a)},onPlay:y,onTouchEnd:function(a){L(),u(a)},onTouchMove:v,onTouchStart:function(a){L(),w(a)},onWheel:x,playsInline:c("UserAgent").isPlatform("iOS"),ref:A,style:{WebkitUserSelect:"none"}}):null})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CloudGamingVideoStream.react",["CloudGamingActionTypes","CloudGamingConstants","CloudGamingContext.react","CloudGamingKeyboardAction","CloudGamingMouseAction","CloudGamingVideoComponent.react","CometFullScreen","Visibility","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useContext,k=b.useEffect,l=b.useRef;e=27;var m=[e];function a(a){var b=a.appID,e=a.eventBus,f=a.forceVideoHidden,g=a.manageKeyModifiers,n=a.onError,o=a.provider,p=a.sendCustomMouseEvent,q=a.sendCustomTouchEvent,r=a.sendMultiTouchKeyDown,s=a.sendMultiTouchKeyUp,t=a.sendMultiTouchMouseDown,u=a.sendMultiTouchMouseMove,v=a.sendMultiTouchMouseUp,w=j(d("CloudGamingContext.react").CloudGamingVideoStreamStateContext),x=j(d("CloudGamingContext.react").CloudGamingDispatchContext);a=w.mediaStream;var y=function(){if(f)return!1;switch(w.connectionPhase){case"live":return!0;case"connecting":return!0;default:return!1}},z=l([]),A=i(function(a){var b=z.current.indexOf(a.keyCode);if(m.includes(a.keyCode)&&(o==="GREDOS"&&d("CometFullScreen").isFullScreen()||b!==-1)){b===-1&&z.current.push(a.keyCode);return!1}return!0},[o]),B=i(function(a){var b=z.current.indexOf(a.keyCode);if(m.includes(a.keyCode)&&b!==-1){z.current.splice(b,1);if(d("CometFullScreen").isFullScreen()){x(d("CloudGamingKeyboardAction").sendKeyDown(a,g!==!1,!1));return!0}else return!1}return!0},[x,g]),C=function(a){u!=null?u(a):p!=null?p(a):x(d("CloudGamingMouseAction").sendMouseMove(a))},D=i(function(a){v!=null?v(a):p!=null?p(a):x(d("CloudGamingMouseAction").sendMouseUpWhenOut(a))},[x,p,v]),E=i(function(a){p!=null?p(a):x(d("CloudGamingMouseAction").sendMouseDownWhenEnter(a))},[x,p]),F=function(a){N.current=!1,q!=null?q(a):x(d("CloudGamingMouseAction").sendTouchStart(a)),a.preventDefault(),a.stopPropagation()},G=i(function(a){r!=null?r(a):A(a)&&x(d("CloudGamingKeyboardAction").sendKeyDown(a,g!==!1,!1))},[x,g,r,A]),H=i(function(a){s!=null?s(a):B(a)&&x(d("CloudGamingKeyboardAction").sendKeyUp(a,g!==!1,!1))},[x,g,s,B]),I=l(!0),J=function(a){t!=null?t(a):p!=null?(I.current===!0&&Object.values(d("CloudGamingConstants").HorizonAppIDs).includes(b)&&(e==null?void 0:e.send(d("CloudGamingConstants").CloudGamingMessageTypes.UNMUTE_AUDIO),x({type:c("CloudGamingActionTypes").AUDIO_UNMUTED}),I.current=!1),p(a)):x(d("CloudGamingMouseAction").sendMouseDown(a))},K=function(a){v!=null?v(a):p!=null?p(a):x(d("CloudGamingMouseAction").sendMouseUp(a))},L=l(!0),M=function(a){q!=null?(L.current===!0&&N.current===!1&&Object.values(d("CloudGamingConstants").HorizonAppIDs).includes(b)&&(e==null?void 0:e.send(d("CloudGamingConstants").CloudGamingMessageTypes.UNMUTE_AUDIO),x({type:c("CloudGamingActionTypes").AUDIO_UNMUTED}),L.current=!1),q(a)):x(d("CloudGamingMouseAction").sendTouchEnd(a)),a.preventDefault(),a.stopPropagation()},N=l(!1),O=function(a){N.current=!0,q!=null?q(a):x(d("CloudGamingMouseAction").sendTouchMove(a)),a.preventDefault(),a.stopPropagation()},P=i(function(){x(d("CloudGamingMouseAction").onBlur)},[x]),Q=function(a){x(d("CloudGamingMouseAction").sendMouseWheel(a))};k(function(){var a=c("Visibility").addListener(c("Visibility").VISIBLE,function(){L.current=!0});return function(){c("Visibility").removeListener(a)}},[]);return!a||!y()?null:h.jsx(c("CloudGamingVideoComponent.react"),{eventBus:e,mediaStream:a,onError:n,onEventBlur:P,onEventKeyDown:G,onEventKeyUp:H,onEventMouseDown:J,onEventMouseEnter:E,onEventMouseMove:C,onEventMouseOut:D,onEventMouseUp:K,onEventTouchEnd:M,onEventTouchMove:O,onEventTouchStart:F,onEventWheel:Q})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CloudGamingVirtualKeyboard.react",["CloudGamingConstants","CloudGamingWarningAlertAction","InstantGamesPWAUtils","UserAgent","react","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i="\b",j="\n",k="",l=!1;function m(){var a=document.getElementById("VirtualKeyboard");return a!=null&&a instanceof HTMLInputElement?a:null}var n=!1;function a(){return n}function b(a){n=!0,a&&(a(d("CloudGamingWarningAlertAction").createWarningMetricAction("TOUCH_SCREEN_TO_OPEN_KEYBOARD",1)),c("setTimeout")(function(){a(d("CloudGamingWarningAlertAction").createCleanWarningMetricAction("TOUCH_SCREEN_TO_OPEN_KEYBOARD"))},2e3))}function e(a){return!c("UserAgent").isPlatform("Android")&&(a===String(412378670482)||d("InstantGamesPWAUtils").isInPWA()||a===String(351299233827255))}function o(){var a=m();return a!=null?a===document.activeElement:!1}function p(){var a=!o();q(a);return a}function q(a){n=!1;var b=m();if(b!=null){var c=document.activeElement===b;a!==c&&(l=a,a?(window.postMessage({type:d("CloudGamingConstants").CloudGamingMessageTypes.DISABLE_FOCUS},"/"),k="",b.value="",b.focus(),b.click()):(window.postMessage({type:d("CloudGamingConstants").CloudGamingMessageTypes.ENABLE_FOCUS},"/"),b.blur()))}}function r(a){var b=a.listener;a=function(a){if(b){a=a.target.value;var c=a.length,d=k.length,e=d,f=Math.min(d,c),g="";for(var h=0;h<f;++h){if(k[h]!==a[h])break;--e}for(f=0;f<e;++f)g+=i;h=d-e;k=a;g+=a.substring(h,c);g.length>0&&b.onIMEEvent(g)}};var c=function(a){if(b){var c="";switch(a.keyCode){case 8:c=i;break;case 13:c=j;q(!1);break}c.length>0&&b.onIMEEvent(c)}},d=function(){if(!l){var a=m();a!=null&&a.blur()}};d=h.jsx("input",{id:"VirtualKeyboard",onFocus:d,onInput:a,onKeyUp:c,tabIndex:"-1",type:"text"});return h.jsx("div",{className:"x1i10hfl xpdipgo x1winvzj xjm9jq1 xl56j7k x1a2a7pz x6ikm8r x10wlt62 x10l6tqk xd665xh x80663w x87ps6o x1i1rx1s",children:d})}r.displayName=r.name+" [from "+f.id+"]";g.getOpenSoftKeyboardRequested=a;g.setOpenSoftKeyboardRequested=b;g.openKeyboardDelayed=e;g.isVirtualKeyboardVisible=o;g.switchVirtualKeyboard=p;g.showVirtualKeyboard=q;g.CloudGamingVirtualKeyboard=r}),98);
__d("CloudGamingMessageParentDelegate",["SecurePostMessage"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var b=window.parent;if(!b)return;var c=new RegExp("[?&]source(=([^&#]*)|&|#|$)","i");c=c.exec(window.location.href);c=c&&c[2]&&decodeURIComponent(c[2].replace(/\+/g," "));d("SecurePostMessage").sendMessageAllowAnyOrigin_UNSAFE(b,{content:a.content,destination:c,type:a.type})};b=a;g["default"]=b}),98);
__d("CloudGamingMessageSender",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.send=function(a){this.$1(a)};return a}();f["default"]=a}),66);
__d("VirtualGamepadAuxFunctions",[],(function(a,b,c,d,e,f){"use strict";var g={A:4096,B:8192,BACK:32,DPAD_DOWN:2,DPAD_LEFT:4,DPAD_RIGHT:8,DPAD_UP:1,HOME:1024,LEFT_SHOULDER:256,LEFT_THUMB:64,RIGHT_SHOULDER:512,RIGHT_THUMB:128,START:16,X:16384,Y:32768};function a(a){var b=1;if(a.length===9){a="0x"+a[7]+a[8];b=+(parseInt(a,16)/255).toFixed(3)}return b}function b(a,b,c){a=a*a+b*b;b=c*c;return a<=b?!0:!1}function c(a,b,c,d){return Math.abs(a)<=c/2&&Math.abs(b)<=d/2?!0:!1}function d(){try{return window.self!==window.top}catch(a){return!0}}function e(a,b){return{isPointInside:!0,xAxis:0,yAxis:0}}var h="EventTypeButton",i="EventTypeTriggerLeft",j="EventTypeTriggerRight",k="EventTypeJoystickLeft",l="EventTypeJoystickRight",m="EventTypeJoystickLeftPositiveXAxis",n="EventTypeJoystickLeftNegativeXAxis",o="EventTypeJoystickLeftPositiveYAxis",p="EventTypeJoystickLeftNegativeYAxis",q="EventTypeJoystickRightPositiveXAxis",r="EventTypeJoystickRightNegativeXAxis",s="EventTypeJoystickRightPositiveYAxis",t="EventTypeJoystickRightNegativeYAxis",u="EventTypeSwitchGyroscope",v="EventTypeSwitchKeyboard";f.XINPUT_GAMEPAD=g;f.hexToAlpha=a;f.checkPointInsideCircle=b;f.checkPointInsideRectangle=c;f.checkInIframe=d;f.onTouchMoveDefault=e;f.EventTypeButton=h;f.EventTypeTriggerLeft=i;f.EventTypeTriggerRight=j;f.EventTypeJoystickLeft=k;f.EventTypeJoystickRight=l;f.EventTypeJoystickLeftPositiveXAxis=m;f.EventTypeJoystickLeftNegativeXAxis=n;f.EventTypeJoystickLeftPositiveYAxis=o;f.EventTypeJoystickLeftNegativeYAxis=p;f.EventTypeJoystickRightPositiveXAxis=q;f.EventTypeJoystickRightNegativeXAxis=r;f.EventTypeJoystickRightPositiveYAxis=s;f.EventTypeJoystickRightNegativeYAxis=t;f.EventTypeSwitchGyroscope=u;f.EventTypeSwitchKeyboard=v}),66);
__d("CloudGamingVirtualWidget.react",["CloudGamingConstants","CloudGamingMessageParentDelegate","CloudGamingMessageSender","UserAgent","VirtualGamepadAuxFunctions","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=new(c("CloudGamingMessageSender"))(c("CloudGamingMessageParentDelegate"));function j(a){var b=0;a.restXAxis!==void 0&&(b=a.restXAxis);return b}function k(a){var b=0;a.restYAxis!==void 0&&(b=a.restYAxis);return b}a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.state={isPressed:!1,timestamp:c.props.timestamp,toggleModeActive:!1,toggleTimeout:null,xAxis:j(c.props),yAxis:k(c.props)};c.canvasRef=h.createRef();c.stickCanvasRef=h.createRef();c.isToggle=c.props.isToggle;c.toggleTime=c.props.toggleTime;c.touchId=-1;c.checkToggleMode=function(){var a=!c.state.toggleModeActive;c.vibrateOnPress(!0);c.setState(function(b){return babelHelpers["extends"]({},b,{isPressed:!0,toggleModeActive:a})},function(){return c.props.callback(babelHelpers.assertThisInitialized(c))})};c.onTouchEnd=function(a){if(c.touchId!==-1){c.touchId=-1;c.state.toggleTimeout!=null&&window.clearTimeout(c.state.toggleTimeout);c.props.onTouchEnd&&c.props.onTouchEnd(a);var b=!1,d=j(c.props),e=k(c.props);c.isToggle&&(b=c.state.toggleModeActive,d=c.state.xAxis,e=c.state.yAxis);c.setState(function(a){return babelHelpers["extends"]({},a,{isPressed:b,xAxis:d,yAxis:e})},function(){return c.props.callback(babelHelpers.assertThisInitialized(c))})}};c.getIntersectionInfo=function(a,b){var d=c.canvasRef.current;if(d!=null){d=d.getBoundingClientRect();var e=d.width,f=d.height;return{h:f,w:e,x:a-d.left-e*.5,y:b-d.top-f*.5}}return{h:1,w:1,x:a-c.props.positionX,y:b-c.props.positionY}};c.$1=function(a){var b=a.changedTouches;for(var d=0;d<b.length;++d){var e=a.changedTouches[d],f=e.clientX,g=e.clientY;f=c.props.onTouchStart(f,g,e.identifier);g=!0;if(f.isPointInside){a.preventDefault();c.touchId=e.identifier;e=null;c.isToggle&&(g=!c.state.toggleModeActive,c.state.toggleTimeout!=null&&window.clearTimeout(c.state.toggleTimeout),e=window.setTimeout(function(){c.checkToggleMode()},c.toggleTime*1e3));c.vibrateOnPress(!0);c.setState({isPressed:g,toggleTimeout:e,xAxis:f.xAxis,yAxis:f.yAxis},function(){return c.props.callback(babelHelpers.assertThisInitialized(c))});break}}};c.$2=function(a){if(c.touchId!==-1){var b=a.changedTouches;for(var d=0;d<b.length;++d){var e=a.changedTouches[d];if(e.identifier===c.touchId){var f=function(){var b=e.clientX,d=e.clientY,f=c.props.onTouchMove(b,d);f.isPointInside?(a.preventDefault(),c.setState(function(a){return babelHelpers["extends"]({},a,{xAxis:f.xAxis,yAxis:f.yAxis})},function(){return c.props.callback(babelHelpers.assertThisInitialized(c))})):c.onTouchEnd(a);return"break"}();if(f==="break")break}}}};c.$3=function(a){if(c.touchId!==-1){var b=a.changedTouches;for(var d=0;d<b.length;++d){var e=a.changedTouches[d];if(e.identifier===c.touchId){a.preventDefault();c.onTouchEnd(a);break}}}};c.$4=function(a){if(c.touchId!==-1){var b=a.changedTouches;for(var d=0;d<b.length;++d){var e=a.changedTouches[d];if(e.identifier===c.touchId){a.preventDefault();c.onTouchEnd(a);break}}}};c.$5=function(a){var b=a.clientX;a=a.clientY;b=c.props.onTouchStart(b,a,0);if(b.isPointInside){c.touchId=0;a=!0;c.isToggle&&(a=!c.state.toggleModeActive);c.setState({isPressed:a,xAxis:b.xAxis,yAxis:b.yAxis},function(){return c.props.callback(babelHelpers.assertThisInitialized(c))})}};c.$6=function(a){c.touchId!==-1&&c.onTouchEnd(a)};c.$7=function(a){if(c.touchId!==-1){var b=a.clientX;a=a.clientY;b=c.props.onTouchMove(b,a);b.isPointInside&&c.setState({xAxis:b.xAxis,yAxis:b.yAxis},function(){return c.props.callback(babelHelpers.assertThisInitialized(c))})}};c.$8=function(){var a=c.props.color;c.state.isPressed&&(a=c.state.toggleModeActive&&c.props.toggleColor!==void 0?c.props.toggleColor:c.props.colorPress);if(c.props.sliderLength!==void 0&&c.props.orientation!==void 0&&c.props.stickImg!==void 0&&c.props.img!==void 0)c.updateSliderCanvas(c.canvasRef.current,c.props.positionX,c.props.positionY,c.props.scale,a,c.props.sliderLength,c.props.orientation,c.props.img,c.props.stickImg);else if(c.props.img!==void 0){var b=c.props.img.width*c.props.scale,d=c.props.img.height*c.props.scale;c.props.stickImg!==void 0&&(b=c.props.stickImg.width*c.props.scale*2,d=c.props.stickImg.height*c.props.scale*2);c.updateCanvas(c.canvasRef.current,c.props.positionX,c.props.positionY,b,d,a,c.props.img)}if(c.props.stickImg!==void 0){b=c.props.img?c.props.img.width:0;d=b*.5*c.props.scale;c.props.sliderLength!==void 0&&(b=c.props.sliderLength,d=b*.5);c.props.actionRatio!==void 0&&c.props.actionRatio>0&&(d*=c.props.actionRatio);b=c.props.positionX+c.state.xAxis*d;d=c.props.positionY+c.state.yAxis*d;var e=c.props.stickImg.width*c.props.scale,f=c.props.stickImg.height*c.props.scale;c.updateCanvas(c.stickCanvasRef.current,b,d,e,f,a,c.props.stickImg)}};c.$9=function(){return!1};c.props.callback(babelHelpers.assertThisInitialized(c));return c}var e=b.prototype;e.componentDidMount=function(){this.$8()};e.componentDidUpdate=function(){this.$8()};e.isPressed=function(){return this.state.isPressed};e.getXAxis=function(){return this.state.xAxis};e.getYAxis=function(){return this.state.yAxis};e.updateCanvas=function(a,b,c,e,f,g,h){if(a){a.width=e;a.height=f;e=a.getContext("2d");e.clearRect(0,0,a.width,a.height);f="#"+g;g=d("VirtualGamepadAuxFunctions").hexToAlpha(f)*this.props.disabledAlpha;e.globalAlpha=g;e.drawImage(h,0,0,a.width,a.height);e.globalCompositeOperation="source-atop";e.fillStyle=f;e.fillRect(0,0,a.width,a.height);e.globalCompositeOperation="source-over";a.style.position="absolute";a.style.left=b-a.width/2+"px";a.style.top=c-a.height/2+"px"}};e.updateSliderCanvas=function(a,b,c,e,f,g,h,i,j){if(a){var k=0,l=0,m=j.width*e;j=j.height*e;e=m*2*.2;var n=j*2*.2;a.width=m;a.height=j;switch(h){case"UP":case"DOWN":n=g;k=(m-e)/2;l=0;a.height=n;break;default:k=0;l=(j-n)/2;e=g;a.width=e;break}h=a.getContext("2d");h.clearRect(k,l,e,n);m="#"+f;j=d("VirtualGamepadAuxFunctions").hexToAlpha(m)*this.props.disabledAlpha;h.globalAlpha=j;h.drawImage(i,k,l,e,n);h.globalCompositeOperation="source-atop";h.fillStyle=m;h.fillRect(k,l,e,n);h.globalCompositeOperation="source-over";a.style.position="absolute";a.style.left=b-a.width/2+"px";a.style.top=c-a.height/2+"px"}};e.vibrateOnPress=function(a){a&&this.props.vibration>0&&c("UserAgent").isPlatform("Android")&&(d("VirtualGamepadAuxFunctions").checkInIframe()?i.send({type:d("CloudGamingConstants").CloudGamingMessageTypes.ACTIVE_VIBRATION}):window.navigator.vibrate(this.props.vibration))};e.render=function(){if(this.props.enable)if(this.props.stickImg!==void 0)return h.jsxs("div",{onMouseDown:this.$5,onMouseMove:this.$7,onMouseUp:this.$6,onSelectStart:this.$9,onTouchCancel:this.$4,onTouchEnd:this.$3,onTouchMove:this.$2,onTouchStart:this.$1,children:[h.jsx("canvas",{className:"x1i10hfl xpdipgo x1winvzj x1a2a7pz x10l6tqk x87ps6o x1vjfegm",ref:this.canvasRef}),h.jsx("canvas",{className:"x1i10hfl xpdipgo x1winvzj x1a2a7pz x10l6tqk x87ps6o x1vjfegm",ref:this.stickCanvasRef})]});else return h.jsx("canvas",{className:"x1i10hfl xpdipgo x1winvzj x1a2a7pz x10l6tqk x87ps6o x1vjfegm",onMouseDown:this.$5,onMouseMove:this.$7,onMouseUp:this.$6,onSelectStart:this.$9,onTouchCancel:this.$4,onTouchEnd:this.$3,onTouchMove:this.$2,onTouchStart:this.$1,ref:this.canvasRef});return null};return b}(h.PureComponent);g["default"]=a}),98);
__d("CloudGamingVirtualButton.react",["CloudGamingLogUtils","CloudGamingVirtualKeyboard.react","CloudGamingVirtualWidget.react","VirtualGamepadAuxFunctions","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.widgetRef=h.createRef();c.onTouchStart=function(a,b,e){e={isPointInside:!1,xAxis:0,yAxis:0};var f=c.widgetRef.current;if(f!=null){f=f.getIntersectionInfo(a,b);switch(c.props.shape){case"CIRCLE":a=f.w*.5;e.isPointInside=d("VirtualGamepadAuxFunctions").checkPointInsideCircle(f.x,f.y,a);break;case"RECTANGLE":e.isPointInside=d("VirtualGamepadAuxFunctions").checkPointInsideRectangle(f.x,f.y,f.w,f.h);break}}return e};c.checkOpenKeyboard=function(a){var b=c.props.eventInfo;for(var e=0;e<b.length;++e){var f=b[e];f.type===d("VirtualGamepadAuxFunctions").EventTypeSwitchKeyboard&&(d("CloudGamingVirtualKeyboard.react").showVirtualKeyboard(!0),a.preventDefault(),a.stopPropagation(),d("CloudGamingLogUtils").logEvent("SOFT_KEYBOARD_SHOWN",c.props.appID,c.props.cloudGameID,c.props.clientAppID,c.props.sessionID,new Map([["virtualGamepad_hidden_effect_timer","disabledTimeout"]])))}};return c}var e=b.prototype;e.isPressed=function(){return this.widgetRef.current?this.widgetRef.current.isPressed():!1};e.getEventInfo=function(){return this.props.eventInfo};e.render=function(){var a=this;return h.jsx(c("CloudGamingVirtualWidget.react"),{callback:function(b){a.props.callback(a)},color:this.props.color,colorPress:this.props.colorPress,disabledAlpha:this.props.disabledAlpha,enable:this.props.enable,img:this.props.img,isToggle:this.props.isToggle,onTouchEnd:this.checkOpenKeyboard,onTouchMove:d("VirtualGamepadAuxFunctions").onTouchMoveDefault,onTouchStart:this.onTouchStart,positionX:this.props.positionX,positionY:this.props.positionY,ref:this.widgetRef,scale:this.props.scale,timestamp:this.props.timestamp,toggleColor:this.props.toggleColor,toggleTime:this.props.toggleTime,vibration:this.props.vibration})};return b}(h.PureComponent);g["default"]=a}),98);
__d("CloudGamingVirtualGamepadBlockedArea",["VirtualGamepadAuxFunctions"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,c,e,f,g){var h=this;this.$1=a;this.$2=b;this.$3=c;this.$4=e;this.$5=f;this.$6=g;this.onTouch=function(a,b){var c=h.$4*h.$3,e=h.$5*h.$3;return d("VirtualGamepadAuxFunctions").checkPointInsideRectangle(a-h.$1,b-h.$2,c,e)};this.getGameState=function(){return h.$6}};g["default"]=a}),98);
__d("CloudGamingVirtualJoystick.react",["CloudGamingVirtualWidget.react","VirtualGamepadAuxFunctions","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.widgetRef=h.createRef();c.onTouchStart=function(a,b,e){e=c.widgetRef.current;if(e!=null){e=e.getIntersectionInfo(a,b);var f=e.w*.5;if(d("VirtualGamepadAuxFunctions").checkPointInsideCircle(e.x,e.y,f))return c.onTouchMove(a,b)}return{isPointInside:!1,xAxis:0,yAxis:0}};c.onTouchMove=function(a,b){var d={isPointInside:!0,xAxis:0,yAxis:0},e=c.widgetRef.current;if(e!=null){e=e.getIntersectionInfo(a,b);a=e.w*.5;b=e.x;e=e.y;var f=b*b+e*e;a=a*c.props.actionRatio;var g=a*a;if(f>=g){g=Math.sqrt(f);d.xAxis=b/g;d.yAxis=e/g}else d.xAxis=b/a,d.yAxis=e/a;if(c.props.streamingRotation===90){f=d.xAxis;d.xAxis=d.yAxis;d.yAxis=-f}else if(c.props.streamingRotation===-90){g=d.xAxis;d.xAxis=d.yAxis;d.yAxis=g}}return d};return c}var e=b.prototype;e.getXAxis=function(){return this.widgetRef.current?this.widgetRef.current.getXAxis():0};e.getYAxis=function(){return this.widgetRef.current?this.widgetRef.current.getYAxis():0};e.getEventInfo=function(){return this.props.eventInfo};e.render=function(){var a=this;return h.jsx(c("CloudGamingVirtualWidget.react"),{actionRatio:this.props.actionRatio,callback:function(b){a.props.callback(a)},color:this.props.color,colorPress:this.props.colorPress,disabledAlpha:this.props.disabledAlpha,enable:this.props.enable,img:this.props.img,isToggle:!1,onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,positionX:this.props.positionX,positionY:this.props.positionY,ref:this.widgetRef,scale:this.props.scale,stickImg:this.props.stickImg,timestamp:this.props.timestamp,toggleTime:.5,vibration:this.props.vibration})};return b}(h.PureComponent);g["default"]=a}),98);
__d("CloudGamingVirtualSlider.react",["CloudGamingVirtualWidget.react","VirtualGamepadAuxFunctions","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.widgetRef=h.createRef();c.positiveAxisValues=c.props.eventInfo.length===1;c.onTouchStart=function(a,b,e){e=c.widgetRef.current;if(e!=null){e=e.getIntersectionInfo(a,b);var f=c.getTouchWidth(),g=c.getTouchHeight();if(d("VirtualGamepadAuxFunctions").checkPointInsideRectangle(e.x,e.y,f,g))return c.onTouchMove(a,b)}return{isPointInside:!1,xAxis:0,yAxis:0}};c.getRealLength=function(){switch(c.props.orientation){case"UP":case"DOWN":var a=c.props.stickImg.height*c.props.scale;return c.props.sliderLength*a*2;default:a=c.props.stickImg.width*c.props.scale;return c.props.sliderLength*a*2}};c.onTouchMove=function(a,b){var d={isPointInside:!0,xAxis:0,yAxis:0},e=0,f=c.getRealLength()*.5;switch(c.props.orientation){case"UP":case"DOWN":e=b-c.props.positionY;Math.abs(e)>=f?d.yAxis=Math.sign(e):d.yAxis=e/f;break;default:e=a-c.props.positionX;Math.abs(e)>=f?d.xAxis=Math.sign(e):d.xAxis=e/f;break}return d};return c}var e=b.prototype;e.getTouchWidth=function(){switch(this.props.orientation){case"UP":case"DOWN":return this.props.stickImg.width*this.props.scale;default:return this.getRealLength()}};e.getTouchHeight=function(){switch(this.props.orientation){case"UP":case"DOWN":return this.getRealLength();default:return this.props.stickImg.height*this.props.scale}};e.getAxis=function(){var a=0;if(this.widgetRef.current)switch(this.props.orientation){case"UP":a=-this.widgetRef.current.getYAxis();break;case"DOWN":a=this.widgetRef.current.getYAxis();break;case"RIGHT":a=this.widgetRef.current.getXAxis();break;default:a=-this.widgetRef.current.getXAxis();break}this.positiveAxisValues&&(a=(a+1)*.5);return a};e.getRestXAxis=function(){var a=0;if(this.positiveAxisValues)switch(this.props.orientation){case"RIGHT":a=-1;break;case"LEFT":a=1;break}return a};e.getRestYAxis=function(){var a=0;if(this.positiveAxisValues)switch(this.props.orientation){case"UP":a=1;break;case"DOWN":a=-1;break}return a};e.getEventInfo=function(){return this.props.eventInfo};e.render=function(){var a=this,b=this.getRestXAxis(),d=this.getRestYAxis();return h.jsx(c("CloudGamingVirtualWidget.react"),{callback:function(b){a.props.callback(a)},color:this.props.color,colorPress:this.props.colorPress,disabledAlpha:this.props.disabledAlpha,enable:this.props.enable,img:this.props.img,isToggle:this.props.isToggle,onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,orientation:this.props.orientation,positionX:this.props.positionX,positionY:this.props.positionY,ref:this.widgetRef,restXAxis:b,restYAxis:d,scale:this.props.scale,sliderLength:this.getRealLength(),stickImg:this.props.stickImg,timestamp:this.props.timestamp,toggleColor:this.props.toggleColor,toggleTime:this.props.toggleTime,vibration:this.props.vibration})};return b}(h.PureComponent);g["default"]=a}),98);
__d("CloudGamingVirtualGamepad.react",["CloudGamingLogUtils","CloudGamingVirtualButton.react","CloudGamingVirtualGamepadBlockedArea","CloudGamingVirtualJoystick.react","CloudGamingVirtualSlider.react","Event","VirtualGamepadAuxFunctions","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=.1,j=20,k=3e4,l=5e3,m=1,n=.15,o="none";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.state={disabledAlphaByTime:m,disabledInterval:null,disabledTimeout:c.onDisableByInactivity(k),enable:!0,gameState:o,height:c.props.height,numberOfPhysicalGamepads:0,streamingRotation:c.props.rotation,width:c.props.width,x:0,y:0};c.$11={config:c.props.gamepadConfig.gyroscopeConfig,orientation:[0,0,0]};c.joystickRefsArray=[];c.buttonsRefsArray=[];c.slidersRefsArray=[];c.blockedAreas=[];c.$12=null;c.$9=!1;window.DeviceOrientationEvent&&(c.$9=!0);c.props.virtualGamepadListener&&c.setListener(c.props.virtualGamepadListener);c.$1=function(a){c.$12&&c.$12.onButtonPressChangeEvent(a)};c.$2=function(a){c.$12&&c.$12.onJoystickChangeEvent(a)};c.$3=function(a){c.$12&&c.$12.onSliderChangeEvent(a)};c.$4=function(a){c.$12&&c.$12.onGyroscopeChangeEvent(a)};c.$8=function(a){var b=a.changedTouches;for(var d=0;d<b.length;++d){var e=a.changedTouches[d],f=e.clientX;e=e.clientY;for(var g=0;g<c.blockedAreas.length;++g){var h=c.blockedAreas[g];if(h.onTouch(f,e)){a.stopPropagation();break}}}};c.$6=function(a){c.state.disabledTimeout!=null&&(window.clearTimeout(c.state.disabledTimeout),d("CloudGamingLogUtils").logEvent("VIRTUAL_GAMEPAD_SHOW",c.props.appID,c.props.cloudGameID,c.props.clientAppID,c.props.sessionID,new Map([["virtualGamepad_hidden_effect_timer","disabledTimeout"]]))),c.state.disabledInterval!=null&&(window.clearInterval(c.state.disabledInterval),d("CloudGamingLogUtils").logEvent("VIRTUAL_GAMEPAD_SHOW",c.props.appID,c.props.cloudGameID,c.props.clientAppID,c.props.sessionID,new Map([["virtualGamepad_hidden_effect_timer","disabledInterval"]]))),c.setState({disabledAlphaByTime:m}),c.$8(a)};c.$7=function(a){c.$8(a)};c.$5=function(a){a!=null&&a.touches.length<=0&&(c.setState({disabledTimeout:c.onDisableByInactivity(l)}),c.$8(a))};c.$10=function(a){c.$11.config.enabled&&(c.$11.orientation[0]=a.beta,c.$11.orientation[1]=a.gamma,c.$11.orientation[2]=a.alpha,c.$12&&c.$12.onGyroscopeChangeEvent(c.$11))};c.getGyroscope=function(){return c.$11};c.onVideoResize=function(a,b,d,e,f){c.setState({height:e,streamingRotation:f,width:d,x:a,y:b})};c.$13=!1;return c}var e=b.prototype;e.componentDidMount=function(){this.$9&&(this.deviceOrientationListener=c("Event").listen(window,"deviceorientation",this.$10)),window.addEventListener("touchstart",this.$6),window.addEventListener("touchmove",this.$7),window.addEventListener("touchend",this.$5)};e.componentWillUnmount=function(){this.state.disabledTimeout!=null&&window.clearTimeout(this.state.disabledTimeout),this.state.disabledInterval!=null&&window.clearInterval(this.state.disabledInterval),window.removeEventListener("touchstart",this.$6),window.removeEventListener("touchmove",this.$7),window.removeEventListener("touchend",this.$5),this.deviceOrientationListener!=null&&this.deviceOrientationListener.remove()};e.getNumTotalWidgets=function(){var a=this.props.gamepadConfig;return a.joysticksConfig.length+a.buttonsConfig.length+a.slidersConfig.length};e.onDisableByInactivity=function(a){var b=this;d("CloudGamingLogUtils").logEvent("VIRTUAL_GAMEPAD_HIDE",this.props.appID,this.props.cloudGameID,this.props.clientAppID,this.props.sessionID,new Map([["virtualGamepad_hidden_effect_timer","setTimeout"]]));return window.setTimeout(function(){d("CloudGamingLogUtils").logEvent("VIRTUAL_GAMEPAD_HIDE",b.props.appID,b.props.cloudGameID,b.props.clientAppID,b.props.sessionID,new Map([["virtualGamepad_hidden_effect_timer","setInterval"]]));var a=window.setInterval(function(){var c=b.state.disabledAlphaByTime-i;c<=n&&(c=n);b.setState({disabledAlphaByTime:c,disabledInterval:a})},j)},a)};e.setEnable=function(a){this.setState({enable:a})};e.setListener=function(a){this.$12=a};e.getButtons=function(){return this.buttonsRefsArray};e.getJoysticks=function(){return this.joystickRefsArray};e.getSliders=function(){return this.slidersRefsArray};e.getScaleFactor=function(){var a=this.state.width,b=this.state.height;if(a>b){var c=1280,d=720;a/=c;b/=d}else{c=720;d=1280;a/=c;b/=d}return Math.min(a,b)};e.getVirtualJoystick=function(a,b,d,e,f,g){var i=this.getScaleFactor();return h.jsx(c("CloudGamingVirtualJoystick.react"),{actionRatio:a.joystickActionRatio,callback:this.$2,color:a.color,colorPress:a.colorPress,disabledAlpha:f,enable:a.enabled,eventInfo:a.eventInfo,img:a.img,positionX:b+a.posX*this.state.width,positionY:d+a.posY*this.state.height,ref:e,scale:a.scale*i,stickImg:a.thumbstickImg,streamingRotation:g,timestamp:Date.now(),vibration:a.vibration})};e.getVirtualButton=function(a,b,d,e,f){var g=this.getScaleFactor();return h.jsx(c("CloudGamingVirtualButton.react"),{appID:this.props.appID,callback:this.$1,clientAppID:this.props.clientAppID,cloudGameID:this.props.cloudGameID,color:a.color,colorPress:a.colorPress,disabledAlpha:f,enable:a.enabled,eventInfo:a.eventInfo,img:a.img,isToggle:a.isToggle,positionX:b+a.posX*this.state.width,positionY:d+a.posY*this.state.height,ref:e,scale:a.scale*g,sessionID:this.props.sessionID,shape:a.buttonShape,timestamp:Date.now(),toggleColor:a.toggleColor,toggleTime:a.toggleTime,vibration:a.vibration})};e.getVirtualSlider=function(a,b,d,e,f){var g=this.getScaleFactor();return h.jsx(c("CloudGamingVirtualSlider.react"),{callback:this.$3,color:a.color,colorPress:a.colorPress,disabledAlpha:f,enable:a.enabled,eventInfo:a.eventInfo,img:a.img,isToggle:a.isToggle,orientation:a.orientation,positionX:b+a.posX*this.state.width,positionY:d+a.posY*this.state.height,ref:e,scale:a.scale*g,sliderLength:a.sliderLength,stickImg:a.stickImg,timestamp:Date.now(),toggleColor:a.toggleColor,toggleTime:a.toggleTime,vibration:a.vibration})};e.checkValidGameState=function(a){a=a.split("_");for(var b=a.length-1;b>=0;--b){var c=a[b],d=this.props.gamepadConfig,e=d.joysticksConfig,f=d.buttonsConfig,g=d.slidersConfig;d=d.blockedAreasConfig;for(var h=0;h<e.length;++h){var i=e[h];if(i.gameState===c)return c}for(i=0;i<f.length;++i){h=f[i];if(h.gameState===c)return c}for(e=0;e<g.length;++e){h=g[e];if(h.gameState===c)return c}for(i=0;i<d.length;++i){f=d[i];if(f.gameState===c)return c}}return""};e.onGameStateChange=function(a){a=this.checkValidGameState(a);a!==""&&(a!==this.state.gameState||!this.$13)&&(this.setState({gameState:a}),this.$13=!0,this.forceUpdate(),d("CloudGamingLogUtils").logEvent("GAMEPAD_LAYOUT_CHANGE",this.props.appID,this.props.cloudGameID,this.props.clientAppID,this.props.sessionID,new Map([["newGameState",a]])))};e.onNumberOfGamepadChanges=function(a){this.setState({numberOfPhysicalGamepads:a}),this.forceUpdate()};e.render=function(){if(this.state.enable){var a=0,b=this.state.x,e=this.state.y,f=this.props.gamepadConfig,g=f.joysticksConfig,i=f.buttonsConfig,j=f.slidersConfig,k=f.blockedAreasConfig;this.$11.config=f.gyroscopeConfig;f=[];this.blockedAreas.length=0;var l=[];this.joystickRefsArray=[];this.buttonsRefsArray=[];this.slidersRefsArray=[];if(this.state.numberOfPhysicalGamepads===0)for(var m=0;m<g.length;++m){var n=g[m];n.gameState===this.state.gameState&&(this.joystickRefsArray.push(h.createRef()),f.push(this.getVirtualJoystick(n,b,e,this.joystickRefsArray[this.joystickRefsArray.length-1],this.state.disabledAlphaByTime,this.state.streamingRotation)),l.push(a));++a}for(n=0;n<i.length;++n){m=i[n];if(m.gameState===this.state.gameState){g=!0;if(this.state.numberOfPhysicalGamepads!==0){g=!1;var o=m.eventInfo;for(var p=0;p<o.length;++p){var q=o[p];if(q.type===d("VirtualGamepadAuxFunctions").EventTypeSwitchKeyboard){g=!0;break}}}g&&(this.buttonsRefsArray.push(h.createRef()),f.push(this.getVirtualButton(m,b,e,this.buttonsRefsArray[this.buttonsRefsArray.length-1],this.state.disabledAlphaByTime)),l.push(a))}++a}if(this.state.numberOfPhysicalGamepads===0)for(q=0;q<j.length;++q){o=j[q];o.gameState===this.state.gameState&&(this.slidersRefsArray.push(h.createRef()),f.push(this.getVirtualSlider(o,b,e,this.slidersRefsArray[this.slidersRefsArray.length-1],this.state.disabledAlphaByTime)),l.push(a));++a}for(p=0;p<k.length;++p){g=k[p];if(g.gameState===this.state.gameState){m=this.getScaleFactor();this.blockedAreas.push(new(c("CloudGamingVirtualGamepadBlockedArea"))(b+g.posX*this.state.width,e+g.posY*this.state.height,g.scale*m,g.blockedAreaWidth*this.state.width,g.blockedAreaHeight*this.state.height,g.gameState))}}n=[];for(i=0;i<f.length;++i)n.push(h.jsx("div",{children:f[i]},l[i]));return h.jsx("div",{className:"x10l6tqk x17qophe x13vifvy",children:n})}return null};return b}(h.PureComponent);g.defaultState=o;g.CloudGamingVirtualGamepad=a}),98);
__d("CloudGamingVirtualGamepadConfig.react",["CloudGamingLogUtils","CloudGamingVirtualGamepad.react","CloudGamingVirtualGamepadConfigQuery.graphql","RelayHooks","VirtualGamepadAuxFunctions","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");e=d("react");var j=e.useEffect,k=e.useState,l="/images/games/gredos/virtualGamepad/background/Joystick.png",m="/images/games/gredos/virtualGamepad/background/Slider.png",n=20,o=30,p=h!==void 0?h:h=b("CloudGamingVirtualGamepadConfigQuery.graphql"),q=i.createRef();function a(a){var b=k({blockedAreasConfig:[],buttonsConfig:[],gyroscopeConfig:{betaMaxAngle:n,enabled:!1,eventInfo:[],gammaMaxAngle:o,vibration:0},imageErrors:[],joysticksConfig:[],slidersConfig:[],vibration:0}),c=b[0],e=b[1];b=a.gameInfoQueryResult;b=d("RelayHooks").usePreloadedQuery(p,b);var f=b.viewer;j(function(){var b;b=f==null?void 0:(b=f.instant_game_info_with_support_check)==null?void 0:(b=b.application)==null?void 0:(b=b.instant_game_info)==null?void 0:b.gredos_virtual_gamepad;if(b){b=B(b,a);e(b)}},[f]);var g=a.connectionState;j(function(){(g==null?void 0:g.phase)!=="error"&&(g==null?void 0:g.phase)!=="connecting"&&(c.imageErrors.forEach(function(b){d("CloudGamingLogUtils").logEvent("VIRTUAL_GAMEPAD_IMAGE_ERROR",a.appID,a.cloudGameID,a.clientAppID,a.sessionID,new Map([["exception","error downloading image: "+b]]))}),c.imageErrors=[])},[g,c,a.appID,a.clientAppID,a.cloudGameID,a.sessionID]);b=((b=a.connectionState)==null?void 0:b.phase)==="error"||!1;return b?null:i.jsx(d("CloudGamingVirtualGamepad.react").CloudGamingVirtualGamepad,{appID:a.appID,clientAppID:a.clientAppID,cloudGameID:a.cloudGameID,gamepadConfig:c,height:a.height,ref:q,rotation:a.rotation,sessionID:a.sessionID,virtualGamepadListener:a.virtualGamepadListener,width:a.width})}a.displayName=a.name+" [from "+f.id+"]";function c(){return q?q.current:null}function r(a){switch(a){case"A":return d("VirtualGamepadAuxFunctions").XINPUT_GAMEPAD.A;case"B":return d("VirtualGamepadAuxFunctions").XINPUT_GAMEPAD.B;case"X":return d("VirtualGamepadAuxFunctions").XINPUT_GAMEPAD.X;case"Y":return d("VirtualGamepadAuxFunctions").XINPUT_GAMEPAD.Y;case"LB":return d("VirtualGamepadAuxFunctions").XINPUT_GAMEPAD.LEFT_SHOULDER;case"RB":return d("VirtualGamepadAuxFunctions").XINPUT_GAMEPAD.RIGHT_SHOULDER;case"DPAD_UP":return d("VirtualGamepadAuxFunctions").XINPUT_GAMEPAD.DPAD_UP;case"DPAD_DOWN":return d("VirtualGamepadAuxFunctions").XINPUT_GAMEPAD.DPAD_DOWN;case"DPAD_LEFT":return d("VirtualGamepadAuxFunctions").XINPUT_GAMEPAD.DPAD_LEFT;case"DPAD_RIGHT":return d("VirtualGamepadAuxFunctions").XINPUT_GAMEPAD.DPAD_RIGHT;case"SELECT":return d("VirtualGamepadAuxFunctions").XINPUT_GAMEPAD.BACK;case"START":return d("VirtualGamepadAuxFunctions").XINPUT_GAMEPAD.START;case"HOME":return d("VirtualGamepadAuxFunctions").XINPUT_GAMEPAD.HOME;case"L3":return d("VirtualGamepadAuxFunctions").XINPUT_GAMEPAD.LEFT_THUMB;case"R3":return d("VirtualGamepadAuxFunctions").XINPUT_GAMEPAD.RIGHT_THUMB}return 0}function s(a,b,c){var e=b.eventsInfo,f=0,g=[];for(var a=a,h=Array.isArray(a),i=0,a=h?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=a.length)break;j=a[i++]}else{i=a.next();if(i.done)break;j=i.value}j=j;switch(j){case"LT":var k={keycodeMask:0,keycodes:[],type:d("VirtualGamepadAuxFunctions").EventTypeTriggerLeft};e.push(k);break;case"RT":k={keycodeMask:0,keycodes:[],type:d("VirtualGamepadAuxFunctions").EventTypeTriggerRight};e.push(k);break;case"LEFT":k={keycodeMask:0,keycodes:[],type:d("VirtualGamepadAuxFunctions").EventTypeJoystickLeft};e.push(k);break;case"RIGHT":k={keycodeMask:0,keycodes:[],type:d("VirtualGamepadAuxFunctions").EventTypeJoystickRight};e.push(k);break;case"LEFT_POSITIVE_X":k={keycodeMask:0,keycodes:[],type:d("VirtualGamepadAuxFunctions").EventTypeJoystickLeftPositiveXAxis};e.push(k);break;case"LEFT_NEGATIVE_X":k={keycodeMask:0,keycodes:[],type:d("VirtualGamepadAuxFunctions").EventTypeJoystickLeftNegativeXAxis};e.push(k);break;case"LEFT_POSITIVE_Y":k={keycodeMask:0,keycodes:[],type:d("VirtualGamepadAuxFunctions").EventTypeJoystickLeftPositiveYAxis};e.push(k);break;case"LEFT_NEGATIVE_Y":k={keycodeMask:0,keycodes:[],type:d("VirtualGamepadAuxFunctions").EventTypeJoystickLeftNegativeYAxis};e.push(k);break;case"RIGHT_POSITIVE_X":k={keycodeMask:0,keycodes:[],type:d("VirtualGamepadAuxFunctions").EventTypeJoystickRightPositiveXAxis};e.push(k);break;case"RIGHT_NEGATIVE_X":k={keycodeMask:0,keycodes:[],type:d("VirtualGamepadAuxFunctions").EventTypeJoystickRightNegativeXAxis};e.push(k);break;case"RIGHT_POSITIVE_Y":k={keycodeMask:0,keycodes:[],type:d("VirtualGamepadAuxFunctions").EventTypeJoystickRightPositiveYAxis};e.push(k);break;case"RIGHT_NEGATIVE_Y":k={keycodeMask:0,keycodes:[],type:d("VirtualGamepadAuxFunctions").EventTypeJoystickRightNegativeYAxis};e.push(k);break;case"KEYBOARD":if(!c){k={keycodeMask:0,keycodes:[],type:d("VirtualGamepadAuxFunctions").EventTypeSwitchKeyboard};e.push(k)}break;default:g.push(j);k=r(j);b.firstKeycode===0&&(b.firstKeycode=k);f+=k;break}}if(f!==0){j={keycodeMask:f,keycodes:g,type:d("VirtualGamepadAuxFunctions").EventTypeButton};e.push(j)}}function t(a){switch(a){case"DOWN":return"DOWN";case"LEFT":return"LEFT";case"RIGHT":return"RIGHT";case"UP":return"UP";default:return"NONE"}}function u(a){switch(a){case"CIRCLE":return"CIRCLE";default:return"RECTANGLE"}}function v(a,b){var c;c={betaMaxAngle:n,blockedAreaHeight:0,blockedAreaWidth:0,color:(c=a.widget_color)!=null?c:"FFFFFFFF",enabled:(c=a.enabled)!=null?c:!1,eventsInfo:[],firstKeycode:0,gameState:(c=a.game_state)!=null?c:"",gammaMaxAngle:o,image:(c=a.widget_image_uri)!=null?c:"",isToggle:(c=a.is_toggle)!=null?c:!1,length:(c=a.length)!=null?c:0,orientation:"NONE",posX:(c=a.pos_x)!=null?c:0,posY:(c=a.pos_y)!=null?c:0,pressColor:(c=a.press_color)!=null?c:"FFFFFFFF",scale:(c=a.scale)!=null?c:1,shape:"CIRCLE",toggleColor:(c=a.toggle_color)!=null?c:"FFFFFFFF",toggleTime:(c=a.toggle_time)!=null?c:0,vibration:(c=a.widget_vibration)!=null?c:0};a.collision_shape!=null&&(c.shape=u(a.collision_shape));a.keycode!=null&&s(a.keycode,c,b);a.widget_orientation!=null&&(c.orientation=t(a.widget_orientation));a.widget_gyro_turn_limit!=null&&(c.betaMaxAngle=a.widget_gyro_turn_limit);a.widget_gyro_pitch_limit!=null&&(c.gammaMaxAngle=a.widget_gyro_pitch_limit);a.blocking_region_size_x!=null&&(c.blockedAreaWidth=a.blocking_region_size_x);a.blocking_region_size_y!=null&&(c.blockedAreaHeight=a.blocking_region_size_y);return c}function w(a,b,c){if(a.eventsInfo.length===0)return;var d=new Image();d.src=a.image;d.onerror=C(d.src,c,b);c={buttonShape:a.shape,color:a.color,colorPress:a.pressColor,enabled:a.enabled,eventInfo:a.eventsInfo,gameState:a.gameState,img:d,isToggle:a.isToggle,posX:a.posX,posY:a.posY,scale:a.scale,toggleColor:a.toggleColor,toggleTime:a.toggleTime,vibration:a.vibration};b.buttonsConfig.push(c)}function x(a,b,c,d){var e=new Image();e.src=l;e.onerror=C(e.src,d,b);var f=new Image();f.src=a.image;f.onerror=C(f.src,d,b);d={color:a.color,colorPress:a.pressColor,enabled:a.enabled,eventInfo:a.eventsInfo,gameState:a.gameState,img:e,joystickActionRatio:c,posX:a.posX,posY:a.posY,scale:a.scale,thumbstickImg:f,vibration:a.vibration};b.joysticksConfig.push(d)}function y(a,b,c){var d=new Image();d.src=m;d.onerror=C(d.src,c,b);var e=new Image();e.src=a.image;e.onerror=C(e.src,c,b);c={color:a.color,colorPress:a.pressColor,enabled:a.enabled,eventInfo:a.eventsInfo,gameState:a.gameState,img:d,isToggle:a.isToggle,orientation:a.orientation,posX:a.posX,posY:a.posY,scale:a.scale,sliderLength:a.length,stickImg:e,toggleColor:a.toggleColor,toggleTime:a.toggleTime,vibration:a.vibration};b.slidersConfig.push(c)}function z(a,b){a={blockedAreaHeight:a.blockedAreaHeight,blockedAreaWidth:a.blockedAreaWidth,enabled:a.enabled,gameState:a.gameState,posX:a.posX,posY:a.posY,scale:a.scale};b.blockedAreasConfig.push(a)}function A(a,b,c){b.gyroscopeConfig={betaMaxAngle:a.betaMaxAngle,enabled:!1,eventInfo:a.eventsInfo,gammaMaxAngle:a.gammaMaxAngle,vibration:a.vibration};var e=new Image();e.src=a.image;e.onerror=C(e.src,c,b);c={buttonShape:a.shape,color:a.color,colorPress:a.pressColor,enabled:a.enabled,eventInfo:[{keycodeMask:0,keycodes:[],type:d("VirtualGamepadAuxFunctions").EventTypeSwitchGyroscope}],gameState:a.gameState,img:e,isToggle:a.isToggle,posX:a.posX,posY:a.posY,scale:a.scale,toggleColor:a.toggleColor,toggleTime:a.toggleTime,vibration:a.vibration};b.buttonsConfig.push(c)}function B(a,b){var c={blockedAreasConfig:[],buttonsConfig:[],gyroscopeConfig:{betaMaxAngle:n,enabled:!1,eventInfo:[],gammaMaxAngle:o,vibration:0},imageErrors:[],joysticksConfig:[],slidersConfig:[],vibration:0};if(a)for(var a=a,e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;if(g.widget_type!=null){var h=v(g,b.softKeyboardButtonAvailable);g=g.widget_type;switch(g){case"BUTTON":w(h,c,b);break;case"JOYSTICK":x(h,c,1,b);break;case"SLIDER":y(h,c,b);break;case"GYROSCOPE":A(h,c,b);break;case"BLOCKING_REGION":z(h,c);break;default:d("CloudGamingLogUtils").logEvent("VIRTUAL_GAMEPAD_CONFIG_ERROR",b.appID,b.cloudGameID,b.clientAppID,b.sessionID,new Map([["exception","wrong widget type"]]));break}}else d("CloudGamingLogUtils").logEvent("VIRTUAL_GAMEPAD_CONFIG_ERROR",b.appID,b.cloudGameID,b.clientAppID,b.sessionID,new Map([["exception","wrong widget type"]]))}return c}function C(a,b,c){var e;if(((e=b.connectionState)==null?void 0:e.phase)!=="error"){((e=b.connectionState)==null?void 0:e.phase)==="connecting"?c.imageErrors.push(a):d("CloudGamingLogUtils").logEvent("VIRTUAL_GAMEPAD_IMAGE_ERROR",b.appID,b.cloudGameID,b.clientAppID,b.sessionID,new Map([["exception","error downloading image: "+a]]))}}g.gameInfoQuery=p;g.CloudGamingVirtualGamepadConfig=a;g.getVirtualGamepad=c}),98);
__d("CloudGamingVirtualGamepadConfigManager.react",["CloudGamingVirtualGamepadConfig.react","CometPlaceholder.react","RelayHooks","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useEffect;function a(a){var b=a.appID,e=a.clientAppID,f=a.cloudGameID,g=a.connectionState,j=a.height,k=a.rotation,l=a.sessionID,m=a.width,n=d("RelayHooks").useQueryLoader(d("CloudGamingVirtualGamepadConfig.react").gameInfoQuery),o=n[0],p=n[1];i(function(){var a={appID:b};p(a)},[b,p]);return o?h.jsx(c("CometPlaceholder.react"),{fallback:"",children:h.jsx(d("CloudGamingVirtualGamepadConfig.react").CloudGamingVirtualGamepadConfig,{appID:b,clientAppID:e,cloudGameID:f,connectionState:g,gameInfoQueryResult:o,height:j,rotation:k,sessionID:l,softKeyboardButtonAvailable:a.softKeyboardButtonAvailable,virtualGamepadListener:a.virtualGamepadListener,width:m})}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CloudGamingVirtualGamepadManager",["CloudGamingActionTypes","CloudGamingVirtualGamepadConfig.react","CloudGamingVirtualGamepadConfigManager.react","CometRelayEnvironmentProvider","EventTimeUtils","VirtualGamepadAuxFunctions","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a,b,d,e,f,g,i,j,k,l){return h.jsx(c("CometRelayEnvironmentProvider"),{children:h.jsx(c("CloudGamingVirtualGamepadConfigManager.react"),{appID:a,clientAppID:b,cloudGameID:d,connectionState:e,height:k,rotation:l,sessionID:f,softKeyboardButtonAvailable:g,virtualGamepadListener:i,width:j})})}a.displayName=a.name+" [from "+f.id+"]";function b(a,b,c,e,f){var g=d("CloudGamingVirtualGamepadConfig.react").getVirtualGamepad();g!==null&&g.onVideoResize(a,b,c,e,f)}function i(a){switch(a){case"START":return"Start";case"SELECT":return"Select";case"DPAD_UP":return"Up";case"DPAD_DOWN":return"Down";case"DPAD_RIGHT":return"Right";case"DPAD_LEFT":return"Left";default:return a}}e=function(a){var b=this;this.virtualGamepadListener={onButtonPressChangeEvent:function(a){if(a){var e=a.isPressed()?1:0,f=a.getEventInfo(),g={};if(f){for(var f=f,h=Array.isArray(f),j=0,f=h?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(h){if(j>=f.length)break;k=f[j++]}else{j=f.next();if(j.done)break;k=j.value}k=k;if(k)switch(k.type){case d("VirtualGamepadAuxFunctions").EventTypeButton:for(var k=k.keycodes,l=Array.isArray(k),m=0,k=l?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n;if(l){if(m>=k.length)break;n=k[m++]}else{m=k.next();if(m.done)break;n=m.value}n=n;n=i(n);g[n]=e}break;case d("VirtualGamepadAuxFunctions").EventTypeTriggerLeft:g.L2=e;break;case d("VirtualGamepadAuxFunctions").EventTypeTriggerRight:g.R2=e;break;case d("VirtualGamepadAuxFunctions").EventTypeSwitchGyroscope:n=d("CloudGamingVirtualGamepadConfig.react").getVirtualGamepad();if(n){m=n.getGyroscope();m.config.enabled=a.isPressed()}break}}l={id:0,keys:g,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),type:c("CloudGamingActionTypes").VIRTUAL_GAMEPAD};b.$1({events:[{input:{gamepad:l}}],purpose:"input",type:"SEND_RTC"});b.$1(l)}}},onGyroscopeChangeEvent:function(a){var e=d("CloudGamingVirtualGamepadConfig.react").getVirtualGamepad();if(e&&a.config.enabled){e=a.orientation[0];var f=a.orientation[1];e=Math.min(1,Math.max(-1,e/a.config.betaMaxAngle));f=Math.min(1,Math.max(-1,f/a.config.gammaMaxAngle));a=a.config.eventInfo;if(a){var g={};for(var a=a,h=Array.isArray(a),i=0,a=h?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=a.length)break;j=a[i++]}else{i=a.next();if(i.done)break;j=i.value}j=j;if(j)switch(j.type){case d("VirtualGamepadAuxFunctions").EventTypeJoystickLeft:g.ThumbLX=e;g.ThumbLY=-f;break;case d("VirtualGamepadAuxFunctions").EventTypeJoystickRight:g.ThumbRX=e;g.ThumbRY=-f;break;case d("VirtualGamepadAuxFunctions").EventTypeJoystickLeftPositiveXAxis:e>=0&&(g.ThumbLX=e);break;case d("VirtualGamepadAuxFunctions").EventTypeJoystickLeftNegativeXAxis:e<=0&&(g.ThumbLX=e);break;case d("VirtualGamepadAuxFunctions").EventTypeJoystickLeftPositiveYAxis:f>=0&&(g.ThumbLY=-f);break;case d("VirtualGamepadAuxFunctions").EventTypeJoystickLeftNegativeYAxis:f<=0&&(g.ThumbLY=-f);break;case d("VirtualGamepadAuxFunctions").EventTypeJoystickRightPositiveXAxis:e>=0&&(g.ThumbRX=e);break;case d("VirtualGamepadAuxFunctions").EventTypeJoystickRightNegativeXAxis:e<=0&&(g.ThumbRX=e);break;case d("VirtualGamepadAuxFunctions").EventTypeJoystickRightPositiveYAxis:f>=0&&(g.ThumbRY=-f);break;case d("VirtualGamepadAuxFunctions").EventTypeJoystickRightNegativeYAxis:f<=0&&(g.ThumbRY=-f);break}}j={id:0,keys:g,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),type:c("CloudGamingActionTypes").VIRTUAL_GAMEPAD};b.$1({events:[{input:{gamepad:j}}],purpose:"input",type:"SEND_RTC"});b.$1(j)}}},onJoystickChangeEvent:function(a){if(a){var e=a.getXAxis(),f=a.getYAxis();a=a.getEventInfo();var g={};if(a){for(var a=a,h=Array.isArray(a),i=0,a=h?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=a.length)break;j=a[i++]}else{i=a.next();if(i.done)break;j=i.value}j=j;if(j)switch(j.type){case d("VirtualGamepadAuxFunctions").EventTypeJoystickLeft:g.ThumbLX=e;g.ThumbLY=f;break;case d("VirtualGamepadAuxFunctions").EventTypeJoystickRight:g.ThumbRX=e;g.ThumbRY=f;break}}j={id:0,keys:g,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),type:c("CloudGamingActionTypes").VIRTUAL_GAMEPAD};b.$1({events:[{input:{gamepad:j}}],purpose:"input",type:"SEND_RTC"});b.$1(j)}}},onSliderChangeEvent:function(a){if(a){var e=a.getEventInfo();if(e){var f={},g=Math.min(e.length,2);a=a.getAxis();var h=0,j=1;for(var k=0;k<g;++k)if(k===h&&a>0||k===j&&a<0){var l=e[k];if(l){var m=a;switch(l.type){case d("VirtualGamepadAuxFunctions").EventTypeButton:k===j&&(m=-m);m=m>.5?1:0;for(var l=l.keycodes,n=Array.isArray(l),o=0,l=n?l:l[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=l.length)break;p=l[o++]}else{o=l.next();if(o.done)break;p=o.value}p=p;p=i(p);f[p]=m}break;case d("VirtualGamepadAuxFunctions").EventTypeTriggerLeft:k===j&&(m=-m);f.L2=m;break;case d("VirtualGamepadAuxFunctions").EventTypeTriggerRight:k===j&&(m=-m);f.R2=m;break;case d("VirtualGamepadAuxFunctions").EventTypeJoystickLeftPositiveXAxis:k===j&&(m=-m);f.ThumbLX=m;break;case d("VirtualGamepadAuxFunctions").EventTypeJoystickLeftNegativeXAxis:k===h&&(m=-m);f.ThumbLX=m;break;case d("VirtualGamepadAuxFunctions").EventTypeJoystickLeftPositiveYAxis:k===h&&(m=-m);f.ThumbLY=m;break;case d("VirtualGamepadAuxFunctions").EventTypeJoystickLeftNegativeYAxis:k===j&&(m=-m);f.ThumbLY=m;break;case d("VirtualGamepadAuxFunctions").EventTypeJoystickRightPositiveXAxis:k===j&&(m=-m);f.ThumbRX=m;break;case d("VirtualGamepadAuxFunctions").EventTypeJoystickRightNegativeXAxis:k===h&&(m=-m);f.ThumbRX=m;break;case d("VirtualGamepadAuxFunctions").EventTypeJoystickRightPositiveYAxis:k===h&&(m=-m);f.ThumbRY=m;break;case d("VirtualGamepadAuxFunctions").EventTypeJoystickRightNegativeYAxis:k===j&&(m=-m);f.ThumbRY=m;break}}}p={id:0,keys:f,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),type:c("CloudGamingActionTypes").VIRTUAL_GAMEPAD};b.$1({events:[{input:{gamepad:p}}],purpose:"input",type:"SEND_RTC"});b.$1(p)}}}};this.$1=a};g.getGamepadNode=a;g.onVirtualGamepadResize=b;g.CloudGamingVirtualGamepadManager=e}),98);
__d("CloudHorizonClientFbts",["fbt","CometLink.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a={CAPACITY_ERROR_DESCRIPTION_TEXT:h._("__JHASH__U2uxd17o-uL__JHASH__"),CAPACITY_ERROR_TEXT:h._("__JHASH__hLHKcIBBcXX__JHASH__"),CLOSE_TEXT:h._("__JHASH__kFjMdU6FQFu__JHASH__"),CONNECTION_ERROR_DESCRIPTION_TEXT:h._("__JHASH__xkSAKdHI4xg__JHASH__"),CONNECTION_ERROR_TEXT:h._("__JHASH__hzE_p8D1atk__JHASH__"),CONNECTION_TIMEOUT_DESCRIPTION_TEXT:h._("__JHASH__XaNCBrKVnuE__JHASH__"),CONNECTION_TIMEOUT_TEXT:h._("__JHASH__g0Y4AWghZxf__JHASH__"),CONNECTION_TIMEOUT_WARNING_TEXT:h._("__JHASH__nyYkF4loqVF__JHASH__"),COPY_GAME_LINK_TEXT:h._("__JHASH__-Te-sT1uItF__JHASH__"),DONT_SHOW_AGAIN_TEXT:h._("__JHASH__S8MK3omZmfG__JHASH__"),GAME_COULD_NOT_BE_LOADED_TEXT:h._("__JHASH__qZuPH2dFUTg__JHASH__"),GAME_NODE_IN_USE_DESCRIPTION_TEXT:h._("__JHASH__R_9KZ1xKIUA__JHASH__"),GAME_NODE_IN_USE_TEXT:h._("__JHASH__zydaGYJG2io__JHASH__"),GAME_NODE_TERMINATING_TEXT:h._("__JHASH__fbGa-EN1_Hd__JHASH__"),H264_ERROR_DESCRIPTION_TEXT:h._("__JHASH__2I1FOm77MRF__JHASH__"),H264_ERROR_TEXT:h._("__JHASH__zC1maqHwC1k__JHASH__"),LEARN_MORE_TEXT:h._("__JHASH__IR-wps4JQzL__JHASH__"),NETWORK_NOTIFICATION_TEXT:h._("__JHASH__YkbjNV-64l9__JHASH__"),NETWORK_QUALITY_TIP_0_TEXT:h._("__JHASH__oJM7lb3cBga__JHASH__"),NETWORK_QUALITY_TIP_1_TEXT:h._("__JHASH__ZdTxkuDjrGl__JHASH__"),NETWORK_QUALITY_TIP_2_TEXT:h._("__JHASH__phRdlAZGHnj__JHASH__"),NETWORK_QUALITY_TIP_3_TEXT:h._("__JHASH__oozcETAnftH__JHASH__"),NETWORK_QUALITY_TIP_4_TEXT:h._("__JHASH__dho6Stnt399__JHASH__"),NETWORK_QUALITY_TITLE_TEXT:h._("__JHASH__TR0fuuGJHgK__JHASH__"),PLAY_AGAIN_TEXT:h._("__JHASH__5V2CrqBEy1S__JHASH__"),PLAY_IN_FULL_SCREEN:h._("__JHASH__jaLvtOytgXM__JHASH__"),PLAY_IN_FULL_SCREEN_EXIT:h._("__JHASH__mjUY1CSP4JF__JHASH__"),PLAY_IN_FULL_SCREEN_INSTRUCTIONS:h._("__JHASH__fmBvqgwfqiE__JHASH__"),PLEASE_UPGRADE_ANDROID_WEBVIEW_VS:h._("__JHASH__A0cw40Tux92__JHASH__"),PLEASE_UPGRADE_FACEBOOK_FOR_ANDROID:h._("__JHASH__qlvYUll_4Ao__JHASH__"),PLEASE_UPGRADE_MOBILE_OS_VS:h._("__JHASH__9-wWBJlZ1G5__JHASH__"),REGION_UNAVAILABLE_TEXT:h._("__JHASH__FaTH0icM6_F__JHASH__"),RETRY_TEXT:h._("__JHASH__LOv0HFIh8Ek__JHASH__"),RETURN_GAMING_TEXT:h._("__JHASH__UJkgudKKYRz__JHASH__"),SAVE_ERROR_TEXT:h._("__JHASH__ibZsbS04a4T__JHASH__"),TOUCH_SCREEN_TO_OPEN_KEYBOARD_TEXT:h._("__JHASH__nwkf8Szpdq3__JHASH__"),TRY_AGAIN_TEXT:h._("__JHASH__AR8snkcGAK___JHASH__"),UNABLE_CONNECT_SERVER_TEXT:h._("__JHASH__hjUB368jaOv__JHASH__"),UNSUPPORTED_BROWSER_HEADER:h._("__JHASH__z1JlRYBDHql__JHASH__"),UNSUPPORTED_DEVICE_HEADER:h._("__JHASH__vubhPhpX9qA__JHASH__"),UNSUPPORTED_GAME_TEXT:h._("__JHASH__mUkdpJ6-US1__JHASH__"),UNSUPPORTED_OS_HEADER:h._("__JHASH__ezNb6dgQ6bh__JHASH__"),UPDATE_BROWSER_HEADER:h._("__JHASH__bJ1GJzKHw_e__JHASH__"),UPDATE_FB4A_TEXT:h._("__JHASH__9JksgCxPss6__JHASH__"),WARNING_EXIT_TEXT:h._("__JHASH__q2WESnH-l7d__JHASH__"),getClipboardDisabledMessage:function(a){return null},getClipboardEnabledMessage:function(a){return null},getRefreshToRestartGameMessage:function(a){return h._("__JHASH__XWlM4KmA3Zr__JHASH__")},getServerRestartMessage:function(a){if(a>60){var b=Math.round(a/60);return h._("__JHASH__68NLQZyfyo2__JHASH__",[h._plural(b,"number")])}else if(a>0)return h._("__JHASH__Gf8CHtd7JcO__JHASH__",[h._plural(a,"number")]);else return h._("__JHASH__POtjbnG22mX__JHASH__")},getUnsupportedBrowserMessage:function(a){return h._("__JHASH__BzZihJvl4iY__JHASH__")},getUnsupportedDeviceMessage:function(a){return h._("__JHASH__MGA76BqMe0x__JHASH__",[h._param("a link to a public documents about supported devices for Horizon Worlds",i.jsx(c("CometLink.react"),{color:"highlight",href:"https://store.facebook.com/help/1370468980146239",target:"_blank",children:h._("__JHASH__RAgS4g_dE-t__JHASH__")}))])},getUnsupportedOSMessage:function(a){return h._("__JHASH__Is1ksKmPL-A__JHASH__")},getUpdateBrowserMessage:function(a){return h._("__JHASH__UO6mWsdvRIr__JHASH__")},getUseChromeDesktopMessage:function(a){return h._("__JHASH__K4RTkTrvZBS__JHASH__")},getUseFacebookOnAndroidMessage:function(a){return h._("__JHASH__viJliwGHq59__JHASH__")},getUseMobileSafariMessage:function(a){return h._("__JHASH__L7aLL_MovIy__JHASH__")}};g.CloudHorizonClientFbts=a}),98);
__d("CloudGamingWarningAlert.react",["CloudGamingClientFbts","CloudHorizonClientFbts","CometLink.react","TetraText.react","clearInterval","react","setInterval"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useEffect,j=b.useState,k={general:{backgroundColor:"xrmyhay",borderTop:"x19lhggo",borderEnd:"x144nipd",borderBottom:"x1hqtkzk",borderStart:"xlg2ruo",borderTopColor:"xjqpnuy",borderEndColor:"xa49m3k",borderBottomColor:"xqeqjp1",borderStartColor:"x2hbi6w",borderTopStartRadius:"x1a2cdl4",borderTopEndRadius:"xnhgr82",borderBottomEndRadius:"x1qt0ttw",borderBottomStartRadius:"xgk8upj",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",display:"x78zum5",flexDirection:"x1q0g3np",marginTop:"xr9ek0c",marginEnd:"xfs2ol5",marginBottom:"xjpr12u",marginStart:"x12mruv9",paddingTop:"x889kno",paddingEnd:"x1iji9kk",paddingBottom:"x1a8lsjc",paddingStart:"x1sln4lm",$$css:!0},link:{display:"x78zum5",flexDirection:"xdt5ytf",marginTop:"xr9ek0c",marginEnd:"xfs2ol5",marginBottom:"xjpr12u",marginStart:"x12mruv9",pointerEvents:"x67bb7w",textAlign:"x2b8uid",verticalAlign:"xxymvpz",width:"x8yj6t5",$$css:!0},linkColor:{color:"xsve9r9",$$css:!0},space:{height:"xlxyqfn",$$css:!0},text:{display:"x78zum5",flexDirection:"xdt5ytf",marginTop:"xr9ek0c",marginEnd:"xfs2ol5",marginBottom:"xjpr12u",marginStart:"x12mruv9",textAlign:"x1yc453h",verticalAlign:"xxymvpz",width:"xh8yej3",$$css:!0}},l=50;function a(a){var b=a.appName,e=a.clientAppID,f=a.config,g=a.deactivating;a=a.params;var m=j(null),n=m[0],o=m[1];m=j(1);var p=m[0],q=m[1],r=l/(f.fade_time_sec*1e3);i(function(){return function(){n!=null&&c("clearInterval")(n)}},[n]);m=function(a,c){var f=e===String(351299233827255)?d("CloudHorizonClientFbts").CloudHorizonClientFbts:d("CloudGamingClientFbts").CloudGamingClientFbts;switch(a){case"SERVER_RESTART_TEXT":return f.getServerRestartMessage(c);case"CLIPBOARD_ENABLED_TEXT":return f.getClipboardEnabledMessage((c=b)!=null?c:"");case"CLIPBOARD_DISABLED_TEXT":return f.getClipboardDisabledMessage((c=b)!=null?c:"");default:return f[a]}};if(!g&&n!=null)c("clearInterval")(n),o(null),q(1);else if(g&&n==null){g=c("setInterval")(function(){q(function(a){a=a-r;a<=r&&(c("clearInterval")(n),o(null));return a})},l);o(g)}g=m(f.fbt_id,a.value);return g!=null?h.jsxs("div",{className:"xrmyhay x19lhggo x144nipd x1hqtkzk xlg2ruo xjqpnuy xa49m3k xqeqjp1 x2hbi6w x1a2cdl4 xnhgr82 x1qt0ttw xgk8upj x13fuv20 xu3j5b3 x1q0q8m5 x26u7qi x78zum5 x1q0g3np xr9ek0c xfs2ol5 xjpr12u x12mruv9 x889kno x1iji9kk x1a8lsjc x1sln4lm",style:{opacity:p},children:[h.jsxs("div",{className:"x78zum5 xdt5ytf xr9ek0c xfs2ol5 xjpr12u x12mruv9 x1yc453h xxymvpz xh8yej3",children:[h.jsx("div",{className:"xlxyqfn"}),h.jsx(c("TetraText.react"),{color:"primaryOnMedia",type:"body4",children:g}),h.jsx("div",{className:"xlxyqfn"})]}),a.buttonText!=null&&a.buttonCallback!=null&&h.jsxs("div",{className:"x78zum5 xdt5ytf xr9ek0c xfs2ol5 xjpr12u x12mruv9 x67bb7w x2b8uid xxymvpz x8yj6t5",children:[h.jsx("div",{className:"xlxyqfn"}),h.jsx(c("TetraText.react"),{type:"body4",children:h.jsx(c("CometLink.react"),{color:"highlight",onClick:a.buttonCallback,xstyle:k.linkColor,children:a.buttonText})}),h.jsx("div",{className:"xlxyqfn"})]})]}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CloudGamingWarningAlertManager.react",["CloudGamingContext.react","CloudGamingLogUtils","CloudGamingPlayerUtils","CloudGamingWarningAlert.react","CloudGamingWarningConfigConfig","clearTimeout","react","setTimeout","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useContext,k=b.useEffect,l=b.useMemo,m=b.useRef,n=b.useState,o={compositeLayer:{height:"x5yr21d",opacity:"x1hc1fzr",pointerEvents:"x47corl",position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",width:"xh8yej3",zIndex:"x1u8a7rm",$$css:!0},landscapeList:{alignItems:"x6s0dn4",display:"x78zum5",end:"x5sm72w",flexDirection:"x3ieub6",height:"x1p1iix",marginTop:"xr9ek0c",marginEnd:"xfs2ol5",marginBottom:"xjpr12u",marginStart:"x12mruv9",paddingTop:"x1nn3v0j",paddingEnd:"xg83lxy",paddingBottom:"x1120s5i",paddingStart:"x1h0ha7o",position:"x10l6tqk",start:"xzyc9ct",top:"x13vifvy",width:"x3hqpx7",$$css:!0},landscapeRotatedList:{display:"x78zum5",end:"xds687c",flexDirection:"x3ieub6",height:"xuv0xuj",marginTop:"xr9ek0c",marginEnd:"xfs2ol5",marginBottom:"xjpr12u",marginStart:"x12mruv9",paddingTop:"x1nn3v0j",paddingEnd:"xg83lxy",paddingBottom:"x1120s5i",paddingStart:"x1h0ha7o",position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",$$css:!0},portraitList:{bottom:"x1t8ds6e",display:"x78zum5",end:"x12i3lgd",flexDirection:"x3ieub6",height:"x1io82uz",marginTop:"xr9ek0c",marginEnd:"xfs2ol5",marginBottom:"xjpr12u",marginStart:"x12mruv9",paddingTop:"x1nn3v0j",paddingEnd:"xg83lxy",paddingBottom:"x1120s5i",paddingStart:"x1h0ha7o",position:"x10l6tqk",start:"xfw2dl1",width:"xktia5q",$$css:!0},portraitRotatedList:{display:"x78zum5",end:"x1wl4ed",flexDirection:"x3ieub6",height:"xlf90xa",marginTop:"xr9ek0c",marginEnd:"xfs2ol5",marginBottom:"xjpr12u",marginStart:"x12mruv9",paddingTop:"x1nn3v0j",paddingEnd:"xg83lxy",paddingBottom:"x1120s5i",paddingStart:"x1h0ha7o",position:"x10l6tqk",start:"x1gtc0s2",top:"x13vifvy",$$css:!0}};function a(a){var b=a.appID,e=a.appName,f=a.clientAppID,g=a.cloudGameID,p=a.gameOrientation,q=a.genNetworkQualityDialog,r=a.isInsideIframe,s=a.isMobileBrowser,t=a.sessionID;a=j(d("CloudGamingContext.react").CloudGamingWarningAlertStateContext);var u=a.browserOrientation,v=a.warningDialogs,w=a.warnings;a=n(new Map());var x=a[0],y=a[1],z=m(new Map()),A=m(new Map());a=i(function(){var a=new Map();c("CloudGamingWarningConfigConfig").warnings!=null&&c("CloudGamingWarningConfigConfig").warnings.forEach(function(b){a.set(b.warning_name,b)});return a},[]);var B=m(a()),C=i(function(a,c){d("CloudGamingLogUtils").logEvent(a,b,g,f,t,new Map([["name",c]]))},[b,f,g,t]),D=i(function(a){var b=x==null?void 0:x.get(a.warning_name);if(b==null||b!=null&&b.deactivating===!0){if(b!=null){b=b.deactivatingTimer;b!=null&&c("clearTimeout")(b)}y(function(b){b=new Map(b);b.set(a.warning_name,{deactivating:!1,deactivatingTimer:null});return b});C("WARNING_ALERT_SHOW",a.warning_name)}},[x,C]),E=i(function(a){y(function(b){b=new Map(b);var d=b.get(a.warning_name);if(d!=null&&d.deactivating===!1){d=d.deactivatingTimer;d!=null&&c("clearTimeout")(d);d=c("setTimeout")(function(){y(function(b){b=new Map(b);b["delete"](a.warning_name);z.current["delete"](a.warning_name);C("WARNING_ALERT_HIDE",a.warning_name);return b})},a.fade_time_sec*1e3);b.set(a.warning_name,{deactivating:!0,deactivatingTimer:d})}return b})},[C]),F=i(function(a){var b=z.current.get(a.warning_name);if(b!=null)return;D(a);b=c("setTimeout")(function(){E(a)},a.close_after_sec*1e3);z.current.set(a.warning_name,b)},[D,E]),G=i(function(a,b){var d=z.current.get(a.warning_name);d!=null&&c("clearTimeout")(d);D(a);d=c("setTimeout")(function(){b>0&&E(a)},a.close_after_sec*1e3);z.current.set(a.warning_name,d)},[D,E]);k(function(){w.forEach(function(a,b){b=B.current.get(b);if(b!=null){A.current.set(b.warning_name,a);switch(b.warning_type){case"metric":F(b);break;case"notification":G(b,a.value);break}}})},[w,G,F]);k(function(){var a=z.current;return function(){a.forEach(function(a){c("clearTimeout")(a)})}},[]);var H=[];x.forEach(function(a,b){var d=B.current.get(b),g=A.current.get(b);d!=null&&g!=null&&H.push(h.jsx("div",{children:h.jsx(c("CloudGamingWarningAlert.react"),{appName:e,clientAppID:f,config:d,deactivating:a.deactivating,params:g})},b))});a=l(function(){var a=d("CloudGamingPlayerUtils").playerSize(),b=a[0];a=a[1];var c=f===String(256281040558)||f===String(2220391788200892);c=c&&(p==null?void 0:p.toLowerCase())==="landscape"||!c&&b>a?o.landscapeList:o.portraitList;b=null;if(s){a=((a=p)!=null?a:"").toLowerCase();u===1&&a==="portrait"&&(b="rotate(-90deg)",c=o.portraitRotatedList);u===0&&a==="landscape"&&(b="rotate(90deg)",c=o.landscapeRotatedList)}return{style:c,transform:b}},[u,f,p,s]);return h.jsxs("div",{className:"x5yr21d x1hc1fzr x47corl x10l6tqk x17qophe x13vifvy xh8yej3 x1u8a7rm",style:{height:r?"100vh":"100%",transform:a.transform,width:r?"100vw":"100%"},children:[h.jsx("div",{className:c("stylex")(a.style),children:H}),v.has("NETWORK_QUALITY")&&q((r=v.get("NETWORK_QUALITY"))==null?void 0:r.closeCallback)]})}a.displayName=a.name+" [from "+f.id+"]";e=h.memo(a);g["default"]=e}),98);
__d("HorizonContainer.react",["CloudGamingActionTypes","CloudGamingPlayerUtils","CometMediaViewerFullscreenContext","HorizonWorldsUtils","err","gkx","notch","react","useMergeRefs","useResizeObserver"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useContext,k=b.useEffect,l=b.useLayoutEffect,m=b.useState;function a(a,b){var c=a.children,d=a.gameRotationDegree,e=a.isMobileApp,f=a.isMobileBrowser;a=a.onContainerResize;return h.jsx(p,{gameRotationDegree:d,isMobileApp:e,isMobileBrowser:f,onContainerResize:a,ref:b,children:c})}a.displayName=a.name+" [from "+f.id+"]";e=h.forwardRef(a);function n(a,b,e,f,g,h,i,j,k,l,m,n,o,p){e={height:b,left:Math.round(e),streamingRotation:0,top:Math.round(f),width:a};if(g!==-90&&g!==0)throw c("err")("Game rotation degree should be set to 0 or -90");if(h){if(e.height>e.width){f=e.width;e.width=e.height;e.height=f}g===0&&(e.streamingRotation=90)}else{h=e.width/e.height;if(h>d("CloudGamingPlayerUtils").LANDSCAPE_16_9_ASPECT_RATIO){f=d("CloudGamingPlayerUtils").LANDSCAPE_16_9_ASPECT_RATIO/h;e.width*=f}else if(h<d("CloudGamingPlayerUtils").LANDSCAPE_16_9_ASPECT_RATIO){f=h/d("CloudGamingPlayerUtils").LANDSCAPE_16_9_ASPECT_RATIO;e.height*=f}e.height<e.width*d("CloudGamingPlayerUtils").ASPECT_RATIO?e.width=Math.round(e.height/d("CloudGamingPlayerUtils").ASPECT_RATIO):e.height=Math.round(e.width*d("CloudGamingPlayerUtils").ASPECT_RATIO);e.left=(a-e.width)/2;e.top=(b-e.height)/2}e.width=Math.round(e.width);e.height=Math.round(e.height);l(e.width);j(e.height);k("rotate("+e.streamingRotation+"deg)");i({browserOrientation:g===-90?1:0,devicePixelRatio:devicePixelRatio,notchHeight:p,notchWidth:o,notchX:m,notchY:n,provider:"GREDOS",streamingRotation:e.streamingRotation,type:c("CloudGamingActionTypes").CONTAINER_RESIZE,viewportHeight:e.height,viewportLeft:e.left,viewportTop:e.top,viewportWidth:e.width})}function o(a){var b;b=(b=window)==null?void 0:(b=b.screen)==null?void 0:(b=b.orientation)==null?void 0:b.lock;if(b)return b.call(window.screen.orientation,a);b=((b=window)==null?void 0:(b=b.screen)==null?void 0:b.lockOrientation)||((b=window)==null?void 0:(b=b.screen)==null?void 0:b.mozLockOrientation)||((b=window)==null?void 0:(b=b.screen)==null?void 0:b.msLockOrientation);if(b){a=a;a==="natural"&&(a="default");b.call(window.screen,a)}}var p=h.forwardRef(function(a,b){var e=a.children,f=a.gameRotationDegree,g=a.isMobileBrowser,p=a.onContainerResize;a=m(0);var q=a[0],r=a[1];a=m(0);var s=a[0],t=a[1];a=m(null);var u=a[0],v=a[1];a=j(c("CometMediaViewerFullscreenContext"));var w=m(window.innerWidth>window.innerHeight?1:0),x=w[0],y=w[1];w=m(null);var z=w[0],A=w[1];o("landscape");var B=i(function(){var a,e;z===null&&A(d("notch").computeSafeArea());var h=d("notch").getNotch(z);a=typeof b!=="function"?(a=b.current)==null?void 0:a.getBoundingClientRect():null;n((e=a==null?void 0:a.width)!=null?e:0,(e=a==null?void 0:a.height)!=null?e:0,(e=a==null?void 0:a.left)!=null?e:0,(e=a==null?void 0:a.top)!=null?e:0,f,g,p,t,v,r,h.x,h.y,h.width,h.height);d("HorizonWorldsUtils").updateBrowserOrientation(x,y);if(c("gkx")("7351")){a=document.getElementById("debugTouchCanvas");if(a instanceof HTMLCanvasElement){e=a==null?void 0:a.getContext("2d");e.clearRect(0,0,a.width,a.height)}}},[x,f,g,p,b,z]);w=c("useResizeObserver")(B);l(function(){B();window.addEventListener("resize",B);window.addEventListener("orientationchange",B);return function(){window.removeEventListener("resize",B),window.removeEventListener("orientationchange",B)}},[B,a,b]);k(function(){if(!g)return;var a=window.navigator.virtualKeyboard;a!=null&&(a.overlaysContent=!0)},[g]);return h.jsx("div",{className:"x1i10hfl xpdipgo x1winvzj x6s0dn4 x9f619 x78zum5 x5yr21d xl56j7k x1a2a7pz x6ikm8r x10wlt62 x5ve5x3 x87ps6o xh8yej3",id:d("CloudGamingPlayerUtils").CG_PLAYER_CONTAINER_ID,ref:c("useMergeRefs")(b,w),children:h.jsx("div",{style:{height:s===0?"100%":s,position:"fixed",touchAction:"none",transform:u,width:q===0?"100%":q},children:e})})});g["default"]=e}),98);
__d("useCloudLoggers",["CloudGamingEventsFalcoEvent","CloudGamingLoadingEventRecorder","CloudGamingSessionEventFalcoEvent","react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useRef;function a(a,b,d,e,f,g,j,k,l){k===void 0&&(k=null);l===void 0&&(l={});l.native_player="false";var m=i(l);l=h(function(h,i,l){i===void 0&&(i="lo-pri");l===void 0&&(l={});j!=null&&(l.cloudBinaryID=j.toString());var n=Date.now();c("CloudGamingLoadingEventRecorder").alreadyRecorded(h)?n=c("CloudGamingLoadingEventRecorder").getEventTimestamp(h):c("CloudGamingLoadingEventRecorder").recordEvent(h,n);for(var o=c("CloudGamingLoadingEventRecorder").getEventLatency(h).entries(),p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var r;if(p){if(q>=o.length)break;r=o[q++]}else{q=o.next();if(q.done)break;r=q.value}r=r;var s=r[0];r=r[1];l[s]=r}s=i==="hi-pri"?c("CloudGamingEventsFalcoEvent").logImmediately:c("CloudGamingEventsFalcoEvent").log;s(function(){var i;return{app_id:a,client_app_id:d,client_app_version:(i=c("CloudGamingLoadingEventRecorder").getCloudAppVersion())!=null?i:e,cloud_game_id_override:b,entry_point:g,event:h,event_occur_time_ms:n.toString(),extra_data:babelHelpers["extends"]({},m.current,l),run_id:k,session_id:f,source:"JS"}})},[a,d,e,j,b,g,f,k]);var n=h(function(e,h,i){h===void 0&&(h="lo-pri");i===void 0&&(i={});var k=Date.now();i.event_occur_time_ms=k.toString();k=h==="hi-pri"?c("CloudGamingSessionEventFalcoEvent").logImmediately:c("CloudGamingSessionEventFalcoEvent").log;k(function(){return{app_id:a,binary_id:j,client_app_id:d,cloud_game_id_override:b,entry_point:g,event:e,extra_data:babelHelpers["extends"]({},m.current,i),session_id:f,source:"JS"}})},[a,d,j,b,g,f]);return{logCGEvent:l,logCGSessionEvent:n}}g["default"]=a}),98);
__d("CloudGamingContent.react",["CloudGamingAllowServerDebugEngWarning.react","CloudGamingApertureContainer.react","CloudGamingApertureUtils","CloudGamingConstants","CloudGamingErrorManagement","CloudGamingFullScreenMode.react","CloudGamingLockedMouseProcessor","CloudGamingMultiTouchOverlay.react","CloudGamingPlayerUtils","CloudGamingStreamLoading.react","CloudGamingVideoStream.react","CloudGamingVirtualGamepadManager","CloudGamingVirtualKeyboard.react","CloudGamingWarningAlertManager.react","CometLoadingAnimation.react","EventTimeUtils","HorizonContainer.react","Visibility","gkx","react","useCloudLoggers","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useEffect,aa=b.useMemo,k=b.useRef,ba=b.useState;function a(a){var b=a.appID,e=a.appName,f=a.clientAppID,g=a.clientAppVersion,l=a.cloudBinaryID,m=a.cloudGameID,n=a.connectionState,ca=a.dynamicResolution,o=a.enableCGFullyLockedMouse,da=a.enableCGLockedMouse,p=a.enableCGMultiTouchOverlay,ea=a.enableCGWarningAlerts,q=a.entryPoint,fa=a.eventBus,r=a.gameLifecycleState,s=a.gameOrientation,t=a.genCloudErrorMessage,ga=a.genNetworkQualityDialog,u=a.height,v=a.initialResolutionHeight,w=a.initialResolutionWidth,x=a.isCometOnMobile,y=a.isInsideIframe,z=a.onConnect,A=a.onContainerResize,B=a.onContainerRotation,C=a.onPause,D=a.onResume,ha=a.overrideLoadingState,E=a.provider,F=a.reactivateGame,ia=a.sendGredosCustomMouseEvent,ja=a.sendGredosCustomTouchEvent,ka=a.sendMouseInputWhenScreenIsLocked,la=a.sendMultiTouchKeyDown,ma=a.sendMultiTouchKeyUp,na=a.sendMultiTouchMouseDown,oa=a.sendMultiTouchMouseMove,pa=a.sendMultiTouchMouseUp,qa=a.sendRelativeMoveInputWhenScreenIsLocked,G=a.sessionID,H=a.showBackground,ra=a.showMultiTouchOverlay,sa=a.showSpinner,ta=a.useResourceSize,I=a.viewportHeight,J=a.viewportWidth,K=a.virtualGamepadListener,ua=a.virtualKeyboardListener,L=a.width,M=x||f===String(412378670482);a=d("CloudGamingPlayerUtils").playerSize();var N=a[0],O=a[1];a=ba(M&&N>O?-90:0);var P=a[0],va=a[1],Q=c("useStable")(function(){return M&&N>O?1:0}),R=r!=="Inactivated"&&r!=="Timeout",S=r==="NotReady";a=c("useCloudLoggers")(b,m,f,g,G,q,l,null,{height:u.toString(),width:L.toString()});var wa=a.logCGEvent,T=a.logCGSessionEvent;g=function(){T("VIDEO_START_PLAY")};q=function(){T("VIDEO_STREAM_READY")};l=function(){T("VIDEO_PLAY_ERROR")};var xa=k(!1);j(function(){if(xa.current===!0)return;xa.current=!0;wa("CLIENT_GAME_START_WEBRTC");z()},[wa,z]);var U=k(0);j(function(){var a=null;E==="GREDOS"&&(a=window.setInterval(function(){n.phase==="connecting"&&U.current<300?(T("HEARTBEAT","hi-pri",{heartbeatCounter:U.current.toString()}),U.current+=1):window.clearInterval(a)},1e3));return function(){return window.clearInterval(a)}},[n,T,E]);var ya=k(!1);j(function(){if(!y||ya.current===!0)return;ya.current=!0;document.body&&(document.body.style.userSelect="none",document.body.style.outline="none",document.body.style.touchAction="none",document.body.style.backgroundColor="black",H||(document.body.style.background="none"))},[y,H]);j(function(){var a=function(a){a.preventDefault();a.stopPropagation();a.kill();return!1};if(M){window.addEventListener("contextmenu",a);window.addEventListener("selectstart",a);return function(){window.removeEventListener("contextmenu",a),window.removeEventListener("selectstart",a)}}},[M]);j(function(){if(M){var a=function(){var a=d("CloudGamingPlayerUtils").playerSize(),b=a[0];a=a[1];var c=b>a?-90:0;va(c);var e=c===-90;c=Q===0&&c===-90||Q===1&&c===0;var f=e?v:w;e=e?w:v;B({contentSize:{height:a,width:c?Math.round(f/e*a):b},displaySize:{height:e,width:f},type:"CHANGE_RESOURCE_DIMENSIONS"})};a();window.addEventListener("resize",a);return function(){window.removeEventListener("resize",a)}}},[Q,v,w,M,B]);var V=k(!1),W=i(function(){if(!V.current){V.current=!0;var a=d("EventTimeUtils").tryGetTimestampInMicroSecond();C({changeTime:a})}},[C]),X=i(function(){if(V.current){V.current=!1;var a=d("EventTimeUtils").tryGetTimestampInMicroSecond();D({changeTime:a})}},[D]);a=aa(function(){return d("CloudGamingErrorManagement").passClientCheckForHorizon(b)||c("gkx")("8822")},[b]);j(function(){var a,b;E==="GREDOS"?(window.addEventListener("blur",W),window.addEventListener("focus",X)):(a=c("Visibility").addListener(c("Visibility").HIDDEN,C),b=c("Visibility").addListener(c("Visibility").VISIBLE,D));return function(){E==="GREDOS"?(window.removeEventListener("blur",W),window.removeEventListener("focus",X)):(c("Visibility").removeListener(a),c("Visibility").removeListener(b))}},[E,W,X,C,D]);var Y=k(null);j(function(){var a=Y.current;if((da||o)&&a!=null&&R){d("CloudGamingLockedMouseProcessor").setupLockedMouseProcessor(L,u,a,o,ka,qa);return function(){return d("CloudGamingLockedMouseProcessor").removeLockedMouseListeners()}}});var za=function(){return sa?S?h.jsx("div",{className:"x1i10hfl xpdipgo x1winvzj x1xjsryj xcmhaw8 xeynfza x1a2a7pz xixxii4 xtzzx4i xwa60dl x87ps6o x1gjbadx xg1rltx",children:h.jsx(c("CometLoadingAnimation.react"),{size:36})}):null:h.jsx(c("CloudGamingStreamLoading.react"),{inPossibleLoadingState:n.phase==="connecting"||n.phase==="live",isGameNotReady:S,isInsideIframe:y,message:n.phase==="connecting"?n.message:null,pending:n.phase==="connecting"?n.pending:[]})};if(n.phase==="error"){d("CloudGamingApertureUtils").isMobileApp(f)||window.parent.postMessage("HideSplashScreen","/");return t(n,r,F)}var Aa=null,Ba=null;if(E==="GREDOS"&&d("CloudGamingPlayerUtils").isTouchDevice(x,f)){x=!1;d("CloudGamingApertureUtils").isMobileApp(f)&&(x=c("gkx")("7"));var Z=P;if(M){var $=s==null?void 0:s.toLowerCase();$==="landscape"?P===0&&(Z=90):P!==0&&(Z=-90)}Aa=d("CloudGamingVirtualGamepadManager").getGamepadNode(b,f,m,n,G,x,K,J,I,Z);Ba=h.jsx(d("CloudGamingVirtualKeyboard.react").CloudGamingVirtualKeyboard,{listener:ua})}$=Object.values(d("CloudGamingConstants").HorizonAppIDs).includes(b);x=$&&c("gkx")("8910");K=a?za():t(n,r,F);I=R&&a?h.jsxs(h.Fragment,{children:[h.jsx(d("CloudGamingFullScreenMode.react").CloudGamingFullScreenMode,{clientAppID:f,cloudGameID:m,isGameNotReady:S,isMobileApp:d("CloudGamingApertureUtils").isMobileApp(f),isMobileBrowser:M,provider:E}),ra?h.jsx(c("CloudGamingMultiTouchOverlay.react"),{}):null,h.jsx(c("CloudGamingVideoStream.react"),{appID:b,eventBus:fa,forceVideoHidden:S||((J=ha)!=null?J:!1)&&!c("gkx")("239"),interactive:!0,manageKeyModifiers:E!=="GREDOS",onError:l,onPlay:g,onReady:q,provider:E,sendCustomMouseEvent:E==="GREDOS"?ia:null,sendCustomTouchEvent:E==="GREDOS"?ja:null,sendMultiTouchKeyDown:p?la:null,sendMultiTouchKeyUp:p?ma:null,sendMultiTouchMouseDown:p?na:null,sendMultiTouchMouseMove:p?oa:null,sendMultiTouchMouseUp:p?pa:null}),Ba,Aa]}):t(n,r,F);return h.jsxs(h.Fragment,{children:[h.jsx(c("CloudGamingAllowServerDebugEngWarning.react"),{}),x?h.jsx(c("HorizonContainer.react"),{gameRotationDegree:P,isMobileApp:d("CloudGamingApertureUtils").isMobileApp(f),isMobileBrowser:M,onContainerResize:A,ref:Y,children:h.jsxs(h.Fragment,{children:[K,I]})}):h.jsx(c("CloudGamingApertureContainer.react"),{appID:b,connectionState:n,dynamicResolution:ca,gameLifecycleState:r,gameOrientation:s,gameRotationDegree:P,isInsideIframe:y,isMobileApp:d("CloudGamingApertureUtils").isMobileApp(f),isMobileBrowser:M,onContainerResize:A,provider:E,ref:Y,useResourceSize:ta,videoHeight:u,videoWidth:L,children:h.jsxs(h.Fragment,{children:[K,I]})}),ea?h.jsx(c("CloudGamingWarningAlertManager.react"),{appID:b,appName:e,clientAppID:f,cloudGameID:m,gameOrientation:s,genNetworkQualityDialog:ga,isInsideIframe:y,isMobileBrowser:M,sessionID:G}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CloudGamingKeyboardLayoutAction",["CloudGamingActionTypes","EventTimeUtils","WebStorage"],(function(a,b,c,d,e,f,g){"use strict";var h="keyboard_layout";a=function(a){return{locale:a,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),type:c("CloudGamingActionTypes").KEYBOARD_LAYOUT}};b=function(a){return function(b){b({events:[{input:{keyboardLayout:a}}],purpose:"input",type:"SEND_RTC"});b(a);b=c("WebStorage").getLocalStorage();b!=null&&b.setItem(h,a.locale)}};g.KEYBOARD_LAYOUT_STORAGE_KEY=h;g.createKeyboardLayoutAction=a;g.sendKeyboardLayout=b}),98);
__d("CloudGamingLocalCursorMiddleware",["CloudGamingActionTypes","CloudGamingLocalCursorAction","CloudGamingLogUtils","CloudGamingPlayerUtils","CloudGamingSessionConfigConfig","EventTimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=16,i=27,j=null,k=null,l=null,m=null,n=null,o=null,p=null,q,r=!1,s=[],t=null,u={relativeX:0,relativeY:0,screenPosX:0,screenPosY:0},v=null,w=!1,x=function(){if(l==null){l=document.getElementById("ApertureVideoComponent");if(l!=null){var a;(a=l)==null?void 0:a.addEventListener("contextmenu",E);(a=l)==null?void 0:a.addEventListener("mousedown",F);(a=l)==null?void 0:a.addEventListener("mouseup",G);(a=l)==null?void 0:a.addEventListener("mousemove",H);(a=l)==null?void 0:a.addEventListener("mouseout",I);(a=l)==null?void 0:a.addEventListener("wheel",J);document.addEventListener("pointerlockchange",K)}}},y=function(){if(l!=null){var a;(a=l)==null?void 0:a.removeEventListener("contextmenu",E);(a=l)==null?void 0:a.removeEventListener("mousedown",F);(a=l)==null?void 0:a.removeEventListener("mouseup",G);(a=l)==null?void 0:a.removeEventListener("mousemove",H);(a=l)==null?void 0:a.removeEventListener("mouseout",I);(a=l)==null?void 0:a.removeEventListener("wheel",J);document.removeEventListener("pointerlockchange",K)}},z=function(){y(),l=null,p=null,r=!1,s.length=0,t=null,u.relativeX=0,u.relativeY=0,u.screenPosX=0,u.screenPosY=0,v=null};a=function(a,b,d,e,f,g){return function(h,i,p){m=b;n=d;o=e;q=f;w=g;if(a==="GREDOS")switch(h.type){case c("CloudGamingActionTypes").GAME_READY:B();z();j=i;k=p;x();break;case c("CloudGamingActionTypes").REACTIVATE_GAME:l=null;x();break;case"DISCONNECT":B();z();break;case c("CloudGamingActionTypes").IN_GAME_STATE:D(h.cursorState);h.cursorState&&(h.cursorState.visible?B():C());break;case c("CloudGamingActionTypes").CLIENT_RECEIVE_SDK_MESSAGE:(h.message.type==="openExternalLink"||h.message.type==="purchase"||h.message.type==="openGamingServicesDeepLink"||h.message.type==="showInterstitialAd"||h.message.type==="showRewardedVideo"||T(h.message))&&(r&&(document.exitPointerLock!==void 0&&document.exitPointerLock()));break;default:break}return h}};var A=function(a){d("CloudGamingLogUtils").logEvent(a,m,q,o,n,null)},B=function(){r&&A("CURSOR_UNLOCKED"),r=!1,document.exitPointerLock!==void 0&&document.exitPointerLock()},C=function(){r||A("CURSOR_LOCKED"),r=!0},D=function(a){if(a!=null){var b=a.icon;a=a.iconPool;var c=document.getElementById(d("CloudGamingPlayerUtils").CG_PLAYER_CONTAINER_ID);v!==b&&b!=null&&a!=null&&c!=null&&(c.style.cursor="url('data:image/png;base64,"+a.image64+"') "+a.hotspotX+" "+a.hotspotY+", auto",v=b)}},E=function(a){a.preventDefault()},F=function(a){L()&&(M(),N()&&O(a)&&j!=null&&(s.push(a.button),j(d("CloudGamingLocalCursorAction").sendCursor(d("CloudGamingLocalCursorAction").createCursorButtonAction(u.screenPosX,u.screenPosY,Q(a),"down")))))},G=function(a){var b=s.indexOf(a.button);L()&&N()&&b!==-1&&j!=null&&(s.splice(b,1),j(d("CloudGamingLocalCursorAction").sendCursor(d("CloudGamingLocalCursorAction").createCursorButtonAction(u.screenPosX,u.screenPosY,Q(a),"up"))))},H=function(a){if(L()&&N()&&j!=null&&k!=null){var b=P(a);if(t!=null&&t>a.timeStamp)return;t=a.timeStamp+c("CloudGamingSessionConfigConfig").time_between_move_events_in_ms;b&&(j(d("CloudGamingLocalCursorAction").sendCursor(d("CloudGamingLocalCursorAction").createCursorMovementAction(u.screenPosX,u.screenPosY,u.relativeX,u.relativeY))),u.relativeX=0,u.relativeY=0)}},I=function(a){L()&&j!=null&&(s.length=0,j(d("CloudGamingLocalCursorAction").sendCursor(d("CloudGamingLocalCursorAction").createCursorButtonAction(u.screenPosX,u.screenPosY,"all","up"))))},J=function(a){if(L()&&N()&&O(a)&&j!=null){var b=a.deltaY;a.deltaMode===0&&(b=a.deltaY/S());j(d("CloudGamingLocalCursorAction").sendCursor(d("CloudGamingLocalCursorAction").createCursorWheelAction(u.screenPosX,u.screenPosY,a.deltaX,b,a.deltaZ)))}},K=function(){if(w&&!document.pointerLockElement&&r){var a={code:"Escape",direction:1,jsCode:i,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond()};j!=null&&j({events:[{input:{key:a}}],purpose:"input",type:"SEND_RTC"});a={code:"Escape",direction:0,jsCode:i,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond()};j!=null&&j({events:[{input:{key:a}}],purpose:"input",type:"SEND_RTC"})}},L=function(){return k!=null&&k().gameLifecycle.gameLifecycleState==="Playing"},M=function(){if(r&&!document.pointerLockElement){var a;(a=l)==null?void 0:a.requestPointerLock()}},N=function(){return r&&!document.pointerLockElement?!1:!0},O=function(a){return k!=null&&a.clientX>=k().container.viewportLeft&&a.clientX<=k().container.viewportLeft+k().container.viewportWidth&&a.clientY>=k().container.viewportTop&&a.clientY<=k().container.viewportTop+k().container.viewportHeight?!0:!1},P=function(a){if(k!=null)if(document.pointerLockElement){u.relativeX+=a.movementX/k().container.viewportWidth;u.relativeY+=a.movementY/k().container.viewportHeight;u.screenPosX=R(k().localCursor.screenPosX+u.relativeX,0,1);u.screenPosY=R(k().localCursor.screenPosY+u.relativeY,0,1);return!0}else if(O(a)){u.screenPosX=R((a.clientX-k().container.viewportLeft)/k().container.viewportWidth,0,1);u.screenPosY=R((a.clientY-k().container.viewportTop)/k().container.viewportHeight,0,1);u.relativeX=u.screenPosX-k().localCursor.screenPosX;u.relativeY=u.screenPosY-k().localCursor.screenPosY;return!0}return!1},Q=function(a){switch(a.button){case 1:return"center";case 2:return"right";case 0:default:return"left"}},R=function(a,b,c){return Math.min(c,Math.max(b,a))},S=function(){if(p==null){var a=document.createElement("div");a.style.fontSize="initial";a.style.display="none";if(document.body!=null){var b;document.body.appendChild(a);var c=window.getComputedStyle(a).fontSize;(b=document.body)==null?void 0:b.removeChild(a);p=c?window.parseInt(c):h}else p=h}return p},T=function(a){return a.type==="clientData"&&a.data.shareWorld!=null};g.registerLocalCursorListeners=x;g.runAction=a}),98);
__d("CloudGamingMultiTouchOverlayAction",["ApertureMapTouch","CloudGamingActionTypes","CloudGamingKeyboardAction","CloudGamingMouseAction","CloudGamingMouseReducer","CloudGamingRTCAction"],(function(a,b,c,d,e,f,g){"use strict";var h=91,i=17,j=27;a=function(a,b,e){return function(f,g){g=g().multiTouchOverlay.showMultiTouchOverlay;switch(a.keyCode){case h:case i:b==="down"&&!g?f({timestamp:e,type:c("CloudGamingActionTypes").SHOW_MULTI_TOUCH_OVERLAY}):b==="up"&&g&&f({timestamp:e,type:c("CloudGamingActionTypes").HIDE_MULTI_TOUCH_OVERLAY});return;case j:document.pointerLockElement&&a.code==="Escape"&&document.exitPointerLock();return;default:break}switch(b){case"up":f(d("CloudGamingKeyboardAction").sendKeyUp(a,!0,!1));break;case"down":f(d("CloudGamingKeyboardAction").sendKeyDown(a,!0,!1));break}}};var k=function(a,b,c){c=c();var d=c.container.viewportWidth/2;c=c.container.viewportHeight/2;return{secondaryX:d+(d-a),secondaryY:c+(c-b)}},l=function(a,b,d,e,f){f({primaryX:a,primaryY:b,secondaryX:d,secondaryY:e,type:c("CloudGamingActionTypes").SET_POINTERS_COORDINATES})},m=function(a,b){return function(c,e){b.preventDefault&&b.preventDefault();var f=e(),g=b.clientX!=null?b.clientX:null,h=b.clientY!=null?b.clientY:null;if(typeof g==="number"&&typeof h==="number"){g=g-e().container.viewportLeft;h=h-e().container.viewportTop;var i=k(g,h,e),j=i.secondaryX;i=i.secondaryY;l(g,h,j,i,c);b.changedTouches==null&&f.multiTouchOverlay.showMultiTouchOverlay?g=babelHelpers["extends"]({},b,{changedTouches:[{clientX:g+e().container.viewportLeft,clientY:h+e().container.viewportTop,identifier:0,target:b.target},{clientX:j+e().container.viewportLeft,clientY:i+e().container.viewportTop,identifier:1,target:b.target}]}):g=babelHelpers["extends"]({},b)}else g=babelHelpers["extends"]({},b);a(g,f.resource.size.display,f.resource.size.contentSize).map(function(a){var b;b=(b=f.mouse[a.index.toString()])!=null?b:d("CloudGamingMouseReducer").DefaultTouchState;if((a.type==="MOUSE_MOVE"||a.type==="MOUSE_UP")&&!b.pressingDown)return;c(d("CloudGamingRTCAction").sendInputEvent(d("CloudGamingMouseAction").mouseEvent({direction:a.type==="MOUSE_UP"?0:1,index:a.index,timestamp:a.timestamp,x:a.position.x,y:a.position.y})));c(a)})}};b=function(a){return m(d("ApertureMapTouch").mouseUp,a)};e=function(a){return m(d("ApertureMapTouch").mouseUp,a)};f=function(a){return m(d("ApertureMapTouch").mouseDown,a)};var n=function(a){return m(d("ApertureMapTouch").mouseMove,a)};g.sendKeyboardMultiTouchEvent=a;g.clearMultiTouchInput=b;g.sendMultiTouchMouseUp=e;g.sendMultiTouchMouseDown=f;g.sendMultiTouchMouseMove=n}),98);
__d("FBRTCConfig",["CurrentUser"],(function(a,b,c,d,e,f,g){var h=!1,i=null,j=null,k=0,l=null,m="https://www.facebook.com/help/211644178877843",n="https://www.facebook.com/help/work/919532078125908",o="https://www.facebook.com/help/232232800134371",p="https://www.facebook.com/help/work/180714775754632";function a(a){var b=a.isVCEndpointCall,c=a.meetingID,d=a.meetingPassword,e=a.peerID;a=a.serverConfig;h=b;i=c;j=d;k=e;l=a}function b(){return h}function d(){return i}function e(){return j}function f(){return k}function q(){return{bad_score_count:3,frr_weight:800,plr_weight:500,rtt_weight:2,score_threshold:1e3}}function r(){var a;return((a=(a=l)==null?void 0:(a=a.troubleshooting_urls)==null?void 0:a.unsupported_browser)!=null?a:c("CurrentUser").isWorkUser())?n:m}function s(){var a;return((a=(a=l)==null?void 0:(a=a.troubleshooting_urls)==null?void 0:a.user_media_error)!=null?a:c("CurrentUser").isWorkUser())?p:o}function t(){var a;return((a=(a=l)==null?void 0:(a=a.troubleshooting_urls)==null?void 0:a.user_media_permission_error)!=null?a:c("CurrentUser").isWorkUser())?p:o}function u(){var a;return((a=l)==null?void 0:a.is_messenger_dot_com)===!0}function v(){var a;return((a=l)==null?void 0:a.messenger_call_ui)===!0}function w(){var a;return((a=l)==null?void 0:a.use_hd_video_quality)===!0}function x(){var a;return((a=l)==null?void 0:a.data_channel)===!0}function y(){var a;return((a=l)==null?void 0:a.disable_url_manager)===!0}g.setConfig=a;g.isVCEndpointCall=b;g.getMeetingID=d;g.getMeetingPassword=e;g.getPeerID=f;g.statsInterpreterConfig=q;g.unsupportedBrowserUrl=r;g.userMediaErrorUrl=s;g.userMediaPermissionErrorUrl=t;g.isMessengerDotCom=u;g.useMessengerCallUI=v;g.shouldUseHDVideoQuality=w;g.shouldCreateDataChannel=x;g.disableURLManager=y}),98);
__d("FBRTCExperiment",["FBRTCExperimentsConfig","QE2Logger"],(function(a,b,c,d,e,f,g){"use strict";a=function(){a.gen=function(b){var d={params:{},auto_exposure:!1,in_experiment:!1};d=c("FBRTCExperimentsConfig")[b]||d;return new a(b,d)};a.getMediaQualityExperiments=function(){return a.gen("rtc_www_media_quality_h2_2018")};a.getUpsellMessengerDesktopUnsupportedBrowser=function(){return a.gen("upsell_messenger_desktop_unsupported_browser_universe")};function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.$3=function(){this.$2.auto_exposure&&this.logExposure()};b.logExposure=function(){this.$2.in_experiment&&d("QE2Logger").logExposureForUser(this.$1)};b.getParam=function(a,b){if(this.$2.in_experiment){this.$3();a=this.$2.params[a];if(a!==void 0)return String(a)}return b};b.getInt=function(a,b){if(this.$2.in_experiment){this.$3();if(this.$2.params[a]!==void 0)return parseInt(this.$2.params[a],10)}return b};b.getBool=function(a,b,c){c===void 0&&(c=!0);var d=this.$2.params;if(this.$2.in_experiment){c&&this.$3();if(d[a]!==void 0)return d[a]==="1"||d[a]===1||d[a]==="true"||d[a]===!0}return b};return a}();g["default"]=a}),98);
__d("FBRTCSupport",["UserAgent","gkx"],(function(a,b,c,d,e,f,g){function h(){return c("UserAgent").isBrowser("Chrome >= 28")||c("UserAgent").isBrowser("Firefox >= 25")||c("UserAgent").isBrowser("Edge (Chromium Based) >= 74.1")||c("UserAgent").isBrowser("Opera >= 20")||j()&&c("gkx")("875718")||c("UserAgent").isBrowser("Oculus Browser >= 6")&&c("gkx")("1188589")||i()}function a(){return c("UserAgent").isBrowser("Chrome >= 28")||c("UserAgent").isBrowser("Edge (Chromium Based) >= 74.1")||c("UserAgent").isBrowser("Opera >= 20")||j()&&c("gkx")("875718")||i()}function i(){return!1}function b(){return h()&&(!!c("gkx")("1738376")||c("UserAgent").isBrowser("Chrome >= "+65))}function d(a){var b=c("UserAgent").isBrowser("Chrome >= 73")||c("UserAgent").isBrowser("Safari >= 12.2");if(a)return b;a=c("gkx")("919244")&&b;return a||c("UserAgent").isBrowser("Mobile Safari >= 12.1.1")}function j(){return c("UserAgent").isBrowser("Safari >= 12.1")||c("UserAgent").isBrowser("Mobile Safari >= 12.1")}function k(){return c("UserAgent").isPlatform("Android")||c("UserAgent").isPlatform("iOS")}function e(){return!k()&&(c("UserAgent").isBrowser("Chrome >= 51")||c("UserAgent").isBrowser("Opera >= 36"))}function f(){return c("UserAgent").isBrowser("Firefox < 60")||c("UserAgent").isBrowser("Edge")}function l(){return c("UserAgent").isBrowser("Chrome")||c("UserAgent").isBrowser("Opera")||c("UserAgent").isBrowser("Edge (Chromium Based) >= 74.1")}g.isWebrtcSupported=h;g.isGroupCallWebtrcSupported=a;g.isUnifiedEnabledForCallsExperimentation=i;g.isCollabSupported=b;g.canUseUnifiedPlan=d;g.isSupportedSafariVersion=j;g.isMobileDevice=k;g.isVideoFilterEffectSupported=e;g.videoEscalationByUnmuteWorkaround=f;g.isChromiumBased=l}),98);
__d("RTWebClientFeatureGating",["CurrentUser","FBRTCConfig","FBRTCExperiment","FBRTCSupport","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){return d("FBRTCConfig").isVCEndpointCall()||c("CurrentUser").isWorkUser()}function a(){return c("gkx")("867914")}function b(){return!1}function e(){return c("FBRTCExperiment").gen("rtc_www_larger_self_view").getBool("draggable_self_view",!1)}function f(){return!h()}function i(){return!c("CurrentUser").isWorkUser()&&d("FBRTCSupport").isVideoFilterEffectSupported()}function j(){if(d("FBRTCConfig").isVCEndpointCall())return!1;return c("CurrentUser").isWorkUser()?!1:!0}function k(){return!1}function l(){return c("FBRTCExperiment").gen("rtc_www_call_unification").getBool("in_call_background_updated",!1)}function m(){return c("gkx")("678350")}function n(){if(d("FBRTCConfig").isVCEndpointCall())return!1;var a=c("FBRTCExperiment").gen("turnoff_camera_when_facemute");return a.getBool("camera_off",!1)}function o(){var a=c("FBRTCExperiment").gen("turnoff_camera_when_facemute");return a.getBool("track_api",!1)}function p(){return!h()}function q(){return c("gkx")("678351")}function r(){return c("gkx")("700608")}function s(){return c("gkx")("724606")}function t(){return navigator.userAgent.indexOf("Intel Mac OS X 10_14")!==-1}function u(){return c("FBRTCExperiment").gen("rt_web_fb_profile_rtc_buttons").getBool("open_chat_tab",!1)}function v(){return h()?!1:c("FBRTCExperiment").getMediaQualityExperiments().getBool("show_network_indicator",!1)}function w(){return h()?!1:c("FBRTCExperiment").getMediaQualityExperiments().getBool("monitor_network_quality",!1)}function x(){return!d("FBRTCConfig").isVCEndpointCall()}g.isVCCallOrWorkUser=h;g.shouldShowEndCallQPs=a;g.shouldShowCreateVCLButton=b;g.draggableSelfView=e;g.endCallSurveyDropdownOptions=f;g.canUseMWVideoFilters=i;g.isChatEnabled=j;g.isGroupChatEnabled=k;g.callUnification=l;g.canUseMultiwaySandbox=m;g.stopVideoWhenMute=n;g.restartVideoWithTrackAPI=o;g.shouldAlwaysShowRedial=p;g.disableOpusStereo=q;g.shouldApplySdpMidTranslation=r;g.preserveFirefoxInactiveDataChannelBlock=s;g.showMojavePermissionsWarning=t;g.alwaysOpenChatTab=u;g.shouldShowNetworkQualityIndicator=v;g.shouldMonitorNetworkQuality=w;g.preferIsacForGroupCalls=x}),98);
__d("FBRTCSdpUtils",["FBLogger","RTWebClientFeatureGating","UserAgent"],(function(a,b,c,d,e,f,g){var h="a=x-fb-feature:",i="\r\n",j="m=video 0",k=["audio","video"].map(function(a){return new RegExp("m="+a+"\\s+\\d+\\s+(\\w+\\/?)+(\\s+\\d+)+")}),l=k[0],m=k[1],n=["http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01","http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time","urn:3gpp:video-orientation","urn:ietf:params:rtp-hdrext:ssrc-audio-level","urn:ietf:params:rtp-hdrext:toffset"],o=function(a){return a.match(/^a=rtpmap:(\d+)\s/)[1]},p=function(a,b,c){var d=o(a[b]);q(a,c,[d]);a.splice(b,1)},q=function(a,b,c){var d=a[b].split("RTP/SAVPF"),e=d[1].split(/\s+/);for(var f=0;f<c.length;f++){var g=e.indexOf(c[f]);g>=0&&e.splice(g,1)}d[1]=e.join(" ");a[b]=d.join("RTP/SAVPF")},r=function(a,b,c){var d=o(a[b]);p(a,b,c);var e=new RegExp("^a=(rtcp-fb|fmtp):"+d+" ");a=a.filter(function(a,b){return!(e.test(a)&&b>=c)});var f=new RegExp("^a=fmtp:(\\d+)\\s+apt="+d+"($|;)");b=a.reduce(function(a,b,c){c=b.match(f);return c?[].concat(a,[c[1]]):a},[]);d=b.join("|");q(a,c,b);var g=new RegExp("^a=rtpmap:("+d+")\\s+rtx/|^a=fmtp:("+d+")\\s+apt=");return a.filter(function(a){return!g.test(a)})};function a(a){var b="UDP/TLS/RTP/SAVPF",c="RTP/SAVPF";while(a.indexOf(b)>=0)a=a.replace(b,c);return a}function b(a,b){"use strict";var c="a=ice-options:",d=a.indexOf(c);if(d>=0)return a.split(i).map(function(a){return a.startsWith(c)?a+" "+b:a}).join(i);d=c+b;var e=a.split(i),f=!1,g=-1;for(var h=0;h<e.length;h++){var j=e[h].slice(0,2);if(j=="s="){f=!0;continue}if(f&&j=="a="){g=h;break}}if(g>=0){e.splice(g,0,d);return e.join(i)}return[a,d,i].join("")}function e(a){a=a.split(i);var b=-1,c=-1,d=-1;for(var e=0;e<a.length;e++){var f=a[e];f.match(l)&&(b=e);d===-1&&b>-1&&f.match(/^a=rtpmap:/)&&(d=e);f.match(/^a=rtpmap:\d+\s+ISAC\/16000/)&&(c=e)}if(b===-1||c===-1||d===-1||a[b].indexOf("RTP/SAVPF")===-1)return a.join(i);f=a[c];p(a,c,b);a.splice(d,0,f);a[b]=a[b].replace("RTP/SAVPF","RTP/SAVPF "+o(f));return a.join(i)}function f(a,b,c){a=a.split(i);var d=c?m:l,e=a.findIndex(function(a){return d.test(a)});if(e!==-1&&a[e].indexOf("RTP/SAVPF")!==-1){var f=new RegExp("^a=rtpmap:\\d+\\s+"+b);c=a.findIndex(function(a){return f.test(a)});var g=/^a=rtpmap:/;b=a.findIndex(function(a,b){return b>e&&g.test(a)});if(c!==-1&&b!==-1){var h=a[c];p(a,c,e);a.splice(b,0,h);a[e]=a[e].replace("RTP/SAVPF","RTP/SAVPF "+o(h))}}return a.join(i)}function s(a){var b=/m=video\s+\S+/;a=a.replace(b,j);c("UserAgent").isBrowser("Firefox <= 37")&&(a=t(a));return a}function t(a){if(a.indexOf(j)>-1){var b=a.split(j);b[1]=b[1].replace(/send(recv|only)/,"recvonly");a=b.join(j)}return a}function u(a){a=a.replace(/^a=/,"");a=a.split(/\s+username\s+.+password.+/)[0];var b=a.match(/\s+relay\s+|\s+srflx\s+/),c=a.match(/raddr.+rport.+/);if(b&&!c){b=b[0];c=a.split(b);var d=c[1].match(/^(\d+\.\d+\.\d+\.\d+)\s+(\d+)\s+/),e,f;if(d)e=d[1],f=d[2],c[1]=c[1].replace(d[0],"");else{d=c[0].split(/\s+/);e=d[4];f=d[5]}a=""+c[0]+b+"raddr "+e+" rport "+f+" "+c[1]}return a}function v(a){var b=[];a=a.split(i).map(function(a){var c="";b.length>0&&(/^a=rtpmap:(\d+)/.test(a)||/^a=ssrc/.test(a)||/^m=/.test(a))&&(c+=A(b)+i,b=[]);/^m=audio/.test(a)&&(b=a.match(/^m=audio\s+[\d\/]+\s+[\w\/]+([\s+\d+]+)/)[1].trim().split(" "));return c+a}).join(i);b.length>0&&(a+=i+A(b));return a}function w(a){if(a.indexOf("a=setup:")>=0)return a;a=a.split(i);var b=a.findIndex(function(a){return a.startsWith("s=")}),c=a.findIndex(function(a,c){return c>b&&a.startsWith("a=")});a.splice(c,0,"a=setup:actpass");return a.join(i)}function x(a,b,c,d){a=a==b?[]:a.substr(b.length).split(";");var e=a.findIndex(function(a){return a.startsWith(c+"=")});d=c+"="+d;e<0?a.push(d):a[e]=d;return""+b+a.join(";")}function y(a,b,c,d){var e=new RegExp("^a=rtpmap:(\\d+)\\s"+b);b=a.findIndex(function(a){return a.match(e)});if(b<0)return a;var f=a[b].match(e);f=f[1];var g="a=fmtp:"+f+" ";f=a.findIndex(function(a){return a.startsWith(g)});f===-1&&(f=b+1,a.splice(f,0,g));a[f]=x(a[f],g,c,d);return a}function z(a,b,c,d){a=a.split(i);var e=-1;for(var f=0;f<=a.length;f++)if(f===a.length||a[f].startsWith("m=")){if(e!==-1){var g=a.splice(e,f-e);g=y(g,b,c,d);a.splice.apply(a,[e,0].concat(g));f=e+1+g.length}e=f}return a.join(i)}function A(a){return a.map(function(a){return"a=rtcp-fb:"+a+" nack"}).join(i)}function B(a,b){var c=a;a=function(){var a=c.split(i),d=new RegExp("^a=rtpmap:\\d+\\s+"+b+"\\/"),e=a.findIndex(function(a){return d.test(a)}),f=a.findIndex(function(a){return/^m=video/.test(a)});if(e==-1||f==-1)return"break";c=r(a,e,f).join(i)};do{var d=a();if(d==="break")break}while(!0);return c}function C(a){return B(a,"red")}function D(a){return B(a,"H264")}function E(a){return B(a,"VP9")}function F(a){a=a.split(i);a=a.filter(function(a){return!a.match(/^a=extmap:/)||n.some(function(b){return a.includes(b)})});return a.join(i)}function G(a){return!!a&&a.indexOf("m=video")!==-1&&a.indexOf(j)===-1}function H(a,b){if(!a.match(/setup:(active|passive|actpass)/))return a.replace(/(a=fingerprint:.+)/g,"$1"+i+"a=setup:"+b);else return a.replace(/setup:actpass/g,"setup:"+b)}function I(a){var b=c("UserAgent").isBrowser("Firefox"),d=b?"TIAS":"AS";b=b?72e4:720;var e=new RegExp("^b="+d+":","m");if(a.match(e))return a;a=a.replace(/^a=mid:video\r\n/m,"a=mid:video"+i+"b="+d+":"+b+i);return a}function J(a){if(d("RTWebClientFeatureGating").shouldApplySdpMidTranslation())return a;a=a.split(i);var b="audio",e=!1,f=-1;for(var g=0;g<a.length;g++){var h=a[g];h.indexOf("m=audio")===0&&(b="audio");h.indexOf("m=video")===0&&(e=!0,b="video");h.indexOf("a=mid:sdparta_")===0&&(a[g]="a=mid:"+b);h.indexOf("a=group:BUNDLE sdparta_")===0&&(f=g);h.indexOf("a=group:BUNDLE audio sdparta_")===0&&(f=g);h.indexOf("a=group:BUNDLE audio video sdparta_")===0&&c("FBLogger")("rtc_www").mustfix("content_name rewriting will not work anymore, fix sdparta_# in Firefox.")}f>-1&&(e?a[f]="a=group:BUNDLE audio video":a[f]="a=group:BUNDLE audio");return a.join(i)}function K(a){if(!d("RTWebClientFeatureGating").shouldApplySdpMidTranslation())return{answerSdpMap:null,offerSdpMap:null};a=a.split(i);var b={},c={},e=null;a.forEach(function(d){d.startsWith("m=audio")?e="audio":d.startsWith("m=video")?e="video":d.startsWith("m=")?e=null:d.startsWith("a=mid:")&&e&&(a=d.split("a=mid:")[1],a!==e&&(b[a]=e,c[e]||(c[e]=a)))});return{offerSdpMap:Object.keys(b).length?b:null,answerSdpMap:Object.keys(c).length?c:null}}function L(a,b){if(b==null||!d("RTWebClientFeatureGating").shouldApplySdpMidTranslation())return a;var c=b,e=a.split(i);b=-1;e.forEach(function(d,f){if(d.startsWith("a=group:BUNDLE"))b=f;else if(d.startsWith("a=mid:")){a=d.split("a=mid:")[1];d=c[a]||a;e[f]="a=mid:"+d}});if(b>-1){var f=e[b].split("a=group:BUNDLE ")[1].split(" ");f=f.map(function(a){return c[a]||a});e[b]="a=group:BUNDLE "+f.join(" ")}return e.join(i)}function M(a){if(!(c("UserAgent").isBrowser("Chrome >= 57")||c("UserAgent").isBrowser("Opera >= 44")))return a;return!/^a=fingerprint:/m.test(a)?a:a.split(i).filter(function(a){return a.indexOf("a=crypto:")!==0}).join(i)}function N(a,b){if(a.split(":")[0]==="LIVE"){a=/^m=/;var c=/^m=audio/,d=/^m=video/,e=/^a=ssrc:/;b=b.split(i);var f=[];for(var g=b.length-1;g>=0;g--)a.test(b[g])&&f.push(b.splice(g));var h=!1,j=!1;f.forEach(function(a){c.test(a[0])&&!h?h=a.some(function(a){return e.test(a)}):d.test(a[0])&&!j&&(j=a.some(function(a){return e.test(a)}))});return h&&j}return!0}function O(a,b){var c=a.findIndex(function(a){a=a.match(/^a=rtpmap:(\S+)\s/);return a&&a[1]===b?!0:!1}),d=a.findIndex(function(a){return/^m=video/.test(a)});return c===-1||d===-1?a:r(a,c,d)}function P(a,b){var c=a.findIndex(function(a){return/^m=video/.test(a)});if(c===-1)return[];var d=new RegExp("^a=rtpmap:\\S+\\s+"+b+"\\/"),e=[];a.forEach(function(b,f){if(d.test(b)){b=o(a[f]);a[c].indexOf(b)>0&&e.push(b)}});return e}function Q(a,b){var c=b.levelAsymmetryAllowed?"1":"0",d=b.packetizationMode?"1":"0";c=new RegExp("^a=fmtp:(\\S+)\\s+level-asymmetry-allowed="+c+";packetization-mode="+d+";profile-level-id="+b.profileLevelId);for(d=0;d<a.length;d++){b=a[d].match(c);if(b)return b[1]}return null}function R(a,b){var c=a.split(i),d=Q(c,b);if(!d)return a;b=P(c,"H264");return b.reduce(function(a,b){return b!==d?O(a,b):a},c).join(i)}function S(a){if(!c("UserAgent").isBrowser("Firefox")||d("RTWebClientFeatureGating").preserveFirefoxInactiveDataChannelBlock())return a;var b=a.split(i),e=b.findIndex(function(a){return a.startsWith("m=application")});if(e===-1)return a;var f=b.slice(e),g=f.findIndex(function(a,b){return b>0&&a.startsWith("m=")});g!==-1&&(f=f.slice(0,g));if(f[0]!=null&&f[0].endsWith("0")&&f.some(function(a){return a.startsWith("a=inactive")})){g=f.findIndex(function(a){return a.startsWith("c=")});return[].concat(b.slice(0,e+1+(g!==-1?g:0)),b.slice(e+f.length),[""]).join(i)}return a}function T(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];if(c.length<1)return a;var e=V(a),f=e[0],g=e[1],j=f.split(i),k=W(j),l=j.filter(function(a){return!a.startsWith(h)}),m=1+l.map(function(a){return a?a.substr(0,2):""}).lastIndexOf("a=")||l.length;return[].concat(l.slice(0),X([].concat(k,c)).map(function(a){return""+h+a}),l.slice(m),[g?[g.trim(),""].join(i):""]).join(i)}function U(a){a=V(a);a=a[0];return W(a.split(i))}function V(a){if(!a)return["",""];var b=a.trim().split(i),c=0;while(c<b.length){if(b[c].startsWith("m="))break;c++}return c===b.length?[a.trim(),""]:[b.slice(0,c).join(i).trim(),b.slice(c).join(i).trim()]}function W(a){return X(a.filter(function(a){return a.startsWith(h)}).map(function(a){return a.substr(h.length)}))}function X(a){var b=Object.create(null);for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e&&(b[e]=!0)}return Object.keys(b).sort()}function Y(a,b){var c=a.split(i);b.forEach(function(a,b){var d=new RegExp("^a=ssrc:\\d+ label:"+b);b=c.findIndex(function(a){return d.test(a)});if(b!==-1){var e=c[b].trim().split(" ")[0];if(/^a=ssrc:\d+$/.test(e)){e=e+" x-fb-content:"+a;c.splice(b+1,0,e)}}});return c.join(i)}function Z(a){var b="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";return $(a,b)}function $(a,b){if(a.indexOf(b)!==-1)return a;b="a=extmap:%d "+b;a=a.split("\r\n");for(var c=0;c<a.length;c++){var d=a[c];if(d.startsWith("m=video")){d=0;var e=c;for(var f=c+1;f<a.length;f++){var g=a[f];if(g.startsWith("a=extmap:")){var h=parseInt(g.split(":")[1],10);d=Math.max(d,h);e=f}else if(g.startsWith("m="))break}a.splice(e+1,0,b.replace("%d",(d+1).toString()))}}return a.join("\r\n")}g.RX_SDP_MEDIA_AUDIO=l;g.RX_SDP_MEDIA_VIDEO=m;g.replaceRTPSAVPFProfile=a;g.addIceOptionToSdp=b;g.preferIsac=e;g.preferCodec=f;g.disableVideo=s;g._makeDisabledVideoReceiveOnly=t;g.fixMobileIceSdp=u;g.addAudioNack=v;g.addSetup=w;g._replaceFmtp=x;g._addFmtpToMediaSection=y;g.addFmtp=z;g._getrtcpFeedbackLinesFromAudioFMTs=A;g._removeCodec=B;g.removeRED=C;g.removeH264=D;g.removeVP9=E;g.removeUnknownRtpHeaderExtensions=F;g.isVideoSupported=G;g.setDtlsRole=H;g.setVideoBitrateConstraint=I;g.removeSdparta=J;g.constructMidMap=K;g.transformSdpMids=L;g.useDTLSOverCrypto=M;g.validateOfferSdp=N;g._removeCodecID=O;g._getAllCodecIds=P;g._getCodecIDMatchingH264Profile=Q;g.pickSpecificH264ProfileIfExists=R;g.clearFirefoxInactiveDataChannelBlock=S;g.addFBFeatures=T;g.getFBFeatures=U;g.addSSRCContentType=Y;g.addDependencyDescriptorExt=Z;g.addVideoExt=$}),98);
__d("HorizonWorldsPWAUtils",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return i()&&!h()&&(c("gkx")("2094")||c("gkx")("1724"))&&(c("gkx")("4300")||c("gkx")("4299")||j())}function h(){return window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: fullscreen)").matches}function i(){return["iPhone","iPad","iPod"].includes(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1||window.navigator.userAgent.includes("iPhone")}function j(){return i()&&window.navigator.userAgent.includes("Safari")&&!window.navigator.userAgent.includes("Chrome")&&!window.navigator.userAgent.includes("Chromium")&&!window.navigator.userAgent.includes("CriOS")&&!window.navigator.userAgent.includes("FxiOS")}g.isHorizonWorldsRequirePWA=a;g.isHorizonWorldsPWA=h;g.isHorizonWorldsIOS=i;g.isIOSSafari=j}),98);
__d("CloudGamingRTCMiddleware",["BrowserFeatureInstrumentation","CloudGamingActionTypes","CloudGamingConstants","CloudGamingErrorTypes","CloudGamingInputLatencyTracker","CloudGamingMessageReceiver","CloudGamingRTCAction","CloudGamingSessionConfigConfig","CloudGamingSidebarMicrophoneControl.react","FBRTCSdpUtils","HorizonWorldsPWAUtils","HorizonWorldsUtils","Promise","UserAgent","ZenonBrowsers","asyncToGeneratorRuntime","clearInterval","fbinstant/releases/samus/internalStates.samus","gkx","isTruthy","promiseDone","qex","setInterval","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=20,i=!0,j=null,k=null,l=null,m=null,n=null,o=!1,p,q=null;function r(a,b,c){Q(),q=c,j=a,b,k=null,l=null,m=null,o=Object.values(d("CloudGamingConstants").HorizonAppIDs).includes(b)}function s(a){var b=a.errorDescription;return b!=null?b.toString():a.toString()}function t(a){a=a.payload;return a!=null&&a.response!=null?a.response.toString():null}function u(a,b,c){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d,e){var f;d=d;var g="";do{f=z(a);f=(yield f.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}));f=f.sdp;g=f===void 0?"":f;if(!g.toLowerCase().includes("h264"))yield new(b("Promise"))(function(a){return c("setTimeout")(a,e)});else break;d--}while(d>0);return b("Promise").resolve(g.toLowerCase().includes("h264"))});return v.apply(this,arguments)}function w(a,b,c,e){if(e===!1&&c===0)return a;a=a.split(/^(?=m=)/gm);var f=[];for(a of a){if(a.search(b?"a=sendonly":"a=recvonly")===-1){f.push(a);continue}e&&(a=d("FBRTCSdpUtils").addFmtp(a,"opus","usedtx","1"));c!==0&&(a=d("FBRTCSdpUtils").addFmtp(a,"opus","minptime",c+""),a=d("FBRTCSdpUtils").addFmtp(a,"opus","maxptime",c+""),a=d("FBRTCSdpUtils").addFmtp(a,"opus","ptime",c+""));f.push(a)}return f.join("")}function x(a,b,c,d,e,f){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,l){var m;d("CloudGamingSidebarMicrophoneControl.react").usingMicrophoneControl(j)&&V(b,c("CloudGamingActionTypes").MICROPHONE_SUPPORTED_IN_GAME);if(((m=a.h264Required)!=null?m:!1)&&c("gkx")("6169")){m=(yield u(a,50,100));if(!m){b({code:d("CloudGamingErrorTypes").CloudGamingErrorCode.CREATE_OFFER_FAILURE,detail:"h264 required but not supported",type:c("CloudGamingActionTypes").CONNECTION_ERROR});return}}var n=z(a);n.onicecandidateerror=function(a){V(b,c("CloudGamingActionTypes").ICE_CANDIDATE_ERROR,JSON.stringify(a))};b({connection:n,timestamp:Date.now(),type:c("CloudGamingActionTypes").PEER_CONNECTION_CREATED});k!=null&&V(b,c("CloudGamingActionTypes").MICROPHONE_TRANSCEIVER_CREATED);if(((m=a.h264Required)!=null?m:!1)&&c("gkx")("147")){m=(yield R(10,100));if(!m.h264Supported){b({code:d("CloudGamingErrorTypes").CloudGamingErrorCode.CREATE_OFFER_FAILURE,detail:"h264 required but not supported",type:c("CloudGamingActionTypes").CONNECTION_ERROR});return}}m=(yield n.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}));if(c("gkx")("1742616")){var o;m.sdp=d("FBRTCSdpUtils").removeH264((o=m.sdp)!=null?o:"")}m.sdp=B((o=m.sdp)!=null?o:"");if((d("ZenonBrowsers").isChrome()||d("ZenonBrowsers").isChromium()||d("ZenonBrowsers").isChromiumBasedEdge())&&d("ZenonBrowsers").webrtcVersion()>=112&&(c("qex")._("1274")||c("qex")._("145"))){m.sdp=d("FBRTCSdpUtils").addDependencyDescriptorExt((o=m.sdp)!=null?o:"")}o={sdp:m.sdp,type:m.type};if(d("ZenonBrowsers").isChrome()||d("ZenonBrowsers").isChromium()||d("ZenonBrowsers").isChromiumBasedEdge()){var p;if(((p=a.h264SpsPpsInKeyframe)!=null?p:!1)&&d("ZenonBrowsers").webrtcVersion()>=86){o.sdp=d("FBRTCSdpUtils").addFmtp((p=o.sdp)!=null?p:"","H264","sps-pps-idr-in-keyframe","1")}}p=o.sdp;p!=null&&c("gkx")("2993")&&(o.sdp=w(p,!0,h,i));n.setLocalDescription(o);o=(p=m.sdp)!=null?p:"";a.streamMode==="h264"&&(o=d("FBRTCSdpUtils").preferCodec(o,"H264",!0));m={timestamp:Date.now(),type:c("CloudGamingActionTypes").SEND_SDP_OFFER};b(m);p=e().rtc.enableInputCompactFormat;m=function(a){if(a.errorMessage!=null&&a.errorMessage!=="")b({code:d("CloudGamingErrorTypes").CloudGamingErrorCode.CREATE_OFFER_FAILURE,detail:a.errorMessage,payloadResponse:a.errorMessage,type:c("CloudGamingActionTypes").CONNECTION_ERROR});else if(a.isEnqueued===!0)b({timestamp:Date.now(),type:c("CloudGamingActionTypes").CONNECTION_ENQUEUED});else{if(n.connectionState==="closed"){b({timestamp:Date.now(),type:c("CloudGamingActionTypes").CONNECTION_CLOSED_DURING_NEGOTIATION});return}var e=a.debugInfo,j=a.purposeToLabel,l=a.screenSize;b({displaySize:l,modifierMap:{},payload:a,purposeToLabel:new Map(Object.entries(j)),timestamp:Date.now(),type:c("CloudGamingActionTypes").RECEIVED_SDP_ANSWER});g==null?void 0:g.send(d("CloudGamingConstants").CloudGamingMessageTypes.NEGOTIATION_FINISHED,(l=e)!=null?l:"");j=a.sdpAnswer;c("gkx")("2993")&&(j=w(a.sdpAnswer,!1,h,i));e=n.setRemoteDescription({sdp:j,type:"answer"});c("promiseDone")(e["catch"](function(a){q(a)}));k!=null&&k.mid!=null&&V(b,c("CloudGamingActionTypes").MICROPHONE_NEGOTIATION_SUCCESS);D(f,b)}};var q=function(a){var e;e=(e=a.message)!=null?e:a.toString();b({code:d("CloudGamingErrorTypes").CloudGamingErrorCode.CREATE_OFFER_FAILURE,detail:e,payloadResponse:e,type:c("CloudGamingActionTypes").CONNECTION_ERROR})};yield a.negotiateSDPMutation(p,o,m,q,l)});return y.apply(this,arguments)}function z(a){var b=new RTCPeerConnection({sdpSemantics:"unified-plan"});if(b.addTransceiver!==void 0){a=(a=a.videoDirection)!=null?a:"sendrecv";b.addTransceiver("video",{direction:a});b.addTransceiver("audio",{direction:"recvonly"});d("CloudGamingSidebarMicrophoneControl.react").usingMicrophoneControl(j)&&(k=b.addTransceiver("audio",{direction:"sendonly"}))}return b}function A(a,b,e,f,g,h){x(a,b,e,f,g,h).then(function(){D(f,b)})["catch"](function(a){b({code:d("CloudGamingErrorTypes").CloudGamingErrorCode.CREATE_OFFER_FAILURE,detail:s(a),payloadResponse:t(a),type:c("CloudGamingActionTypes").CONNECTION_ERROR})})}function B(a){var b=a.split("m="),c=!1;for(var d of b.entries()){var e=d[0],f=d[1];if(f.startsWith("audio")&&f.indexOf("recvonly")!==-1){var g=function(){var a=new RegExp("^a=rtpmap:(\\d+)\\sopus"),d=f.split("\r\n"),g=0;d.forEach(function(b){b=b.match(a);b&&(g=b[1])});if(g!==0){var h=d.findIndex(function(a){return a.startsWith("a=fmtp:"+g+" ")});if(h!==-1&&d[h].indexOf("stereo")===-1){d[h]=d[h].concat(";stereo=1");b[e]=d.join("\r\n");c=!0;return"break"}}}();if(g==="break")break}}return c?b.join("m="):a}function C(a,b){E(a,b)}function D(a,b){if(d("CloudGamingSidebarMicrophoneControl.react").usingMicrophoneControl(j)&&k!=null&&k.mid!=null){var c;E(a,b);p=function(){C(a,b)};(c=navigator.mediaDevices)==null?void 0:c.addEventListener("devicechange",p)}}function E(a,b){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(d("CloudGamingSidebarMicrophoneControl.react").usingMicrophoneControl(j)&&k!=null&&k.mid!=null&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices){var e=!1,f=(yield navigator.mediaDevices.enumerateDevices());f.forEach(function(a){a.kind==="audioinput"&&(e=!0)});e?(V(b,c("CloudGamingActionTypes").MICROPHONE_DEVICE_AVAILABLE),l!=null&&l.enabled===!0?H(a,b,!0):J(a,b,!0)):c("fbinstant/releases/samus/internalStates.samus").getMessageSender().send(d("CloudGamingConstants").CloudGamingMessageTypes.HIDE_MIC_BUTTON)}else c("fbinstant/releases/samus/internalStates.samus").getMessageSender().send(d("CloudGamingConstants").CloudGamingMessageTypes.HIDE_MIC_BUTTON)});return F.apply(this,arguments)}function G(a,b,e){m==null&&(m=new(c("CloudGamingMessageReceiver"))(function(b){b===d("CloudGamingConstants").CloudGamingMessageTypes.ENABLE_MIC?H(a,e,!0):b===d("CloudGamingConstants").CloudGamingMessageTypes.DISABLE_MIC&&J(a,e,!0)})),b==null?void 0:b.on(d("CloudGamingConstants").CloudGamingMessageTypes.ENABLE_MIC,function(){H(a,e,!1)}),b==null?void 0:b.on(d("CloudGamingConstants").CloudGamingMessageTypes.DISABLE_MIC,function(){J(a,e,!1)}),b==null?void 0:b.on(d("CloudGamingConstants").CloudGamingMessageTypes.SEND_EDIT_ACTION_TO_GAME,function(b){var d="unknown",e={};c("isTruthy")(b)&&(d=typeof b.action==="string"?b.action:"unknown",e=typeof b.params==="object"?b.params:{});b=JSON.stringify(babelHelpers["extends"]({},e,{action:d,requestType:"DataToGame",target:"editAction"}));a.sendRTCEvent("lifecycle",{sdkMessage:{data:b}})}),b==null?void 0:b.on(d("CloudGamingConstants").CloudGamingMessageTypes.SITE_TRAVEL,function(b){b=d("HorizonWorldsUtils").refineGameTravel(b);c("isTruthy")(b)&&S(a,b)}),b==null?void 0:b.on(d("CloudGamingConstants").CloudGamingMessageTypes.RAGE_SHAKE,function(){U(a)}),b==null?void 0:b.on(d("CloudGamingConstants").CloudGamingMessageTypes.SEND_SOCIAL_OVERLAY_ACTION_TO_GAME,function(b){b=d("HorizonWorldsUtils").refineOverlayEvent(b);c("isTruthy")(b)&&T(a,b)})}function H(a,b,c){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){if(d("CloudGamingSidebarMicrophoneControl.react").usingMicrophoneControl(j)&&k!=null&&k.mid!=null&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)try{var f=(yield navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0}}));c("BrowserFeatureInstrumentation")("microphone","CloudGamingRTCMiddleware");l=f.getAudioTracks()[0];f=(f=k)==null?void 0:f.sender;var g=l;if(f&&g){yield f.replaceTrack(g);g.enabled=!0;g=f.getParameters();(!g.encodings||g.encodings.length===0)&&(g.encodings=[{}]);g.encodings.forEach(function(a){a.adaptivePtime=!1});yield f.setParameters(g);e&&a.sendRTCEvent("lifecycle",{sdkMessage:{data:'{ "requestType" : "DataToGame", "target": "micMuteState", "isMuted": "false" }'}});c("fbinstant/releases/samus/internalStates.samus").getMessageSender().send(d("CloudGamingConstants").CloudGamingMessageTypes.UNMUTE_MIC_BUTTON);V(b,c("CloudGamingActionTypes").MICROPHONE_ENABLE_SUCCESS)}else V(b,c("CloudGamingActionTypes").MICROPHONE_ENABLE_FAILED,"Failed to get audio track")}catch(d){V(b,c("CloudGamingActionTypes").MICROPHONE_ENABLE_FAILED,"Microphone configuration exception "+d.message),a!=null&&J(a,b,!0)}});return I.apply(this,arguments)}function J(a,b,e){l!=null&&(l.enabled=!1,l.stop()),e&&a.sendRTCEvent("lifecycle",{sdkMessage:{data:'{ "requestType" : "DataToGame", "target": "micMuteState", "isMuted": "true" }'}}),c("fbinstant/releases/samus/internalStates.samus").getMessageSender().send(d("CloudGamingConstants").CloudGamingMessageTypes.MUTE_MIC_BUTTON),V(b,c("CloudGamingActionTypes").MICROPHONE_DISABLED)}function K(a){d("CloudGamingSidebarMicrophoneControl.react").usingMicrophoneControl(j)&&(n=c("setInterval")(function(){L(a)},c("CloudGamingSessionConfigConfig").mic_activity_detection_interval_in_seconds*1e3))}function L(a){if(k!=null&&k.mid!=null&&d("CloudGamingSidebarMicrophoneControl.react").usingMicrophoneControl(j)){var b=k.sender.getStats();c("promiseDone")(b.then(function(b){for(b of b.values())b.type==="media-source"&&b.kind==="audio"&&(b.audioLevel!=null&&b.audioLevel>c("CloudGamingSessionConfigConfig").mic_activity_audio_level_threshold&&a({type:c("CloudGamingActionTypes").MICROPHONE_ACTIVITY}))}))}}function M(a){o&&a.sendRTCEvent("lifecycle",{sdkMessage:{data:'{ "requestType" : "DataToGame", "target": "audioMuteState", "isMuted": "true" }'}})}function N(a){o&&a.sendRTCEvent("lifecycle",{sdkMessage:{data:'{ "requestType" : "DataToGame", "target": "audioMuteState", "isMuted": "false" }'}})}function O(a){var b=JSON.stringify({IsShareSupported:navigator!=="undefined"&&navigator.share!=="undefined",requestType:"DataToGame",target:"shareSupportedState"});a.sendRTCEvent("lifecycle",{sdkMessage:{data:b}})}function P(a){var b=navigator.userAgent;if(b!=null){var e="unknown";c("UserAgent").isBrowser("Chrome")?e="Chrome":(c("UserAgent").isBrowser("Safari")||c("UserAgent").isBrowser("Mobile Safari"))&&(e="Safari");var f="unknown";c("UserAgent").isPlatform("Mac OS X")?f="Mac OS X":c("UserAgent").isPlatform("iOS")?f="iOS":c("UserAgent").isPlatform("Windows")?f="Windows":c("UserAgent").isPlatform("Android")&&(f="Android");var g=d("HorizonWorldsPWAUtils").isHorizonWorldsPWA();e=JSON.stringify({browserName:e,isPwa:g,platform:f,requestType:"DataToGame",target:"browserInfo",userAgent:b});a.sendRTCEvent("lifecycle",{sdkMessage:{data:e}})}}var Q=function(){var a;(a=q)==null?void 0:a.sendRTCEvent("lifecycle",{resourceClosed:{code:4,reason:d("CloudGamingRTCAction").resourceClosedReasonFromCode(4)}});(a=q)==null?void 0:a.clear();m!=null&&(m.clean(),m=null);n!=null&&(c("clearInterval")(n),n=null);l!=null&&l.stop();(a=navigator.mediaDevices)==null?void 0:a.removeEventListener("devicechange",p)};a=function(a,b,e,f){return function(g,h,i,j){var k=j.heartbeat;switch(g.type){case"CREATE_SDP_OFFER":r(a,e,j);o&&j.enableSDKMessageRetry();A(f,h,i,j,b,g.wasEnqueued);G(j,b,h);K(h);break;case"DISCONNECT":Q();break;case"CLIENT_TICK":j.sendRTCEvent("lifecycle",{tick:{sequenceNumber:g.heartbeat.sequence,tick:"tick",timestamp:g.heartbeat.timestamp}});break;case"CONNECTION_ERROR":case"DATA_CHANNEL_CLOSED":j.clear();break;case"PEER_CONNECTION_CREATED":j.setPeerConnection(g.connection);break;case"SERVER_TICK":if(!k)break;k.onHeartbeatFromServer(g.heartbeat);break;case"SEND_RTC":for(i of g.events)j.sendRTCEvent(g.purpose,i),c("CloudGamingInputLatencyTracker").processInput(i);break;case"RESOURCE_CLOSED":j.clear();break;case"AUDIO_MUTED":M(j);break;case"AUDIO_UNMUTED":N(j);break;case"GAME_READY":E(j,h);O(j);break;case"SDK_INITIALIZED":j.setSDKInitialized();P(j);break;case"VIDEO_FRAME":d("CloudGamingRTCAction").handleVideoFrameEvent(j,g);break;default:break}return g}};function R(a,d){var e=Date.now(),f=function(b,c){return{h264Supported:b,numRetries:a-c,timeWaited:Date.now()-e}};return new(b("Promise"))(function(b,e){e=function a(e){var g=!1,h=RTCRtpReceiver.getCapabilities("video");h!==null&&h.codecs.forEach(function(a){(a.mimeType==="video/H264"||a.mimeType==="video/h264")&&(g=!0)});g?b(f(!0,e)):e<=0?b(f(!1,e)):c("setTimeout")(function(){a(e-1)},d)};RTCRtpReceiver.getCapabilities?e(a):b(f(!0,a))})}function S(a,b){b=JSON.stringify({instanceID:b.instanceID,intentID:b.intentID,requestType:"DataToGame",target:"travelTo",worldID:b.worldID});a.sendRTCEvent("lifecycle",{sdkMessage:{data:b}})}function T(a,b){b=JSON.stringify({eventType:b.eventType,extraInformation:JSON.stringify(b.extraInformation),overlayType:b.overlayType,requestType:"DataToGame",target:"overlayAction"});a.sendRTCEvent("lifecycle",{sdkMessage:{data:b}})}function U(a){var b=JSON.stringify({requestType:"DataToGame",target:"rageShake"});a.sendRTCEvent("lifecycle",{sdkMessage:{data:b}})}function V(a,b,c){c===void 0&&(c="");c={detail:c,type:b};a(c)}g.rtcSessionCleanup=Q;g.runAction=a}),98);
__d("CloudGamingVirtualKeyboardManager",["CloudGamingRTCAction","EventTimeUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var b=this;this.$1=a;this.virtualKeyboardListener={onIMEEvent:function(a){b.$1(d("CloudGamingRTCAction").sendInputEvent({text:{content:a,source:"VirtualKeyboard",timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond()}}))}}};g["default"]=a}),98);
__d("useUnloadCallback",["Run","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect;function a(a){h(function(){var b,c=function(b){b.persisted===!1&&a()};document.body&&("onpagehide"in window?window.addEventListener("pagehide",c):b=d("Run").onUnload(a));return function(){var a;(a=b)==null?void 0:a.remove();window.removeEventListener("pagehide",c)}},[a])}g["default"]=a}),98);
__d("CloudGamingContentWrapper.react",["CloudGamingActionTypes","CloudGamingConstants","CloudGamingContent.react","CloudGamingContext.react","CloudGamingGredosTouchAction","CloudGamingKeyboardLayoutAction","CloudGamingLocalCursorMiddleware","CloudGamingLogUtils","CloudGamingMessageReceiver","CloudGamingMouseAction","CloudGamingMultiTouchOverlayAction","CloudGamingRTCAction","CloudGamingRTCMiddleware","CloudGamingVirtualGamepadManager","CloudGamingVirtualKeyboard.react","CloudGamingVirtualKeyboardManager","EventTimeUtils","react","useUnloadCallback"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useContext,k=b.useEffect,l=null,m=null;function a(a){var b=a.appID,e=a.appName,f=a.clientAppID,g=a.clientAppVersion,n=a.cloudBinaryID,o=a.cloudGameID,p=a.dynamicResolution,q=a.enableCGFullyLockedMouse,r=a.enableCGLockedMouse,s=a.enableCGMultiTouchOverlay,t=a.enableCGWarningAlerts,u=a.entryPoint,v=a.eventBus,w=a.gameOrientation,x=a.genCloudErrorMessage,y=a.genNetworkQualityDialog,z=a.isCometOnMobile,A=a.isInsideIframe,B=a.overrideLoadingState,C=a.provider,D=a.sessionID,E=a.showBackground,F=a.showSpinner;a=a.useResourceSize;var G=j(d("CloudGamingContext.react").CloudGamingContentStateContext),H=j(d("CloudGamingContext.react").CloudGamingDispatchContext),I=G.connection,J=G.gameLifecycle,K=G.showMultiTouchOverlay,L=G.resourceWidth,M=G.resourceHeight,N=G.viewportWidth,O=G.viewportHeight,P=G.initialResolutionWidth;G=G.initialResolutionHeight;k(function(){H({type:c("CloudGamingActionTypes").SESSION_INIT_SETUP});return function(){return H({type:c("CloudGamingActionTypes").SESSION_END_CLEANUP})}},[H]);c("useUnloadCallback")(d("CloudGamingRTCMiddleware").rtcSessionCleanup);k(function(){d("CloudGamingGredosTouchAction").addTouchEventListeners();return function(){d("CloudGamingGredosTouchAction").removeTouchEventListeners()}},[]);k(function(){var a=function(){d("CloudGamingVirtualKeyboard.react").openKeyboardDelayed(f)?(d("CloudGamingVirtualKeyboard.react").setOpenSoftKeyboardRequested(H),d("CloudGamingLogUtils").logEvent("TOUCH_SCREEN_TO_OPEN_KEYBOARD_NOTIFICATION",b,o,f,D)):d("CloudGamingVirtualKeyboard.react").switchVirtualKeyboard()&&d("CloudGamingLogUtils").logEvent("SOFT_KEYBOARD_SHOWN",b,o,f,D)},e=function(a){if(a!=null&&a instanceof Map){a=a.get("layout");a!=null&&(H(d("CloudGamingKeyboardLayoutAction").sendKeyboardLayout(d("CloudGamingKeyboardLayoutAction").createKeyboardLayoutAction(a))),d("CloudGamingLogUtils").logEvent("SET_KEYBOARD_LAYOUT",b,o,f,D,new Map([["locale",a]])))}};v==null?void 0:v.on(d("CloudGamingConstants").CloudGamingMessageTypes.OPEN_SOFT_KEYBOARD,a);v==null?void 0:v.on(d("CloudGamingConstants").CloudGamingMessageTypes.SET_KEYBOARD_LAYOUT,e);var g=new(c("CloudGamingMessageReceiver"))(function(b,c){switch(b){case d("CloudGamingConstants").CloudGamingMessageTypes.OPEN_SOFT_KEYBOARD:a();break;case d("CloudGamingConstants").CloudGamingMessageTypes.SET_KEYBOARD_LAYOUT:e(c);break}});return function(){var b;v==null?void 0:v.remove(d("CloudGamingConstants").CloudGamingMessageTypes.OPEN_SOFT_KEYBOARD,a);v==null?void 0:v.remove(d("CloudGamingConstants").CloudGamingMessageTypes.SET_KEYBOARD_LAYOUT,e);(b=g)==null?void 0:b.clean();g=null}},[b,f,o,H,v,D]);var Q=function(){l=new(d("CloudGamingVirtualGamepadManager").CloudGamingVirtualGamepadManager)(H);m=new(c("CloudGamingVirtualKeyboardManager"))(H);var a={timestamp:Date.now(),type:c("CloudGamingActionTypes").CREATE_SDP_OFFER,wasEnqueued:!1};H(a)},R=function(){H({type:c("CloudGamingActionTypes").REACTIVATE_GAME})},S=function(a,b,c,e){H(e()),H(d("CloudGamingRTCAction").sendInputEvent(d("CloudGamingMouseAction").mouseEvent({direction:c,index:0,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),x:a,y:b})))},T=function(a,b,c){H(c()),H(d("CloudGamingRTCAction").sendInputEvent(d("CloudGamingMouseAction").relativeMoveEvent({relX:a,relY:b,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond()})))},U=i(function(a){a=Math.round(a.changeTime);H({timestamp:a,type:c("CloudGamingActionTypes").PAUSE_GAME});H(d("CloudGamingMouseAction").onBlur)},[H]),V=i(function(a){a=Math.round(a.changeTime);H({timestamp:a,type:c("CloudGamingActionTypes").RESUME_GAME})},[H]),W=function(a){H(d("CloudGamingMultiTouchOverlayAction").sendKeyboardMultiTouchEvent(a,"up",d("EventTimeUtils").tryGetTimestampInMicroSecond()))},X=function(a){H(d("CloudGamingMultiTouchOverlayAction").sendKeyboardMultiTouchEvent(a,"down",d("EventTimeUtils").tryGetTimestampInMicroSecond()))},Y=function(a){H(d("CloudGamingMultiTouchOverlayAction").sendMultiTouchMouseUp(a))},Z=function(a){H(d("CloudGamingMultiTouchOverlayAction").sendMultiTouchMouseDown(a))},$=function(a){H(d("CloudGamingMultiTouchOverlayAction").sendMultiTouchMouseMove(a))},aa=i(function(a){d("CloudGamingLocalCursorMiddleware").registerLocalCursorListeners()},[]),ba=function(a){a.preventDefault(),d("CloudGamingVirtualKeyboard.react").getOpenSoftKeyboardRequested()?(a.stopPropagation(),a.type==="touchend"&&(d("CloudGamingVirtualKeyboard.react").showVirtualKeyboard(!0),d("CloudGamingLogUtils").logEvent("SOFT_KEYBOARD_SHOWN",b,o,f,D))):H(d("CloudGamingGredosTouchAction").sendGredosTouchEvent(a))},ca=function(a){H(a),d("CloudGamingVirtualGamepadManager").onVirtualGamepadResize(0,0,a.viewportWidth,a.viewportHeight,a.streamingRotation)},da=function(a){H(a)};return h.jsx(c("CloudGamingContent.react"),{appID:b,appName:e,clientAppID:f,clientAppVersion:g,cloudBinaryID:n,cloudGameID:o,connectionState:I,dynamicResolution:p,enableCGFullyLockedMouse:q,enableCGLockedMouse:r,enableCGMultiTouchOverlay:s,enableCGWarningAlerts:t,entryPoint:u,eventBus:v,gameLifecycleState:J,gameOrientation:w,genCloudErrorMessage:x,genNetworkQualityDialog:y,height:M,initialResolutionHeight:G,initialResolutionWidth:P,isCometOnMobile:z,isInsideIframe:A,onConnect:Q,onContainerResize:ca,onContainerRotation:da,onPause:U,onResume:V,overrideLoadingState:B,provider:C,reactivateGame:R,sendGredosCustomMouseEvent:aa,sendGredosCustomTouchEvent:ba,sendMouseInputWhenScreenIsLocked:S,sendMultiTouchKeyDown:X,sendMultiTouchKeyUp:W,sendMultiTouchMouseDown:Z,sendMultiTouchMouseMove:$,sendMultiTouchMouseUp:Y,sendRelativeMoveInputWhenScreenIsLocked:T,sessionID:D,showBackground:E,showMultiTouchOverlay:K,showSpinner:F,useResourceSize:a,viewportHeight:O,viewportWidth:N,virtualGamepadListener:(e=l)==null?void 0:e.virtualGamepadListener,virtualKeyboardListener:(g=m)==null?void 0:g.virtualKeyboardListener,width:L})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CloudGamingDisableTimeout",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("4068")}g["default"]=a}),98);
__d("CloudGamingHeartbeat",["CloudGamingAllowServerDebug","CloudGamingDisableTimeout","CloudGamingErrorTypes","clearInterval","setInterval"],(function(a,b,c,d,e,f,g){"use strict";var h=1*1e3,i=2*60*1e3;a=function(){function a(a,b){var e=this;this.$3=null;this.$4=null;this.$8=function(){var a=e.$9();e.$1({heartbeat:a,type:"CLIENT_TICK"})};this.$7=function(){if(c("CloudGamingAllowServerDebug")()||c("CloudGamingDisableTimeout")())return;e.$1({code:d("CloudGamingErrorTypes").CloudGamingErrorCode.NO_HEARTBEATS_FROM_SERVER,detail:"Did not hear from the server in "+i/1e3+" Seconds",type:"CONNECTION_ERROR"})};this.$1=a;this.$2=b}var b=a.prototype;b.clear=function(){this.$5(),this.$6()};b.onHeartbeatFromServer=function(a){this.$6(),this.$4=c("setInterval")(this.$7,i)};b.startDispatchingHeartbeats=function(){this.$5(),this.$8(),this.$3=c("setInterval")(this.$8,h)};b.$6=function(){if(!this.$4)return;c("clearInterval")(this.$4);this.$4=null};b.$5=function(){if(!this.$3)return;c("clearInterval")(this.$3);this.$3=null};b.$9=function(){var a=this.$2().heartbeat.sent,b=Math.round(Date.now()/1e3);return!a?{sequence:0,timestamp:b}:{sequence:a.sequence+1,timestamp:b}};return a}();g["default"]=a}),98);
__d("ApertureDimensionsTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({PORTRAIT_UP:0,LANDSCAPE_LEFT:1,PORTRAIT_DOWN:2,LANDSCAPE_RIGHT:3});e.exports={Orientation:a}}),null);
__d("ApertureEventsTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({DOWN:1,UP:0});d=a({WINDOW_CLOSED:1,USER_INTERACTION:2,EXCEPTION_IN_SERVER:3,MARKED_AS_DONE:4,SERVER_SHUTTING_DOWN:5,DESTROY_CALLED:6,BROWSER_PEER_LOST:7,RESOURCE_PEER_LOST:8,ONEWORLD_CLIENT_DIED:9,CLIENT_HEARTBEAT_TIMEOUT:10});f=a({StringPayload:"stringPayload"});b=a({Orientation:"orientation"});var g=a({Position:"position"}),h=a({Key:"key",Touch:"touch",Paste:"paste",Rotation:"rotation",Location:"location",Gamepad:"gamepad",Text:"text",Wheel:"wheel",Mouse:"mouse",KeyboardLayout:"keyboardLayout",RelativeMove:"relativeMove"});a=a({Input:"input",Tick:"tick",ResourceClosed:"resourceClosed",InGameState:"inGameState",Container:"container"});e.exports={Direction:c,EventUnion$Types:a,InputEvent$Types:h,LocationEvent$Types:g,PasteEvent$Types:f,ResourceClosedCode:d,RotationEvent$Types:b}}),null);
__d("ApertureEventsSerializers",["ApertureDimensionsTypes","ApertureEventsTypes","ThriftTypes"],(function(a,b,c,d,e,f){"use strict";function a(){return{message:""}}function c(){return{direction:b("ApertureEventsTypes").Direction.cast(0),jsCode:0}}function d(){return{}}function e(){return{}}function g(){return{}}function aa(){return{direction:b("ApertureEventsTypes").Direction.cast(0),x:"0",y:"0",index:"0"}}function ba(){return{relX:"0",relY:"0"}}function ca(){return{longitude:0,latitude:0}}function da(){return{}}function ea(){return{}}function fa(){return{content:"",source:""}}function ga(){return{x:"0",y:"0",index:"0",wheel:0}}function ha(){return{locale:""}}function ia(){return{sequenceNumber:"0",timestamp:"0",tick:""}}function ja(){return{reason:"",code:b("ApertureEventsTypes").ResourceClosedCode.cast(0)}}function ka(){return{image64:"",hotspotX:0,hotspotY:0}}function la(){return{visible:!1}}function h(){return{state:""}}function i(){return{game:h()}}function ma(){return{data:i()}}function na(){return{event:j()}}function oa(){return{events:[],seq:"0",ts:"0"}}function pa(){return{}}function qa(){return{}}function ra(){return{}}function j(){return{}}function sa(){return{}}function ta(a,c){c.writeStructBegin("ErrorWithMessage");c.writeFieldBegin({fname:"message",ftype:b("ThriftTypes").STRING,fid:1});if(a.message!=null)c.writeString(a.message);else{a="";c.writeString(a)}c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd()}function k(a,c){c.writeStructBegin("KeyEvent");c.writeFieldBegin({fname:"direction",ftype:b("ThriftTypes").I32,fid:1});if(a.direction!=null){var d;c.writeI32((d=a.direction)!=null?d:0)}else{d=b("ApertureEventsTypes").Direction.cast(0);c.writeI32((d=d)!=null?d:0)}c.writeFieldEnd();c.writeFieldBegin({fname:"jsCode",ftype:b("ThriftTypes").I32,fid:3});if(a.jsCode!=null)c.writeI32(a.jsCode);else{d=0;c.writeI32(d)}c.writeFieldEnd();a.timestamp!=null&&(c.writeFieldBegin({fname:"timestamp",ftype:b("ThriftTypes").I64,fid:4}),c.writeI64(BigInt(a.timestamp)),c.writeFieldEnd());a.code!=null&&(c.writeFieldBegin({fname:"code",ftype:b("ThriftTypes").STRING,fid:5}),c.writeString(a.code),c.writeFieldEnd());c.writeFieldStop();c.writeStructEnd()}function l(a,c){c.writeStructBegin("MouseButtons");if(a.left!=null){var d;c.writeFieldBegin({fname:"left",ftype:b("ThriftTypes").I32,fid:1});c.writeI32((d=a.left)!=null?d:0);c.writeFieldEnd()}if(a.right!=null){c.writeFieldBegin({fname:"right",ftype:b("ThriftTypes").I32,fid:2});c.writeI32((d=a.right)!=null?d:0);c.writeFieldEnd()}if(a.center!=null){c.writeFieldBegin({fname:"center",ftype:b("ThriftTypes").I32,fid:3});c.writeI32((d=a.center)!=null?d:0);c.writeFieldEnd()}c.writeFieldStop();c.writeStructEnd()}function m(a,c){c.writeStructBegin("MouseWheel"),a.deltaY!=null&&(c.writeFieldBegin({fname:"deltaY",ftype:b("ThriftTypes").DOUBLE,fid:1}),c.writeDouble(a.deltaY),c.writeFieldEnd()),c.writeFieldStop(),c.writeStructEnd()}function n(a,c){c.writeStructBegin("MouseEvent"),a.timestamp!=null&&(c.writeFieldBegin({fname:"timestamp",ftype:b("ThriftTypes").I64,fid:1}),c.writeI64(BigInt(a.timestamp)),c.writeFieldEnd()),a.screenPosX!=null&&(c.writeFieldBegin({fname:"screenPosX",ftype:b("ThriftTypes").DOUBLE,fid:2}),c.writeDouble(a.screenPosX),c.writeFieldEnd()),a.screenPosY!=null&&(c.writeFieldBegin({fname:"screenPosY",ftype:b("ThriftTypes").DOUBLE,fid:3}),c.writeDouble(a.screenPosY),c.writeFieldEnd()),a.moveX!=null&&(c.writeFieldBegin({fname:"moveX",ftype:b("ThriftTypes").DOUBLE,fid:4}),c.writeDouble(a.moveX),c.writeFieldEnd()),a.moveY!=null&&(c.writeFieldBegin({fname:"moveY",ftype:b("ThriftTypes").DOUBLE,fid:5}),c.writeDouble(a.moveY),c.writeFieldEnd()),a.buttons!=null&&(c.writeFieldBegin({fname:"buttons",ftype:b("ThriftTypes").STRUCT,fid:6}),l(a.buttons,c),c.writeFieldEnd()),a.wheel!=null&&(c.writeFieldBegin({fname:"wheel",ftype:b("ThriftTypes").STRUCT,fid:7}),m(a.wheel,c),c.writeFieldEnd()),c.writeFieldStop(),c.writeStructEnd()}function o(a,c){c.writeStructBegin("TouchEvent");c.writeFieldBegin({fname:"direction",ftype:b("ThriftTypes").I32,fid:1});if(a.direction!=null){var d;c.writeI32((d=a.direction)!=null?d:0)}else{d=b("ApertureEventsTypes").Direction.cast(0);c.writeI32((d=d)!=null?d:0)}c.writeFieldEnd();c.writeFieldBegin({fname:"x",ftype:b("ThriftTypes").I64,fid:2});if(a.x!=null)c.writeI64(BigInt(a.x));else{d="0";c.writeI64(BigInt(d))}c.writeFieldEnd();c.writeFieldBegin({fname:"y",ftype:b("ThriftTypes").I64,fid:3});if(a.y!=null)c.writeI64(BigInt(a.y));else{d="0";c.writeI64(BigInt(d))}c.writeFieldEnd();a.timestamp!=null&&(c.writeFieldBegin({fname:"timestamp",ftype:b("ThriftTypes").I64,fid:4}),c.writeI64(BigInt(a.timestamp)),c.writeFieldEnd());c.writeFieldBegin({fname:"index",ftype:b("ThriftTypes").I64,fid:5});if(a.index!=null)c.writeI64(BigInt(a.index));else{d="0";c.writeI64(BigInt(d))}c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd()}function p(a,c){c.writeStructBegin("RelativeMoveEvent");c.writeFieldBegin({fname:"relX",ftype:b("ThriftTypes").I64,fid:1});if(a.relX!=null)c.writeI64(BigInt(a.relX));else{var d="0";c.writeI64(BigInt(d))}c.writeFieldEnd();c.writeFieldBegin({fname:"relY",ftype:b("ThriftTypes").I64,fid:2});if(a.relY!=null)c.writeI64(BigInt(a.relY));else{d="0";c.writeI64(BigInt(d))}c.writeFieldEnd();a.timestamp!=null&&(c.writeFieldBegin({fname:"timestamp",ftype:b("ThriftTypes").I64,fid:3}),c.writeI64(BigInt(a.timestamp)),c.writeFieldEnd());c.writeFieldStop();c.writeStructEnd()}function q(a,c){c.writeStructBegin("LocationPosition");c.writeFieldBegin({fname:"longitude",ftype:b("ThriftTypes").DOUBLE,fid:1});if(a.longitude!=null)c.writeDouble(a.longitude);else{var d=0;c.writeDouble(d)}c.writeFieldEnd();c.writeFieldBegin({fname:"latitude",ftype:b("ThriftTypes").DOUBLE,fid:2});if(a.latitude!=null)c.writeDouble(a.latitude);else{d=0;c.writeDouble(d)}c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd()}function r(a,c){c.writeStructBegin("GamepadKeys");if(a.A!=null){var d;c.writeFieldBegin({fname:"A",ftype:b("ThriftTypes").I32,fid:1});c.writeI32((d=a.A)!=null?d:0);c.writeFieldEnd()}if(a.B!=null){c.writeFieldBegin({fname:"B",ftype:b("ThriftTypes").I32,fid:2});c.writeI32((d=a.B)!=null?d:0);c.writeFieldEnd()}if(a.X!=null){c.writeFieldBegin({fname:"X",ftype:b("ThriftTypes").I32,fid:3});c.writeI32((d=a.X)!=null?d:0);c.writeFieldEnd()}if(a.Y!=null){c.writeFieldBegin({fname:"Y",ftype:b("ThriftTypes").I32,fid:4});c.writeI32((d=a.Y)!=null?d:0);c.writeFieldEnd()}if(a.Up!=null){c.writeFieldBegin({fname:"Up",ftype:b("ThriftTypes").I32,fid:5});c.writeI32((d=a.Up)!=null?d:0);c.writeFieldEnd()}if(a.Down!=null){c.writeFieldBegin({fname:"Down",ftype:b("ThriftTypes").I32,fid:6});c.writeI32((d=a.Down)!=null?d:0);c.writeFieldEnd()}if(a.Right!=null){c.writeFieldBegin({fname:"Right",ftype:b("ThriftTypes").I32,fid:7});c.writeI32((d=a.Right)!=null?d:0);c.writeFieldEnd()}if(a.Left!=null){c.writeFieldBegin({fname:"Left",ftype:b("ThriftTypes").I32,fid:8});c.writeI32((d=a.Left)!=null?d:0);c.writeFieldEnd()}if(a.L1!=null){c.writeFieldBegin({fname:"L1",ftype:b("ThriftTypes").I32,fid:9});c.writeI32((d=a.L1)!=null?d:0);c.writeFieldEnd()}if(a.R1!=null){c.writeFieldBegin({fname:"R1",ftype:b("ThriftTypes").I32,fid:10});c.writeI32((d=a.R1)!=null?d:0);c.writeFieldEnd()}if(a.R3!=null){c.writeFieldBegin({fname:"R3",ftype:b("ThriftTypes").I32,fid:11});c.writeI32((d=a.R3)!=null?d:0);c.writeFieldEnd()}if(a.L3!=null){c.writeFieldBegin({fname:"L3",ftype:b("ThriftTypes").I32,fid:12});c.writeI32((d=a.L3)!=null?d:0);c.writeFieldEnd()}if(a.Select!=null){c.writeFieldBegin({fname:"Select",ftype:b("ThriftTypes").I32,fid:13});c.writeI32((d=a.Select)!=null?d:0);c.writeFieldEnd()}if(a.Start!=null){c.writeFieldBegin({fname:"Start",ftype:b("ThriftTypes").I32,fid:14});c.writeI32((d=a.Start)!=null?d:0);c.writeFieldEnd()}a.L2!=null&&(c.writeFieldBegin({fname:"L2",ftype:b("ThriftTypes").DOUBLE,fid:15}),c.writeDouble(a.L2),c.writeFieldEnd());a.R2!=null&&(c.writeFieldBegin({fname:"R2",ftype:b("ThriftTypes").DOUBLE,fid:16}),c.writeDouble(a.R2),c.writeFieldEnd());a.ThumbLX!=null&&(c.writeFieldBegin({fname:"ThumbLX",ftype:b("ThriftTypes").DOUBLE,fid:17}),c.writeDouble(a.ThumbLX),c.writeFieldEnd());a.ThumbLY!=null&&(c.writeFieldBegin({fname:"ThumbLY",ftype:b("ThriftTypes").DOUBLE,fid:18}),c.writeDouble(a.ThumbLY),c.writeFieldEnd());a.ThumbRX!=null&&(c.writeFieldBegin({fname:"ThumbRX",ftype:b("ThriftTypes").DOUBLE,fid:19}),c.writeDouble(a.ThumbRX),c.writeFieldEnd());a.ThumbRY!=null&&(c.writeFieldBegin({fname:"ThumbRY",ftype:b("ThriftTypes").DOUBLE,fid:20}),c.writeDouble(a.ThumbRY),c.writeFieldEnd());c.writeFieldStop();c.writeStructEnd()}function s(a,c){c.writeStructBegin("GamepadEvent");if(a.direction!=null){var d;c.writeFieldBegin({fname:"direction",ftype:b("ThriftTypes").I32,fid:1});c.writeI32((d=a.direction)!=null?d:0);c.writeFieldEnd()}a.jsCode!=null&&(c.writeFieldBegin({fname:"jsCode",ftype:b("ThriftTypes").I32,fid:2}),c.writeI32(a.jsCode),c.writeFieldEnd());a.timestamp!=null&&(c.writeFieldBegin({fname:"timestamp",ftype:b("ThriftTypes").I64,fid:3}),c.writeI64(BigInt(a.timestamp)),c.writeFieldEnd());a.id!=null&&(c.writeFieldBegin({fname:"id",ftype:b("ThriftTypes").I32,fid:4}),c.writeI32(a.id),c.writeFieldEnd());a.keys!=null&&(c.writeFieldBegin({fname:"keys",ftype:b("ThriftTypes").STRUCT,fid:5}),r(a.keys,c),c.writeFieldEnd());a.connected!=null&&(c.writeFieldBegin({fname:"connected",ftype:b("ThriftTypes").BOOL,fid:6}),c.writeBool(a.connected),c.writeFieldEnd());c.writeFieldStop();c.writeStructEnd()}function t(a,c){c.writeStructBegin("ImeEvent");c.writeFieldBegin({fname:"content",ftype:b("ThriftTypes").STRING,fid:1});if(a.content!=null)c.writeString(a.content);else{var d="";c.writeString(d)}c.writeFieldEnd();c.writeFieldBegin({fname:"source",ftype:b("ThriftTypes").STRING,fid:2});if(a.source!=null)c.writeString(a.source);else{d="";c.writeString(d)}c.writeFieldEnd();a.timestamp!=null&&(c.writeFieldBegin({fname:"timestamp",ftype:b("ThriftTypes").I64,fid:3}),c.writeI64(BigInt(a.timestamp)),c.writeFieldEnd());c.writeFieldStop();c.writeStructEnd()}function u(a,c){c.writeStructBegin("WheelEvent");c.writeFieldBegin({fname:"x",ftype:b("ThriftTypes").I64,fid:1});if(a.x!=null)c.writeI64(BigInt(a.x));else{var d="0";c.writeI64(BigInt(d))}c.writeFieldEnd();c.writeFieldBegin({fname:"y",ftype:b("ThriftTypes").I64,fid:2});if(a.y!=null)c.writeI64(BigInt(a.y));else{d="0";c.writeI64(BigInt(d))}c.writeFieldEnd();a.timestamp!=null&&(c.writeFieldBegin({fname:"timestamp",ftype:b("ThriftTypes").I64,fid:3}),c.writeI64(BigInt(a.timestamp)),c.writeFieldEnd());c.writeFieldBegin({fname:"index",ftype:b("ThriftTypes").I64,fid:4});if(a.index!=null)c.writeI64(BigInt(a.index));else{d="0";c.writeI64(BigInt(d))}c.writeFieldEnd();c.writeFieldBegin({fname:"wheel",ftype:b("ThriftTypes").DOUBLE,fid:5});if(a.wheel!=null)c.writeDouble(a.wheel);else{d=0;c.writeDouble(d)}c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd()}function v(a,c){c.writeStructBegin("KeyboardLayoutEvent");c.writeFieldBegin({fname:"locale",ftype:b("ThriftTypes").STRING,fid:1});if(a.locale!=null)c.writeString(a.locale);else{var d="";c.writeString(d)}c.writeFieldEnd();a.timestamp!=null&&(c.writeFieldBegin({fname:"timestamp",ftype:b("ThriftTypes").I64,fid:3}),c.writeI64(BigInt(a.timestamp)),c.writeFieldEnd());c.writeFieldStop();c.writeStructEnd()}function w(a,c){c.writeStructBegin("TickEvent");c.writeFieldBegin({fname:"sequenceNumber",ftype:b("ThriftTypes").I64,fid:1});if(a.sequenceNumber!=null)c.writeI64(BigInt(a.sequenceNumber));else{var d="0";c.writeI64(BigInt(d))}c.writeFieldEnd();c.writeFieldBegin({fname:"timestamp",ftype:b("ThriftTypes").I64,fid:2});if(a.timestamp!=null)c.writeI64(BigInt(a.timestamp));else{d="0";c.writeI64(BigInt(d))}c.writeFieldEnd();c.writeFieldBegin({fname:"tick",ftype:b("ThriftTypes").STRING,fid:3});if(a.tick!=null)c.writeString(a.tick);else{d="";c.writeString(d)}c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd()}function x(a,c){c.writeStructBegin("ResourceClosedEvent");c.writeFieldBegin({fname:"reason",ftype:b("ThriftTypes").STRING,fid:1});if(a.reason!=null)c.writeString(a.reason);else{var d="";c.writeString(d)}c.writeFieldEnd();c.writeFieldBegin({fname:"code",ftype:b("ThriftTypes").I32,fid:2});if(a.code!=null){c.writeI32((d=a.code)!=null?d:0)}else{a=b("ApertureEventsTypes").ResourceClosedCode.cast(0);c.writeI32((d=a)!=null?d:0)}c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd()}function y(a,c){c.writeStructBegin("CursorIconPool");c.writeFieldBegin({fname:"image64",ftype:b("ThriftTypes").STRING,fid:1});if(a.image64!=null)c.writeString(a.image64);else{var d="";c.writeString(d)}c.writeFieldEnd();c.writeFieldBegin({fname:"hotspotX",ftype:b("ThriftTypes").I32,fid:2});if(a.hotspotX!=null)c.writeI32(a.hotspotX);else{d=0;c.writeI32(d)}c.writeFieldEnd();c.writeFieldBegin({fname:"hotspotY",ftype:b("ThriftTypes").I32,fid:3});if(a.hotspotY!=null)c.writeI32(a.hotspotY);else{d=0;c.writeI32(d)}c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd()}function z(a,c){c.writeStructBegin("CursorStateEvent");c.writeFieldBegin({fname:"visible",ftype:b("ThriftTypes").BOOL,fid:1});if(a.visible!=null)c.writeBool(a.visible);else{var d=!1;c.writeBool(d)}c.writeFieldEnd();a.icon!=null&&(c.writeFieldBegin({fname:"icon",ftype:b("ThriftTypes").I32,fid:2}),c.writeI32(a.icon),c.writeFieldEnd());a.iconPool!=null&&(c.writeFieldBegin({fname:"iconPool",ftype:b("ThriftTypes").STRUCT,fid:3}),y(a.iconPool,c),c.writeFieldEnd());c.writeFieldStop();c.writeStructEnd()}function A(a,c){c.writeStructBegin("InGameState");c.writeFieldBegin({fname:"state",ftype:b("ThriftTypes").STRING,fid:1});if(a.state!=null)c.writeString(a.state);else{var d="";c.writeString(d)}c.writeFieldEnd();a.cursorState!=null&&(c.writeFieldBegin({fname:"cursorState",ftype:b("ThriftTypes").STRUCT,fid:2}),z(a.cursorState,c),c.writeFieldEnd());c.writeFieldStop();c.writeStructEnd()}function B(a,c){c.writeStructBegin("InGameStateData");c.writeFieldBegin({fname:"game",ftype:b("ThriftTypes").STRUCT,fid:1});if(a.game!=null)A(a.game,c);else{a=h();A(a,c)}c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd()}function C(a,c){c.writeStructBegin("InGameStateEvent");c.writeFieldBegin({fname:"data",ftype:b("ThriftTypes").STRUCT,fid:1});if(a.data!=null)B(a.data,c);else{a=i();B(a,c)}c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd()}function D(a,c){c.writeStructBegin("InputEventItem");c.writeFieldBegin({fname:"event",ftype:b("ThriftTypes").STRUCT,fid:1});if(a.event!=null)I(a.event,c);else{var d=j();I(d,c)}c.writeFieldEnd();a.tsDelta!=null&&(c.writeFieldBegin({fname:"tsDelta",ftype:b("ThriftTypes").I32,fid:2}),c.writeI32(a.tsDelta),c.writeFieldEnd());c.writeFieldStop();c.writeStructEnd()}function E(a,c){c.writeStructBegin("InputEventsContainer");c.writeFieldBegin({fname:"events",ftype:b("ThriftTypes").LIST,fid:1});if(a.events!=null){c.writeListBegin({etype:b("ThriftTypes").STRUCT,size:a.events.length});for(var d=a.events,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;D(g,c)}c.writeListEnd()}else{g=[];c.writeListBegin({etype:b("ThriftTypes").STRUCT,size:g.length});for(f=0;f<g.length;f++){e=g[f];D(e,c)}c.writeListEnd()}c.writeFieldEnd();c.writeFieldBegin({fname:"seq",ftype:b("ThriftTypes").I64,fid:2});if(a.seq!=null)c.writeI64(BigInt(a.seq));else{d="0";c.writeI64(BigInt(d))}c.writeFieldEnd();c.writeFieldBegin({fname:"ts",ftype:b("ThriftTypes").I64,fid:3});if(a.ts!=null)c.writeI64(BigInt(a.ts));else{e="0";c.writeI64(BigInt(e))}c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd()}function F(a,c){c.writeStructBegin("PasteEvent");if(a.stringPayload!=null){c.writeFieldBegin({fname:"stringPayload",ftype:b("ThriftTypes").STRING,fid:1});c.writeString(a.stringPayload);c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd();return}c.writeFieldStop();c.writeStructEnd()}function G(a,c){c.writeStructBegin("RotationEvent");if(a.orientation!=null){c.writeFieldBegin({fname:"orientation",ftype:b("ThriftTypes").I32,fid:1});c.writeI32((a=a.orientation)!=null?a:0);c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd();return}c.writeFieldStop();c.writeStructEnd()}function H(a,c){c.writeStructBegin("LocationEvent");if(a.position!=null){c.writeFieldBegin({fname:"position",ftype:b("ThriftTypes").STRUCT,fid:1});q(a.position,c);c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd();return}c.writeFieldStop();c.writeStructEnd()}function I(a,c){c.writeStructBegin("InputEvent");if(a.key!=null){c.writeFieldBegin({fname:"key",ftype:b("ThriftTypes").STRUCT,fid:1});k(a.key,c);c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd();return}if(a.touch!=null){c.writeFieldBegin({fname:"touch",ftype:b("ThriftTypes").STRUCT,fid:2});o(a.touch,c);c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd();return}if(a.paste!=null){c.writeFieldBegin({fname:"paste",ftype:b("ThriftTypes").STRUCT,fid:3});F(a.paste,c);c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd();return}if(a.rotation!=null){c.writeFieldBegin({fname:"rotation",ftype:b("ThriftTypes").STRUCT,fid:4});G(a.rotation,c);c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd();return}if(a.location!=null){c.writeFieldBegin({fname:"location",ftype:b("ThriftTypes").STRUCT,fid:5});H(a.location,c);c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd();return}if(a.gamepad!=null){c.writeFieldBegin({fname:"gamepad",ftype:b("ThriftTypes").STRUCT,fid:6});s(a.gamepad,c);c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd();return}if(a.text!=null){c.writeFieldBegin({fname:"text",ftype:b("ThriftTypes").STRUCT,fid:7});t(a.text,c);c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd();return}if(a.wheel!=null){c.writeFieldBegin({fname:"wheel",ftype:b("ThriftTypes").STRUCT,fid:8});u(a.wheel,c);c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd();return}if(a.mouse!=null){c.writeFieldBegin({fname:"mouse",ftype:b("ThriftTypes").STRUCT,fid:9});n(a.mouse,c);c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd();return}if(a.keyboardLayout!=null){c.writeFieldBegin({fname:"keyboardLayout",ftype:b("ThriftTypes").STRUCT,fid:10});v(a.keyboardLayout,c);c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd();return}if(a.relativeMove!=null){c.writeFieldBegin({fname:"relativeMove",ftype:b("ThriftTypes").STRUCT,fid:11});p(a.relativeMove,c);c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd();return}c.writeFieldStop();c.writeStructEnd()}function ua(a,c){c.writeStructBegin("EventUnion");if(a.input!=null){c.writeFieldBegin({fname:"input",ftype:b("ThriftTypes").STRUCT,fid:1});I(a.input,c);c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd();return}if(a.tick!=null){c.writeFieldBegin({fname:"tick",ftype:b("ThriftTypes").STRUCT,fid:2});w(a.tick,c);c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd();return}if(a.resourceClosed!=null){c.writeFieldBegin({fname:"resourceClosed",ftype:b("ThriftTypes").STRUCT,fid:3});x(a.resourceClosed,c);c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd();return}if(a.inGameState!=null){c.writeFieldBegin({fname:"inGameState",ftype:b("ThriftTypes").STRUCT,fid:4});C(a.inGameState,c);c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd();return}if(a.container!=null){c.writeFieldBegin({fname:"container",ftype:b("ThriftTypes").STRUCT,fid:5});E(a.container,c);c.writeFieldEnd();c.writeFieldStop();c.writeStructEnd();return}c.writeFieldStop();c.writeStructEnd()}function va(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").STRING?c.message=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.message===void 0&&(c.message="");return c}function J(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I32?c.direction=b("ApertureEventsTypes").Direction.cast(a.readI32()):a.skip(e);break;case 3:e===b("ThriftTypes").I32?c.jsCode=a.readI32():a.skip(e);break;case 4:e===b("ThriftTypes").I64?c.timestamp=a.readI64().toString():a.skip(e);break;case 5:e===b("ThriftTypes").STRING?c.code=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.direction===void 0&&(c.direction=b("ApertureEventsTypes").Direction.cast(0));c.jsCode===void 0&&(c.jsCode=0);return c}function K(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I32?c.left=b("ApertureEventsTypes").Direction.cast(a.readI32()):a.skip(e);break;case 2:e===b("ThriftTypes").I32?c.right=b("ApertureEventsTypes").Direction.cast(a.readI32()):a.skip(e);break;case 3:e===b("ThriftTypes").I32?c.center=b("ApertureEventsTypes").Direction.cast(a.readI32()):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return c}function L(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").DOUBLE?c.deltaY=a.readDouble():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return c}function M(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I64?c.timestamp=a.readI64().toString():a.skip(e);break;case 2:e===b("ThriftTypes").DOUBLE?c.screenPosX=a.readDouble():a.skip(e);break;case 3:e===b("ThriftTypes").DOUBLE?c.screenPosY=a.readDouble():a.skip(e);break;case 4:e===b("ThriftTypes").DOUBLE?c.moveX=a.readDouble():a.skip(e);break;case 5:e===b("ThriftTypes").DOUBLE?c.moveY=a.readDouble():a.skip(e);break;case 6:e===b("ThriftTypes").STRUCT?c.buttons=K(a):a.skip(e);break;case 7:e===b("ThriftTypes").STRUCT?c.wheel=L(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return c}function N(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I32?c.direction=b("ApertureEventsTypes").Direction.cast(a.readI32()):a.skip(e);break;case 2:e===b("ThriftTypes").I64?c.x=a.readI64().toString():a.skip(e);break;case 3:e===b("ThriftTypes").I64?c.y=a.readI64().toString():a.skip(e);break;case 4:e===b("ThriftTypes").I64?c.timestamp=a.readI64().toString():a.skip(e);break;case 5:e===b("ThriftTypes").I64?c.index=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.direction===void 0&&(c.direction=b("ApertureEventsTypes").Direction.cast(0));c.x===void 0&&(c.x="0");c.y===void 0&&(c.y="0");c.index===void 0&&(c.index="0");return c}function O(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I64?c.relX=a.readI64().toString():a.skip(e);break;case 2:e===b("ThriftTypes").I64?c.relY=a.readI64().toString():a.skip(e);break;case 3:e===b("ThriftTypes").I64?c.timestamp=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.relX===void 0&&(c.relX="0");c.relY===void 0&&(c.relY="0");return c}function P(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").DOUBLE?c.longitude=a.readDouble():a.skip(e);break;case 2:e===b("ThriftTypes").DOUBLE?c.latitude=a.readDouble():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.longitude===void 0&&(c.longitude=0);c.latitude===void 0&&(c.latitude=0);return c}function Q(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I32?c.A=b("ApertureEventsTypes").Direction.cast(a.readI32()):a.skip(e);break;case 2:e===b("ThriftTypes").I32?c.B=b("ApertureEventsTypes").Direction.cast(a.readI32()):a.skip(e);break;case 3:e===b("ThriftTypes").I32?c.X=b("ApertureEventsTypes").Direction.cast(a.readI32()):a.skip(e);break;case 4:e===b("ThriftTypes").I32?c.Y=b("ApertureEventsTypes").Direction.cast(a.readI32()):a.skip(e);break;case 5:e===b("ThriftTypes").I32?c.Up=b("ApertureEventsTypes").Direction.cast(a.readI32()):a.skip(e);break;case 6:e===b("ThriftTypes").I32?c.Down=b("ApertureEventsTypes").Direction.cast(a.readI32()):a.skip(e);break;case 7:e===b("ThriftTypes").I32?c.Right=b("ApertureEventsTypes").Direction.cast(a.readI32()):a.skip(e);break;case 8:e===b("ThriftTypes").I32?c.Left=b("ApertureEventsTypes").Direction.cast(a.readI32()):a.skip(e);break;case 9:e===b("ThriftTypes").I32?c.L1=b("ApertureEventsTypes").Direction.cast(a.readI32()):a.skip(e);break;case 10:e===b("ThriftTypes").I32?c.R1=b("ApertureEventsTypes").Direction.cast(a.readI32()):a.skip(e);break;case 11:e===b("ThriftTypes").I32?c.R3=b("ApertureEventsTypes").Direction.cast(a.readI32()):a.skip(e);break;case 12:e===b("ThriftTypes").I32?c.L3=b("ApertureEventsTypes").Direction.cast(a.readI32()):a.skip(e);break;case 13:e===b("ThriftTypes").I32?c.Select=b("ApertureEventsTypes").Direction.cast(a.readI32()):a.skip(e);break;case 14:e===b("ThriftTypes").I32?c.Start=b("ApertureEventsTypes").Direction.cast(a.readI32()):a.skip(e);break;case 15:e===b("ThriftTypes").DOUBLE?c.L2=a.readDouble():a.skip(e);break;case 16:e===b("ThriftTypes").DOUBLE?c.R2=a.readDouble():a.skip(e);break;case 17:e===b("ThriftTypes").DOUBLE?c.ThumbLX=a.readDouble():a.skip(e);break;case 18:e===b("ThriftTypes").DOUBLE?c.ThumbLY=a.readDouble():a.skip(e);break;case 19:e===b("ThriftTypes").DOUBLE?c.ThumbRX=a.readDouble():a.skip(e);break;case 20:e===b("ThriftTypes").DOUBLE?c.ThumbRY=a.readDouble():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return c}function R(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I32?c.direction=b("ApertureEventsTypes").Direction.cast(a.readI32()):a.skip(e);break;case 2:e===b("ThriftTypes").I32?c.jsCode=a.readI32():a.skip(e);break;case 3:e===b("ThriftTypes").I64?c.timestamp=a.readI64().toString():a.skip(e);break;case 4:e===b("ThriftTypes").I32?c.id=a.readI32():a.skip(e);break;case 5:e===b("ThriftTypes").STRUCT?c.keys=Q(a):a.skip(e);break;case 6:e===b("ThriftTypes").BOOL?c.connected=a.readBool():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();return c}function S(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").STRING?c.content=a.readString():a.skip(e);break;case 2:e===b("ThriftTypes").STRING?c.source=a.readString():a.skip(e);break;case 3:e===b("ThriftTypes").I64?c.timestamp=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.content===void 0&&(c.content="");c.source===void 0&&(c.source="");return c}function T(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I64?c.x=a.readI64().toString():a.skip(e);break;case 2:e===b("ThriftTypes").I64?c.y=a.readI64().toString():a.skip(e);break;case 3:e===b("ThriftTypes").I64?c.timestamp=a.readI64().toString():a.skip(e);break;case 4:e===b("ThriftTypes").I64?c.index=a.readI64().toString():a.skip(e);break;case 5:e===b("ThriftTypes").DOUBLE?c.wheel=a.readDouble():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.x===void 0&&(c.x="0");c.y===void 0&&(c.y="0");c.index===void 0&&(c.index="0");c.wheel===void 0&&(c.wheel=0);return c}function U(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").STRING?c.locale=a.readString():a.skip(e);break;case 3:e===b("ThriftTypes").I64?c.timestamp=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.locale===void 0&&(c.locale="");return c}function V(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").I64?c.sequenceNumber=a.readI64().toString():a.skip(e);break;case 2:e===b("ThriftTypes").I64?c.timestamp=a.readI64().toString():a.skip(e);break;case 3:e===b("ThriftTypes").STRING?c.tick=a.readString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.sequenceNumber===void 0&&(c.sequenceNumber="0");c.timestamp===void 0&&(c.timestamp="0");c.tick===void 0&&(c.tick="");return c}function W(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").STRING?c.reason=a.readString():a.skip(e);break;case 2:e===b("ThriftTypes").I32?c.code=b("ApertureEventsTypes").ResourceClosedCode.cast(a.readI32()):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.reason===void 0&&(c.reason="");c.code===void 0&&(c.code=b("ApertureEventsTypes").ResourceClosedCode.cast(0));return c}function X(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").STRING?c.image64=a.readString():a.skip(e);break;case 2:e===b("ThriftTypes").I32?c.hotspotX=a.readI32():a.skip(e);break;case 3:e===b("ThriftTypes").I32?c.hotspotY=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.image64===void 0&&(c.image64="");c.hotspotX===void 0&&(c.hotspotX=0);c.hotspotY===void 0&&(c.hotspotY=0);return c}function Y(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").BOOL?c.visible=a.readBool():a.skip(e);break;case 2:e===b("ThriftTypes").I32?c.icon=a.readI32():a.skip(e);break;case 3:e===b("ThriftTypes").STRUCT?c.iconPool=X(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.visible===void 0&&(c.visible=!1);return c}function Z(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").STRING?c.state=a.readString():a.skip(e);break;case 2:e===b("ThriftTypes").STRUCT?c.cursorState=Y(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.state===void 0&&(c.state="");return c}function wa(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").STRUCT?c.game=Z(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.game===void 0&&(c.game=h());return c}function xa(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").STRUCT?c.data=wa(a):a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.data===void 0&&(c.data=i());return c}function ya(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:e===b("ThriftTypes").STRUCT?c.event=$(a):a.skip(e);break;case 2:e===b("ThriftTypes").I32?c.tsDelta=a.readI32():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.event===void 0&&(c.event=j());return c}function za(a){var c={};a.readStructBegin();while(!0){var d=a.readFieldBegin(),e=d.ftype;d=d.fid;if(e===b("ThriftTypes").STOP)break;switch(d){case 1:if(e===b("ThriftTypes").LIST){c.events=[];d=a.readListBegin();for(var f=0;f<d.size;f++){var g=ya(a);c.events.push(g)}}else a.skip(e);break;case 2:e===b("ThriftTypes").I64?c.seq=a.readI64().toString():a.skip(e);break;case 3:e===b("ThriftTypes").I64?c.ts=a.readI64().toString():a.skip(e);break;default:a.skip(e)}a.readFieldEnd()}a.readStructEnd();c.events===void 0&&(c.events=[]);c.seq===void 0&&(c.seq="0");c.ts===void 0&&(c.ts="0");return c}function Aa(a){var c,d={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===b("ThriftTypes").STOP)break;switch(e){case 1:if(f===b("ThriftTypes").STRING)if(c==null)d.stringPayload=a.readString(),c="stringPayload";else throw new Error("more than one field have been deserialized in union type: PasteEvent; current field: stringPayload, previous deserialized field: "+c);else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return d}function Ba(a){var c,d={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===b("ThriftTypes").STOP)break;switch(e){case 1:if(f===b("ThriftTypes").I32)if(c==null)d.orientation=b("ApertureDimensionsTypes").Orientation.cast(a.readI32()),c="orientation";else throw new Error("more than one field have been deserialized in union type: RotationEvent; current field: orientation, previous deserialized field: "+c);else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return d}function Ca(a){var c,d={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===b("ThriftTypes").STOP)break;switch(e){case 1:if(f===b("ThriftTypes").STRUCT)if(c==null)d.position=P(a),c="position";else throw new Error("more than one field have been deserialized in union type: LocationEvent; current field: position, previous deserialized field: "+c);else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return d}function $(a){var c,d={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===b("ThriftTypes").STOP)break;switch(e){case 1:if(f===b("ThriftTypes").STRUCT)if(c==null)d.key=J(a),c="key";else throw new Error("more than one field have been deserialized in union type: InputEvent; current field: key, previous deserialized field: "+c);else a.skip(f);break;case 2:if(f===b("ThriftTypes").STRUCT)if(c==null)d.touch=N(a),c="touch";else throw new Error("more than one field have been deserialized in union type: InputEvent; current field: touch, previous deserialized field: "+c);else a.skip(f);break;case 3:if(f===b("ThriftTypes").STRUCT)if(c==null)d.paste=Aa(a),c="paste";else throw new Error("more than one field have been deserialized in union type: InputEvent; current field: paste, previous deserialized field: "+c);else a.skip(f);break;case 4:if(f===b("ThriftTypes").STRUCT)if(c==null)d.rotation=Ba(a),c="rotation";else throw new Error("more than one field have been deserialized in union type: InputEvent; current field: rotation, previous deserialized field: "+c);else a.skip(f);break;case 5:if(f===b("ThriftTypes").STRUCT)if(c==null)d.location=Ca(a),c="location";else throw new Error("more than one field have been deserialized in union type: InputEvent; current field: location, previous deserialized field: "+c);else a.skip(f);break;case 6:if(f===b("ThriftTypes").STRUCT)if(c==null)d.gamepad=R(a),c="gamepad";else throw new Error("more than one field have been deserialized in union type: InputEvent; current field: gamepad, previous deserialized field: "+c);else a.skip(f);break;case 7:if(f===b("ThriftTypes").STRUCT)if(c==null)d.text=S(a),c="text";else throw new Error("more than one field have been deserialized in union type: InputEvent; current field: text, previous deserialized field: "+c);else a.skip(f);break;case 8:if(f===b("ThriftTypes").STRUCT)if(c==null)d.wheel=T(a),c="wheel";else throw new Error("more than one field have been deserialized in union type: InputEvent; current field: wheel, previous deserialized field: "+c);else a.skip(f);break;case 9:if(f===b("ThriftTypes").STRUCT)if(c==null)d.mouse=M(a),c="mouse";else throw new Error("more than one field have been deserialized in union type: InputEvent; current field: mouse, previous deserialized field: "+c);else a.skip(f);break;case 10:if(f===b("ThriftTypes").STRUCT)if(c==null)d.keyboardLayout=U(a),c="keyboardLayout";else throw new Error("more than one field have been deserialized in union type: InputEvent; current field: keyboardLayout, previous deserialized field: "+c);else a.skip(f);break;case 11:if(f===b("ThriftTypes").STRUCT)if(c==null)d.relativeMove=O(a),c="relativeMove";else throw new Error("more than one field have been deserialized in union type: InputEvent; current field: relativeMove, previous deserialized field: "+c);else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return d}function Da(a){var c,d={};a.readStructBegin();while(!0){var e=a.readFieldBegin(),f=e.ftype;e=e.fid;if(f===b("ThriftTypes").STOP)break;switch(e){case 1:if(f===b("ThriftTypes").STRUCT)if(c==null)d.input=$(a),c="input";else throw new Error("more than one field have been deserialized in union type: EventUnion; current field: input, previous deserialized field: "+c);else a.skip(f);break;case 2:if(f===b("ThriftTypes").STRUCT)if(c==null)d.tick=V(a),c="tick";else throw new Error("more than one field have been deserialized in union type: EventUnion; current field: tick, previous deserialized field: "+c);else a.skip(f);break;case 3:if(f===b("ThriftTypes").STRUCT)if(c==null)d.resourceClosed=W(a),c="resourceClosed";else throw new Error("more than one field have been deserialized in union type: EventUnion; current field: resourceClosed, previous deserialized field: "+c);else a.skip(f);break;case 4:if(f===b("ThriftTypes").STRUCT)if(c==null)d.inGameState=xa(a),c="inGameState";else throw new Error("more than one field have been deserialized in union type: EventUnion; current field: inGameState, previous deserialized field: "+c);else a.skip(f);break;case 5:if(f===b("ThriftTypes").STRUCT)if(c==null)d.container=za(a),c="container";else throw new Error("more than one field have been deserialized in union type: EventUnion; current field: container, previous deserialized field: "+c);else a.skip(f);break;default:a.skip(f)}a.readFieldEnd()}a.readStructEnd();return d}f.ErrorWithMessage$DefaultConstructor=a;f.KeyEvent$DefaultConstructor=c;f.MouseButtons$DefaultConstructor=d;f.MouseWheel$DefaultConstructor=e;f.MouseEvent$DefaultConstructor=g;f.TouchEvent$DefaultConstructor=aa;f.RelativeMoveEvent$DefaultConstructor=ba;f.LocationPosition$DefaultConstructor=ca;f.GamepadKeys$DefaultConstructor=da;f.GamepadEvent$DefaultConstructor=ea;f.ImeEvent$DefaultConstructor=fa;f.WheelEvent$DefaultConstructor=ga;f.KeyboardLayoutEvent$DefaultConstructor=ha;f.TickEvent$DefaultConstructor=ia;f.ResourceClosedEvent$DefaultConstructor=ja;f.CursorIconPool$DefaultConstructor=ka;f.CursorStateEvent$DefaultConstructor=la;f.InGameState$DefaultConstructor=h;f.InGameStateData$DefaultConstructor=i;f.InGameStateEvent$DefaultConstructor=ma;f.InputEventItem$DefaultConstructor=na;f.InputEventsContainer$DefaultConstructor=oa;f.PasteEvent$DefaultConstructor=pa;f.RotationEvent$DefaultConstructor=qa;f.LocationEvent$DefaultConstructor=ra;f.InputEvent$DefaultConstructor=j;f.EventUnion$DefaultConstructor=sa;f.serializeErrorWithMessage=ta;f.serializeKeyEvent=k;f.serializeMouseButtons=l;f.serializeMouseWheel=m;f.serializeMouseEvent=n;f.serializeTouchEvent=o;f.serializeRelativeMoveEvent=p;f.serializeLocationPosition=q;f.serializeGamepadKeys=r;f.serializeGamepadEvent=s;f.serializeImeEvent=t;f.serializeWheelEvent=u;f.serializeKeyboardLayoutEvent=v;f.serializeTickEvent=w;f.serializeResourceClosedEvent=x;f.serializeCursorIconPool=y;f.serializeCursorStateEvent=z;f.serializeInGameState=A;f.serializeInGameStateData=B;f.serializeInGameStateEvent=C;f.serializeInputEventItem=D;f.serializeInputEventsContainer=E;f.serializePasteEvent=F;f.serializeRotationEvent=G;f.serializeLocationEvent=H;f.serializeInputEvent=I;f.serializeEventUnion=ua;f.deserializeErrorWithMessage=va;f.deserializeKeyEvent=J;f.deserializeMouseButtons=K;f.deserializeMouseWheel=L;f.deserializeMouseEvent=M;f.deserializeTouchEvent=N;f.deserializeRelativeMoveEvent=O;f.deserializeLocationPosition=P;f.deserializeGamepadKeys=Q;f.deserializeGamepadEvent=R;f.deserializeImeEvent=S;f.deserializeWheelEvent=T;f.deserializeKeyboardLayoutEvent=U;f.deserializeTickEvent=V;f.deserializeResourceClosedEvent=W;f.deserializeCursorIconPool=X;f.deserializeCursorStateEvent=Y;f.deserializeInGameState=Z;f.deserializeInGameStateData=wa;f.deserializeInGameStateEvent=xa;f.deserializeInputEventItem=ya;f.deserializeInputEventsContainer=za;f.deserializePasteEvent=Aa;f.deserializeRotationEvent=Ba;f.deserializeLocationEvent=Ca;f.deserializeInputEvent=$;f.deserializeEventUnion=Da}),66);
__d("TCompactProtocol",["StringToUtf8","ThriftTypes","Utf8ToString"],(function(a,b,c,d,e,f,g){var h=Object.freeze({CT_STOP:0,CT_BOOLEAN_TRUE:1,CT_BOOLEAN_FALSE:2,CT_BYTE:3,CT_I16:4,CT_I32:5,CT_I64:6,CT_DOUBLE:7,CT_BINARY:8,CT_LIST:9,CT_SET:10,CT_MAP:11,CT_STRUCT:12,CT_FLOAT:13}),i=Object.freeze({NONE:-1,CT_BOOLEAN_TRUE:h.CT_BOOLEAN_TRUE,CT_BOOLEAN_FALSE:h.CT_BOOLEAN_FALSE}),j=[h.CT_STOP,0,h.CT_BOOLEAN_TRUE,h.CT_BYTE,h.CT_DOUBLE,0,h.CT_I16,0,h.CT_I32,0,h.CT_I64,h.CT_BINARY,h.CT_STRUCT,h.CT_MAP,h.CT_SET,h.CT_LIST,0,0,0,h.CT_FLOAT],k=Math.pow(2,7)-1,l=-1*Math.pow(2,7),m=Math.pow(2,15)-1,n=-1*Math.pow(2,15),o=Math.pow(2,31)-1,p=-1*Math.pow(2,31),q=Math.pow(2,32)-1,r=BigInt("9223372036854775807"),s=BigInt("-9223372036854775808"),t=BigInt("18446744073709551615"),u=BigInt(63),v=BigInt(1),w=BigInt(7),x=BigInt("0x7f"),y=BigInt("0x80"),z=Math.pow(2,4);a=function(){function a(a){this.$4=null,this.$5=null,this.$1=a,this.$2=[],this.$3=0,this.$6=new DataView(new ArrayBuffer(1))}var b=a.prototype;b.readStructBegin=function(){this.$2.push(this.$3),this.$3=0};b.readStructEnd=function(){this.$3=this.$2.pop();return 0};b.writeStructBegin=function(a){this.$2.push(this.$3);this.$3=0;return 0};b.writeStructEnd=function(){this.$3=this.$2.pop();return 0};b.writeFieldBegin=function(a){if(a.ftype===c("ThriftTypes").BOOL){this.$4={fid:a.fid,fname:a.fname,ftype:a.ftype};return 0}else return this.$7(a,i.NONE)};b.writeListBegin=function(a){return this.$8(a)};b.writeListEnd=function(){return 0};b.writeSetBegin=function(a){return this.$8(a)};b.writeSetEnd=function(){return 0};b.writeMapBegin=function(a){var b=0;if(a.size===0)b+=this.$1.writeByte(0);else{b+=this.writeVarint32(a.size);if(a.ktype!=null&&a.vtype!=null)b+=this.$1.writeByte(this.$9(a.ktype)<<4|this.$9(a.vtype));else throw new Error("received invalid map info: "+JSON.stringify(a))}return b};b.writeMapEnd=function(){return 0};b.$7=function(a,b){var c=0;b=b===i.NONE?this.$9(a.ftype):b;a.fid>this.$3&&a.fid-this.$3<=z-1?c+=this.$1.writeByte(a.fid-this.$3<<4|b):(c+=this.$1.writeByte(b),c+=this.writeI16(a.fid));this.$3=a.fid;return c};b.$8=function(a){var b=0,c=this.$9(a.etype);a.size<=z-2?b+=this.$1.writeByte(a.size<<4|c):(b+=this.$1.writeByte(240|c),b+=this.writeVarint32(a.size));return b};b.readFieldBegin=function(){var a=this.$1.readByte(),b=a&15;if(b===c("ThriftTypes").STOP)return{ftype:c("ThriftTypes").STOP,fid:0};a=(a&240)>>>4;var d;a===0?d=this.readI16():d=this.$3+a;a=this.$10(b);(b===h.CT_BOOLEAN_TRUE||b===h.CT_BOOLEAN_FALSE)&&(this.$5=b===h.CT_BOOLEAN_TRUE);this.$3=d;return{ftype:a,fid:d}};b.readListBegin=function(){return this.$11()};b.readListEnd=function(){return 0};b.readSetBegin=function(){return this.$11()};b.readSetEnd=function(){return 0};b.readMapBegin=function(){var a=this.readVarint32();if(a>0){var b=this.$1.readByte(),c=this.$12(b>>4,"readMapBegin:key");b=this.$12(b&15,"readMapBegin:value");return{ktype:this.$10(c),vtype:this.$10(b),size:a}}return{size:a}};b.readMapEnd=function(){return 0};b.$12=function(a,b){if(a<0||a>13)throw new Error(b+" read invalid compact type: "+a);return a};b.$11=function(){var a=this.$1.readByte(),b=this.$12(a&15,"_readListOrSetBegin");b=this.$10(b);a=a>>4&15;a===15&&(a=this.readVarint32());return{etype:b,size:a}};b.readFieldEnd=function(){return 0};b.readByte=function(){this.$6.setUint8(0,this.$1.readByte());return this.$6.getInt8(0)};b.writeByte=function(a){if(a<l||a>k)throw new Error("byte to write is out of range: "+a);this.$6.setInt8(0,a);return this.$1.writeByte(this.$6.getUint8(0))};b.readFloat=function(){return this.$1.readFloatBE()};b.writeFloat=function(a){return this.$1.writeFloatBE(a)};b.readDouble=function(){return this.$1.readDoubleBE()};b.writeDouble=function(a){return this.$1.writeDoubleBE(a)};b.writeString=function(a){return this.writeBinary(d("StringToUtf8").StringToUtf8(a))};b.skip=function(a){switch(a){case c("ThriftTypes").STOP:return;case c("ThriftTypes").BOOL:this.readBool();break;case c("ThriftTypes").BYTE:this.readByte();break;case c("ThriftTypes").DOUBLE:this.readDouble();break;case c("ThriftTypes").I16:this.readI16();break;case c("ThriftTypes").I32:this.readI32();break;case c("ThriftTypes").I64:this.readI64();break;case c("ThriftTypes").STRING:this.readString();break;case c("ThriftTypes").STRUCT:this.readStructBegin();var b;while(!0){b=this.readFieldBegin();if(b.ftype===c("ThriftTypes").STOP)break;this.skip(b.ftype)}this.readStructEnd();break;case c("ThriftTypes").MAP:b=this.readMapBegin();if(b.size>0&&b.ktype!=null&&b.vtype!=null){var d=b.ktype,e=b.vtype;for(var f=0;f<b.size;f++)this.skip(d),this.skip(e)}break;case c("ThriftTypes").SET:case c("ThriftTypes").LIST:f=this.$11();for(d=0;d<f.size;d++)this.skip(f.etype);break;case c("ThriftTypes").FLOAT:this.readFloat();break;default:throw new Error("encoutered unknow thrift type: "+a+" in skip")}};b.toByteArray=function(){return this.$1.toByteArray()};b.writeFieldEnd=function(){return 0};b.writeFieldStop=function(){return this.$1.writeByte(c("ThriftTypes").STOP)};b.writeI16=function(a){if(a<n||a>m)throw new Error("trying to write i16 out of range: "+a);return this.writeVarint32(this.i32ToZigzag(a))};b.readI16=function(){var a=this.zigzagToI32(this.readVarint32());if(a<n||a>m)throw new Error("read invalid i16: "+a);return a};b.writeI32=function(a){if(a<p||a>o)throw new Error("i32 out of range: "+a);return this.writeVarint32(this.i32ToZigzag(a))};b.readI32=function(){return this.zigzagToI32(this.readVarint32())};b.writeI64=function(a){return this.writeVarint64(this.i64ToZigzag(a))};b.readI64=function(){return this.zigzagToI64(this.readVarint64())};b.readBool=function(){var a;this.$5!=null?(a=this.$5,this.$5=null):a=this.$1.readByte()===h.CT_BOOLEAN_TRUE;return a};b.writeBool=function(a){var b=0;this.$4!=null?(b+=this.$7(this.$4,a?i.CT_BOOLEAN_TRUE:i.CT_BOOLEAN_FALSE),this.$4=null):b+=this.$1.writeByte(a?h.CT_BOOLEAN_TRUE:h.CT_BOOLEAN_FALSE);return b};b.readBinary=function(){var a=this.readVarint32();return a===0?new Uint8Array(0):this.$1.readBytes(a)};b.writeBinary=function(a){var b=0;b+=this.writeVarint32(a.length);b+=this.$1.write(a);return b};b.i32ToZigzag=function(a){if(a<p||a>o)throw new Error("number: "+a+" is out of range of i32");return(a<<1^(a<0?4294967295:0))>>>0};b.zigzagToI32=function(a){if(a<0||a>q)throw new Error("number: "+a+" is out of range of uint32");return a>>>1^-1*(a&1)};b.i64ToZigzag=function(a){if(a>r||a<s)throw new Error("i64 out of range: "+a.toString());return a>>u^a<<v};b.zigzagToI64=function(a){if(a<0||a>t)throw new Error("invalid uint64: "+a.toString());return(a&v)===v?~(a>>v):a>>v};b.writeVarint32=function(a){if(a<0||a>q)throw new Error("writeVarint32 received out of range uint32: "+a);a=a;var b=0;while(!0)if(a>>>7===0){this.$1.writeByte(a);b++;break}else this.$1.writeByte(a&127|128),b++,a>>>=7;return b};b.readVarint32=function(){var a=0,b=0,c;while(!0){c=this.$1.readByte();a=(a|(c&127)<<b)>>>0;b+=7;if((c&128)==0){if(b===35&&(c&240)!=0)throw new Error("result exceeded 32 bit limit");break}if(b>28)throw new Error("result exceeded 32 bit limit")}return a};b.writeVarint64=function(a){if(a<0||a>t)throw new Error("invalid uint64: "+a.toString());a=a;var b=0;while(!0)if(a>>w==0){this.$1.writeByte(Number(a));b++;break}else this.$1.writeByte(Number(a&x|y)),b++,a>>=w;return b};b.readVarint64=function(){var a=BigInt(0),b=BigInt(0),c;while(!0){c=BigInt(this.$1.readByte());a|=(c&x)<<b;b+=w;if((c&y)==0){if(b==70&&c!==v)throw new Error("result exceeded 64 bit limit");break}if(b>63)throw new Error("result exceeded 64 bit limit")}return a};b.readString=function(){return d("Utf8ToString").Utf8ToString(this.readBinary())};b.getLastFieldId=function(){return this.$3};b.getLastField=function(){return this.$2};b.getBooleanFieldInfo=function(){return this.$4};b.getBooleanValue=function(){return this.$5};b.$9=function(a){return j[a]};b.$10=function(a){switch(a){case h.CT_STOP:return c("ThriftTypes").STOP;case h.CT_BOOLEAN_FALSE:case h.CT_BOOLEAN_TRUE:return c("ThriftTypes").BOOL;case h.CT_BYTE:return c("ThriftTypes").BYTE;case h.CT_I16:return c("ThriftTypes").I16;case h.CT_I32:return c("ThriftTypes").I32;case h.CT_I64:return c("ThriftTypes").I64;case h.CT_DOUBLE:return c("ThriftTypes").DOUBLE;case h.CT_FLOAT:return c("ThriftTypes").FLOAT;case h.CT_BINARY:return c("ThriftTypes").STRING;case h.CT_LIST:return c("ThriftTypes").LIST;case h.CT_SET:return c("ThriftTypes").SET;case h.CT_MAP:return c("ThriftTypes").MAP;case h.CT_STRUCT:return c("ThriftTypes").STRUCT;default:throw new Error("don't know what type")}};return a}();g["default"]=a}),98);
__d("CompactSerializer",["TCompactProtocol","TNoOpWriteBuffer","TReadBuffer","TWriteBuffer"],(function(a,b,c,d,e,f,g){function a(a,b,c){try{return h(a,b)}catch(a){c!=null&&c(a)}return null}function h(a,b){a=new(c("TReadBuffer"))(a);a=new(c("TCompactProtocol"))(a);return b(a)}function b(a,b,c,d){c===void 0&&(c=!1);try{return i(a,b,c)}catch(a){d!=null&&d(a)}return null}function i(a,b,d){d===void 0&&(d=!1);if(d){d=new(c("TNoOpWriteBuffer"))();var e=new(c("TCompactProtocol"))(d);b(a,e);e=new(c("TWriteBuffer"))(d.currentSize())}else e=new(c("TWriteBuffer"))();d=new(c("TCompactProtocol"))(e);b(a,d);return d.toByteArray()}g.deserializeNoThrow=a;g.deserialize=h;g.serializeNoThrow=b;g.serialize=i}),98);
__d("CloudGamingWebRTCEventUtils",["ApertureEventsSerializers","CompactSerializer","EventTimeUtils","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qex")._("724"),i=c("qex")._("725"),j=c("qex")._("726"),k=c("qex")._("727"),l=function(a){return Math.round(a).toString()},m=function(){function a(a,b,c,d,e){this.$1=0,this.$2=!1,this.$3=1e3,this.$4=15,this.$5=0,this.$6=[],this.$7=0,this.$8=0,this.$9=0,this.$11=0,this.$1=a,this.$2=b,this.$3=c,this.$4=d,e==null?this.$12=function(a){}:this.$12=e}var b=a.prototype;b.$13=function(a){return a!=null?parseInt(a,10):d("EventTimeUtils").tryGetTimestampInMicroSecond()};b.$14=function(){var a=this.$5;this.$5+=1;return a};b.$15=function(){var a=this.$9;while(this.$6.length>0){var b=this.$6[this.$6.length-1];if(a<=this.$8||this.$6.length>this.$1)this.$6.pop();else{this.$9=a;break}a+=b.tsDelta==null?0:b.tsDelta}};b.$16=function(a,b){this.$15();this.$6.length>0&&(this.$6[0].tsDelta=a-this.$7);this.$6.unshift(b);this.$7=a;this.$6.length===1&&(this.$9=a);return this.$6};b.$17=function(a,b){var c=this.$16(a,b),d=this.$14();return{eventWithHistory:{container:{events:c,seq:l(d),ts:l(a)}},eventWithoutHistory:{container:{events:[b],seq:l(d),ts:l(a)}}}};b.getHistory=function(){this.$15();if(this.$6.length===0)return null;var a=this.$5-1,b=this.$7;return{container:{events:this.$6,seq:l(a),ts:l(b)}}};b.$18=function(){var a=this;this.$11=Date.now();this.$2&&this.$10==null&&(this.$10=window.setInterval(function(){var b=Date.now()-a.$11;if(b<a.$3){if(b>a.$4){b=a.getHistory();b!=null&&a.$12(b)}}else window.clearInterval(a.$10),a.$10=null},this.$4))};b.convertToEventWithHistory=function(a){if(a.input==null)return null;a=a.input;var b;if(a.touch!=null){var c=babelHelpers["extends"]({},a.touch);b=this.$13(c.timestamp);c.timestamp=null;delete c.timestamp;c={event:{touch:c}}}else if(a.key!=null){var e=babelHelpers["extends"]({},a.key);b=this.$13(e.timestamp);e.timestamp=null;delete e.timestamp;c={event:{key:e}}}else if(a.gamepad!=null){e=babelHelpers["extends"]({},a.gamepad);e.timestamp!=null?(b=this.$13(e.timestamp),e.timestamp=null,delete e.timestamp):b=d("EventTimeUtils").tryGetTimestampInMicroSecond();c={event:{gamepad:e}}}else if(a.mouse){e=babelHelpers["extends"]({},a.mouse);b=this.$13(e.timestamp);e.timestamp=null;delete e.timestamp;c={event:{mouse:e}}}else if(a.keyboardLayout){e=babelHelpers["extends"]({},a.keyboardLayout);b=this.$13(e.timestamp);e.timestamp=null;delete e.timestamp;c={event:{keyboardLayout:e}}}else return null;a=this.$17(b,c);this.$18();return a};b.onInputsAcked=function(a){var b=this;a.forEach(function(a){a>b.$8&&(b.$8=a)})};return a}(),n;function a(a){n=new m(h==null?3:h,i==null?!1:i,j==null?1e3:j,k==null?15:k,a);return n}function b(){return n}function e(a){return d("CompactSerializer").serializeNoThrow(a,d("ApertureEventsSerializers").serializeEventUnion,!1)}g.WebRTCEventUtils=m;g.createWebRTCEventUtils=a;g.getCurrentInstanceOfWebRTCEventUtils=b;g.serializeToCompactThrift=e}),98);
__d("SDKMessageEventQueue",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$3=[],this.$4=10,this.$1=a}var b=a.prototype;b.start=function(){this.$5()};b.enqueForRetry=function(a){this.$3.push(a)};b.$6=function(){if(this.$1.isLifecycleChannelReady()){while(this.$3.length>0){var a=this.$3.shift();this.$1.sendRTCEvent("lifecycle",a)}this.$4--;this.$4===0&&this.$7()}};b.$5=function(){var a=this;this.$2==null&&(this.$6(),this.$2=window.setInterval(function(){a.$6()},1e3))};b.$7=function(){this.$2&&(window.clearInterval(this.$2),this.$2=null)};return a}();f["default"]=a}),66);
__d("CloudGamingRTCContext",["CloudGamingAllowServerDebug","CloudGamingErrorTypes","CloudGamingHeartbeat","CloudGamingWebRTCEventUtils","SDKMessageEventQueue","clearTimeout","gkx","qex","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=5e3;function i(a,b){var c=[];for(var b=b.purposeToLabel,d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;var g=f[0];f=f[1];if(a.label!==f)continue;c.push(g)}return c.length>0?{label:a.label,purposes:c}:null}function j(a,b){a=b.purposeToLabel.get(a);return a==null?null:b.labelToChannel.get(a)}a=function(){function a(a,b,e,f){var g=this;this.heartbeat=null;this.useFrameFeedback=!1;this.useDetailedFrameFeedback=!1;this.$1="";this.$9=[];this.$10=null;this.$12=function(a){a=a.stream;g.$2({stream:a,type:"ADD_MEDIA_STREAM"})};this.$13=function(a){a=a.stream;g.$2({stream:a,type:"REMOVE_MEDIA_STREAM"})};this.$11=function(a){var b=a.streams;if(b.length!==1)return;b=a.streams[0];a=a.track;switch(a.kind){case"audio":g.$2({stream:b,track:a,type:"ADD_AUDIO_TRACK"});return;case"video":g.$2({stream:b,track:a,type:"ADD_VIDEO_TRACK"});return}};this.$14=function(a){var b=a.channel,c=i(b,g.$3().rtc);if(c==null)return;b.onopen=function(){return g.$16(c,b)};b.onclose=function(){return g.$17(c,b)};b.onmessage=function(a){return g.$18(a)};b.onerror=function(a){return g.$19(a)}};this.$15=function(a){switch(a.target.connectionState){case"connected":g.$2({timestamp:Date.now(),type:"PEER_CONNECTION_CONNECTED"});g.$6&&g.$21();break;case"disconnected":if(c("CloudGamingAllowServerDebug")())break;g.$6?g.$22():g.$20("PEER_CONNECTION_DISCONNECTED");break;case"failed":g.$6&&g.$21();g.$20("PEER_CONNECTION_FAILED");g.$2({timestamp:Date.now(),type:"PEER_CONNECTION_FAILED"});break;default:break}};this.$2=a;this.$3=b;this.$4=e;this.$5=d("CloudGamingWebRTCEventUtils").createWebRTCEventUtils(function(a){var b=j("input_unreliable",g.$3().rtc);if(b==null)return;a=d("CloudGamingWebRTCEventUtils").serializeToCompactThrift(a);a!=null&&b.send(a)});this.$6=f;this.$7=null;this.$8=!1;this.useFrameFeedback=c("qex")._("26")||c("qex")._("126")||!1;this.useDetailedFrameFeedback=c("gkx")("167")}var b=a.prototype;b.enableSDKMessageRetry=function(){this.$10=new(c("SDKMessageEventQueue"))(this)};b.setPeerConnection=function(a){this.clear(),a.ontrack!==void 0?a.ontrack=this.$11:(a.onaddstream=this.$12,a.onremovestream=this.$13),a.ondatachannel=this.$14,a.onconnectionstatechange=this.$15,a.createDataChannel("noop")};b.clear=function(){this.heartbeat&&(this.heartbeat.clear(),this.heartbeat=null);var a=this.$3().rtc,b=a.connection;a=a.labelToChannel;b!=null&&b.close();for(var b=a.values(),a=Array.isArray(b),c=0,b=a?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(a){if(c>=b.length)break;d=b[c++]}else{c=b.next();if(c.done)break;d=c.value}d=d;d.close()}};b.sendRTCEvent=function(a,b){var c=j(a,this.$3().rtc);if(c==null){if(this.$10!=null&&a==="lifecycle"&&Object.prototype.hasOwnProperty.call(b,"sdkMessage")){var e;(e=this.$10)==null?void 0:e.enqueForRetry(b);return}this.$2({event:{error:"null_channel",event:b,purpose:a},type:"UNSENDABLE_RTC"});return}e=j("input_unreliable",this.$3().rtc);var f=this.$3().rtc.enableInputCompactFormat;if(a!=="input"||e==null&&!f){var g=JSON.stringify(b)+"\n";if(this.$8===!1&&g.includes("DataToGame")){this.$9.push(g);return}c.readyState==="open"?c.send(g):this.$2({event:{error:"not_open",event:b,purpose:a},type:"UNSENDABLE_RTC"});return}if(e==null&&f){g=d("CloudGamingWebRTCEventUtils").serializeToCompactThrift(b);g!=null&&c.send(g);return}a=this.$5.convertToEventWithHistory(b);if(a==null)return;if(f){g=d("CloudGamingWebRTCEventUtils").serializeToCompactThrift(a.eventWithoutHistory);g!=null&&c.send(g)}else{b=JSON.stringify(a.eventWithoutHistory);c.send(b)}f=d("CloudGamingWebRTCEventUtils").serializeToCompactThrift(a.eventWithHistory);f!=null&&e!=null&&e.send(f)};b.isLifecycleChannelReady=function(){var a=j("lifecycle",this.$3().rtc);return a!=null&&a.readyState==="open"};b.setSDKInitialized=function(){this.$8=!0;var a=j("lifecycle",this.$3().rtc);while(this.$9.length>0){var b=this.$9.shift();a!=null&&a.readyState==="open"?a.send(b):this.$2({event:{error:a==null?"null_channel_in_queue":"not_open_in_queue",event:JSON.parse(b),purpose:"lifecycle"},type:"UNSENDABLE_RTC"})}};a.parseMessages=function(a,b){a=a.data;if(typeof a!=="string")return[[],b];a=b+a;b=[];a=a.split("\n");var c=a.shift();while(c!==void 0){if(c.length===0)return[b,a.join("\n")];try{var d=JSON.parse(c);b.push(d)}catch(d){if(a.length===0)return[b,[c].concat(a).join("\n")]}c=a.shift()}return[b,a.join("\n")]};b.$16=function(a,b){var d=a.label;a=a.purposes;for(var e=a,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;this.$2({channel:b,label:d,purpose:h,timestamp:Date.now(),type:"DATA_CHANNEL_OPENED"})}if(a.includes("lifecycle")){this.heartbeat=new(c("CloudGamingHeartbeat"))(this.$2,this.$3);this.heartbeat.startDispatchingHeartbeats();(h=this.$10)==null?void 0:h.start()}};b.$17=function(a,b){var c=a.label;a=a.purposes;for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;this.$2({channel:b,label:c,purpose:f,type:"DATA_CHANNEL_CLOSED"})}};b.$18=function(b){b=a.parseMessages(b,this.$1);this.$1=b[1];for(var b=b[0],c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e=this.$4(JSON.stringify(e));this.$2(e)}};b.$19=function(a){a=a.error;this.$2({detail:a.errorDetail,message:a.name+": "+a.message,type:"DATA_CHANNEL_ERROR"});(a.errorDetail==="sctp-failure"||a.message==="Transport channel closed")&&this.$20("DATA_CHANNEL_ERROR")};b.$21=function(){this.$7!=null&&(this.$2({timestamp:Date.now(),type:"STOP_DELAYED_CONNECTION_ERROR"}),c("clearTimeout")(this.$7)),this.$7=null};b.$22=function(){var a=this;this.$2({timestamp:Date.now(),type:"START_DELAYED_CONNECTION_ERROR"});this.$7!=null&&c("clearTimeout")(this.$7);this.$7=c("setTimeout")(function(){a.$20("PEER_CONNECTION_DISCONNECTED")},h)};b.$20=function(a){this.$2({code:d("CloudGamingErrorTypes").CloudGamingErrorCode.PEER_CONNECTION_CLOSED,detail:a,type:"CONNECTION_ERROR"})};return a}();g["default"]=a}),98);
__d("CloudGamingStreamingConfig",["UserAgent","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a==="APERTURE"&&c("gkx")("3294")}function b(a){return!a&&c("UserAgent").isBrowser("Chrome >= 52")}function d(){return c("UserAgent").isBrowser("Chrome")||c("UserAgent").isBrowser("Edge (Chromium Based)")||c("UserAgent").isBrowser("Safari")}function e(){return!1}g.enableInputCompactFormat=a;g.useH264=b;g.supportInputFeedback=d;g.enable60fps=e}),98);
__d("CloudGamingContextProvider.react",["CloudGamingConnectionReducer","CloudGamingContainerReducer","CloudGamingContext.react","CloudGamingGamepadReducer","CloudGamingHeartbeatReducer","CloudGamingInGameStateReducer","CloudGamingKeyboardReducer","CloudGamingLocalCursorReducer","CloudGamingMediaReducer","CloudGamingMouseReducer","CloudGamingMultiTouchOverlayReducer","CloudGamingRTCAction","CloudGamingRTCContext","CloudGamingRTCReducer","CloudGamingResolutionReducer","CloudGamingResourceReducer","CloudGamingStreamingConfig","CloudGamingWarningAlertReducer","GameLifecycleReducer","react","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useEffect,k=b.useMemo,l=b.useReducer,m=b.useRef;e=function(a){return function(b,c){return Object.keys(a).reduce(function(b,d){var e;return babelHelpers["extends"]({},b,(e={},e[d]=a[d](b[d],c),e))},b)}};var n=function(a){return{connection:d("CloudGamingContext.react").DefaultConnectionState,container:d("CloudGamingContainerReducer").DefaultState,gameLifecycle:d("GameLifecycleReducer").DefaultState,gamepad:d("CloudGamingGamepadReducer").DefaultState,heartbeat:d("CloudGamingHeartbeatReducer").DefaultState,inGameState:d("CloudGamingInGameStateReducer").DefaultState,keyboard:d("CloudGamingKeyboardReducer").DefaultState,localCursor:d("CloudGamingLocalCursorReducer").DefaultState,media:d("CloudGamingMediaReducer").DefaultState,mouse:d("CloudGamingMouseReducer").DefaultState,multiTouchOverlay:d("CloudGamingMultiTouchOverlayReducer").DefaultState,resolution:d("CloudGamingResolutionReducer").DefaultState,resource:d("CloudGamingResourceReducer").DefaultState,rtc:babelHelpers["extends"]({},d("CloudGamingRTCReducer").DefaultState,{enableInputCompactFormat:d("CloudGamingStreamingConfig").enableInputCompactFormat(a)}),warningAlert:d("CloudGamingWarningAlertReducer").DefaultState}},o=e({connection:d("CloudGamingConnectionReducer").connection,container:d("CloudGamingContainerReducer").container,gameLifecycle:d("GameLifecycleReducer").gameLifecycle,gamepad:d("CloudGamingGamepadReducer").gamepad,heartbeat:d("CloudGamingHeartbeatReducer").heartbeat,inGameState:d("CloudGamingInGameStateReducer").inGameState,keyboard:d("CloudGamingKeyboardReducer").keyboard,localCursor:d("CloudGamingLocalCursorReducer").localCursor,media:d("CloudGamingMediaReducer").media,mouse:d("CloudGamingMouseReducer").mouse,multiTouchOverlay:d("CloudGamingMultiTouchOverlayReducer").multiTouchOverlay,resolution:d("CloudGamingResolutionReducer").resolution,resource:d("CloudGamingResourceReducer").resource,rtc:d("CloudGamingRTCReducer").rtc,warningAlert:d("CloudGamingWarningAlertReducer").warningAlert});function a(a){var b=a.children,e=a.extraActions;a=a.provider;a=l(o,n(a));var f=a[0],g=a[1],p=m(f);p.current=f;var q=m(g),r=c("useStable")(function(){return new(c("CloudGamingRTCContext"))(function(a){return q.current(a)},function(){return p.current},d("CloudGamingRTCAction").getActionFromChannelMessage,!0)}),s=i(function(a){a=a;if(typeof a==="function")a(s,function(){return p.current},r);else{for(var b=e,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(d>=b.length)break;f=b[d++]}else{d=b.next();if(d.done)break;f=d.value}f=f;r!=null&&(a=f(a,s,function(){return p.current},r))}g(a)}},[r,e]);j(function(){q.current=s},[s]);a=k(function(){return{connection:f.connection,gameLifecycle:f.gameLifecycle.gameLifecycleState,initialResolutionHeight:f.resolution.height,initialResolutionWidth:f.resolution.width,resourceHeight:f.resource.size.resource.height,resourceWidth:f.resource.size.resource.width,showMultiTouchOverlay:f.multiTouchOverlay.showMultiTouchOverlay,viewportHeight:f.container.viewportHeight,viewportWidth:f.container.viewportWidth}},[f.connection,f.gameLifecycle.gameLifecycleState,f.resolution.height,f.resolution.width,f.resource.size.resource.height,f.resource.size.resource.width,f.multiTouchOverlay.showMultiTouchOverlay,f.container.viewportWidth,f.container.viewportHeight]);var t=k(function(){return{connectionPhase:f.connection.phase,mediaStream:f.media.mediaStream}},[f.connection.phase,f.media.mediaStream]),u=k(function(){return f.multiTouchOverlay},[f.multiTouchOverlay]),v=k(function(){return babelHelpers["extends"]({},f.warningAlert,{browserOrientation:f.container.browserOrientation})},[f.warningAlert,f.container.browserOrientation]);return h.jsx(d("CloudGamingContext.react").CloudGamingDispatchContext.Provider,{value:s,children:h.jsx(d("CloudGamingContext.react").CloudGamingContentStateContext.Provider,{value:a,children:h.jsx(d("CloudGamingContext.react").CloudGamingMultiTouchOverlayStateContext.Provider,{value:u,children:h.jsx(d("CloudGamingContext.react").CloudGamingWarningAlertStateContext.Provider,{value:v,children:h.jsx(d("CloudGamingContext.react").CloudGamingVideoStreamStateContext.Provider,{value:t,children:b})})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CloudGamingGameStateMiddleware",["CloudGamingActionTypes","CloudGamingLogUtils","CloudGamingVirtualGamepadConfig.react"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,e,f){return function(g){switch(g.type){case c("CloudGamingActionTypes").IN_GAME_STATE:var h=d("CloudGamingVirtualGamepadConfig.react").getVirtualGamepad();h!==null&&h.onGameStateChange(g.state);g.state!==""&&d("CloudGamingLogUtils").logEvent("GAME_STATE_CHANGE_DURING_GAME",a,f,e,b,new Map([["newGameState",g.state]]));break;default:break}return g}};g.runAction=a}),98);
__d("CloudGamingGamepadGredosController",["CloudGamingActionTypes","CloudGamingVirtualGamepadConfig.react","EventTimeUtils","clearInterval","setInterval"],(function(a,b,c,d,e,f,g){"use strict";var h=1e3,i=10,j={0:"A",1:"B",2:"X",3:"Y",4:"L1",5:"R1",6:"L2",7:"R2",8:"Select",9:"Start",10:"L3",11:"R3",12:"Up",13:"Down",14:"Left",15:"Right",16:"Home"},k={0:"ThumbLX",1:"ThumbLY",2:"ThumbRX",3:"ThumbRY"};a=function(){function a(a){var b=this;this.$3=null;this.$4=null;this.connectHandler=function(a){b.addGamepad(a.gamepad)};this.disconnectHandler=function(a){b.removeGamepad(a.gamepad)};this.updateStatus=function(){b.scanGamepads();for(var a=b.$1.entries(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];if(!e||!e.connected)continue;var g={A:0,B:0,Down:0,L1:0,L2:0,L3:0,Left:0,R1:0,R2:0,R3:0,Right:0,Select:0,Start:0,ThumbLX:0,ThumbLY:0,ThumbRX:0,ThumbRY:0,Up:0,X:0,Y:0};for(var h=e.buttons.entries(),i=Array.isArray(h),l=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(i){if(l>=h.length)break;m=h[l++]}else{l=h.next();if(l.done)break;m=l.value}m=m;var n=m[0];m=m[1];g[j[n]]=m.value}for(n=e.axes.entries(),m=Array.isArray(n),l=0,n=m?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(m){if(l>=n.length)break;i=n[l++]}else{l=n.next();if(l.done)break;i=l.value}h=i;e=h[0];i=h[1];g[k[e]]=i}b.sendGamepadState(f,g)}};this.scanGamepads=function(){var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[];for(var c=0;c<a.length;c++)a[c]!=null&&!b.$1.has(a[c].index)?b.addGamepad(a[c]):a[c]!=null&&b.$1.set(a[c].index,a[c])};this.$1=new Map();this.$2=a;this.startListeningToGamepad()}var b=a.prototype;b.clear=function(){"GamepadEvent"in window?(window.removeEventListener("gamepadconnected",this.connectHandler),window.removeEventListener("gamepaddisconnected",this.disconnectHandler)):"WebKitGamepadEvent"in window&&(window.removeEventListener("webkitgamepadconnected",this.connectHandler),window.removeEventListener("webkitgamepaddisconnected",this.disconnectHandler)),this.$3!=null&&c("clearInterval")(this.$3),this.$4!=null&&c("clearInterval")(this.$4)};b.startListeningToGamepad=function(){"GamepadEvent"in window?(this.scanGamepads(),window.addEventListener("gamepadconnected",this.connectHandler),window.addEventListener("gamepaddisconnected",this.disconnectHandler)):"WebKitGamepadEvent"in window?(this.scanGamepads(),window.addEventListener("webkitgamepadconnected",this.connectHandler),window.addEventListener("webkitgamepaddisconnected",this.disconnectHandler)):this.$3=c("setInterval")(this.scanGamepads,h)};b.addGamepad=function(a){this.$1.set(a.index,a);this.$4==null&&(this.$4=c("setInterval")(this.updateStatus,i));(a=d("CloudGamingVirtualGamepadConfig.react").getVirtualGamepad())==null?void 0:a.onNumberOfGamepadChanges(this.$1.size)};b.removeGamepad=function(a){this.$1["delete"](a.index);(a=d("CloudGamingVirtualGamepadConfig.react").getVirtualGamepad())==null?void 0:a.onNumberOfGamepadChanges(this.$1.size)};b.sendGamepadState=function(a,b){a={id:a,keys:b,timestamp:d("EventTimeUtils").tryGetTimestampInMicroSecond(),type:c("CloudGamingActionTypes").GAMEPAD_GREDOS};this.$2({events:[{input:{gamepad:a}}],purpose:"input",type:"SEND_RTC"});this.$2(a)};return a}();g["default"]=a}),98);
__d("CloudGamingGamepadMiddleware",["CloudGamingActionTypes","CloudGamingGamepadGredosController","EventTimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=null;a=function(a){return function(b,e){var f;switch(b.type){case c("CloudGamingActionTypes").GAME_READY:(f=h)==null?void 0:f.clear();a==="GREDOS"&&(h=new(c("CloudGamingGamepadGredosController"))(e));break;case"CLEAR_KEYS_DOWN":f=d("EventTimeUtils").tryGetTimestampInMicroSecond();e({timestamp:f,type:"CLEAR_GAMEPAD_KEYS_DOWN"});break;case"DISCONNECT":(e=h)==null?void 0:e.clear();h=null;break;default:break}return b}};g.runAction=a}),98);
__d("CloudGamingInputFeedbackMiddleware",["CloudGamingActionTypes","CloudGamingInputLatencyTracker","CloudGamingWebRTCEventUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f,g){c("CloudGamingInputLatencyTracker").configure(a,b,e,f,g);return function(a,b,e,f){if(a.type===c("CloudGamingActionTypes").INPUT_FEEDBACK){c("CloudGamingInputLatencyTracker").processInputFeedback(a.rtpTimestamp,a.inputTimestamps);(b=d("CloudGamingWebRTCEventUtils").getCurrentInstanceOfWebRTCEventUtils())==null?void 0:b.onInputsAcked(a.inputTimestamps)}return a}}g.runAction=a}),98);
__d("CloudGamingKeyboardLayoutMiddleware",["CloudGamingActionTypes","CloudGamingKeyboardLayoutAction","CloudGamingLogUtils","KeyboardLayouts","WebStorage"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=null,j=null,k,l=function(a){var b=navigator.language||window.navigator.language;if(b){b=d("KeyboardLayouts").ISOLanguagesLayoutsMap[b];b!=null&&(a(d("CloudGamingKeyboardLayoutAction").sendKeyboardLayout(d("CloudGamingKeyboardLayoutAction").createKeyboardLayoutAction(b))),d("CloudGamingLogUtils").logEvent("SET_KEYBOARD_LAYOUT",h,k,j,i,new Map([["locale",b]])))}};a=function(a,b,e,f,g){return function(m,n){h=b;i=e;j=f;k=g;if(a==="GREDOS")switch(m.type){case c("CloudGamingActionTypes").GAME_READY:var o=c("WebStorage").getLocalStorageForRead();if(o!=null){o=o.getItem(d("CloudGamingKeyboardLayoutAction").KEYBOARD_LAYOUT_STORAGE_KEY)||"";o!==""&&(n(d("CloudGamingKeyboardLayoutAction").sendKeyboardLayout(d("CloudGamingKeyboardLayoutAction").createKeyboardLayoutAction(o))),d("CloudGamingLogUtils").logEvent("SET_KEYBOARD_LAYOUT",h,k,j,i,new Map([["locale",o]])))}else l(n);break;default:break}return m}};g.runAction=a}),98);
__d("CloudGamingLifecycleMiddleware",["CloudGamingActionTypes","CloudGamingConstants","clearTimeout","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=2e3,i=null;a=function(a){c("clearTimeout")(i);return function(b,e){switch(b.type){case c("CloudGamingActionTypes").GAME_READY:a==null?void 0:a.send(d("CloudGamingConstants").CloudGamingMessageTypes.LOADING_PROGRESS,100);break;case"RESOURCE_CLOSED":a==null?void 0:a.send(d("CloudGamingConstants").CloudGamingMessageTypes.QUIT);break;case"SESSION_INIT_SETUP":c("clearTimeout")(i);break;case"SESSION_END_CLEANUP":i=c("setTimeout")(function(){e({code:1,type:c("CloudGamingActionTypes").DISCONNECT})},h);break}return b}};g.runAction=a}),98);
__d("CloudGamingMultiTouchMiddleware",["CloudGamingActionTypes","CloudGamingMultiTouchOverlayAction"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return function(b,e,f){var g=f();switch(b.type){case c("CloudGamingActionTypes").SHOW_MULTI_TOUCH_OVERLAY:if(!a||g.multiTouchOverlay.showMultiTouchOverlay)return{actionType:b.type,gameLifecycle:"",type:"NOOP"};break;case c("CloudGamingActionTypes").HIDE_MULTI_TOUCH_OVERLAY:if(!a||!g.multiTouchOverlay.showMultiTouchOverlay)return{actionType:b.type,gameLifecycle:"",type:"NOOP"};var h=f().mouse,i=[];Object.keys(h).forEach(function(a){if(a==="indexPool")return;i.push({clientX:h[a].lastPosition.x,clientY:h[a].lastPosition.y,identifier:parseInt(a,10)})});g={changedTouches:i,target:null};e(d("CloudGamingMultiTouchOverlayAction").clearMultiTouchInput(g));break;case c("CloudGamingActionTypes").SET_POINTERS_COORDINATES:if(!a)return{actionType:b.type,gameLifecycle:"",type:"NOOP"};break;default:break}return b}};g.runAction=a}),98);
__d("CloudGamingNetworkQualityMiddleware",["CloudGamingActionTypes","CloudGamingClientFbts","CloudGamingLogUtils","CloudGamingWarningAlertAction","CloudGamingWarningConfigConfig","CloudGamingWebRTCStatsCache"],(function(a,b,c,d,e,f,g){"use strict";var h=1e3,i=60,j=null,k=null,l=null,m=null,n="",o=!1,p,q=6e5,r=0,s=null,t=0;a=0;var u=0,v=!1,w=!1;b=function(a,b,d,e,f){return function(g,h){switch(g.type){case c("CloudGamingActionTypes").GAME_READY:x();j=h;k=a;l=b;m=d;n=e;o=f;y();break;case"DISCONNECT":x();break;default:break}return g}};function x(){s!=null&&(window.clearInterval(s),s=null),k=null,l=null,m=null,n="",o=!1,q=6e5,r=0,t=0,a=0,u=0,v=!1,w=!1}function y(){c("CloudGamingWarningConfigConfig").warnings!=null&&s==null&&c("CloudGamingWarningConfigConfig").warnings.forEach(function(a){var b;a.warning_name==="NETWORK_QUALITY"&&((b=a.attributes)==null?void 0:b.triggers)!=null&&(p=a.attributes.triggers,q=(a.attributes.cooldown_sec!=null?a.attributes.cooldown_sec:600)*1e3,s=window.setInterval(function(){z()},h))})}function z(){var b;t++;var e=c("CloudGamingWebRTCStatsCache").getWebRTCStats(),f=!1;a=(b=e==null?void 0:(b=e.videoRecvSsrc)==null?void 0:b.freezeCount_180)!=null?b:-1;b=0;if(t%i===0&&a!==-1&&p!=null){var g=m===String(256281040558)||m===String(2220391788200892)||m===String(351299233827255)&&!o?"wwwVideoFreeze":"mobileVideoFreeze",h=p.find(function(a){return a.name===g});h&&a-u>=h.value&&(f=!0,b=a-u);u=a}h=!1;e=(e=e==null?void 0:(e=e.activeCandidatePair)==null?void 0:e.googRttMs)!=null?e:-1;if(e!==-1&&p!=null){var s=p.find(function(a){return a.name==="rtt"});s&&e>=s.value&&(h=!0)}s=!1;if((f||h)&&j!=null){f=new Map([["videoFreeze",b.toString()],["googRttMs",e.toString()]]);if(window.navigator.connection!=null){f.set("connectionType",(h=window.navigator.connection.type)!=null?h:"blank");f.set("connectionEffectiveType",(b=window.navigator.connection.effectiveType)!=null?b:"blank")}d("CloudGamingLogUtils").logEvent("NETWORK_QUALITY_NOTIFICATION",k,n,m,l,f);!v&&r<Date.now()&&(r=q+Date.now(),w=!0,s=!0,j(d("CloudGamingWarningAlertAction").createWarningMetricAction("NETWORK_QUALITY",0,d("CloudGamingClientFbts").CloudGamingClientFbts.LEARN_MORE_TEXT,A)))}s===!1&&w===!0&&j!=null&&(w=!1,j(d("CloudGamingWarningAlertAction").createCleanWarningMetricAction("NETWORK_QUALITY")))}function A(){j!=null&&j(d("CloudGamingWarningAlertAction").createShowWarningDialogAction("NETWORK_QUALITY",B))}function B(a){v=a,j!=null&&j(d("CloudGamingWarningAlertAction").createHideWarningDialogAction("NETWORK_QUALITY"))}g.runAction=b}),98);
__d("CloudGamingPauseResumeMiddleware",["CloudGamingActionTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e){switch(a.type){case c("CloudGamingActionTypes").PAUSE_GAME:e.sendRTCEvent("lifecycle",{gamePaused:{timestamp:a.timestamp}});break;case c("CloudGamingActionTypes").RESUME_GAME:e.sendRTCEvent("lifecycle",{gameResumed:{timestamp:a.timestamp}});break;default:break}return a}g.runAction=a}),98);
__d("CloudGamingScreenCaptureMiddleware",["CloudGamingActionTypes"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b){return function(a){switch(a.type){case c("CloudGamingActionTypes").GAME_READY:break;case"DISCONNECT":break;default:break}return a}};g.runAction=a}),98);
__d("CloudGamingCheckErrorCode",[],(function(a,b,c,d,e,f){a=Object.freeze({CANNOT_SEE_CLOUD_GAME:"CANNOT_SEE_CLOUD_GAME",APP_NOT_FOUND:"APP_NOT_FOUND",PLATFORM_CHECK_ERROR:"PLATFORM_CHECK_ERROR",CAPACITY_ERROR:"CAPACITY_ERROR",UNKNOWN_ERROR:"UNKNOWN_ERROR",SESSION_LIMIT_REACHED_ERROR:"SESSION_LIMIT_REACHED_ERROR",ACCESS_TOKEN_NOT_FOUND:"ACCESS_TOKEN_NOT_FOUND",ACCESS_TOKEN_NOT_VALID:"ACCESS_TOKEN_NOT_VALID",OAUTH_TOKEN_NOT_VALID:"OAUTH_TOKEN_NOT_VALID",VIEWER_CONTEXT_NOT_FOUND:"VIEWER_CONTEXT_NOT_FOUND",VIEWER_CONTEXT_NOT_AUTHENTICATED:"VIEWER_CONTEXT_NOT_AUTHENTICATED"});f["default"]=a}),66);
__d("CloudGamingConnectionErrorCode",[],(function(a,b,c,d,e,f){a=Object.freeze({GAME_NODE_IN_USE:"GAME_NODE_IN_USE",GAME_NODE_RESERVED:"GAME_NODE_RESERVED",GAME_NODE_TERMINATING:"GAME_NODE_TERMINATING",ACCESS_TOKEN_GEN_FAILED:"ACCESS_TOKEN_GEN_FAILED",KARMA_FILTER_LIMIT_REACHED:"KARMA_FILTER_LIMIT_REACHED",WWW_RECONNECT_XPLAT_NOT_ALLOWED:"WWW_RECONNECT_XPLAT_NOT_ALLOWED",WWW_LB_CONNECTION_FAILED:"WWW_LB_CONNECTION_FAILED",WWW_LB_CONNECTION_CORE_ERROR:"WWW_LB_CONNECTION_CORE_ERROR",WWW_CANARY_GAME_EXCEPTION:"WWW_CANARY_GAME_EXCEPTION",NO_AVAILABLE_REGIONS:"NO_AVAILABLE_REGIONS"});f["default"]=a}),66);
__d("CloudGamingPlatformCheckResult",[],(function(a,b,c,d,e,f){a=Object.freeze({OK:"OK",USE_CHROME_DESKTOP:"CHROME_DESKTOP",USE_FACEBOOK_FOR_ANDROID:"FACEBOOK_FOR_ANDROID",USE_MOBILE_SAFARI:"MOBILE_SAFARI",UPGRADE_MOBILE_OS_VS:"UPGRADE_MOBILE_OS_VS",UPGRADE_ANDROID_WEBVIEW_VS:"UPGRADE_ANDROID_WEBVIEW_VS",UPGRADE_FACEBOOK_FOR_ANDROID:"UPGRADE_FACEBOOK_FOR_ANDROID",UPGRADE_TWILIGHT_FOR_ANDROID:"UPGRADE_TWILIGHT_FOR_ANDROID",UPDATE_BROWSER:"UPDATE_BROWSER",UNSUPPORTED_BROWSER:"UNSUPPORTED_BROWSER",UNSUPPORTED_DEVICE:"UNSUPPORTED_DEVICE",UNSUPPORTED_OS:"UNSUPPORTED_OS"});f["default"]=a}),66);
__d("CloudGamingSilentRetryMiddleware",["CloudGamingActionTypes","CloudGamingCheckErrorCode","CloudGamingConnectionErrorCode","CloudGamingErrorTypes","CloudGamingLoadingEventRecorder","CloudGamingPlatformCheckResult","CloudGamingSilentRetryConfig","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useState,j=0,k="LOADING",l=!1,m=!1,n=!1,o=!1;e=function(a,b,d,e){j=b;k="LOADING";l=a==="GREDOS"&&c("gkx")("8298");m=a==="GREDOS"&&c("gkx")("3928");n=!1;o=!1;return function(a,b,f){switch(a.type){case"CONNECTION_ERROR":var g=f().gameLifecycle.gameLifecycleState;if(!n){n=!0;var h=q(a.payloadResponse,a.code);h!=null&&p(h)&&g!=="Inactivated"&&g!=="Timeout"?d(h,k,j+1):b(babelHelpers["extends"]({},a,{type:c("CloudGamingActionTypes").FATAL_ERROR}))}break;case"REALLOCATE":g=f().gameLifecycle.gameLifecycleState;o||(o=!0,g!=="Inactivated"&&g!=="Timeout"&&d("REALLOCATE",k,j+1,{instance_id:a.instanceID,world_id:a.worldID}));break;case e:j=-1;k="INGAME";break;default:break}return a}};var p=function(a){return(k==="LOADING"&&l||k==="INGAME"&&m)&&c("CloudGamingSilentRetryConfig").retriable_events.has(a)&&j<((a=(a=c("CloudGamingSilentRetryConfig").retriable_events.get(a))==null?void 0:a.max_retries)!=null?a:c("CloudGamingSilentRetryConfig").max_retries_default)},q=function(a,b){var e=babelHelpers["extends"]({},c("CloudGamingConnectionErrorCode"),c("CloudGamingCheckErrorCode"),c("CloudGamingPlatformCheckResult")),f=null;if(a!=null&&b===d("CloudGamingErrorTypes").CloudGamingErrorCode.CREATE_OFFER_FAILURE){var g=["ACCESS_TOKEN_GEN_FAILED","GAME_NODE_IN_USE","GAME_NODE_TERMINATING","GAME_NODE_RESERVED","WWW_RECONNECT_XPLAT_NOT_ALLOWED","WWW_LB_CONNECTION_FAILED","WWW_LB_CONNECTION_CORE_ERROR","WWW_CANARY_GAME_EXCEPTION"];if(g.includes(a))f=a;else if(a.includes(d("CloudGamingErrorTypes").CloudGamingErrorTypes.UNKNOWN))f=d("CloudGamingErrorTypes").CloudGamingErrorTypes.UNKNOWN_CREATE_OFFER_FAILURE;else{g=!0;Object.values(e).forEach(function(b){typeof b==="string"&&a.includes(b)&&(g=!1)});g&&(f=d("CloudGamingErrorTypes").CloudGamingErrorTypes.UNKNOWN_CREATE_OFFER_FAILURE)}}else b===d("CloudGamingErrorTypes").CloudGamingErrorCode.NO_HEARTBEATS_FROM_SERVER?f=d("CloudGamingErrorTypes").CloudGamingErrorTypes.NO_HEARTBEATS_FROM_SERVER:b===d("CloudGamingErrorTypes").CloudGamingErrorCode.PEER_CONNECTION_CLOSED?f=d("CloudGamingErrorTypes").CloudGamingErrorTypes.PEER_CONNECTION_CLOSED:b===d("CloudGamingErrorTypes").CloudGamingErrorCode.HORIZON_TRAVEL_FAILED?f=d("CloudGamingErrorTypes").CloudGamingErrorTypes.HORIZON_TRAVEL_FAILED:f=d("CloudGamingErrorTypes").CloudGamingErrorTypes.UNKNOWN;return f};function a(a,b){var d=i(0),e=d[0],f=d[1];d=i(0);var g=d[0],j=d[1];d=i(0);var k=d[0],l=d[1];d=i(!1);var m=d[0],n=d[1];d=i(null);var o=d[0],p=d[1];d=h(function(d,e,h,i){var m;i===void 0&&(i=null);m=(m=(m=c("CloudGamingSilentRetryConfig").retriable_events.get(d))==null?void 0:m.retry_delay)!=null?m:c("CloudGamingSilentRetryConfig").retry_delay_default;var o={retry_delay:m.toString(),retry_ingame_count:g.toString(),retry_load_count:h.toString(),retry_reason:d,retry_total_count:(k+1).toString(),retry_type:e};f(h);e==="INGAME"&&(c("CloudGamingLoadingEventRecorder").createLoadingEventSummary(),o.retry_ingame_count=(g+1).toString(),a(),j(function(a){return a+1}));n(d==="REALLOCATE");p(i);c("CloudGamingLoadingEventRecorder").clearEventsAfterJSPlayer();b("CLIENT_SILENT_RETRY","lo-pri",o);window.setTimeout(function(){l(function(a){return a+1})},m)},[g,k,b,a]);return{genSilentRetry:d,reallocate:m,silentRetryInGameCount:g,silentRetryLoadCount:e,silentRetryPayload:o,silentRetryTotalCount:k}}g.runAction=e;g.useSilentRetry=a}),98);
__d("CloudGamingUpdateFB4ANotificationMiddleware",["CloudGamingActionTypes","CloudGamingEnvironmentRequirementsConfig","CloudGamingLogUtils","CloudGamingWarningAlertAction","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,d,e,f,g){return function(i,j){switch(i.type){case c("CloudGamingActionTypes").GAME_READY:e===String(350685531728)&&f!=null&&h(j,a,b,d,e,f,g);break;default:break}return i}};function h(a,b,d,e,f,g,h){g=j(g);if(b==="GREDOS"){b=(b=c("CloudGamingEnvironmentRequirementsConfig").latest_fb4a_mayor_app_version_gredos_native_client_blocked)!=null?b:0}else{var k;b=(k=c("CloudGamingEnvironmentRequirementsConfig").latest_fb4a_mayor_app_version_aperture_native_client_blocked)!=null?k:0}g<=b&&i(a,d,e,f,h,g,b)}function i(a,b,e,f,g,h,i){d("CloudGamingLogUtils").logEvent("UPDATE_FB4A_NOTIFICATION",b,g,f,e,new Map([["currentVersion",h.toString()],["latestBlockedVersion",i.toString()]])),a(d("CloudGamingWarningAlertAction").createWarningMetricAction("UPDATE_FB4A",1)),c("setTimeout")(function(){a(d("CloudGamingWarningAlertAction").createCleanWarningMetricAction("UPDATE_FB4A"))},100)}function j(a){a=a.split(".");return parseInt(a[0],10)}g.runAction=a}),98);
__d("CloudGamingUpdateInputControllerMiddleware",["CloudGamingActionTypes"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return function(b,d,e,f){switch(b.type){case c("CloudGamingActionTypes").CONTAINER_RESIZE:f.sendRTCEvent("lifecycle",{updateInputController:{browserOrientation:b.browserOrientation}});a!=="NONE"&&(f.sendRTCEvent("lifecycle",{sdkMessage:{data:'{ "requestType" : "DataToGame", "screenResize": { "height": '+b.viewportHeight+', "width": '+b.viewportWidth+" } }"}}),(b.notchX>0||b.notchY>0||b.notchWidth>0||b.notchHeight>0)&&f.sendRTCEvent("lifecycle",{sdkMessage:{data:'{ "requestType" : "DataToGame", "target": "notch", "x": '+b.notchX+ +', "y": '+b.notchY+', "width": '+b.notchWidth+', "height": '+b.notchHeight+', "scale": '+b.devicePixelRatio+" }"}}));break;default:break}return b}};g.runAction=a}),98);
__d("CloudHorizonMobileTopBar.react",["ix","ApertureConstants","CloudHorizonMobileTopBarQuery.graphql","CometImage.react","HorizonWorldsUtils","RelayHooks","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react"),k=d("react").useMemo,l=i!==void 0?i:i=b("CloudHorizonMobileTopBarQuery.graphql");function a(a){a=a.appID;a=d("RelayHooks").useLazyLoadQuery(l,{appID:a});var b=document.getElementById(d("ApertureConstants").videoComponentID),e=k(function(){return d("HorizonWorldsUtils").supportsMobileFullscreen(b)},[b]);return!e||(a==null?void 0:(e=a.application)==null?void 0:(a=e.gameInfo)==null?void 0:a.allowMobileFullscreen)!==!0?null:j.jsx("div",{className:"x6s0dn4 x78zum5 xds687c x15zctf7 xc9qbxq xixxii4 x13vifvy x1vjfegm",children:j.jsx("button",{className:"x6s0dn4 xjbqb8w x76ihet xwmqs3e x112ta8 xxxdfa6 x1heor9g x1ypdohk x78zum5 xxk0z11 xl56j7k xq8finb x12uuly6 xexx8yu x4uap5 x18d9i69 xkhd6sd xvy4d1p",onClick:function(){b==null?void 0:b.requestFullscreen()},children:j.jsx(c("CometImage.react"),{src:h("1807218")})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("HZCPGameQueueMiddleware",["CloudGamingActionTypes","CloudGamingConstants","clearTimeout","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=1e4,i=null;a=function(a,b,e,f,g){c("clearTimeout")(i);return function(a,e){switch(a.type){case"CONNECTION_ENQUEUED":var f={timestamp:Date.now(),type:c("CloudGamingActionTypes").CREATE_SDP_OFFER,wasEnqueued:!0},j=function(a,g){a.status==="PENDING"?(b==null?void 0:b.send(d("CloudGamingConstants").CloudGamingMessageTypes.QUEUE_POSITION,a.position),i=c("setTimeout")(function(){e({timestamp:Date.now(),type:c("CloudGamingActionTypes").CONNECTION_ENQUEUED})},h)):(g(),b==null?void 0:b.send(d("CloudGamingConstants").CloudGamingMessageTypes.QUEUE_POSITION,0),e(f))},k=function(a){e(babelHelpers["extends"]({},f,{wasEnqueued:!1}))};g.queueCheckMutation!==null&&g.queueCheckMutation(j,k);break;default:break}return a}};g.runAction=a}),98);
__d("CloudGamingContainer.react",["CancelInvalidGameLifecycleActionMiddleware","CloudGaming2DBridgeMiddleware","CloudGaming2DBridgeOverlay.react","CloudGamingAllowServerDebug","CloudGamingApertureLoggingMiddleware","CloudGamingApertureTimeoutMiddleware","CloudGamingApertureUtils","CloudGamingAutomatedInputMiddleware","CloudGamingCloseNotificationMiddleware","CloudGamingConstants","CloudGamingContainer_game.graphql","CloudGamingContentWrapper.react","CloudGamingContextProvider.react","CloudGamingDisableTimeout","CloudGamingGameStateMiddleware","CloudGamingGamepadMiddleware","CloudGamingInputFeedbackMiddleware","CloudGamingKeyboardLayoutMiddleware","CloudGamingLifecycleMiddleware","CloudGamingLocalCursorMiddleware","CloudGamingMultiTouchMiddleware","CloudGamingNetworkQualityMiddleware","CloudGamingPauseResumeMiddleware","CloudGamingRTCMiddleware","CloudGamingScreenCaptureMiddleware","CloudGamingSilentRetryMiddleware","CloudGamingStreamingConfig","CloudGamingUpdateFB4ANotificationMiddleware","CloudGamingUpdateInputControllerMiddleware","CloudHorizonMobileTopBar.react","CometRelay","HZCPGameQueueMiddleware","cr:2844","gkx","react","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react"),j=d("react").useRef,k,l,m=h!==void 0?h:h=b("CloudGamingContainer_game.graphql");function a(a){var e=a.activeWarningTimeout,f=a.appID,g=a.appName,h=a.clientAppID,n=a.clientAppVersion,o=a.cloudBinaryID,p=a.cloudGameID,q=a.enableFullyLockedMouse,r=a.enableLockedMouse,s=a.enableMultiTouchOverlay,t=a.enableWarningAlerts,u=a.entryPoint,v=a.eventBus,w=a.extraActions,x=a.game,y=a.gameOrientation,z=a.genCloudErrorMessage,A=a.genNetworkQualityDialog,B=a.genSilentRetry,C=a.isCometOnMobile,D=a.isInsideIframe,E=a.loadingCompleteEvent,F=a.negotiateSDPMutation,G=a.overrideLoadingState,H=a.provider,I=a.queueCheckMutation,J=a.runId,K=a.sessionID,L=a.showSpinner,M=a.silentRetryInGameCount,N=a.silentRetryLoadCount;a=a.useResourceSize;var O=d("CometRelay").useFragment(m,x),P=j(null),Q=d("CloudGamingStreamingConfig").useH264(d("CloudGamingApertureUtils").isMobileApp(h))?"h264":"default",R="recvonly",S=!0,T=H==="GREDOS";x=Object.values(d("CloudGamingConstants").HorizonAppIDs).includes(f);c("useStable")(function(){c("gkx")("377")&&(k=b("CloudGaming2DBridgeOverlay.react"),l=b("CloudGaming2DBridgeMiddleware"))});var U=c("useStable")(function(){var a;return w.concat([d("CloudGamingLifecycleMiddleware").runAction(v),d("CloudGamingRTCMiddleware").runAction(p,v,f,{h264Required:T,h264SpsPpsInKeyframe:S,negotiateSDPMutation:F,streamMode:Q,videoDirection:R}),d("HZCPGameQueueMiddleware").runAction(p,v,f,K,{queueCheckMutation:I}),d("CloudGamingMultiTouchMiddleware").runAction(s),d("CancelInvalidGameLifecycleActionMiddleware").runAction,d("CloudGamingApertureLoggingMiddleware").runAction(f,K,h,n,p,o,u,M,N,J),d("CloudGamingApertureTimeoutMiddleware").runAction(e,c("CloudGamingDisableTimeout")()||c("CloudGamingAllowServerDebug")()||(O==null?void 0:O.automatedInputConfig)!=null),d("CloudGamingGamepadMiddleware").runAction(H),d("CloudGamingPauseResumeMiddleware").runAction,d("CloudGamingInputFeedbackMiddleware").runAction(f,K,h,n,p),d("CloudGamingLocalCursorMiddleware").runAction(H,f,K,h,p,(a=O==null?void 0:O.sendEscOnFocusLost)!=null?a:!1),d("CloudGamingGameStateMiddleware").runAction(f,K,h,p),d("CloudGamingCloseNotificationMiddleware").runAction(f,K,h,p),d("CloudGamingUpdateInputControllerMiddleware").runAction((a=O==null?void 0:O.dynamicResolution)!=null?a:"NONE"),d("CloudGamingNetworkQualityMiddleware").runAction(f,K,h,p,C),d("CloudGamingScreenCaptureMiddleware").runAction(f,K),d("CloudGamingUpdateFB4ANotificationMiddleware").runAction(H,f,K,h,n,p),d("CloudGamingKeyboardLayoutMiddleware").runAction(H,f,K,h,p),d("CloudGamingSilentRetryMiddleware").runAction(H,N,B,E),d("CloudGamingAutomatedInputMiddleware").runAction(O==null?void 0:O.automatedInputConfig)].concat(l?[l.runAction(p,P)]:[],b("cr:2844")?[b("cr:2844").runAction(f,K,h,o,p)]:[]))});return i.jsxs(c("CloudGamingContextProvider.react"),{extraActions:U,provider:H,children:[k?i.jsx(k,{cloudGameID:p,ref:P}):null,x&&f!=null?i.jsx(c("CloudHorizonMobileTopBar.react"),{appID:f}):null,i.jsx(c("CloudGamingContentWrapper.react"),{appID:f,appName:g,clientAppID:h,clientAppVersion:n,cloudBinaryID:o,cloudGameID:p,dynamicResolution:(U=O==null?void 0:O.dynamicResolution)!=null?U:"NONE",enableCGFullyLockedMouse:q,enableCGLockedMouse:r,enableCGMultiTouchOverlay:s,enableCGWarningAlerts:t,entryPoint:u,eventBus:v,gameOrientation:y,genCloudErrorMessage:z,genNetworkQualityDialog:A,isCometOnMobile:C,isInsideIframe:D,overrideLoadingState:G,provider:H,sessionID:K,showBackground:h!==null&&h!==String(256281040558),showSpinner:L,useResourceSize:a})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CloudGamingErrorMessage.react",["CloudGamingConstants","CloudGamingSessionEventFalcoEvent","CometColumn.react","CometColumnItem.react","TetraButton.react","TetraText.react","fbinstant/releases/samus/index.samus","fbinstant/releases/samus/internalStates.samus","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useEffect;function a(a){var b=a.appID,e=a.cloudGameID,f=a.errorType,g=a.eventBus,j=a.isGameOver,k=a.primaryButtonLabel,l=a.primaryButtonOnClick,m=a.primaryText,n=a.secondaryButtonLabel,o=a.secondaryButtonOnClick,p=a.secondaryText,q=a.sessionID;i(function(){j&&(g==null?void 0:g.send(d("CloudGamingConstants").CloudGamingMessageTypes.END_SESSION),c("promiseDone")(d("fbinstant/releases/samus/index.samus").initializeAsync().then(function(){return d("fbinstant/releases/samus/index.samus").startGameAsync()}).then(function(){return c("fbinstant/releases/samus/internalStates.samus").getMessageSender().send(d("CloudGamingConstants").CloudGamingMessageTypes.END_SESSION)})))},[j,g]);i(function(){c("CloudGamingSessionEventFalcoEvent").log(function(){return{app_id:b,cloud_game_id_override:e,event:"CLIENT_ERROR_SCREEN_DISPLAYED",extra_data:{errorType:f,isGameOver:j?"true":"false",native_player:"false",primaryText:m.toString(),secondaryText:p!=null?p.toString():"",untrusted_client_timestamp_ms:Date.now().toString()},session_id:q,source:"JS"}})},[b,e,f,j,m,p,q]);return h.jsxs("div",{className:"x6s0dn4 xal61yo x78zum5 xdt5ytf xozqiw3 x5yr21d xl56j7k x10l6tqk x17qophe x13vifvy xh8yej3","data-testid":void 0,children:[h.jsx("div",{className:"xwxc41k x1o0k56v x4ge4z1",children:h.jsx(c("TetraText.react"),{align:"center",color:"primaryOnMedia",type:"entityHeaderHeadline1",children:m})}),p!=null?h.jsx("div",{className:"xwxc41k x65xoit",children:h.jsx(c("TetraText.react"),{align:"center",color:"primaryOnMedia",type:"body2",children:p})}):null,h.jsx("div",{className:"x1cnzs8",children:h.jsxs(c("CometColumn.react"),{expanding:!0,spacing:16,children:[k!=null&&l!=null?h.jsx(c("CometColumnItem.react"),{children:h.jsx(c("TetraButton.react"),{label:k,onPress:l,size:"large",type:"primary"})}):null,n!=null&&o!=null?h.jsx(c("CometColumnItem.react"),{children:h.jsx(c("TetraButton.react"),{label:n,onPress:o,size:"large",type:k!=null&&l!=null?"secondary":"primary"})}):null]})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CloudGamingSDKUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return{requestID:b,success:a}}function b(a,b){return{error:a,requestID:b}}f.getFormattedData=a;f.getFormmatedError=b}),66);
__d("ExternalLinkAllowedDomains",["CloudGamingSessionEventFalcoEvent","CometRelay","ConstUriUtils","ExternalLinkAllowedDomainsQuery.graphql","HorizonWebAllowedDomainsConfig","RelayFBEnvironment","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("ExternalLinkAllowedDomainsQuery.graphql"),j=null,k=function(a,b){var c=!1,e=b.toLowerCase();a.forEach(function(a){if(c)return;a=d("ConstUriUtils").getUri(a);a!=null&&a.domain.toLowerCase()===e&&(c=!0)});return c};function a(){j=null}function e(a,b,c,d,e){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){var h=d("ConstUriUtils").getUri(g);if(h==null||!h.isSecure()){m("INVALID_URL",a,b,e,f,g);return"INVALID_URL"}else{if(j==null){var l=d("CometRelay").fetchQuery(c("RelayFBEnvironment"),i,{appID:a}).toPromise();l=(yield l);j=l==null?void 0:(l=l.viewer)==null?void 0:(l=l.instant_game_info_with_support_check)==null?void 0:(l=l.application)==null?void 0:(l=l.instant_game_info)==null?void 0:l.allowed_domains_for_external_links.slice()}if(j!=null&&j.length>0&&k(j,h.domain)){m("OK",a,b,e,f,g);return"OK"}}m("URL_NOT_ALLOWED",a,b,e,f,g);return"URL_NOT_ALLOWED"});return l.apply(this,arguments)}function m(a,b,d,e,f,g){var h=Date.now().toString(),i="EXTERNAL_LINK_URL_ALLOWED";switch(a){case"INVALID_URL":i="EXTERNAL_LINK_INVALID_URL";break;case"URL_NOT_ALLOWED":i="EXTERNAL_LINK_URL_NOT_ALLOWED";break}var j={url:g};c("CloudGamingSessionEventFalcoEvent").log(function(){return{app_id:b,client_app_id:e,cloud_game_id_override:f,event:i,extra_data:j,session_id:d,time_duration_ms:h}})}function f(a,c,e,f,g){var h=d("ConstUriUtils").getUri(g);if(h==null||!h.isSecure()){m("INVALID_URL",a,c,e,f,g);return"INVALID_URL"}else{if(j==null){var i=b("HorizonWebAllowedDomainsConfig");j=i.domains}if(j!=null&&j.length>0&&k(j,h.domain)){m("OK",a,c,e,f,g);return"OK"}}m("URL_NOT_ALLOWED",a,c,e,f,g);return"URL_NOT_ALLOWED"}g.initAllowedDomainChecker=a;g.checkAllowedDomain=e;g.checkHorizonAllowedDomain=f}),98);
__d("CloudSDKMessageHandler",["errorCode","CloudGamingConstants","CloudGamingEndSummary","CloudGamingLoadingEventRecorder","CloudGamingLogUtils","CloudGamingMessageReceiver","CloudGamingSessionEventFalcoEvent","CloudGamingWarningAlertAction","DefaultSDKMessageHandler","ExternalLinkAllowedDomains","QueueDataStructure","fbinstant/releases/samus/index.samus","gkx","setTimeout"],(function(a,b,c,d,e,f,g,h){"use strict";var i={AD_NOT_LOADED:3112001,CLIENT_UNSUPPORTED_OPERATION:2581001,CLIPBOARD_CANNT_READ:3669001,CLIPBOARD_CANNT_WRITE:3669002,CLIPBOARD_NOT_SUPPORTED:3669003,INVALID_OPERATION:2581005,INVALID_PARAM:2581006,INVALID_URL:3447002,NETWORK_FAILURE:2581003,PAYMENTS_NOT_INITIALIZED:2581002,RATE_LIMITED:3447001,URL_NOT_ALLOWED:3447003,USER_INPUT:2581004};h=function(){function a(a,b,e,f,g,h,i,j,k,l,m){i===void 0&&(i=null);j===void 0&&(j=!1);this.adStore={};this.appID=null;this.clientAppID=null;this.sessionID=null;this.cloudGameID=null;this.cloudBinaryID=null;this.dispatch=null;this.useSDKDebugPrint=!1;this.messageReceiver=null;this.clipboardEnabled=!1;this.runId=null;this.stress_test_travel_sdk_gk_result=!1;this.$1=null;this.appID=a;this.clientAppID=b;this.sessionID=e;this.cloudGameID=f;this.cloudBinaryID=g;this.dispatch=h;this.eventBus=i;this.useSDKDebugPrint=j;this.runId=m;this.stress_test_travel_sdk_gk_result=c("gkx")("466");this.$1=l;this.clipboardEnabled=k;d("ExternalLinkAllowedDomains").initAllowedDomainChecker();this.$2();if(this.stress_test_travel_sdk_gk_result||c("gkx")("7162")){a=document.getElementById("sdkData");if(!a){a=document.createElement("div");a.id="sdkData";a.hidden=!0;(b=document.body)==null?void 0:b.appendChild(a);f=document.createElement("div");f.id="sessionId";f.hidden=!0;(g=a)==null?void 0:g.appendChild(f);f.innerText=(h=e)!=null?h:""}}}var b=a.prototype;b.deinit=function(){this.messageReceiver!=null&&(this.messageReceiver.clean(),this.messageReceiver=null)};b.handle=function(a,b,c){this.$3(a);var e=!1;this.$1&&(e=this.$1.handle(a,b,c,this));a.type==="clientData"&&a.data.player2DBridgeInputToggle!=null&&(a.data.player2DBridgeInputToggle==="true"?window.postMessage({type:d("CloudGamingConstants").CloudGamingMessageTypes.ENABLE_2D_BRIDGE},"/"):window.postMessage({type:d("CloudGamingConstants").CloudGamingMessageTypes.DISABLE_2D_BRIDGE},"/"));e||(e=d("DefaultSDKMessageHandler").handleDefaultSDKMessage(a,b,c,this));return e};b.storeAd=function(a,b){var d;this.adStore[b]===void 0?(d=new(c("QueueDataStructure"))(),this.adStore[b]=d):d=this.adStore[b];d.enqueue(a);return a.loadAsync()};b.$3=function(a){var b=this,d=Date.now().toString();c("CloudGamingSessionEventFalcoEvent").log(function(){return{app_id:b.appID,client_app_id:b.clientAppID,cloud_game_id_override:b.cloudGameID,event:"SDK_HANDLER_RECEIVED_MESSAGE",extra_data:{messageRequestId:a.requestID,messageType:a.type},session_id:b.sessionID,source:"JS",time_duration_ms:d}})};b.$2=function(){var a,b=this;(a=this.eventBus)==null?void 0:a.on(d("CloudGamingConstants").CloudGamingMessageTypes.ENABLE_CLIPBOARD,function(){b.clipboardEnabled=!0});(a=this.eventBus)==null?void 0:a.on(d("CloudGamingConstants").CloudGamingMessageTypes.DISABLE_CLIPBOARD,function(){b.clipboardEnabled=!1});this.messageReceiver==null&&(this.messageReceiver=new(c("CloudGamingMessageReceiver"))(function(a){a===d("CloudGamingConstants").CloudGamingMessageTypes.ENABLE_CLIPBOARD?b.clipboardEnabled=!0:a===d("CloudGamingConstants").CloudGamingMessageTypes.DISABLE_CLIPBOARD&&(b.clipboardEnabled=!1)}))};b.buildTravelPayload=function(a,b,c,d,e){return{eventID:a,instanceID:b,navigationStatus:c,snapshotID:d,worldID:e}};b.clipboardShowNotification=function(){this.clipboardEnabled?this.$4("CLIPBOARD_ENABLED"):this.$4("CLIPBOARD_DISABLED")};b.$4=function(a){if(this.dispatch!=null&&typeof this.dispatch==="function"){var b=this.dispatch;b(d("CloudGamingWarningAlertAction").createWarningMetricAction(a,1));c("setTimeout")(function(){b(d("CloudGamingWarningAlertAction").createCleanWarningMetricAction(a))},100)}};b.log_latency_event=function(a,b,e,f){f===void 0&&(f={});var g=Date.now();c("CloudGamingLoadingEventRecorder").recordEvent(a,g);(a==="HORIZON_FIRST_TRAVEL_COMPLETE"||a==="HORIZON_FIRST_PERSONAL_SPACE_COMPLETE"||a==="HORIZON_RECONNECT_WITHOUT_TRAVEL")&&c("CloudGamingEndSummary").markGameReadyToInteract();d("CloudGamingLogUtils").logEventWithBreakdownLatency(a,this.appID,this.cloudGameID!=null?this.cloudGameID:"","sdk",this.sessionID,this.clientAppID,this.cloudBinaryID,b,this.runId,e,f)};b.log_latency_event_once=function(a,b,d,e,f){f===void 0&&(f={});if(c("CloudGamingLoadingEventRecorder").alreadyRecorded(a))return;this.log_latency_event(a,b,d,f);if(e){(a=this.eventBus)==null?void 0:a.send(e)}};b.addTestData=function(a){if(this.stress_test_travel_sdk_gk_result||c("gkx")("7162")){var b=document.getElementById("sdkData"),d="travelData-",e=1,f=d.concat(a.worldID,"-",e.toString()),g=document.getElementById(f);b=j("travelDiv",b);while(g)e++,f=d.concat(a.worldID,"-",e.toString()),g=document.getElementById(f);g=j(f,b);if(g){d=JSON.stringify(a);g.innerText=d}}};return a}();function j(a,b){var c=document.getElementById(a);c||(c=document.createElement("div"),c.id=a,c.hidden=!0,b==null?void 0:b.appendChild(c));return c}function a(a){a=JSON.parse(a);return typeof a==="number"?a.toString():a}function b(a){var b,c=a.code;b=(b=i[c])!=null?b:-1;return{code:b,message:a.message,type:c}}function e(a,b,c){var e=d("fbinstant/releases/samus/index.samus").getSupportedAPIs();if(!a.every(function(a){return e.includes(a)})){b({code:i.CLIENT_UNSUPPORTED_OPERATION,message:"Client does not support this API.",type:"CLIENT_UNSUPPORTED_OPERATION"},c);return!1}return!0}function f(a){return{contextID:a.getContextID(),endTime:a.getEndTime(),payload:a.getPayload(),title:a.getTitle(),tournamentID:a.getID()}}g.APIErrorCode=i;g.CloudSDKMessageHandler=h;g.getStringIDorArray=a;g.getErrorMessage=b;g.validateClientSupport=e;g.getTournamentInfo=f}),98);
__d("CloudGamingSDKDebug",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){switch(c){case"VERBOSE":break;case"DEBUG":break;case"INFO":break;case"WARNING":break;case"ERROR":break;case"FATAL":break;default:break}}f.debugPrint=a}),66);
__d("ExternalLinkRateLimiter",["CloudGamingSessionEventFalcoEvent","GamesServiceOpenExternalUrlConfig"],(function(a,b,c,d,e,f,g){"use strict";var h=0,i=null;function a(a,b,d,e){i||(i=window.setTimeout(function(){h=0,window.clearTimeout(i),i=null},1e3));if(h<c("GamesServiceOpenExternalUrlConfig").rate_limit_per_second){h++;j(!0,a,b,d,e);return!0}j(!1,a,b,d,e);return!1}function j(a,b,d,e,f){var g=Date.now().toString(),h=a?"EXTERNAL_LINK_RATE_LIMITER_OK":"EXTERNAL_LINK_RATE_LIMITER_BLOCK";c("CloudGamingSessionEventFalcoEvent").log(function(){return{app_id:b,client_app_id:e,cloud_game_id_override:f,event:h,session_id:d,time_duration_ms:g}})}g.rateLimiterBump=a}),98);
__d("XCloudGamingKillswitchTestController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/games/cg/killswitch_test/",{})}),null);
__d("DefaultSDKMessageHandler",["AsyncRequest","CloudGamingApertureUtils","CloudGamingCopyPasteConfigConfig","CloudGamingLogUtils","CloudGamingSDKDebug","CloudGamingVirtualKeyboard.react","CloudGamingWindowsGamesSpecialConfigurationConfig","CloudSDKMessageHandler","ExternalLinkAllowedDomains","ExternalLinkRateLimiter","XCloudGamingKillswitchTestController","fbinstant/common/genericDialogs","fbinstant/releases/samus/index.samus","fbinstant/releases/samus/internalStates.samus","fbinstant/releases/samus/logger.samus","gkx","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=3e3;function a(a,b,e,f){var g,i=null,j=!1,k={},l={},m={};switch(a.type){case"getPlayerName":b({name:"Player"},a.requestID);break;case"setPlayerData":i=d("fbinstant/releases/samus/index.samus").player.setDataAsync((g={},g[a.key]=a.value,g)).then(function(){b({},a.requestID)});break;case"getPlayerData":i=d("fbinstant/releases/samus/index.samus").player.getDataAsync([a.key]).then(function(c){b({data:c[a.key]},a.requestID)});break;case"getCatalog":i=d("fbinstant/releases/samus/index.samus").payments.getCatalogAsync().then(function(c){b(c,a.requestID)});break;case"getPurchases":i=d("fbinstant/releases/samus/index.samus").payments.getPurchasesAsync().then(function(c){b(c,a.requestID)});break;case"purchase":i=d("fbinstant/releases/samus/index.samus").payments.purchaseAsync({developerPayload:a.developerPayload,productID:a.productID}).then(function(c){b(c,a.requestID)});break;case"consumePurchase":i=d("fbinstant/releases/samus/index.samus").payments.consumePurchaseAsync(a.purchaseToken).then(function(){b({},a.requestID)});break;case"onReady":var n="payments_onReady";c("fbinstant/releases/samus/logger.samus").logBeginAsync(n);if(!d("CloudSDKMessageHandler").validateClientSupport(["payments.onReady","payments.getCatalogAsync","payments.consumePurchaseAsync","payments.purchaseAsync","payments.getPurchasesAsync"],e,a.requestID)){c("fbinstant/releases/samus/logger.samus").logReject(n,"PAYMENTS_NOT_ALLOWED");break}d("fbinstant/releases/samus/index.samus").payments.onReady(function(){j=!0,b({},a.requestID),c("fbinstant/releases/samus/logger.samus").logResolve(n)});c("setTimeout")(function(){j||(e({code:d("CloudSDKMessageHandler").APIErrorCode.PAYMENTS_NOT_INITIALIZED,message:"onReady failed. Application cannot accept payments.",type:"PAYMENTS_NOT_INITIALIZED"},a.requestID),c("fbinstant/releases/samus/logger.samus").logReject(n,"PAYMENTS_NOT_INITIALIZED"))},h);break;case"getSubscribableCatalog":i=d("fbinstant/releases/samus/index.samus").payments.getSubscribableCatalogAsync().then(function(c){b(c,a.requestID)});break;case"purchaseSubscription":i=d("fbinstant/releases/samus/index.samus").payments.purchaseSubscriptionAsync(a.productID).then(function(c){b(c,a.requestID)});break;case"getSubscriptions":i=d("fbinstant/releases/samus/index.samus").payments.getSubscriptionsAsync().then(function(c){b(c,a.requestID)});break;case"cancelSubscription":i=d("fbinstant/releases/samus/index.samus").payments.cancelSubscriptionAsync(a.purchaseToken).then(function(){b({},a.requestID)});break;case"loadInterstitialAd":if(!d("CloudSDKMessageHandler").validateClientSupport(["getInterstitialAdAsync"],e,a.requestID))break;var o=a.placementID;i=d("fbinstant/releases/samus/index.samus").getInterstitialAdAsync(o).then(function(a){return f.storeAd(a,o)}).then(function(){b({},a.requestID)});break;case"loadRewardedVideo":if(!d("CloudSDKMessageHandler").validateClientSupport(["getRewardedVideoAsync"],e,a.requestID))break;var p=a.placementID;i=d("fbinstant/releases/samus/index.samus").getRewardedVideoAsync(p).then(function(a){return f.storeAd(a,p)}).then(function(){b({},a.requestID)});break;case"showInterstitialAd":case"showRewardedVideo":g=(g=f.adStore[a.placementID])==null?void 0:g.dequeue();if(g==null){e({code:d("CloudSDKMessageHandler").APIErrorCode.AD_NOT_LOADED,message:"Ad instance not loaded",type:"AD_NOT_LOADED"},a.requestID);break}i=g.showAsync().then(function(){b({},a.requestID)});break;case"share":i=d("fbinstant/releases/samus/index.samus").shareAsync({data:a.data,image:a.image,intent:a.intent,pollID:a.pollID,switchContext:a.switchContext,text:a.text}).then(function(){b({},a.requestID)});break;case"getConnectedPlayers":i=d("fbinstant/releases/samus/index.samus").player.getConnectedPlayersAsync().then(function(c){b(c,a.requestID)});break;case"canCreateShortcut":i=d("fbinstant/releases/samus/index.samus").canCreateShortcutAsync().then(function(c){return b({canCreateShortcut:c},a.requestID)});break;case"createShortcut":i=d("fbinstant/releases/samus/index.samus").createShortcutAsync().then(function(){return b({},a.requestID)});break;case"canGetLiveStreams":i=d("fbinstant/releases/samus/index.samus").community.canGetLiveStreamsAsync().then(function(c){return b({result:c},a.requestID)});break;case"canFollowOfficialPage":i=d("fbinstant/releases/samus/index.samus").community.canFollowOfficialPageAsync().then(function(c){return b({result:c},a.requestID)});break;case"canJoinOfficialGroup":i=d("fbinstant/releases/samus/index.samus").community.canJoinOfficialGroupAsync().then(function(c){return b({result:c},a.requestID)});break;case"getLiveStreams":k.maxCount=parseInt(a.maxCount,10);i=d("fbinstant/releases/samus/index.samus").community.getLiveStreamsAsync(k).then(function(c){b({liveStreams:c},a.requestID)});break;case"liveStreamsOverlay":i=d("fbinstant/releases/samus/index.samus").community.liveStreamsOverlayAsync().then(function(){return b({},a.requestID)});break;case"followOfficialPage":i=d("fbinstant/releases/samus/index.samus").community.followOfficialPageAsync().then(function(){return b({},a.requestID)});break;case"joinOfficialGroup":i=d("fbinstant/releases/samus/index.samus").community.joinOfficialGroupAsync().then(function(){return b({},a.requestID)});break;case"contextGetID":b({id:d("fbinstant/releases/samus/index.samus").context.getID()},a.requestID);break;case"contextIsSizeBetween":b({is_size_between:d("fbinstant/releases/samus/index.samus").context.isSizeBetween(a.minSize,a.maxSize)},a.requestID);break;case"contextSwitch":i=d("fbinstant/releases/samus/index.samus").context.switchAsync(a.id).then(function(){return b({id:d("fbinstant/releases/samus/index.samus").context.getID()},a.requestID)});break;case"contextChoose":i=d("fbinstant/releases/samus/index.samus").context.chooseAsync({filters:a.filters!=null?JSON.parse(a.filters):[],maxSize:a.maxSize!=null?parseInt(a.maxSize,10):null,minSize:a.minSize!=null?parseInt(a.minSize,10):null}).then(function(){return b({id:d("fbinstant/releases/samus/index.samus").context.getID()},a.requestID)});break;case"contextCreate":i=a.id!=null?d("fbinstant/releases/samus/index.samus").context.createAsync(d("CloudSDKMessageHandler").getStringIDorArray(a.id)).then(function(){return b({id:d("fbinstant/releases/samus/index.samus").context.getID()},a.requestID)}):d("fbinstant/releases/samus/index.samus").context.createAsync().then(function(){return b({id:d("fbinstant/releases/samus/index.samus").context.getID()},a.requestID)});break;case"contextGetPlayers":i=d("fbinstant/releases/samus/index.samus").context.getPlayersAsync().then(function(c){return b(c,a.requestID)});break;case"postSessionScore":d("fbinstant/releases/samus/index.samus").postSessionScore(parseInt(a.score,10));b({},a.requestID);break;case"postSessionScoreAsync":i=d("fbinstant/releases/samus/index.samus").postSessionScoreAsync(parseInt(a.score,10)).then(function(){b({},a.requestID)});break;case"tournamentCreateAsync":l.initialScore=parseInt(a.initialScore,10);l.config={};a.title!=null&&(l.config.title=a.title);a.image!=null&&(l.config.image=a.image);a.sortOrder!=null&&(l.config.sortOrder=a.sortOrder);a.scoreFormat!=null&&(l.config.scoreFormat=a.scoreFormat);a.data!=null&&(l.data=JSON.parse(a.data));a.endTime!=null&&(l.config.endTime=JSON.parse(a.endTime));i=d("fbinstant/releases/samus/index.samus").tournament.createAsync(l).then(function(c){b(d("CloudSDKMessageHandler").getTournamentInfo(c),a.requestID)});break;case"tournamentShareAsync":m.score=parseInt(a.score,10);a.data!=null&&(m.data=JSON.parse(a.data));i=d("fbinstant/releases/samus/index.samus").tournament.shareAsync(m).then(function(){return b({},a.requestID)});break;case"tournamentPostScoreAsync":i=d("fbinstant/releases/samus/index.samus").tournament.postScoreAsync(parseInt(a.score,10)).then(function(){return b({},a.requestID)});break;case"getTournamentAsync":i=d("fbinstant/releases/samus/index.samus").getTournamentAsync().then(function(c){return b(d("CloudSDKMessageHandler").getTournamentInfo(c),a.requestID)});break;case"update":i=d("fbinstant/releases/samus/index.samus").updateAsync({action:a.action,image:a.image,template:a.template,text:a.text}).then(function(){return b({},a.requestID)});break;case"openGamingServicesDeepLink":c("fbinstant/releases/samus/logger.samus").logAPICall("CloudGSAPI_"+a.deepLink);i=c("fbinstant/releases/samus/internalStates.samus").getMessageSender().showGenericDialogAsync(c("fbinstant/common/genericDialogs")[a.deepLink],{id:a.id,travelID:(g=a.travelID)!=null?g:"0"}).then(function(){b({},a.requestID)});break;case"openGameRequestsDialog":c("fbinstant/releases/samus/logger.samus").logAPICall("CloudGSAPI.Game_Request");i=c("fbinstant/releases/samus/internalStates.samus").getMessageSender().showGenericDialogAsync(c("fbinstant/common/genericDialogs").GAME_REQUESTS,{actionType:a.actionType,app_id:a.appID,cta:a.cta,data:a.data,message:a.message,options:a.options,title:a.title,to:a.to}).then(function(c){b(c,a.requestID)});break;case"softkeyboard":a.action==="open"?d("CloudGamingVirtualKeyboard.react").openKeyboardDelayed(f.clientAppID)?(d("CloudGamingVirtualKeyboard.react").setOpenSoftKeyboardRequested(f.dispatch),d("CloudGamingLogUtils").logEvent("TOUCH_SCREEN_TO_OPEN_KEYBOARD_NOTIFICATION",f.appID,f.cloudGameID!=null?f.cloudGameID:"",f.clientAppID,f.sessionID)):(d("CloudGamingVirtualKeyboard.react").showVirtualKeyboard(!0),d("CloudGamingLogUtils").logEvent("SOFT_KEYBOARD_SHOWN",f.appID,f.cloudGameID!=null?f.cloudGameID:"",f.clientAppID,f.sessionID)):d("CloudGamingVirtualKeyboard.react").showVirtualKeyboard(!1);b({},a.requestID);break;case"openExternalLink":b({},a.requestID);if(!d("ExternalLinkRateLimiter").rateLimiterBump(f.appID,f.sessionID,f.clientAppID,f.cloudGameID)){e({code:d("CloudSDKMessageHandler").APIErrorCode.RATE_LIMITED,message:"The game has exceeded the limit of requests for open external link dialog",type:"RATE_LIMITED"},a.requestID);break}c("promiseDone")(d("ExternalLinkAllowedDomains").checkAllowedDomain(f.appID,f.sessionID,f.clientAppID,f.cloudGameID,a.url).then(function(b){b==="INVALID_URL"?e({code:d("CloudSDKMessageHandler").APIErrorCode.INVALID_URL,message:"Wrong url for open external link dialog",type:"INVALID_URL"},a.requestID):b==="URL_NOT_ALLOWED"?e({code:d("CloudSDKMessageHandler").APIErrorCode.URL_NOT_ALLOWED,message:"Url not allowed for open external link dialog",type:"URL_NOT_ALLOWED"},a.requestID):c("fbinstant/releases/samus/internalStates.samus").getMessageSender().showGenericDialogAsync(c("fbinstant/common/genericDialogs").OPEN_EXTERNAL_LINK,{clientAppID:f.clientAppID,gameID:f.cloudGameID,sessionID:f.sessionID,url:a.url})}));break;case"performHapticFeedbackAsync":i=d("fbinstant/releases/samus/index.samus").performHapticFeedbackAsync().then(function(){b({},a.requestID)});break;case"joinTournament":i=d("fbinstant/releases/samus/index.samus").tournament.joinAsync(a.tournamentId).then(function(){b({},a.requestID)});break;case"getTournaments":i=d("fbinstant/releases/samus/index.samus").tournament.getTournamentsAsync().then(function(c){b(c,a.requestID)});break;case"debugPrint":f.useSDKDebugPrint&&d("CloudGamingSDKDebug").debugPrint(a.msg,a.tag,a.severity,a.timestamp);b({},a.requestID);break;case"setClipboardText":k=c("CloudGamingWindowsGamesSpecialConfigurationConfig").copy_paste_allowed;l=k.indexOf(f.cloudGameID)!==-1;c("gkx")("5550")&&l&&d("CloudGamingApertureUtils").isMobileApp(f.clientAppID)?c("promiseDone")(c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync("setclipboardtextasync",{text:a.text}).then(function(){b({},a.requestID)},function(){e({code:d("CloudSDKMessageHandler").APIErrorCode.CLIPBOARD_CANNT_WRITE,message:"Cann't write text in navigator.clipboard",type:"CLIPBOARD_CANNT_WRITE"},a.requestID)})):l&&navigator&&navigator.clipboard?(f.clipboardShowNotification(),f.clipboardEnabled?c("promiseDone")(navigator.clipboard.writeText(a.text).then(function(){b({},a.requestID)},function(){e({code:d("CloudSDKMessageHandler").APIErrorCode.CLIPBOARD_CANNT_WRITE,message:"Cann't write text in navigator.clipboard",type:"CLIPBOARD_CANNT_WRITE"},a.requestID)})):e({code:d("CloudSDKMessageHandler").APIErrorCode.CLIPBOARD_CANNT_WRITE,message:"Cann't write text in navigator.clipboard",type:"CLIPBOARD_CANNT_WRITE"},a.requestID)):e({code:d("CloudSDKMessageHandler").APIErrorCode.CLIPBOARD_NOT_SUPPORTED,message:"navigator.clipboard API is not supported",type:"CLIPBOARD_NOT_SUPPORTED"},a.requestID);break;case"getClipboardText":m=c("CloudGamingWindowsGamesSpecialConfigurationConfig").copy_paste_allowed;g=m.indexOf(f.cloudGameID)!==-1;c("gkx")("5550")&&g&&d("CloudGamingApertureUtils").isMobileApp(f.clientAppID)?c("promiseDone")(c("fbinstant/releases/samus/internalStates.samus").getMessageSender().sendAsync("getclipboardtextasync",{}).then(function(c){b({text:(c=c==null?void 0:c.text)!=null?c:""},a.requestID)},function(){e({code:d("CloudSDKMessageHandler").APIErrorCode.CLIPBOARD_CANNT_READ,message:"Cann't read text from mobile clipboard",type:"CLIPBOARD_CANNT_READ"},a.requestID)})):g&&navigator&&navigator.clipboard?(f.clipboardShowNotification(),f.clipboardEnabled?c("promiseDone")(navigator.clipboard.readText().then(function(d){d=d;var e=new Blob([d]).size,f=c("CloudGamingCopyPasteConfigConfig")?c("CloudGamingCopyPasteConfigConfig").paste_byte_limitation:65536;while(e>f){var g=e/f;d=d.substring(0,d.length/g);e=new Blob([d]).size}b({text:d},a.requestID)},function(){e({code:d("CloudSDKMessageHandler").APIErrorCode.CLIPBOARD_CANNT_READ,message:"Cann't read text from navigator.clipboard",type:"CLIPBOARD_CANNT_READ"},a.requestID)})):e({code:d("CloudSDKMessageHandler").APIErrorCode.CLIPBOARD_CANNT_READ,message:"Cann't read text from navigator.clipboard",type:"CLIPBOARD_CANNT_READ"},a.requestID)):e({code:d("CloudSDKMessageHandler").APIErrorCode.CLIPBOARD_NOT_SUPPORTED,message:"navigator.clipboard API is not supported",type:"CLIPBOARD_NOT_SUPPORTED"},a.requestID);break;case"openInternalE2ETestDialog":a.testId==="KILLSWITCH"&&new(c("AsyncRequest"))().setURI(c("XCloudGamingKillswitchTestController").getURIBuilder().getURI()).send();i=c("fbinstant/releases/samus/internalStates.samus").getMessageSender().showGenericDialogAsync(c("fbinstant/common/genericDialogs").INTERNAL_E2E_TEST_GENERIC_DIALOG,{id:a.testId,message:a.testMessage,status:a.testStatus}).then(function(){b({},a.requestID)});break;default:e({code:d("CloudSDKMessageHandler").APIErrorCode.CLIENT_UNSUPPORTED_OPERATION,message:"Client does not support this API.",type:"CLIENT_UNSUPPORTED_OPERATION"},a.requestID);return!1}i!==null&&c("promiseDone")(i["catch"](function(b){return e(d("CloudSDKMessageHandler").getErrorMessage(b),a.requestID)}));return!0}g.handleDefaultSDKMessage=a}),98);
__d("CloudGamingSDKInitAction",["CloudGamingActionTypes"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return{type:c("CloudGamingActionTypes").SDK_INITIALIZED}};g.createSDKInitAction=a}),98);
__d("CloudPlayerPaymentsAsync",["CloudGamingConstants","err","isTruthy"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(!c("isTruthy")(b)||b.developerPayload!=null&&typeof b.developerPayload!=="string"||typeof b.productID!=="string")throw c("err")("Payments purchase - Invalid params");return a.sendAsync(d("CloudGamingConstants").CloudAsyncMessageTypes.PAYMENTS_PURCHASE_ASYNC,{config:b}).then(function(a){if(c("isTruthy")(a)&&typeof a.productID==="string"&&typeof a.paymentID==="string"&&typeof a.purchaseTime==="number")return{paymentID:a.paymentID,productID:a.productID,purchaseTime:a.purchaseTime};else throw c("err")("Payments purchase - Result must be of type Purchase")})["catch"](function(a){throw a})}g.cloudPurchaseAsync=a}),98);
__d("HorizonSDKMessageHandler",["CloudGamingActionTypes","CloudGamingApertureUtils","CloudGamingConstants","CloudGamingErrorTypes","CloudGamingLoadingEventRecorder","CloudGamingSDKInitAction","CloudGamingSessionEventFalcoEvent","CloudGamingWindowsGamesSpecialConfigurationConfig","CloudPlayerPaymentsAsync","CloudSDKMessageHandler","ExternalLinkAllowedDomains","ExternalLinkRateLimiter","FBJSON","fbinstant/common/genericDialogs","fbinstant/releases/samus/internalStates.samus","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=!1,this.$2=void 0}var b=a.prototype;b.handle=function(a,b,e,f){var g=null,h=Date.now().toString();c("gkx")("7750")&&c("CloudGamingSessionEventFalcoEvent").log(function(){return{app_id:f.appID,client_app_id:f.clientAppID,cloud_game_id_override:f.cloudGameID,event:"SDK_HANDLER_RECEIVED_MESSAGE_VERBOSE",extra_data:{message:d("FBJSON").stringify(a)},run_id:f.runId,session_id:f.sessionID,source:"JS",time_duration_ms:h}});switch(a.type){case"purchase":if(f.eventBus!=null)g=d("CloudPlayerPaymentsAsync").cloudPurchaseAsync(f.eventBus.asyncMessageSender,{developerPayload:a.developerPayload,productID:a.productID}).then(function(c){b(c,a.requestID)});else return!1;break;case"clientData":var i=a.data;if(i!=null){if(i.editAction!=null){var j;(j=f.eventBus)==null?void 0:j.send(d("CloudGamingConstants").CloudGamingMessageTypes.RECEIVED_EDIT_ACTION_FROM_GAME,i.editAction)}else if(i.updateWorldInfo!=null){j=i.updateWorldInfo.navigationStatus;if(!this.$1&&j!=null)switch(j){case"INITIAL":this.$2===void 0&&(this.$2=i.updateWorldInfo.worldID==null?"HORIZON_FIRST_PERSONAL_SPACE_COMPLETE":"HORIZON_FIRST_TRAVEL_COMPLETE",f.log_latency_event_once(i.updateWorldInfo.worldID==null?"HORIZON_FIRST_PERSONAL_SPACE_START":"HORIZON_FIRST_TRAVEL_START",i.isPrewarm,i.updateWorldInfo.worldID));break;case"COMPLETE":var k=i.updateWorldInfo.worldID==null?"HORIZON_FIRST_PERSONAL_SPACE_COMPLETE":"HORIZON_FIRST_TRAVEL_COMPLETE";if(k===this.$2){var l;f.log_latency_event_once(k,i.isPrewarm,i.updateWorldInfo.worldID);(l=f.eventBus)==null?void 0:l.send(i.updateWorldInfo.worldID==null?d("CloudGamingConstants").CloudGamingMessageTypes.HORIZON_FIRST_PERSONAL_SPACE_COMPLETE:d("CloudGamingConstants").CloudGamingMessageTypes.HORIZON_FIRST_TRAVEL_COMPLETE);f.addTestData(i.updateWorldInfo);this.$1=!0;f.dispatch!=null&&f.dispatch({type:c("CloudGamingActionTypes").HORIZON_LOADING_COMPLETE})}else{this.$2==="HORIZON_FIRST_TRAVEL_COMPLETE"&&k==="HORIZON_FIRST_PERSONAL_SPACE_COMPLETE"?f.log_latency_event_once("HORIZON_FIRST_TRAVEL_FAILED_WITH_FALLBACK",i.isPrewarm):f.log_latency_event_once("HORIZON_FIRST_PERSONAL_SPACE_FAILED_WITH_WRONG_WORLD",i.isPrewarm);f.dispatch!=null&&f.dispatch({code:d("CloudGamingErrorTypes").CloudGamingErrorCode.HORIZON_TRAVEL_FAILED,detail:d("CloudGamingErrorTypes").CloudGamingErrorCode.HORIZON_TRAVEL_FAILED,type:c("CloudGamingActionTypes").CONNECTION_ERROR});return!0}break;default:break}if(i.updateWorldInfo.navigationStatus==="CLOUD_REALLOCATE_ATTEMPT"){l=!1;f.dispatch!=null&&(f.dispatch({instanceID:i.updateWorldInfo.instanceID,type:c("CloudGamingActionTypes").REALLOCATE,worldID:i.updateWorldInfo.worldID}),l=!0);b({willBeReallocated:l},a.requestID)}k=f.buildTravelPayload(i.updateWorldInfo.eventID,i.updateWorldInfo.instanceID,j,i.updateWorldInfo.snapshotID,i.updateWorldInfo.worldID);(l=f.eventBus)==null?void 0:l.send(d("CloudGamingConstants").CloudGamingMessageTypes.GAME_TRAVEL,k)}else if(i.readyToTravel!=null)f.log_latency_event("HORIZON_READY_TO_TRAVEL",i.isPrewarm);else if(i.reconnectInfo!=null)if(i.reconnectInfo.reconnectTravel==="True"){f.log_latency_event("HORIZON_RECONNECT_WITH_TRAVEL",i.isPrewarm);(j=f.eventBus)==null?void 0:j.send(d("CloudGamingConstants").CloudGamingMessageTypes.HORIZON_RECONNECT_WITH_TRAVEL);c("CloudGamingSessionEventFalcoEvent").log(function(){return{app_id:f.appID,client_app_id:f.clientAppID,cloud_game_id_override:f.cloudGameID,event:"HORIZON_RECONNECT_WITH_TRAVEL",extra_data:{reconnectTravel:i.reconnectInfo.reconnectTravel,travelRoute:i.reconnectInfo.travelRoute},run_id:f.runId,session_id:f.sessionID,source:"JS",time_duration_ms:h}})}else{this.$1=!0;f.log_latency_event("HORIZON_RECONNECT_WITHOUT_TRAVEL",i.isPrewarm);(l=f.eventBus)==null?void 0:l.send(d("CloudGamingConstants").CloudGamingMessageTypes.HORIZON_RECONNECT_WITHOUT_TRAVEL);f.dispatch!=null&&f.dispatch({type:c("CloudGamingActionTypes").HORIZON_LOADING_COMPLETE})}else if(i.muteMic!=null)if(i.muteMic==="true"){(k=f.eventBus)==null?void 0:k.send(d("CloudGamingConstants").CloudGamingMessageTypes.DISABLE_MIC)}else{(j=f.eventBus)==null?void 0:j.send(d("CloudGamingConstants").CloudGamingMessageTypes.ENABLE_MIC)}else if(i.openShareSheet!=null)navigator.share&&navigator.share({text:i.openShareSheet.text,title:i.openShareSheet.title,url:i.openShareSheet.url}).then(function(){})["catch"](function(a){});else if(i.socialOverlayActionFromGame!=null){(l=f.eventBus)==null?void 0:l.send(d("CloudGamingConstants").CloudGamingMessageTypes.RECEIVED_SOCIAL_OVERLAY_ACTION_FROM_GAME,i.socialOverlayActionFromGame)}else if(i.cannotTravelError!=null){(k=f.eventBus)==null?void 0:k.send(d("CloudGamingConstants").CloudGamingMessageTypes.CANNOT_TRAVEL_ERROR,i.cannotTravelError)}else if(i.redirectAction!=null){if(i.redirectAction.action==="exit"){(j=f.eventBus)==null?void 0:j.send(d("CloudGamingConstants").CloudGamingMessageTypes.EXIT_ACTION,i.redirectAction)}}else if(i.sdkInitialized!=null){l=i.sdkInitialized.buildVersion;c("CloudGamingLoadingEventRecorder").setCloudAppVersion(l);f.log_latency_event_once("SDK_INIT",i.isPrewarm,"",d("CloudGamingConstants").CloudGamingMessageTypes.SDK_INITIALIZED,i.sdkInitialized);i.sdkInitialized.isPrewarmed=i.isPrewarm;(k=f.eventBus)==null?void 0:k.send(d("CloudGamingConstants").CloudGamingMessageTypes.SDK_INITIALIZED,i.sdkInitialized);f.dispatch!=null&&f.dispatch(d("CloudGamingSDKInitAction").createSDKInitAction())}else if(i.shareWorld!=null){(j=f.eventBus)==null?void 0:j.send(d("CloudGamingConstants").CloudGamingMessageTypes.SHARE_WORLD,i.shareWorld)}b({},a.requestID);break}break;case"setClipboardText":l=c("CloudGamingWindowsGamesSpecialConfigurationConfig").copy_paste_allowed;k=l.indexOf(f.cloudGameID)!==-1;if(c("gkx")("5550")&&k&&d("CloudGamingApertureUtils").isMobileApp(f.clientAppID)){(j=f.eventBus)==null?void 0:j.send(d("CloudGamingConstants").CloudGamingMessageTypes.CLIPBOARD_TEXT,a.text);b({},a.requestID)}else if(k&&navigator&&navigator.clipboard){f.clipboardShowNotification();if(f.clipboardEnabled){(l=f.eventBus)==null?void 0:l.send(d("CloudGamingConstants").CloudGamingMessageTypes.CLIPBOARD_TEXT,a.text);b({},a.requestID)}else e({code:d("CloudSDKMessageHandler").APIErrorCode.CLIPBOARD_CANNT_WRITE,message:"Cann't write text in navigator.clipboard",type:"CLIPBOARD_CANNT_WRITE"},a.requestID)}else e({code:d("CloudSDKMessageHandler").APIErrorCode.CLIPBOARD_NOT_SUPPORTED,message:"navigator.clipboard API is not supported",type:"CLIPBOARD_NOT_SUPPORTED"},a.requestID);break;case"openExternalLink":b({},a.requestID);if(!d("ExternalLinkRateLimiter").rateLimiterBump(f.appID,f.sessionID,f.clientAppID,f.cloudGameID)){e({code:d("CloudSDKMessageHandler").APIErrorCode.RATE_LIMITED,message:"The game has exceeded the limit of requests for open external link dialog",type:"RATE_LIMITED"},a.requestID);break}j=d("ExternalLinkAllowedDomains").checkHorizonAllowedDomain(f.appID,f.sessionID,f.clientAppID,f.cloudGameID,a.url);if(j==="INVALID_URL")e({code:d("CloudSDKMessageHandler").APIErrorCode.INVALID_URL,message:"Wrong url for open external link dialog",type:"INVALID_URL"},a.requestID);else if(j==="URL_NOT_ALLOWED")e({code:d("CloudSDKMessageHandler").APIErrorCode.URL_NOT_ALLOWED,message:"Url not allowed for open external link dialog",type:"URL_NOT_ALLOWED"},a.requestID);else{c("fbinstant/releases/samus/internalStates.samus").getMessageSender().showGenericDialogAsync(c("fbinstant/common/genericDialogs").OPEN_EXTERNAL_LINK,{clientAppID:f.clientAppID,gameID:f.cloudGameID,sessionID:f.sessionID,url:a.url});(k=f.eventBus)==null?void 0:k.send(d("CloudGamingConstants").CloudGamingMessageTypes.EXTERNAL_LINK,a.url)}break;default:return!1}g!==null&&c("promiseDone")(g["catch"](function(b){return e(d("CloudSDKMessageHandler").getErrorMessage(b),a.requestID)}));return!0};return a}();g.HorizonSDKMessageHandler=a}),98);
__d("CloudGamingIGSDKMiddleware",["CloudGamingActionTypes","CloudGamingSDKUtils","CloudSDKMessageHandler","HorizonSDKMessageHandler"],(function(a,b,c,d,e,f,g){"use strict";var h=null;a=function(a,b,e,f,g,j,k,l,m){return function(n,o,p,q){switch(n.type){case c("CloudGamingActionTypes").PEER_CONNECTION_CREATED:h!=null&&h.deinit();p=!1;var r=null;f===String(351299233827255)&&(p=!0,r=new(d("HorizonSDKMessageHandler").HorizonSDKMessageHandler)());h=new(d("CloudSDKMessageHandler").CloudSDKMessageHandler)(b,f,e,g,j,o,k,l,p,r,m);break;case c("CloudGamingActionTypes").CLIENT_RECEIVE_SDK_MESSAGE:a==="APERTURE"&&document.pointerLockElement&&(n.message.type==="openExternalLink"||n.message.type==="purchase"||n.message.type==="openGamingServicesDeepLink"||n.message.type==="showInterstitialAd"||n.message.type==="showRewardedVideo")&&document.exitPointerLock();i(n,o);break;case c("CloudGamingActionTypes").CLIENT_SEND_SDK_MESSAGE:q.sendRTCEvent("lifecycle",{sdkMessage:{data:JSON.stringify(n.data)}});break;case"DISCONNECT":h!=null&&(h.deinit(),h=null);break}return n}};function i(a,b){var d;if(a.type!==c("CloudGamingActionTypes").CLIENT_RECEIVE_SDK_MESSAGE)return;a=a.message;(d=h)==null?void 0:d.handle(a,j(b),l(b))}function j(a){return function(b,c){return k(a,b,c)}}function k(a,b,e){b=d("CloudGamingSDKUtils").getFormattedData(b,e);a({data:b,type:c("CloudGamingActionTypes").CLIENT_SEND_SDK_MESSAGE})}function l(a){return function(b,c){return m(a,b,c)}}function m(a,b,e){b=d("CloudGamingSDKUtils").getFormmatedError(b,e);a({data:b,type:c("CloudGamingActionTypes").CLIENT_SEND_SDK_MESSAGE})}g.runAction=a}),98);
__d("CloudGamingInstantGamesBridgeMiddleware",["CloudGamingActionTypes","fbinstant/releases/samus/index.samus","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return function(b){switch(b.type){case c("CloudGamingActionTypes").GAME_READY:h(a);break;case"RESOURCE_CLOSED":d("fbinstant/releases/samus/index.samus").quit();break}return b}};function h(a){d("fbinstant/releases/samus/index.samus").setLoadingProgress(100),a!==String(350685531728)&&window.parent.postMessage("HideSplashScreen","/"),c("promiseDone")(d("fbinstant/releases/samus/index.samus").startGameAsync(),function(){i()})}function i(){c("promiseDone")(d("fbinstant/releases/samus/index.samus").player.canSubscribeBotAsync(),function(a){if(a)return d("fbinstant/releases/samus/index.samus").player.subscribeBotAsync()})}g.runAction=a}),98);
__d("CloudGamingStandaloneOverride",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){window.fetch("http://localhost:3103",{body:a,cache:"no-cache",credentials:"same-origin",method:"POST",mode:"cors",redirect:"follow",referrerPolicy:"no-referrer"}).then(function(a){return a.json()}).then(function(a){a={debugInfo:"",errorMessage:"",inputChannelLabel:"InputChannel",isEnqueued:!1,lifecycleChannelLabel:"ControlChannel",purposeToLabel:{input:"InputChannel",input_unreliable:"InputUnreliableChannel",lifecycle:"ControlChannel"},screenSize:{height:1280,width:720},sdpAnswer:a.answer.sdp};b(a)})["catch"](function(a){c(a)})}f.standaloneOverride=a}),66);
__d("useCloudGamingNegotiateSDPMutation",["RelayHooks","useCloudGamingNegotiateSDPMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("RelayHooks").useMutation(h!==void 0?h:h=b("useCloudGamingNegotiateSDPMutation.graphql")),c=a[0];a=a[1];return[function(a){var b=a.input,d=a.onCompleted;a=a.onError;return c({onCompleted:d,onError:a,variables:{input:b}})},a]}g["default"]=a}),98);
__d("useCloudPlayerInitialize",["CloudGamingEndSummary","react","useUnloadCallback"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useEffect;function a(a,b,d,e,f,g,j,k){var l=h(function(){c("CloudGamingEndSummary").isSessionLoaded()&&(k("QUIT_GAME","hi-pri"),j("QUIT_GAME","hi-pri"),c("CloudGamingEndSummary").logSummary(a,b,d,e,f,g,"QUIT_GAME"))},[a,b,d,e,f,g,j,k]);i(function(){c("CloudGamingEndSummary").constructor();return function(){return l()}},[l]);c("useUnloadCallback")(l)}g["default"]=a}),98);
__d("CloudGamingStandaloneStarter.react",["CloudGamingActionTypes","CloudGamingClientFbts","CloudGamingContainer.react","CloudGamingErrorManagement","CloudGamingErrorMessage.react","CloudGamingIGSDKMiddleware","CloudGamingInstantGamesBridgeMiddleware","CloudGamingLoadingEventRecorder","CloudGamingPlayerUtils","CloudGamingSilentRetryMiddleware","CloudGamingStandaloneOverride","CloudGamingStandaloneStarter_game.graphql","CloudGamingStreamingConfig","CometPlaceholder.react","CometRelay","CometRouteParams","CometRouteURL","CurrentUser","XCometInstantGamesHubPlayParamsRefineValidator","deferredLoadComponent","fbinstant/releases/samus/index.samus","promiseDone","react","requireDeferredForDisplay","useCloudGamingNegotiateSDPMutation","useCloudLoggers","useCloudPlayerInitialize"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");e=d("react");var j=e.useCallback,k=e.useEffect,l=e.useMemo,m=e.useRef,n=e.useState,o=c("deferredLoadComponent")(c("requireDeferredForDisplay")("CloudGamingNetworkQualityDialog.react").__setRef("CloudGamingStandaloneStarter.react")),p=96,q=1,r=100,s=0;function t(){s=q;var a=window.setInterval(function(){s<100?(d("fbinstant/releases/samus/index.samus").setLoadingProgress(s),s+=q):window.clearInterval(a)},r)}var u=h!==void 0?h:h=b("CloudGamingStandaloneStarter_game.graphql");function a(a){var b,e=a.activeWarningTimeout,f=a.appID,g=a.appName,h=a.canUseFBInstant,q=a.clientAppID,r=a.clientAppVersion,s=a.cloudBinaryID,v=a.cloudGameID,w=a.contextID,x=a.enableFullyLockedMouse,y=a.enableLockedMouse,z=a.enableMultiTouchOverlay,A=a.enableWarningAlerts,B=a.entryPoint,C=a.extraLoggingData,D=a.fixedAspectRatioOnPC,E=a.game,F=a.gameOrientation,G=a.hostOverride,H=a.isCometOnMobile,aa=a.isInsideIframe,I=a.noxcatParams,J=a.otaUpdate,K=a.provider,L=a.sessionID,ba=a.useResourceSize;a=a.useSDKDebugPrint;var M=m(L);E=d("CometRelay").useFragment(u,E);var N=(b=(b=q)!=null?b:c("CurrentUser").getAppID())!=null?b:"0";b=c("useCloudLoggers")(f,v,N,r,M.current,B,s);var O=b.logCGEvent,P=b.logCGSessionEvent;k(function(){L!==M.current&&P("CLIENT_SESSIONID_MISMATCH","lo-pri",{sessionid_mismatch:L})},[P,L]);c("useCloudPlayerInitialize")(f,v,N,r,M.current,B,O,P);b=n(!h);var ca=b[0],da=b[1],Q=j(function(){h&&c("promiseDone")(d("fbinstant/releases/samus/index.samus").initializeAsync(),function(){t(),da(!0)})},[h]);k(function(){Q()},[Q]);b=d("CloudGamingSilentRetryMiddleware").useSilentRetry(Q,O);var ea=b.genSilentRetry,fa=b.silentRetryInGameCount,ga=b.silentRetryLoadCount,R=b.silentRetryTotalCount,S=m(!1);k(function(){if(S.current===!0)return;S.current=!0;c("CloudGamingLoadingEventRecorder").recordEventFromLoggingData(C);O("CLIENT_GAME_START_JS");P("CLIENT_GAME_START_JS")});var T=d("CloudGamingPlayerUtils").getNumGamepadsConnected(),U=d("CloudGamingPlayerUtils").isTouchDevice(H,N);U&&++T;var V=l(function(){return d("CloudGamingPlayerUtils").calculateAspectRatio(D,H,N,F,K)},[N,D,F,H,K]),W=j(function(){var a=(G==null?void 0:G.cluster)!=="C01"&&(G==null?void 0:G.cluster)!=="C02"?null:G==null?void 0:G.cluster,b=d("CloudGamingPlayerUtils").translateSiteTarget(G==null?void 0:G.target);return{cluster:a,host:G==null?void 0:G.host,hostname:G==null?void 0:G.hostname,pop:G==null?void 0:G.pop,port:G==null?void 0:G.port,site_key:G==null?void 0:G.site_key,target:b}},[G]),X=j(function(){var a=(I==null?void 0:I.dynamic)?Object.entries(I.dynamic).map(function(a){var b=a[0];a=a[1];a=babelHelpers["extends"]({},a);a.time_offset=Number(b);return a}):null;return{dynamic_param:a,static_param:I==null?void 0:I["static"]}},[I]);b=c("useCloudGamingNegotiateSDPMutation")();var Y=b[0];b[1];b=(b=d("CometRouteParams").useCometRefinedRouteParams(d("XCometInstantGamesHubPlayParamsRefineValidator").XCometInstantGamesHubPlayParamsRefineValidator))!=null?b:{};var Z=b.cgreferral;b=j(function(a,b,c,e){var g=h?d("fbinstant/releases/samus/index.samus").getEntryPointData():null;a={app_id:f,aspect_ratio:V,cgreferral:Z,cloud_game_id:v,dpi:Math.round(window.devicePixelRatio*p),enable_1080p:!0,enable_compact_input_format:a,error_message_response:!0,force_landscape:!1,gamepad_present:T.toString(),is_js_player:!0,mobile_app_id:N,screen_height:screen.height,screen_width:screen.width,sdp_offer:b,session_id:M.current,silent_retry:R,support_input_feedback:d("CloudGamingStreamingConfig").supportInputFeedback()?2:0,touch_present:U?"1":"0"};r!=null&&(a.mobile_app_version=r);s!=null&&(a.cloud_binary_id=s);w!=null&&(a.context_source_id=w);B!=null&&(a.entry_point=B);G!=null&&(a.host_override=W());g!=null&&(a.payload=JSON.stringify(g));J!=null&&(a.ota_update=J);I!=null&&(a.noxcat=X());if((G==null?void 0:G.hostname)==="standalone"){d("CloudGamingStandaloneOverride").standaloneOverride(b,c,e);return}Y({input:a,onCompleted:function(a){var b;b={debugInfo:"",errorMessage:(b=a.xfb_cloud_gaming_negotiate_sdp)==null?void 0:b.error_message,inputChannelLabel:(b=a.xfb_cloud_gaming_negotiate_sdp)==null?void 0:b.input_channel_label,isEnqueued:(b=(b=a.xfb_cloud_gaming_negotiate_sdp)==null?void 0:b.is_enqueued)!=null?b:!1,lifecycleChannelLabel:(b=a.xfb_cloud_gaming_negotiate_sdp)==null?void 0:b.lifecycle_channel_label,purposeToLabel:(b=a.xfb_cloud_gaming_negotiate_sdp)==null?void 0:b.purpose_to_label,screenSize:{height:(b=(b=a.xfb_cloud_gaming_negotiate_sdp)==null?void 0:(b=b.screen_size)==null?void 0:b.height)!=null?b:0,width:(b=(b=a.xfb_cloud_gaming_negotiate_sdp)==null?void 0:(b=b.screen_size)==null?void 0:b.width)!=null?b:0},sdpAnswer:(a=(b=a.xfb_cloud_gaming_negotiate_sdp)==null?void 0:b.sdp_answer)!=null?a:""};c(b)},onError:function(a){e(a)}})},[h,f,V,Z,v,T,N,R,U,r,s,w,B,G,J,I,Y,W,X]);var $=d("CometRouteURL").useRouteURL(),ha=j(function(a,b,e){b=d("CloudGamingErrorManagement").getErrorInfo(a,b,(a=g)!=null?a:"",q,h,null,e,$,d("CloudGamingClientFbts").CloudGamingClientFbts,f);return i.jsx(c("CloudGamingErrorMessage.react"),{appID:f,cloudGameID:v,errorType:b.errorType,eventBus:null,isGameOver:b.isGameOver,primaryButtonLabel:b.primaryButtonLabel,primaryButtonOnClick:b.primaryButtonOnClick,primaryText:b.primaryText,secondaryButtonLabel:b.secondaryButtonLabel,secondaryButtonOnClick:b.secondaryButtonOnClick,secondaryText:b.secondaryText,sessionID:M.current})},[f,g,h,q,v,$]),ia=j(function(a){return i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(o,{clientAppID:q,closeCallback:a})})},[q]);return ca?i.jsx(c("CloudGamingContainer.react"),{activeWarningTimeout:e,appID:f,appName:g,clientAppID:N,clientAppVersion:r,cloudBinaryID:s,cloudGameID:v,enableFullyLockedMouse:x,enableLockedMouse:y,enableMultiTouchOverlay:z,enableWarningAlerts:A,entryPoint:B,eventBus:null,extraActions:[d("CloudGamingInstantGamesBridgeMiddleware").runAction(N),d("CloudGamingIGSDKMiddleware").runAction(K,f,M.current,N,v,s,null,a)],forceLandscape:!1,game:E,gameOrientation:F,genCloudErrorMessage:ha,genNetworkQualityDialog:ia,genSilentRetry:ea,isCometOnMobile:H,isInsideIframe:aa,loadingCompleteEvent:c("CloudGamingActionTypes").GAME_READY,negotiateSDPMutation:b,provider:K,queueCheckMutation:null,runId:null,sessionID:M.current,showSpinner:!1,silentRetryInGameCount:fa,silentRetryLoadCount:ga,useResourceSize:ba},R.toString()):i.jsx("div",{})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CloudGamingPlayerContainer.react",["CloudGamingEventsFalcoEvent","CloudGamingPlayerContainer_game.graphql","CloudGamingPlayerContext","CloudGamingPlayerMobileContainer.react","CloudGamingStandaloneStarter.react","CometRelay","InstantGamesPlayerUtils","react","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");e=d("react");var j=e.useContext,k=e.useEffect,l=e.useRef,m=h!==void 0?h:h=b("CloudGamingPlayerContainer_game.graphql");function a(a){var b=a.appID,e=a.contextID,f=a.entryPoint,g=a.game,h=a.gameState,n=a.messageSender,o=a.sessionID,p=a.source;a=d("CometRelay").useFragment(m,g);var q=a.instantGameInfo;c("useStable")(function(){var a=function(a){window.self.postMessage({content:a.content,source:p,type:a.type},"/")};window.fbInstantSameOriginOnWeb=!0;window.fbInstantSource=p;n.setSendMessageDelegate(a)});var r=l(!1);k(function(){if(r.current===!0)return;r.current=!0;var a=Date.now().toString();c("CloudGamingEventsFalcoEvent").log(function(){return{app_id:b,cloud_game_id_override:q==null?void 0:q.cloudGameID,entry_point:f,event:"CLIENT_GAME_START_CG_CONTAINER",event_occur_time_ms:a,extra_data:{native_player:"false"},session_id:o,source:"JS"}})},[b,q==null?void 0:q.cloudGameID,f,o]);g=j(c("CloudGamingPlayerContext"));a=g.cloudBinaryID;var s=g.cloudHostOverride;g=g.otaUpdate;if(q==null)return null;var t=q.cloudGameActiveWarningTimeout,u=q.cloudGameConfigFlags,v=q.cloudGameFixedAspectRatioOnPC,w=q.cloudGameID,x=q.gameName,y=q.gameOrientation,z=q.gamesProviderType;if(w==null)return null;x=i.jsx(c("CloudGamingStandaloneStarter.react"),{activeWarningTimeout:(t=t)!=null?t:0,appID:b,appName:(t=x)!=null?t:"",canUseFBInstant:!0,clientAppID:null,clientAppVersion:null,cloudBinaryID:a,cloudGameID:w,contextID:e,enableFullyLockedMouse:(x=u==null?void 0:u.enableFullyLockedMouse)!=null?x:!1,enableLockedMouse:(t=u==null?void 0:u.enableLockedMouse)!=null?t:!1,enableMultiTouchOverlay:(a=u==null?void 0:u.enableMultiTouchOverlay)!=null?a:!1,enableWarningAlerts:(w=u==null?void 0:u.enableWarningAlerts)!=null?w:!1,entryPoint:f,extraLoggingData:null,fixedAspectRatioOnPC:v,game:q,gameOrientation:y,hostOverride:s,isCometOnMobile:d("InstantGamesPlayerUtils").isCometOnMobile(),isInsideIframe:!1,noxcatParams:null,otaUpdate:g,provider:z==="GREDOS"?"GREDOS":"APERTURE",sessionID:o,useResourceSize:!1,useSDKDebugPrint:(e=u==null?void 0:u.useSDKDebugPrint)!=null?e:!1});return d("InstantGamesPlayerUtils").isCometOnMobile()?i.jsx(c("CloudGamingPlayerMobileContainer.react"),{game:q,gameState:h,children:x}):x}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CloudGamingNetworkQualityDialog.react",["CloudGamingClientFbts","CometCardedDialogLegacy.react","TetraButtonGroup.react","TetraListCell.react","TetraText.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useState;function a(a){var b=i(!1),e=b[0],f=b[1];b=function(){a.closeCallback&&a.closeCallback(e)};var g=function(){f(!e)},j=a.clientAppID===String(256281040558)||a.clientAppID===String(2220391788200892);return h.jsx(c("CometCardedDialogLegacy.react"),{size:"small",title:d("CloudGamingClientFbts").CloudGamingClientFbts.NETWORK_QUALITY_TITLE_TEXT,titleHorizontalAlignment:"start",children:h.jsxs("div",{className:"x1qjc9v5 x78zum5 xdt5ytf xyamay9 x1pi30zi x1l90r2v x1swvt13",children:[h.jsxs("ul",{className:"xzsf02u x43c9pm xtaz4m5 x12nagc x1d52u69 x1yc453h",children:[h.jsx("li",{children:h.jsx(c("TetraText.react"),{type:"body3",children:d("CloudGamingClientFbts").CloudGamingClientFbts.NETWORK_QUALITY_TIP_0_TEXT})}),j?null:h.jsx("li",{children:h.jsx(c("TetraText.react"),{type:"body3",children:d("CloudGamingClientFbts").CloudGamingClientFbts.NETWORK_QUALITY_TIP_4_TEXT})}),h.jsxs("li",{children:[" ",h.jsx(c("TetraText.react"),{type:"body3",children:d("CloudGamingClientFbts").CloudGamingClientFbts.NETWORK_QUALITY_TIP_1_TEXT})]}),h.jsxs("li",{children:[" ",h.jsx(c("TetraText.react"),{type:"body3",children:d("CloudGamingClientFbts").CloudGamingClientFbts.NETWORK_QUALITY_TIP_2_TEXT})]}),h.jsxs("li",{children:[" ",h.jsx(c("TetraText.react"),{type:"body3",children:d("CloudGamingClientFbts").CloudGamingClientFbts.NETWORK_QUALITY_TIP_3_TEXT})]})]}),h.jsx("div",{className:"xexx8yu",children:h.jsx(c("TetraListCell.react"),{addOnSecondary:{on:e,onPress:g,type:"checkbox"},contentHorizontalPadding:0,headline:d("CloudGamingClientFbts").CloudGamingClientFbts.DONT_SHOW_AGAIN_TEXT,level:4,onPress:g,paddingHorizontal:0})}),h.jsx("div",{children:h.jsx(c("TetraButtonGroup.react"),{paddingHorizontal:0,paddingTop:0,primary:{label:d("CloudGamingClientFbts").CloudGamingClientFbts.CLOSE_TEXT,onPress:b,reduceEmphasis:!0,type:"primary"}})})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);